const ei={add(t){document.body.classList.remove("no-"+t),document.body.classList.add("has-"+t)},has(t){return document.body.classList.contains("has-"+t)},remove(t){document.body.classList.add("no-"+t),document.body.classList.remove("has-"+t)}};Ya("mousemove","mouse");Ya("touchstart","touch");ei.add("js");function Ya(t,e){const n=()=>{t!=="mousemove"&&ei.add(e),t==="mousemove"&&!ei.has("touch")&&ei.add(e),document.removeEventListener(t,n)};document.addEventListener(t,n)}function Re(){}const Va=t=>t;function yu(t,e){for(const n in e)t[n]=e[n];return t}function Su(t){return t&&typeof t=="object"&&typeof t.then=="function"}function Za(t){return t()}function ms(){return Object.create(null)}function ut(t){t.forEach(Za)}function Ln(t){return typeof t=="function"}function Ye(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Eu(t){return Object.keys(t).length===0}function dt(t,...e){if(t==null)return Re;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Cu(t){let e;return dt(t,n=>e=n)(),e}function Ce(t,e,n){t.$$.on_destroy.push(dt(e,n))}function qt(t,e,n,i){if(t){const o=Ja(t,e,n,i);return t[0](o)}}function Ja(t,e,n,i){return t[1]&&i?yu(n.ctx.slice(),t[1](i(e))):n.ctx}function Wt(t,e,n,i){if(t[2]&&i){const o=t[2](i(n));if(e.dirty===void 0)return o;if(typeof o=="object"){const r=[],s=Math.max(e.dirty.length,o.length);for(let l=0;l<s;l+=1)r[l]=e.dirty[l]|o[l];return r}return e.dirty|o}return e.dirty}function Gt(t,e,n,i,o,r){if(o){const s=Ja(e,n,i,r);t.p(s,o)}}function Kt(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function Ti(t,e,n){return t.set(n),e}function Or(t){return t&&Ln(t.destroy)?t.destroy:Re}const Qa=typeof window<"u";let Au=Qa?()=>window.performance.now():()=>Date.now(),Nr=Qa?t=>requestAnimationFrame(t):Re;const ti=new Set;function Xa(t){ti.forEach(e=>{e.c(t)||(ti.delete(e),e.f())}),ti.size!==0&&Nr(Xa)}function Ou(t){let e;return ti.size===0&&Nr(Xa),{promise:new Promise(n=>{ti.add(e={c:t,f:n})}),abort(){ti.delete(e)}}}function c(t,e){t.appendChild(e)}function xa(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Nu(t){const e=m("style");return Tu(xa(t),e),e.sheet}function Tu(t,e){return c(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode&&t.parentNode.removeChild(t)}function wt(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function m(t){return document.createElement(t)}function Mu(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function O(t){return document.createTextNode(t)}function S(){return O(" ")}function ct(){return O("")}function Te(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function st(t){return function(e){return e.preventDefault(),t.call(this,e)}}function k(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Ru(t){return Array.from(t.childNodes)}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ct(t,e){t.value=e??""}function Pt(t,e,n,i){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}let xi;function Lu(){if(xi===void 0){xi=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{xi=!0}}return xi}function Iu(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=m("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=Lu();let r;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=Te(window,"message",s=>{s.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{r=Te(i.contentWindow,"resize",e)}),c(t,i),()=>{(o||r&&i.contentWindow)&&r(),$(i)}}function Qe(t,e,n){t.classList[n?"add":"remove"](e)}function ef(t,e,{bubbles:n=!1,cancelable:i=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,i,e),o}class Tt{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Mu(n.nodeName):this.e=m(n.nodeName),this.t=n,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)w(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const uo=new Map;let co=0;function Pu(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Du(t,e){const n={stylesheet:Nu(e),rules:{}};return uo.set(t,n),n}function gs(t,e,n,i,o,r,s,l=0){const a=16.666/i;let f=`{
`;for(let E=0;E<=1;E+=a){const b=e+(n-e)*r(E);f+=E*100+`%{${s(b,1-b)}}
`}const u=f+`100% {${s(n,1-n)}}
}`,d=`__svelte_${Pu(u)}_${l}`,p=xa(t),{stylesheet:h,rules:_}=uo.get(p)||Du(p,t);_[d]||(_[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${d} ${i}ms linear ${o}ms 1 both`,co+=1,d}function Uu(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),o=n.length-i.length;o&&(t.style.animation=i.join(", "),co-=o,co||Bu())}function Bu(){Nr(()=>{co||(uo.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&$(e)}),uo.clear())})}let Mi;function Qt(t){Mi=t}function fi(){if(!Mi)throw new Error("Function called outside component initialization");return Mi}function Ft(t){fi().$$.on_mount.push(t)}function Tr(t){fi().$$.on_destroy.push(t)}function Fu(){const t=fi();return(e,n,{cancelable:i=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=ef(e,n,{cancelable:i});return o.slice().forEach(s=>{s.call(t,r)}),!r.defaultPrevented}return!0}}function qo(t,e){return fi().$$.context.set(t,e),e}function ht(t){return fi().$$.context.get(t)}function In(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(i=>i.call(this,e))}const Ei=[],be=[],lo=[],sr=[],tf=Promise.resolve();let lr=!1;function nf(){lr||(lr=!0,tf.then(Mr))}function Ri(){return nf(),tf}function at(t){lo.push(t)}function ke(t){sr.push(t)}const Wo=new Set;let eo=0;function Mr(){const t=Mi;do{for(;eo<Ei.length;){const e=Ei[eo];eo++,Qt(e),ju(e.$$)}for(Qt(null),Ei.length=0,eo=0;be.length;)be.pop()();for(let e=0;e<lo.length;e+=1){const n=lo[e];Wo.has(n)||(Wo.add(n),n())}lo.length=0}while(Ei.length);for(;sr.length;)sr.pop()();lr=!1,Wo.clear(),Qt(t)}function ju(t){if(t.fragment!==null){t.update(),ut(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(at)}}let wi;function zu(){return wi||(wi=Promise.resolve(),wi.then(()=>{wi=null})),wi}function Go(t,e,n){t.dispatchEvent(ef(`${e?"intro":"outro"}${n}`))}const ao=new Set;let Xt;function Oe(){Xt={r:0,c:[],p:Xt}}function Ne(){Xt.r||ut(Xt.c),Xt=Xt.p}function v(t,e){t&&t.i&&(ao.delete(t),t.i(e))}function y(t,e,n,i){if(t&&t.o){if(ao.has(t))return;ao.add(t),Xt.c.push(()=>{ao.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Hu={duration:0};function tt(t,e,n,i){const o={direction:"both"};let r=e(t,n,o),s=i?0:1,l=null,a=null,f=null;function u(){f&&Uu(t,f)}function d(h,_){const g=h.b-s;return _*=Math.abs(g),{a:s,b:h.b,d:g,duration:_,start:h.start,end:h.start+_,group:h.group}}function p(h){const{delay:_=0,duration:g=300,easing:E=Va,tick:b=Re,css:C}=r||Hu,M={start:Au()+_,b:h};h||(M.group=Xt,Xt.r+=1),l||a?a=M:(C&&(u(),f=gs(t,s,h,g,_,E,C)),h&&b(0,1),l=d(M,g),at(()=>Go(t,h,"start")),Ou(D=>{if(a&&D>a.start&&(l=d(a,g),a=null,Go(t,l.b,"start"),C&&(u(),f=gs(t,s,l.b,l.duration,0,E,r.css))),l){if(D>=l.end)b(s=l.b,1-s),Go(t,l.b,"end"),a||(l.b?u():--l.group.r||ut(l.group.c)),l=null;else if(D>=l.start){const L=D-l.start;s=l.a+l.d*E(L/l.duration),b(s,1-s)}}return!!(l||a)}))}return{run(h){Ln(r)?zu().then(()=>{r=r(o),p(h)}):p(h)},end(){u(),l=a=null}}}function ar(t,e){const n=e.token={};function i(o,r,s,l){if(e.token!==n)return;e.resolved=l;let a=e.ctx;s!==void 0&&(a=a.slice(),a[s]=l);const f=o&&(e.current=o)(a);let u=!1;e.block&&(e.blocks?e.blocks.forEach((d,p)=>{p!==r&&d&&(Oe(),y(d,1,1,()=>{e.blocks[p]===d&&(e.blocks[p]=null)}),Ne())}):e.block.d(1),f.c(),v(f,1),f.m(e.mount(),e.anchor),u=!0),e.block=f,e.blocks&&(e.blocks[r]=f),u&&Mr()}if(Su(t)){const o=fi();if(t.then(r=>{Qt(o),i(e.then,1,e.value,r),Qt(null)},r=>{if(Qt(o),i(e.catch,2,e.error,r),Qt(null),!e.hasCatch)throw r}),e.current!==e.pending)return i(e.pending,0),!0}else{if(e.current!==e.then)return i(e.then,1,e.value,t),!0;e.resolved=t}}function of(t,e,n){const i=e.slice(),{resolved:o}=t;t.current===t.then&&(i[t.value]=o),t.current===t.catch&&(i[t.error]=o),t.block.p(i,n)}const qu=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function ye(t,e,n,i){const o=t.$$.props[e];o!==void 0&&(t.$$.bound[o]=n,i===void 0&&n(t.$$.ctx[o]))}function q(t){t&&t.c()}function z(t,e,n,i){const{fragment:o,after_update:r}=t.$$;o&&o.m(e,n),i||at(()=>{const s=t.$$.on_mount.map(Za).filter(Ln);t.$$.on_destroy?t.$$.on_destroy.push(...s):ut(s),t.$$.on_mount=[]}),r.forEach(at)}function H(t,e){const n=t.$$;n.fragment!==null&&(ut(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Wu(t,e){t.$$.dirty[0]===-1&&(Ei.push(t),nf(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ze(t,e,n,i,o,r,s,l=[-1]){const a=Mi;Qt(t);const f=t.$$={fragment:null,ctx:[],props:r,update:Re,not_equal:o,bound:ms(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:ms(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};s&&s(f.root);let u=!1;if(f.ctx=n?n(t,e.props||{},(d,p,...h)=>{const _=h.length?h[0]:p;return f.ctx&&o(f.ctx[d],f.ctx[d]=_)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](_),u&&Wu(t,d)),p}):[],f.update(),u=!0,ut(f.before_update),f.fragment=i?i(f.ctx):!1,e.target){if(e.hydrate){const d=Ru(e.target);f.fragment&&f.fragment.l(d),d.forEach($)}else f.fragment&&f.fragment.c();e.intro&&v(t.$$.fragment),z(t,e.target,e.anchor,e.customElement),Mr()}Qt(a)}class Je{$destroy(){H(this,1),this.$destroy=Re}$on(e,n){if(!Ln(n))return Re;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(e){this.$$set&&!Eu(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function Gu(t){let e,n,i,o,r,s;return{c(){e=m("i"),k(e,"class",n=t[4](t[3],t[2],t[0])),k(e,"style",i=vs(t[3],t[1])),e.hidden=o=!t[3]},m(l,a){w(l,e,a),r||(s=Te(e,"click",t[6]),r=!0)},p(l,[a]){a&13&&n!==(n=l[4](l[3],l[2],l[0]))&&k(e,"class",n),a&10&&i!==(i=vs(l[3],l[1]))&&k(e,"style",i),a&8&&o!==(o=!l[3])&&(e.hidden=o)},i:Re,o:Re,d(l){l&&$(e),r=!1,s()}}}const Ku={brand:"fab",regular:"far",solid:"fas"},fr={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},bs=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"];function vs(t,e){const n=[];let i="color:";const o=t.match(/^pick:(.+)$/);return o&&fr[o[1]]&&(i="background-color:",n.push('background-image:url("'+fr[o[1]]+'")')),e&&n.push(i+e),n.join(";")}function Yu(t){let e=0;for(let n=0;n<t.length;n++)e=t.charCodeAt(n)+((e<<5)-e),e=e&e;return e=Math.abs(e),bs[e%bs.length]}function Vu(t,e,n){let{class:i=""}=e,{animation:o=""}=e,{color:r=""}=e,{family:s=""}=e,{name:l}=e;function a(u,d,p){const h=[],_=u.match(/^pick:(.+)$/);if(_){if(_[1]==="Convos")return"fas fa-info-circle";if(fr[_[1]])return"fas fa-contributor for-"+_[1].toLowerCase();h.push(Yu(_[1]))}else h.push(Ku[d]||"fas"),h.push("fa-"+u);return p&&h.push(p.split(" ").map(g=>"fa-"+g)),i&&h.push(i.split(" ")),h.join(" ")}function f(u){In.call(this,t,u)}return t.$$set=u=>{"class"in u&&n(5,i=u.class),"animation"in u&&n(0,o=u.animation),"color"in u&&n(1,r=u.color),"family"in u&&n(2,s=u.family),"name"in u&&n(3,l=u.name)},[o,r,s,l,a,i,f]}class $e extends Je{constructor(e){super(),Ze(this,e,Vu,Gu,Ye,{class:5,animation:0,color:1,family:2,name:3})}}const Wn=[];function Zu(t,e){return{subscribe:rf(t,e).subscribe}}function rf(t,e=Re){let n;const i=new Set;function o(l){if(Ye(t,l)&&(t=l,n)){const a=!Wn.length;for(const f of i)f[1](),Wn.push(f,t);if(a){for(let f=0;f<Wn.length;f+=2)Wn[f][0](Wn[f+1]);Wn.length=0}}}function r(l){o(l(t))}function s(l,a=Re){const f=[l,a];return i.add(f),i.size===1&&(n=e(o)||Re),l(t),()=>{i.delete(f),i.size===0&&(n(),n=null)}}return{set:o,update:r,subscribe:s}}function sf(t,e,n){const i=!Array.isArray(t),o=i?[t]:t,r=e.length<2;return Zu(n,s=>{let l=!1;const a=[];let f=0,u=Re;const d=()=>{if(f)return;u();const h=e(i?a[0]:a,s);r?s(h):u=Ln(h)?h:Re},p=o.map((h,_)=>dt(h,g=>{a[_]=g,f&=~(1<<_),l&&d()},()=>{f|=1<<_}));return l=!0,d(),function(){ut(p),u()}})}function yo(t,e){const n=rf(t);n.get=()=>Cu(n);for(let i in e)Object.hasOwn(e,i)&&(n[i]=e[i].bind(n));return n}const $t=yo("",{toggle(t){t.preventDefault();const e=t.target.closest("a"),n=e&&e.href.replace(/.*#/,"");this.set(this.get()===n?"":n)}}),Mn=yo({hasLeftColumn:!1,hasRightColumn:!1,isSingleColumn:!0,width:0},{setWidth(t){const e=t>=800,n=t>=1200,i=!(e||n);this.set({hasLeftColumn:e,hasRightColumn:n,isSingleColumn:i,width:t})}});function $s(t){let e,n,i,o,r,s=t[2].notifications+"",l,a,f,u,d;return n=new $e({props:{name:"bars"}}),i=new $e({props:{name:"times"}}),{c(){e=m("a"),q(n.$$.fragment),q(i.$$.fragment),o=S(),r=m("small"),l=O(s),k(r,"class","badge is-important"),r.hidden=a=!t[2].notifications,k(e,"href","#nav"),k(e,"class","btn-hallow can-toggle"),Qe(e,"is-active",t[1]==="nav")},m(p,h){w(p,e,h),z(n,e,null),z(i,e,null),c(e,o),c(e,r),c(r,l),f=!0,u||(d=Te(e,"click",$t.toggle),u=!0)},p(p,h){(!f||h&4)&&s!==(s=p[2].notifications+"")&&T(l,s),(!f||h&4&&a!==(a=!p[2].notifications))&&(r.hidden=a),(!f||h&2)&&Qe(e,"is-active",p[1]==="nav")},i(p){f||(v(n.$$.fragment,p),v(i.$$.fragment,p),f=!0)},o(p){y(n.$$.fragment,p),y(i.$$.fragment,p),f=!1},d(p){p&&$(e),H(n),H(i),u=!1,d()}}}function Ju(t){let e,n,i;const o=t[5].default,r=qt(o,t,t[4],null);let s=!t[0].hasLeftColumn&&$s(t);return{c(){e=m("header"),r&&r.c(),n=S(),s&&s.c(),k(e,"class","chat-header")},m(l,a){w(l,e,a),r&&r.m(e,null),c(e,n),s&&s.m(e,null),i=!0},p(l,[a]){r&&r.p&&(!i||a&16)&&Gt(r,o,l,l[4],i?Wt(o,l[4],a,null):Kt(l[4]),null),l[0].hasLeftColumn?s&&(Oe(),y(s,1,1,()=>{s=null}),Ne()):s?(s.p(l,a),a&1&&v(s,1)):(s=$s(l),s.c(),v(s,1),s.m(e,null))},i(l){i||(v(r,l),v(s),i=!0)},o(l){y(r,l),y(s),i=!1},d(l){l&&$(e),r&&r.d(l),s&&s.d()}}}function Qu(t,e,n){let i,o,r;Ce(t,Mn,f=>n(0,i=f)),Ce(t,$t,f=>n(1,o=f));let{$$slots:s={},$$scope:l}=e;const a=ht("user").notifications;return Ce(t,a,f=>n(2,r=f)),t.$$set=f=>{"$$scope"in f&&n(4,l=f.$$scope)},[i,o,r,a,l,s]}class Ut extends Je{constructor(e){super(),Ze(this,e,Qu,Ju,Ye,{})}}/*! js-cookie v3.0.1 | MIT */function to(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}var Xu={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function ur(t,e){function n(o,r,s){if(!(typeof document>"u")){s=to({},e,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),o=encodeURIComponent(o).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var l="";for(var a in s)s[a]&&(l+="; "+a,s[a]!==!0&&(l+="="+s[a].split(";")[0]));return document.cookie=o+"="+t.write(r,o)+l}}function i(o){if(!(typeof document>"u"||arguments.length&&!o)){for(var r=document.cookie?document.cookie.split("; "):[],s={},l=0;l<r.length;l++){var a=r[l].split("="),f=a.slice(1).join("=");try{var u=decodeURIComponent(a[0]);if(s[u]=t.read(f,u),o===u)break}catch{}}return o?s[o]:s}}return Object.create({set:n,get:i,remove:function(o,r){n(o,"",to({},r,{expires:-1}))},withAttributes:function(o){return ur(this.converter,to({},this.attributes,o))},withConverter:function(o){return ur(to({},this.converter,o),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(t)}})}var ws=ur(Xu,{path:"/"});const xu=typeof process>"u"||typeof process.env!="object"?"info":{}.LOG_LEVEL||"quiet",Ko=["trace","debug","info","warn","error","quiet"],cr={},Gn={},ks=()=>{};cr.root=new lf({name:"root"});function ec(t){return Gn.root===void 0&&(Object.entries(JSON.parse(localStorage.getItem("logger:nameToLevel")||"{}")).forEach(([e,n])=>{Gn[e]=n||"debug"}),((location.href.match(/_debug=([a-z,:]+)/)||[]).pop()||"").split(",").forEach(e=>{const[n,i]=e.split(":");Gn[n]=i||"debug"}),localStorage.setItem("logger:nameToLevel",JSON.stringify(Gn))),Gn[t]||Gn.root||xu}function lf({name:t}){this.name=t,this.isLevel=e=>{const n=Ko.indexOf(e)||e||e.length;return this.numLevel>=n},this.setLevel=e=>{let n=Ko.indexOf(e);return n===-1&&(n=2),this.numLevel=n,Ko.forEach((i,o)=>{const r=i==="trace"||i==="debug"?"log":i,s=!console||o<n?ks:console[r]||console.log||ks;this[i]=s.bind(this,"["+this.name+"]")}),this},this.setLevel(ec(t))}function ui(t="root"){return cr[t]||(cr[t]=new lf({name:t}))}const tc=ui("util"),nc=.618033988749,pr=1e3,dr=pr*1e3,ys=dr*1e3;function hr(t,e){if(e&&!e.match(/^[+-]\w/)&&(e="+"+e),!e)return{};const n={};let i=!0;for(const o of e)o==="+"?i=!0:o==="-"?i=!1:n[t[o]||o]=i;return n}function _r(t,e){for(;t;){if(e.tagName?t===e:t.matches&&t.matches(e))return t;t=t.parentNode}return null}function af(t){const n=ff("textarea",{style:{opacity:0,position:"absolute"},value:t.textContent||t.value});document.body.appendChild(n);try{n.focus(),n.select(),document.execCommand("copy")}catch(i){n.value="",tc.error("copyToClipboard() failed:",i)}return document.body.removeChild(n),n.value}function ff(t,e){const n=document.createElement(t);for(let i in e)Object.hasOwn(e,i)&&(n[i]=e[i]);return n}function ic(t,e,n){let i=t&&t.querySelector("."+e.split(" ").join("."));return i||(i=document.createElement("div"),i.className=e,t&&t.appendChild(i),n&&n(i),i)}function Rr(t,e="message"){const n=t.errors||t;return n&&n[0]?n[0][e]||"Unknown error.":""}function oc(t,e=document){const n=[...t.childNodes],i=[];let o=0;for(;o<n.length;)n[o].nodeType===Node.ELEMENT_NODE?(i.push([o,n[o]]),o++):n.splice(o,1);if(!n.length)return[];const r=e.scrollTop;for(;i.length>1;){const f=Math.floor(i.length/2);i[f][1].offsetTop<=r?i.splice(0,f):i.splice(f)}i.length||i.push([0,n[0]]);const s=e.offsetHeight,l=i[0][0];let a=l;for(;a<n.length&&!(n[a].offsetTop>r+s);)a++;return n.slice(l,a).filter(f=>!f.getAttribute("aria-hidden"))}function rc(t=0,e=.5,n=.95){var i=Math.floor(t*6),o=t*6-i,r=n*(1-e),s=n*(1-o*e),l=n*(1-(1-o)*e),a=255,f=255,u=255;switch(i){case 0:a=n,f=l,u=r;break;case 1:a=s,f=n,u=r;break;case 2:a=r,f=n,u=l;break;case 3:a=r,f=s,u=n;break;case 4:a=l,f=r,u=n;break;case 5:a=n,f=r,u=s;break}return[Math.floor(a*255),Math.floor(f*255),Math.floor(u*255)]}function Qn(t,e){const n=t<pr?[t,""]:t<dr?[t/pr,"k"]:t<ys?[t/dr,"M"]:[t/ys,"G"],i=String(Math.round(n[0]*10)/10);return(i.match(/\./)?i:i+".0")+n[1]+(e||"")}const Be={array:t=>Array.isArray(t),defined:t=>!Be.undefined(t),false:t=>!Be.true(t),function:t=>typeof t=="function",number:t=>typeof t=="number",object:t=>typeof t=="object"&&t!==null,string:t=>typeof t=="string",stringable:t=>typeof t=="number"||typeof t=="string",true:t=>Be.string(t)?!!t.length&&t!=="0":!!t,undefined:t=>t===null||typeof t>"u"};function sc(t){const e=document,n=t.replace(/\W/g,"_");if(e.getElementById(n))return;const i=e.createElement("script");return[i.id,i.src]=[n,t],e.getElementsByTagName("head")[0].appendChild(i),new Promise((o,r)=>{i.addEventListener("error",r),i.addEventListener("load",o)})}function At(t,e="Â "){return t.replace(/\s/g,e)}function bt(t,e,n){const i=e===":children"?t.children:t.querySelectorAll(e);if(!n)return[].slice.call(i,0);if(Array.isArray(n))return[].forEach.call(i,r=>r.addEventListener(n[0],n[1]));const o=[];for(let r=0;r<i.length;r++)o.push(n(i[r],r));return o}function lc(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Ge(t,e){const n=i=>document.querySelector('meta[name="convos:'+i+'"]')||document.querySelector('meta[name="'+i+'"]');if(arguments.length===1){t==="organization_name"&&(t="contactorganization"),t==="organization_url"&&(t="contactnetworkaddress");const i=n(t);if(!i)throw'Cannot get settings for "'+t+'".';const o={no:!1,yes:!0};return t==="contact"?atob(i.content||""):Object.hasOwn(o,i.content)?o[i.content]:i.content}t==="organization_name"&&(t="contactorganization"),t==="organization_url"&&(t="contactnetworkaddress"),t==="contact"&&(e=btoa(e)),typeof e=="boolean"&&(e=e?"yes":"no"),n(t).content=e}function ac(t,e){t&&t.preventDefault&&t.preventDefault();const n=ic(document.body,"fullscreen",i=>{i.addEventListener("click",o=>o.target===i&&i.hide()),i.hide=()=>n.classList.add("hidden")});return lc(n),e?(n.classList.remove("hidden"),n.appendChild(e.cloneNode(!0)),n):n.hide()}function Lr(t){return(Be.string(t)?t:"").split(/[.,\s]+/).map(e=>e.trim()).filter(e=>e.length)}function po(t,e=100){if(t.length===0)return"#000";let n=0;for(let i=0;i<t.length;i++)n=t.charCodeAt(i)+((n<<5)-n),n=n&n;return n=Math.abs(n%e/e),"#"+rc((n+nc)%1,.4,.7).map(i=>i.toString(16)).join("")}function Ir(t,e){return Be.array(e)?e.find(n=>Ir(t,n))||!1:t&&t.tagName&&t.tagName.toLowerCase()===e||!1}function fc(t,e=!0){return new Promise((n,i)=>{setTimeout(()=>{typeof e=="function"?n(e()):typeof e=="string"?i(e):n(e)},t)})}function So(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}const Yo=ui("reactive");class Rt{constructor(){this.cookieName="convos_js",this._on={},this._props={}}emit(e,...n){const i=this._on[e];for(let o=0;o<(i||[]).length;o++)i[o][0](...n);return this}on(e,n){const i=n?null:new Promise(l=>{n=l}),o=this._on[e]||(this._on[e]=[]),r=[n];o.push(r);const s=()=>{const l=o.indexOf(r);l!==-1&&o.splice(l,1)};return i?i.finally(s):s}prop(e,n,i,o={}){const r={...o,defaultValue:i,name:n,type:e,value:i};switch(this._props[n]=r,r.updateable=["cookie","persist","rw"].indexOf(e)!==-1,e){case"cookie":return this._cookieProp(r);case"persist":return this._localStorageProp(r);case"ro":return this._readOnlyProp(r);case"rw":return this._updateableProp(r)}throw"["+this.constructor.name+'] Unknown prop type "'+e+'" for prop "'+n+'".'}subscribe(e){return e(this),this.on("update",e)}update(e){return Object.keys(e).forEach(n=>{const i=this._props[n];if(!i)return Yo.trace("["+this.constructor.name+'] Unknown prop "'+n+'".');Object.hasOwn(i,"prev")||(i.prev=i.type==="ro"?void 0:i.value),i.updateable&&(i.value=e[n])}),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}_cookie(e,n){const i=e.key||e.name,o=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!o[this.cookieName])try{const l=ws.get(this.cookieName);o[this.cookieName]=JSON.parse(l?atob(l):"{}")}catch(l){Yo.error({[i]:l})}const r=o[this.cookieName]||{};if(arguments.length===1)return r[i];n===e.defaultValue?delete r[i]:r[i]=n;const s=location.href.indexOf("https:")===0;ws.set(this.cookieName,btoa(JSON.stringify(r)),{expires:365,SameSite:"Lax",secure:s})}_cookieProp(e){const n=this._cookie(e);Be.defined(n)&&(e.value=n),Be.undefined(n)&&this._cookie(e,e.value),this._updateableProp(e)}_delayedUpdate(){const e={};return Object.keys(this._props).forEach(n=>{const i=this._props[n];if(!Object.hasOwn(i,"prev"))return;const o=i.prev;delete i.prev,i.value!==o&&(i.type==="cookie"&&this._cookie(i,i.value),i.type==="persist"&&this._localStorage(i,i.value),e[n]=i.type!=="ro")}),delete this._updatedTid,Object.keys(e).length&&this.emit("update",this,e),e}_localStorage(e,n){const i="convos:"+(e.key||e.name);if(arguments.length===2)return n===e.defaultValue?localStorage.removeItem(i):localStorage.setItem(i,JSON.stringify(n));try{return Object.hasOwn(localStorage,i)?JSON.parse(localStorage.getItem(i)):void 0}catch(o){Yo.error({[i]:localStorage.getItem(i)},o);return}}_localStorageProp(e){const n=this._localStorage(e);Be.defined(n)&&(e.value=n),Be.undefined(n)&&this._localStorage(e,e.value),this._updateableProp(e)}_readOnlyProp(e){if(e.value===void 0)throw"["+this.constructor.name+'] Read-only attribute "'+e.name+'" cannot be undefined';const n=Be.function(e.value)?e.value:()=>e.value;Object.defineProperty(this,e.name,{get:n})}_updateableProp(e){Object.defineProperty(this,e.name,{get:()=>e.value})}}class uc extends Rt{constructor(){super(),this.prop("persist","history",[],{key:"command_history"}),this.prop("rw","conversation",null),this.prop("rw","index",-1)}add(e){if(!e.length)return this;const n=this.history.slice(0,19);return n.unshift(e),this.update({history:n,index:-1})}attach(e){this.inputEl=e}render(e,n){n=this.index+n,n<-1&&(n=-1),n>=this.history.length&&(n=this.history.length-1);const i=this.inputEl.value;return this.inputEl.selectionStart!==i.length||i.length&&i!==this.history[this.index]?!1:(e.preventDefault(),this.update({index:n}),this.inputEl.value=n===-1?"":this.history[n],!0)}update(e){return e.conversation&&e.conversation!==this.conversation&&this.update({index:-1}),super.update(e)}}var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cc(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){if(this instanceof i){var o=[null];o.push.apply(o,arguments);var r=Function.bind.apply(e,o);return new r}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var pc=typeof no=="object"&&no&&no.Object===Object&&no,dc=pc,hc=dc,_c=typeof self=="object"&&self&&self.Object===Object&&self,mc=hc||_c||Function("return this")(),uf=mc,gc=uf,bc=function(){return gc.Date.now()},Ci=bc,vc=uf,$c=vc.Symbol,Pr=$c;function wc(t,e){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=e(t[n],n,t);return o}var kc=wc,yc=Array.isArray,Sc=yc,Ss=Pr,cf=Object.prototype,Ec=cf.hasOwnProperty,Cc=cf.toString,ki=Ss?Ss.toStringTag:void 0;function Ac(t){var e=Ec.call(t,ki),n=t[ki];try{t[ki]=void 0;var i=!0}catch{}var o=Cc.call(t);return i&&(e?t[ki]=n:delete t[ki]),o}var Oc=Ac,Nc=Object.prototype,Tc=Nc.toString;function Mc(t){return Tc.call(t)}var Rc=Mc,Es=Pr,Lc=Oc,Ic=Rc,Pc="[object Null]",Dc="[object Undefined]",Cs=Es?Es.toStringTag:void 0;function Uc(t){return t==null?t===void 0?Dc:Pc:Cs&&Cs in Object(t)?Lc(t):Ic(t)}var Bc=Uc;function Fc(t){return t!=null&&typeof t=="object"}var jc=Fc,zc=Bc,Hc=jc,qc="[object Symbol]";function Wc(t){return typeof t=="symbol"||Hc(t)&&zc(t)==qc}var pf=Wc,As=Pr,Gc=kc,Kc=Sc,Yc=pf,Vc=1/0,Os=As?As.prototype:void 0,Ns=Os?Os.toString:void 0;function df(t){if(typeof t=="string")return t;if(Kc(t))return Gc(t,df)+"";if(Yc(t))return Ns?Ns.call(t):"";var e=t+"";return e=="0"&&1/t==-Vc?"-0":e}var Zc=df,Jc=Zc;function Qc(t){return t==null?"":Jc(t)}var Bi=Qc,Xc=Bi,hf=/[\\^$.*+?()[\]{}|]/g,xc=RegExp(hf.source);function ep(t){return t=Xc(t),t&&xc.test(t)?t.replace(hf,"\\$&"):t}var ci=ep;const tp=ui("api");class Eo extends Rt{constructor(e){super(),this.prop("ro","api",e.api),this.prop("ro","defaultParams",e.defaultParams||{}),this.prop("ro","id",e.id),this.prop("rw","err",null),this.prop("rw","req",{body:null,headers:{}}),this.prop("rw","res",{body:{},headers:[]}),this.prop("rw","status","pending")}error(e){if(e)return this.update({err:Array.isArray(e)?e:[{message:e}],status:"error"});if(!this.err||!this.err.length)return"";const n=this.err[0],i=n.path&&n.path.match(/\w$/)&&n.path.split("/").pop();return i?i+": "+n.message:n.message}perform(e){let n;return this._promise||(this._promise=this.api.spec(this.id).then(i=>{if(!i)throw'Unknown operationId "'+this.id+'".';const o=this._paramsToRequest(i,e||this.defaultParams);return n=new XMLHttpRequest,this.update({req:o,status:"loading"}),this._send(n,o)}).then(()=>{const i={};i.body=n.response?JSON.parse(n.response):{},i.headers=(n.getAllResponseHeaders()||"").trim().split(/[\r\n]+/).filter(r=>r.length).map(r=>r.split(/:\s*/,2)),i.status=String(n.status||"201");let o=null;return String(i.status).match(/^[23]/)||(o=i.body&&i.body.errors?i.body.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:o,res:i,status:o?"error":"success"})}).catch(i=>(i.type&&(i=i.type),tp.error(this.req.url+" FAILED "+i),this.update({res:{body:{errors:[{message:String(i)}]},headers:[],status:"599"},status:"error"}),this.error(Array.isArray(i)?i:'Failed fetching operationId "'+this.id+'": '+i))).finally(()=>{delete this._promise}))}is(e){return this.status===e}reset(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}_extractValue(e,n){return n.schema?Object.keys(n.schema.properties).reduce((i,o)=>(i[o]=e[o],i),{}):e[n.name]}_hasProperty(e,n){return n.in==="body"?!0:n.in==="formData"?e.formData.has(n.name):Object.hasOwn(e,n.name)}_paramsToRequest(e,n){const i=new URL(e.url),o={headers:this.req.headers,method:e.method.toLowerCase(),url:i},r=[];if((e.parameters||[]).forEach(s=>{if(!this._hasProperty(n,s)&&s.required)r.push({message:"Missing property.",path:"/"+s.name});else{if(!this._hasProperty(n,s)&&!s.required)return;if(s.in==="path"){const l=new RegExp("(%7B|\\{)"+ci(s.name)+"(%7D|\\})","i");i.pathname=i.pathname.replace(l,encodeURIComponent(this._extractValue(n,s)))}else if(s.in==="query")i.searchParams.set(s.name,this._extractValue(n,s));else if(s.in==="formData")delete o.headers["Content-Type"],o.body=n.formData;else if(s.in==="body")o.body=this._extractValue(n,s);else if(s.in==="header")o.header[s.name]=this._extractValue(n,s.name);else throw"[Api] Parameter in:"+s.in+" is not supported."}}),r.length)throw r;return o}_send(e,n){return e.timeout=15e3,e.open(n.method.toUpperCase(),n.url),Object.keys(n.headers).forEach(i=>e.setRequestHeader(i,n.headers[i])),n.method==="post"?(e.upload.addEventListener("progress",i=>this.emit("progress",i)),e.send(Be.object(n.body)&&!Be.function(n.body.has)?JSON.stringify(n.body):n.body)):e.send(),new Promise(i=>{e.addEventListener("abort",i),e.addEventListener("error",i),e.addEventListener("load",i)})}}class np{constructor(){this.protocol=location.protocol||"http",this._url="/api"}op(e,n){const i=new Eo({api:this,id:e,defaultParams:n});return i.req.headers={"Content-Type":"application/json"},i}async spec(e){if(this._ops&&e)return this._ops[e];if(this._spec)return this._spec;const i=await(await fetch(this._url)).json();if(this._ops={},this._spec=i,Object.keys(i.paths).forEach(o=>{Object.keys(i.paths[o]).forEach(r=>{const s=i.paths[o][r],l=s.operationId;l&&(s.method=r.toUpperCase(),s.url=this.protocol+"//"+i.host+i.basePath+o+".json",s.parameters=(s.parameters||[]).map(a=>this._resolveRef(a)),this._ops[l]=s)})}),this._ops&&e)return this._ops[e];if(this._spec)return this._spec}url(e){return this._url=e,this}_resolveRef(e){let n=e;if(e.$ref){const i=e.$ref.replace(/^#\//,"").split("/");for(n=this._spec;i.length;)n=n[i.shift()]}return Be.object(n)&&Object.keys(n).forEach(i=>{n[i]=this._resolveRef(n[i])}),n}}const et=new np;var ip=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),i=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var o=42;e[n]=o;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var r=Object.getOwnPropertySymbols(e);if(r.length!==1||r[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var s=Object.getOwnPropertyDescriptor(e,n);if(s.value!==o||s.enumerable!==!0)return!1}return!0},Ts=typeof Symbol<"u"&&Symbol,op=ip,rp=function(){return typeof Ts!="function"||typeof Symbol!="function"||typeof Ts("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:op()},sp="Function.prototype.bind called on incompatible ",Vo=Array.prototype.slice,lp=Object.prototype.toString,ap="[object Function]",fp=function(e){var n=this;if(typeof n!="function"||lp.call(n)!==ap)throw new TypeError(sp+n);for(var i=Vo.call(arguments,1),o,r=function(){if(this instanceof o){var u=n.apply(this,i.concat(Vo.call(arguments)));return Object(u)===u?u:this}else return n.apply(e,i.concat(Vo.call(arguments)))},s=Math.max(0,n.length-i.length),l=[],a=0;a<s;a++)l.push("$"+a);if(o=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(r),n.prototype){var f=function(){};f.prototype=n.prototype,o.prototype=new f,f.prototype=null}return o},up=fp,Dr=Function.prototype.bind||up,cp=Dr,pp=cp.call(Function.call,Object.prototype.hasOwnProperty),Ke,oi=SyntaxError,_f=Function,ni=TypeError,Zo=function(t){try{return _f('"use strict"; return ('+t+").constructor;")()}catch{}},Nn=Object.getOwnPropertyDescriptor;if(Nn)try{Nn({},"")}catch{Nn=null}var Jo=function(){throw new ni},dp=Nn?function(){try{return arguments.callee,Jo}catch{try{return Nn(arguments,"callee").get}catch{return Jo}}}():Jo,Kn=rp(),fn=Object.getPrototypeOf||function(t){return t.__proto__},Zn={},hp=typeof Uint8Array>"u"?Ke:fn(Uint8Array),ii={"%AggregateError%":typeof AggregateError>"u"?Ke:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ke:ArrayBuffer,"%ArrayIteratorPrototype%":Kn?fn([][Symbol.iterator]()):Ke,"%AsyncFromSyncIteratorPrototype%":Ke,"%AsyncFunction%":Zn,"%AsyncGenerator%":Zn,"%AsyncGeneratorFunction%":Zn,"%AsyncIteratorPrototype%":Zn,"%Atomics%":typeof Atomics>"u"?Ke:Atomics,"%BigInt%":typeof BigInt>"u"?Ke:BigInt,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ke:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Ke:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ke:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ke:FinalizationRegistry,"%Function%":_f,"%GeneratorFunction%":Zn,"%Int8Array%":typeof Int8Array>"u"?Ke:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ke:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ke:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Kn?fn(fn([][Symbol.iterator]())):Ke,"%JSON%":typeof JSON=="object"?JSON:Ke,"%Map%":typeof Map>"u"?Ke:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Kn?Ke:fn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ke:Promise,"%Proxy%":typeof Proxy>"u"?Ke:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Ke:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ke:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Kn?Ke:fn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ke:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Kn?fn(""[Symbol.iterator]()):Ke,"%Symbol%":Kn?Symbol:Ke,"%SyntaxError%":oi,"%ThrowTypeError%":dp,"%TypedArray%":hp,"%TypeError%":ni,"%Uint8Array%":typeof Uint8Array>"u"?Ke:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ke:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ke:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ke:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Ke:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ke:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ke:WeakSet},_p=function t(e){var n;if(e==="%AsyncFunction%")n=Zo("async function () {}");else if(e==="%GeneratorFunction%")n=Zo("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=Zo("async function* () {}");else if(e==="%AsyncGenerator%"){var i=t("%AsyncGeneratorFunction%");i&&(n=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(n=fn(o.prototype))}return ii[e]=n,n},Ms={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Fi=Dr,ho=pp,mp=Fi.call(Function.call,Array.prototype.concat),gp=Fi.call(Function.apply,Array.prototype.splice),Rs=Fi.call(Function.call,String.prototype.replace),_o=Fi.call(Function.call,String.prototype.slice),bp=Fi.call(Function.call,RegExp.prototype.exec),vp=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,$p=/\\(\\)?/g,wp=function(e){var n=_o(e,0,1),i=_o(e,-1);if(n==="%"&&i!=="%")throw new oi("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&n!=="%")throw new oi("invalid intrinsic syntax, expected opening `%`");var o=[];return Rs(e,vp,function(r,s,l,a){o[o.length]=l?Rs(a,$p,"$1"):s||r}),o},kp=function(e,n){var i=e,o;if(ho(Ms,i)&&(o=Ms[i],i="%"+o[0]+"%"),ho(ii,i)){var r=ii[i];if(r===Zn&&(r=_p(i)),typeof r>"u"&&!n)throw new ni("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:i,value:r}}throw new oi("intrinsic "+e+" does not exist!")},Ur=function(e,n){if(typeof e!="string"||e.length===0)throw new ni("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new ni('"allowMissing" argument must be a boolean');if(bp(/^%?[^%]*%?$/,e)===null)throw new oi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=wp(e),o=i.length>0?i[0]:"",r=kp("%"+o+"%",n),s=r.name,l=r.value,a=!1,f=r.alias;f&&(o=f[0],gp(i,mp([0,1],f)));for(var u=1,d=!0;u<i.length;u+=1){var p=i[u],h=_o(p,0,1),_=_o(p,-1);if((h==='"'||h==="'"||h==="`"||_==='"'||_==="'"||_==="`")&&h!==_)throw new oi("property names with quotes must have matching quotes");if((p==="constructor"||!d)&&(a=!0),o+="."+p,s="%"+o+"%",ho(ii,s))l=ii[s];else if(l!=null){if(!(p in l)){if(!n)throw new ni("base intrinsic for "+e+" exists, but the property is not available.");return}if(Nn&&u+1>=i.length){var g=Nn(l,p);d=!!g,d&&"get"in g&&!("originalValue"in g.get)?l=g.get:l=l[p]}else d=ho(l,p),l=l[p];d&&!a&&(ii[s]=l)}}return l},mr={},yp={get exports(){return mr},set exports(t){mr=t}};(function(t){var e=Dr,n=Ur,i=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),r=n("%Reflect.apply%",!0)||e.call(o,i),s=n("%Object.getOwnPropertyDescriptor%",!0),l=n("%Object.defineProperty%",!0),a=n("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(d){var p=r(e,o,arguments);if(s&&l){var h=s(p,"length");h.configurable&&l(p,"length",{value:1+a(0,d.length-(arguments.length-1))})}return p};var f=function(){return r(e,i,arguments)};l?l(t.exports,"apply",{value:f}):t.exports.apply=f})(yp);var mf=Ur,gf=mr,Sp=gf(mf("String.prototype.indexOf")),Ep=function(e,n){var i=mf(e,!!n);return typeof i=="function"&&Sp(e,".prototype.")>-1?gf(i):i};const Cp={},Ap=Object.freeze(Object.defineProperty({__proto__:null,default:Cp},Symbol.toStringTag,{value:"Module"})),Op=cc(Ap);var Br=typeof Map=="function"&&Map.prototype,Qo=Object.getOwnPropertyDescriptor&&Br?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mo=Br&&Qo&&typeof Qo.get=="function"?Qo.get:null,Np=Br&&Map.prototype.forEach,Fr=typeof Set=="function"&&Set.prototype,Xo=Object.getOwnPropertyDescriptor&&Fr?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,go=Fr&&Xo&&typeof Xo.get=="function"?Xo.get:null,Tp=Fr&&Set.prototype.forEach,Mp=typeof WeakMap=="function"&&WeakMap.prototype,Ai=Mp?WeakMap.prototype.has:null,Rp=typeof WeakSet=="function"&&WeakSet.prototype,Oi=Rp?WeakSet.prototype.has:null,Lp=typeof WeakRef=="function"&&WeakRef.prototype,Ls=Lp?WeakRef.prototype.deref:null,Ip=Boolean.prototype.valueOf,Pp=Object.prototype.toString,Dp=Function.prototype.toString,Up=String.prototype.match,jr=String.prototype.slice,pn=String.prototype.replace,Bp=String.prototype.toUpperCase,Is=String.prototype.toLowerCase,bf=RegExp.prototype.test,Ps=Array.prototype.concat,Ht=Array.prototype.join,Fp=Array.prototype.slice,Ds=Math.floor,gr=typeof BigInt=="function"?BigInt.prototype.valueOf:null,xo=Object.getOwnPropertySymbols,br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,ri=typeof Symbol=="function"&&typeof Symbol.iterator=="object",kt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===ri||"symbol")?Symbol.toStringTag:null,vf=Object.prototype.propertyIsEnumerable,Us=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Bs(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||bf.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var i=t<0?-Ds(-t):Ds(t);if(i!==t){var o=String(i),r=jr.call(e,o.length+1);return pn.call(o,n,"$&_")+"."+pn.call(pn.call(r,/([0-9]{3})/g,"$&_"),/_$/,"")}}return pn.call(e,n,"$&_")}var vr=Op,Fs=vr.custom,js=wf(Fs)?Fs:null,jp=function t(e,n,i,o){var r=n||{};if(un(r,"quoteStyle")&&r.quoteStyle!=="single"&&r.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(un(r,"maxStringLength")&&(typeof r.maxStringLength=="number"?r.maxStringLength<0&&r.maxStringLength!==1/0:r.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var s=un(r,"customInspect")?r.customInspect:!0;if(typeof s!="boolean"&&s!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(un(r,"indent")&&r.indent!==null&&r.indent!=="	"&&!(parseInt(r.indent,10)===r.indent&&r.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(un(r,"numericSeparator")&&typeof r.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var l=r.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return yf(e,r);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var a=String(e);return l?Bs(e,a):a}if(typeof e=="bigint"){var f=String(e)+"n";return l?Bs(e,f):f}var u=typeof r.depth>"u"?5:r.depth;if(typeof i>"u"&&(i=0),i>=u&&u>0&&typeof e=="object")return $r(e)?"[Array]":"[Object]";var d=od(r,i);if(typeof o>"u")o=[];else if(kf(o,e)>=0)return"[Circular]";function p(K,X,J){if(X&&(o=Fp.call(o),o.push(X)),J){var N={depth:r.depth};return un(r,"quoteStyle")&&(N.quoteStyle=r.quoteStyle),t(K,N,i+1,o)}return t(K,r,i+1,o)}if(typeof e=="function"&&!zs(e)){var h=Zp(e),_=io(e,p);return"[Function"+(h?": "+h:" (anonymous)")+"]"+(_.length>0?" { "+Ht.call(_,", ")+" }":"")}if(wf(e)){var g=ri?pn.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):br.call(e);return typeof e=="object"&&!ri?yi(g):g}if(td(e)){for(var E="<"+Is.call(String(e.nodeName)),b=e.attributes||[],C=0;C<b.length;C++)E+=" "+b[C].name+"="+$f(zp(b[C].value),"double",r);return E+=">",e.childNodes&&e.childNodes.length&&(E+="..."),E+="</"+Is.call(String(e.nodeName))+">",E}if($r(e)){if(e.length===0)return"[]";var M=io(e,p);return d&&!id(M)?"["+wr(M,d)+"]":"[ "+Ht.call(M,", ")+" ]"}if(qp(e)){var D=io(e,p);return!("cause"in Error.prototype)&&"cause"in e&&!vf.call(e,"cause")?"{ ["+String(e)+"] "+Ht.call(Ps.call("[cause]: "+p(e.cause),D),", ")+" }":D.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Ht.call(D,", ")+" }"}if(typeof e=="object"&&s){if(js&&typeof e[js]=="function"&&vr)return vr(e,{depth:u-i});if(s!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Jp(e)){var L=[];return Np.call(e,function(K,X){L.push(p(X,e,!0)+" => "+p(K,e))}),Hs("Map",mo.call(e),L,d)}if(xp(e)){var A=[];return Tp.call(e,function(K){A.push(p(K,e))}),Hs("Set",go.call(e),A,d)}if(Qp(e))return er("WeakMap");if(ed(e))return er("WeakSet");if(Xp(e))return er("WeakRef");if(Gp(e))return yi(p(Number(e)));if(Yp(e))return yi(p(gr.call(e)));if(Kp(e))return yi(Ip.call(e));if(Wp(e))return yi(p(String(e)));if(!Hp(e)&&!zs(e)){var R=io(e,p),U=Us?Us(e)===Object.prototype:e instanceof Object||e.constructor===Object,B=e instanceof Object?"":"null prototype",W=!U&&kt&&Object(e)===e&&kt in e?jr.call(mn(e),8,-1):B?"Object":"",G=U||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",I=G+(W||B?"["+Ht.call(Ps.call([],W||[],B||[]),": ")+"] ":"");return R.length===0?I+"{}":d?I+"{"+wr(R,d)+"}":I+"{ "+Ht.call(R,", ")+" }"}return String(e)};function $f(t,e,n){var i=(n.quoteStyle||e)==="double"?'"':"'";return i+t+i}function zp(t){return pn.call(String(t),/"/g,"&quot;")}function $r(t){return mn(t)==="[object Array]"&&(!kt||!(typeof t=="object"&&kt in t))}function Hp(t){return mn(t)==="[object Date]"&&(!kt||!(typeof t=="object"&&kt in t))}function zs(t){return mn(t)==="[object RegExp]"&&(!kt||!(typeof t=="object"&&kt in t))}function qp(t){return mn(t)==="[object Error]"&&(!kt||!(typeof t=="object"&&kt in t))}function Wp(t){return mn(t)==="[object String]"&&(!kt||!(typeof t=="object"&&kt in t))}function Gp(t){return mn(t)==="[object Number]"&&(!kt||!(typeof t=="object"&&kt in t))}function Kp(t){return mn(t)==="[object Boolean]"&&(!kt||!(typeof t=="object"&&kt in t))}function wf(t){if(ri)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!br)return!1;try{return br.call(t),!0}catch{}return!1}function Yp(t){if(!t||typeof t!="object"||!gr)return!1;try{return gr.call(t),!0}catch{}return!1}var Vp=Object.prototype.hasOwnProperty||function(t){return t in this};function un(t,e){return Vp.call(t,e)}function mn(t){return Pp.call(t)}function Zp(t){if(t.name)return t.name;var e=Up.call(Dp.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function kf(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function Jp(t){if(!mo||!t||typeof t!="object")return!1;try{mo.call(t);try{go.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Qp(t){if(!Ai||!t||typeof t!="object")return!1;try{Ai.call(t,Ai);try{Oi.call(t,Oi)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function Xp(t){if(!Ls||!t||typeof t!="object")return!1;try{return Ls.call(t),!0}catch{}return!1}function xp(t){if(!go||!t||typeof t!="object")return!1;try{go.call(t);try{mo.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function ed(t){if(!Oi||!t||typeof t!="object")return!1;try{Oi.call(t,Oi);try{Ai.call(t,Ai)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function td(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function yf(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,i="... "+n+" more character"+(n>1?"s":"");return yf(jr.call(t,0,e.maxStringLength),e)+i}var o=pn.call(pn.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,nd);return $f(o,"single",e)}function nd(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+Bp.call(e.toString(16))}function yi(t){return"Object("+t+")"}function er(t){return t+" { ? }"}function Hs(t,e,n,i){var o=i?wr(n,i):Ht.call(n,", ");return t+" ("+e+") {"+o+"}"}function id(t){for(var e=0;e<t.length;e++)if(kf(t[e],`
`)>=0)return!1;return!0}function od(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=Ht.call(Array(t.indent+1)," ");else return null;return{base:n,prev:Ht.call(Array(e+1),n)}}function wr(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Ht.call(t,","+n)+`
`+e.prev}function io(t,e){var n=$r(t),i=[];if(n){i.length=t.length;for(var o=0;o<t.length;o++)i[o]=un(t,o)?e(t[o],t):""}var r=typeof xo=="function"?xo(t):[],s;if(ri){s={};for(var l=0;l<r.length;l++)s["$"+r[l]]=r[l]}for(var a in t)un(t,a)&&(n&&String(Number(a))===a&&a<t.length||ri&&s["$"+a]instanceof Symbol||(bf.call(/[^\w$]/,a)?i.push(e(a,t)+": "+e(t[a],t)):i.push(a+": "+e(t[a],t))));if(typeof xo=="function")for(var f=0;f<r.length;f++)vf.call(t,r[f])&&i.push("["+e(r[f])+"]: "+e(t[r[f]],t));return i}var zr=Ur,pi=Ep,rd=jp,sd=zr("%TypeError%"),oo=zr("%WeakMap%",!0),ro=zr("%Map%",!0),ld=pi("WeakMap.prototype.get",!0),ad=pi("WeakMap.prototype.set",!0),fd=pi("WeakMap.prototype.has",!0),ud=pi("Map.prototype.get",!0),cd=pi("Map.prototype.set",!0),pd=pi("Map.prototype.has",!0),Hr=function(t,e){for(var n=t,i;(i=n.next)!==null;n=i)if(i.key===e)return n.next=i.next,i.next=t.next,t.next=i,i},dd=function(t,e){var n=Hr(t,e);return n&&n.value},hd=function(t,e,n){var i=Hr(t,e);i?i.value=n:t.next={key:e,next:t.next,value:n}},_d=function(t,e){return!!Hr(t,e)},md=function(){var e,n,i,o={assert:function(r){if(!o.has(r))throw new sd("Side channel does not contain "+rd(r))},get:function(r){if(oo&&r&&(typeof r=="object"||typeof r=="function")){if(e)return ld(e,r)}else if(ro){if(n)return ud(n,r)}else if(i)return dd(i,r)},has:function(r){if(oo&&r&&(typeof r=="object"||typeof r=="function")){if(e)return fd(e,r)}else if(ro){if(n)return pd(n,r)}else if(i)return _d(i,r);return!1},set:function(r,s){oo&&r&&(typeof r=="object"||typeof r=="function")?(e||(e=new oo),ad(e,r,s)):ro?(n||(n=new ro),cd(n,r,s)):(i||(i={key:{},next:null}),hd(i,r,s))}};return o},gd=String.prototype.replace,bd=/%20/g,tr={RFC1738:"RFC1738",RFC3986:"RFC3986"},qr={default:tr.RFC3986,formatters:{RFC1738:function(t){return gd.call(t,bd,"+")},RFC3986:function(t){return String(t)}},RFC1738:tr.RFC1738,RFC3986:tr.RFC3986},vd=qr,nr=Object.prototype.hasOwnProperty,On=Array.isArray,zt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),$d=function(e){for(;e.length>1;){var n=e.pop(),i=n.obj[n.prop];if(On(i)){for(var o=[],r=0;r<i.length;++r)typeof i[r]<"u"&&o.push(i[r]);n.obj[n.prop]=o}}},Sf=function(e,n){for(var i=n&&n.plainObjects?Object.create(null):{},o=0;o<e.length;++o)typeof e[o]<"u"&&(i[o]=e[o]);return i},wd=function t(e,n,i){if(!n)return e;if(typeof n!="object"){if(On(e))e.push(n);else if(e&&typeof e=="object")(i&&(i.plainObjects||i.allowPrototypes)||!nr.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var o=e;return On(e)&&!On(n)&&(o=Sf(e,i)),On(e)&&On(n)?(n.forEach(function(r,s){if(nr.call(e,s)){var l=e[s];l&&typeof l=="object"&&r&&typeof r=="object"?e[s]=t(l,r,i):e.push(r)}else e[s]=r}),e):Object.keys(n).reduce(function(r,s){var l=n[s];return nr.call(r,s)?r[s]=t(r[s],l,i):r[s]=l,r},o)},kd=function(e,n){return Object.keys(n).reduce(function(i,o){return i[o]=n[o],i},e)},yd=function(t,e,n){var i=t.replace(/\+/g," ");if(n==="iso-8859-1")return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch{return i}},Sd=function(e,n,i,o,r){if(e.length===0)return e;var s=e;if(typeof e=="symbol"?s=Symbol.prototype.toString.call(e):typeof e!="string"&&(s=String(e)),i==="iso-8859-1")return escape(s).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var l="",a=0;a<s.length;++a){var f=s.charCodeAt(a);if(f===45||f===46||f===95||f===126||f>=48&&f<=57||f>=65&&f<=90||f>=97&&f<=122||r===vd.RFC1738&&(f===40||f===41)){l+=s.charAt(a);continue}if(f<128){l=l+zt[f];continue}if(f<2048){l=l+(zt[192|f>>6]+zt[128|f&63]);continue}if(f<55296||f>=57344){l=l+(zt[224|f>>12]+zt[128|f>>6&63]+zt[128|f&63]);continue}a+=1,f=65536+((f&1023)<<10|s.charCodeAt(a)&1023),l+=zt[240|f>>18]+zt[128|f>>12&63]+zt[128|f>>6&63]+zt[128|f&63]}return l},Ed=function(e){for(var n=[{obj:{o:e},prop:"o"}],i=[],o=0;o<n.length;++o)for(var r=n[o],s=r.obj[r.prop],l=Object.keys(s),a=0;a<l.length;++a){var f=l[a],u=s[f];typeof u=="object"&&u!==null&&i.indexOf(u)===-1&&(n.push({obj:s,prop:f}),i.push(u))}return $d(n),e},Cd=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Ad=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Od=function(e,n){return[].concat(e,n)},Nd=function(e,n){if(On(e)){for(var i=[],o=0;o<e.length;o+=1)i.push(n(e[o]));return i}return n(e)},Ef={arrayToObject:Sf,assign:kd,combine:Od,compact:Ed,decode:yd,encode:Sd,isBuffer:Ad,isRegExp:Cd,maybeMap:Nd,merge:wd},Cf=md,kr=Ef,Ni=qr,Td=Object.prototype.hasOwnProperty,qs={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},Jt=Array.isArray,Md=String.prototype.split,Rd=Array.prototype.push,Af=function(t,e){Rd.apply(t,Jt(e)?e:[e])},Ld=Date.prototype.toISOString,Ws=Ni.default,mt={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:kr.encode,encodeValuesOnly:!1,format:Ws,formatter:Ni.formatters[Ws],indices:!1,serializeDate:function(e){return Ld.call(e)},skipNulls:!1,strictNullHandling:!1},Id=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},ir={},Pd=function t(e,n,i,o,r,s,l,a,f,u,d,p,h,_,g,E){for(var b=e,C=E,M=0,D=!1;(C=C.get(ir))!==void 0&&!D;){var L=C.get(e);if(M+=1,typeof L<"u"){if(L===M)throw new RangeError("Cyclic object value");D=!0}typeof C.get(ir)>"u"&&(M=0)}if(typeof a=="function"?b=a(n,b):b instanceof Date?b=d(b):i==="comma"&&Jt(b)&&(b=kr.maybeMap(b,function(j){return j instanceof Date?d(j):j})),b===null){if(r)return l&&!_?l(n,mt.encoder,g,"key",p):n;b=""}if(Id(b)||kr.isBuffer(b)){if(l){var A=_?n:l(n,mt.encoder,g,"key",p);if(i==="comma"&&_){for(var R=Md.call(String(b),","),U="",B=0;B<R.length;++B)U+=(B===0?"":",")+h(l(R[B],mt.encoder,g,"value",p));return[h(A)+(o&&Jt(b)&&R.length===1?"[]":"")+"="+U]}return[h(A)+"="+h(l(b,mt.encoder,g,"value",p))]}return[h(n)+"="+h(String(b))]}var W=[];if(typeof b>"u")return W;var G;if(i==="comma"&&Jt(b))G=[{value:b.length>0?b.join(",")||null:void 0}];else if(Jt(a))G=a;else{var I=Object.keys(b);G=f?I.sort(f):I}for(var K=o&&Jt(b)&&b.length===1?n+"[]":n,X=0;X<G.length;++X){var J=G[X],N=typeof J=="object"&&typeof J.value<"u"?J.value:b[J];if(!(s&&N===null)){var P=Jt(b)?typeof i=="function"?i(K,J):K:K+(u?"."+J:"["+J+"]");E.set(e,M);var Z=Cf();Z.set(ir,E),Af(W,t(N,P,i,o,r,s,l,a,f,u,d,p,h,_,g,Z))}}return W},Dd=function(e){if(!e)return mt;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||mt.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var i=Ni.default;if(typeof e.format<"u"){if(!Td.call(Ni.formatters,e.format))throw new TypeError("Unknown format option provided.");i=e.format}var o=Ni.formatters[i],r=mt.filter;return(typeof e.filter=="function"||Jt(e.filter))&&(r=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:mt.addQueryPrefix,allowDots:typeof e.allowDots>"u"?mt.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:mt.charsetSentinel,delimiter:typeof e.delimiter>"u"?mt.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:mt.encode,encoder:typeof e.encoder=="function"?e.encoder:mt.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:mt.encodeValuesOnly,filter:r,format:i,formatter:o,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:mt.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:mt.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:mt.strictNullHandling}},Ud=function(t,e){var n=t,i=Dd(e),o,r;typeof i.filter=="function"?(r=i.filter,n=r("",n)):Jt(i.filter)&&(r=i.filter,o=r);var s=[];if(typeof n!="object"||n===null)return"";var l;e&&e.arrayFormat in qs?l=e.arrayFormat:e&&"indices"in e?l=e.indices?"indices":"repeat":l="indices";var a=qs[l];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var f=a==="comma"&&e&&e.commaRoundTrip;o||(o=Object.keys(n)),i.sort&&o.sort(i.sort);for(var u=Cf(),d=0;d<o.length;++d){var p=o[d];i.skipNulls&&n[p]===null||Af(s,Pd(n[p],p,a,f,i.strictNullHandling,i.skipNulls,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,u))}var h=s.join(i.delimiter),_=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?_+="utf8=%26%2310003%3B&":_+="utf8=%E2%9C%93&"),h.length>0?_+h:""},si=Ef,yr=Object.prototype.hasOwnProperty,Bd=Array.isArray,pt={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:si.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Fd=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},Of=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},jd="utf8=%26%2310003%3B",zd="utf8=%E2%9C%93",Hd=function(e,n){var i={},o=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,r=n.parameterLimit===1/0?void 0:n.parameterLimit,s=o.split(n.delimiter,r),l=-1,a,f=n.charset;if(n.charsetSentinel)for(a=0;a<s.length;++a)s[a].indexOf("utf8=")===0&&(s[a]===zd?f="utf-8":s[a]===jd&&(f="iso-8859-1"),l=a,a=s.length);for(a=0;a<s.length;++a)if(a!==l){var u=s[a],d=u.indexOf("]="),p=d===-1?u.indexOf("="):d+1,h,_;p===-1?(h=n.decoder(u,pt.decoder,f,"key"),_=n.strictNullHandling?null:""):(h=n.decoder(u.slice(0,p),pt.decoder,f,"key"),_=si.maybeMap(Of(u.slice(p+1),n),function(g){return n.decoder(g,pt.decoder,f,"value")})),_&&n.interpretNumericEntities&&f==="iso-8859-1"&&(_=Fd(_)),u.indexOf("[]=")>-1&&(_=Bd(_)?[_]:_),yr.call(i,h)?i[h]=si.combine(i[h],_):i[h]=_}return i},qd=function(t,e,n,i){for(var o=i?e:Of(e,n),r=t.length-1;r>=0;--r){var s,l=t[r];if(l==="[]"&&n.parseArrays)s=[].concat(o);else{s=n.plainObjects?Object.create(null):{};var a=l.charAt(0)==="["&&l.charAt(l.length-1)==="]"?l.slice(1,-1):l,f=parseInt(a,10);!n.parseArrays&&a===""?s={0:o}:!isNaN(f)&&l!==a&&String(f)===a&&f>=0&&n.parseArrays&&f<=n.arrayLimit?(s=[],s[f]=o):a!=="__proto__"&&(s[a]=o)}o=s}return o},Wd=function(e,n,i,o){if(e){var r=i.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,s=/(\[[^[\]]*])/,l=/(\[[^[\]]*])/g,a=i.depth>0&&s.exec(r),f=a?r.slice(0,a.index):r,u=[];if(f){if(!i.plainObjects&&yr.call(Object.prototype,f)&&!i.allowPrototypes)return;u.push(f)}for(var d=0;i.depth>0&&(a=l.exec(r))!==null&&d<i.depth;){if(d+=1,!i.plainObjects&&yr.call(Object.prototype,a[1].slice(1,-1))&&!i.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+r.slice(a.index)+"]"),qd(u,n,i,o)}},Gd=function(e){if(!e)return pt;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?pt.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?pt.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:pt.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:pt.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:pt.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:pt.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:pt.comma,decoder:typeof e.decoder=="function"?e.decoder:pt.decoder,delimiter:typeof e.delimiter=="string"||si.isRegExp(e.delimiter)?e.delimiter:pt.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:pt.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:pt.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:pt.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:pt.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:pt.strictNullHandling}},Kd=function(t,e){var n=Gd(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var i=typeof t=="string"?Hd(t,n):t,o=n.plainObjects?Object.create(null):{},r=Object.keys(i),s=0;s<r.length;++s){var l=r[s],a=Wd(l,i[l],n,typeof t=="string");o=si.merge(o,a,n)}return n.allowSparse===!0?o:si.compact(o)},Yd=Ud,Vd=Kd,Zd=qr,Jd={formats:Zd,parse:Vd,stringify:Yd};const Qd=ui("route");class Xd extends Rt{constructor(){super(),this.prop("ro","basePath",()=>this._basePath),this.prop("ro","hash",()=>(this._location.hash||"").replace(/^#/,"")),this.prop("ro","path",()=>this._path),this.prop("ro","pathParts",()=>this._pathParts),this.prop("ro","query",()=>this._query),this.prop("rw","baseUrl",""),this.prop("rw","enabled",!1),this._onClick=this._onClick.bind(this),this._onLocationChange=this._onLocationChange.bind(this),window.addEventListener("click",this._onClick),window.addEventListener("popstate",this._onLocationChange),this._history=window.history,this._location=window.location,this._basePath="",this._path="/",this._pathParts=[],this._query={}}conversationPath(e){const n=["","chat"];return e.connection_id&&n.push(e.connection_id),e.conversation_id&&n.push(e.conversation_id),n.map(i=>encodeURIComponent(i)).join("/")}go(e,n={}){e.indexOf(this.baseUrl)===0&&(e=e.substr(this.baseUrl.length));const i=this.baseUrl+e;if(i===this._location.href)return this;this._history[n.replace?"replaceState":"pushState"]({},document.title,i),this.update({path:!0})._onLocationChange({})}param(e,n=""){const i=this.query;return Object.hasOwn(i,e)?i[e]:n}subscribe(e){return e(this),this.on("update",e)}update(e){return e.baseUrl&&(e.baseUrl=e.baseUrl.replace(/\/+$/,""),this._basePath=new URL(e.baseUrl).pathname.replace(/\/+$/,"")),super.update(e),e.baseUrl&&this._onLocationChange(),this}urlFor(e,n={}){const i=e.match(/^\w+:/)||e.match(/^#/)?e:this.basePath+e,o=Object.keys(n).sort().filter(r=>Be.defined(n[r])).map(r=>r+"="+encodeURIComponent(n[r])).join("&");return i+(o?"?"+o:"")}wsUrlFor(e){return(e.match(/^\w+:/)?e:this.baseUrl+e).replace(/^http/,"ws")}_onClick(e){if(this.emit("click",e),!this.enabled||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)return;const n=e.target&&e.target.closest("a");if(!n||!n.href)return;if(n.target==="_self"&&(n.href.indexOf("/")===0?this.baseUrl+n.href:n.href)===location.href)return location.reload();if(n.hasAttribute("download")||n.hasAttribute("target"))return;let i=n.getAttribute("href")||"";i.indexOf("#")===0&&(i=this.path+i),i.indexOf("./")===0&&(i="/"+this._pathParts.slice(0,-1).join("/")+i.replace(/^\./,"")),i.indexOf(this.baseUrl)===0&&(i=i.substr(this.baseUrl.length)),i.indexOf(this.basePath)===0&&(i=i.substr(this.basePath.length)),i.indexOf("/")===0&&(this.go(i,{},n.hasAttribute("replace")),e.preventDefault())}_onLocationChange(){if(!this.enabled)return;const i=this._location.href.substr(this.baseUrl.length).split("#")[0].split("?");this._query=i.length===2?Jd.parse(i.pop()):{},this._path=i[0],this._pathParts=i[0].length<=1?[]:i[0].replace(/^\//,"").split("/").map(decodeURIComponent),Qd.info('path="'+this._path+'" '+JSON.stringify(this._pathParts)+", query="+JSON.stringify(this._query)),this.update({path:!0})}}const De=new Xd;class xd{constructor(){this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={},this.status="pending"}async load(){if(["loading","success"].indexOf(this.status)!==-1)return this;this.status="loading";const e=await fetch(De.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));return this._load((await e.json()).emojis),this.status="success",this}markup(e){return e.replace(this.re,(n,i,o)=>{const r=this.aliases[o]||o,s=this.byShortName[r];return i+(s&&s.emoji||o)})}search(e){e=e.toLowerCase();const n=this.grouped[e]||this.grouped[e.substring(0,2)]||{};return Object.keys(n).sort((i,o)=>n[i]-n[o]).map(i=>this.byShortName[i]).filter(i=>(i.shortname+i.name).toLowerCase().indexOf(e)!==-1)}_buildAliases(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}_buildRe(){const e=Object.keys(this.aliases).sort().map(ci).join("|");return new RegExp("(^|\\s)(:\\w+:|"+e+")(?=&|\\s|\\,|\\.|$)","gi")}_load(e){this.grouped={};for(const n of e)n.emoji&&n.shortname&&(n.name||(n.name=n.shortname),delete n.category,delete n.order,delete n.unicode,this.byShortName[n.shortname]=n,this._toGrouped(n))}_toGrouped(e){const n=this.grouped;([e.shortname,e.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((o,r)=>{o=o.substring(1).toLowerCase(),n[o]||(n[o]={}),n[o][e.shortname]=r,o=o[0],n[o]||(n[o]={}),n[o][e.shortname]=r})}}const eh={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},Si=(t,e=/[&<>'"]/g)=>t.replace(e,n=>eh[n]),Gs=t=>t.replace(/\s$/,"&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;"),St=t=>[t.map(e=>`<${e}>`).join(""),t.reverse().map(e=>`</${e}>`).join("")];class th extends Rt{constructor(){super(),this.prop("cookie","lang",""),this.prop("ro","dictionaries",{}),this.prop("ro","emojis",new xd),this.prop("ro","languages",()=>this._languages),this.prop("ro","languageOptions",()=>this._languageOptions),this._languages=[],this._languageOptions=[],this._rules=this._makeRules()}l(e,...n){const i=this.dictionaries[this.lang]||{};return String(i[e]||e).replace(/%(\d)(\D|$)/g,(r,s,l)=>typeof n[s-1]>"u"?r:n[s-1]+l)}async load(e){if(e||(e=this.lang||document.documentElement.getAttribute("lang")),this.dictionaries[e])return this.update({lang:e});const n=await et.op("getDictionary",{lang:e}).perform();return this.dictionaries[e]=n.res.body.dictionary,this._languages=n.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map(i=>[i,this._languages[i].language_team.replace(/\s*<.*/,"")]),this.update({lang:e})}lmd(e,...n){return this.md(this.l(e,...n))}md(e){return e.length?this.emojis.markup(Gs(this._tagToHTML(this._makeTag(e)))):"&nbsp;"}raw(e){return e.length?Gs(Si(e)):"&nbsp;"}_makeRules(){const e=[];return e.push({tag:St(["code"]),re:/`(?=[^`\s])/,rules:[],handler:"_mdTag"}),e.push({tag:St(["em","strong"]),re:/\*\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:St(["strong"]),re:/\*\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:St(["em"]),re:/\*(?=\S)/,rules:e,handler:"_mdTag"}),e.push({tag:St(["span"]),re:/\x03\d{1,2}(?:,\d{1,2})?/,rules:e,handler:"_mdIrcColorFormatting"}),e.push({tag:St(["span"]),re:/[\x02\x1d\x1e\x1f\x11]/,rules:e,handler:"_mdIrcTextFormatting"}),e.push({tag:St(["a"]),re:/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/,rules:[],handler:"_mdLink"}),e.push({tag:St(["a"]),re:/\b(https?|mailto):\S+/,rules:[],handler:"_mdURL"}),e.push({tag:St(["a"]),re:/(\s|^)#[a-zA-Z][\w.-]+(?=\W|$)/,rules:[],handler:"_mdChannelname"}),e}_makeTag(e,n=this._rules,i=0){if(i===0&&e.indexOf("> ")===0)return[St(["blockquote"]),{},[this._makeTag(e.replace(/^>\s/,""),n,i+1)]];const o=[];for(const r of n){const s=e.match(r.re);if(!s)continue;const l={attrs:{},after:e.substring(s.index+s[0].length),before:e.substring(0,s.index),captured:s[0],index:s.index,match:s,tag:r.tag};if(this[r.handler](l),typeof l.content!="string"){e=l.before+l.captured+l.after;continue}l.before.length&&o.push(this._makeTag(l.before,n,i+1)),o.push([l.tag,l.attrs,[this._makeTag(l.content,r.rules,i+1)]]),l.after.length&&o.push(this._makeTag(l.after,n,i+1));break}return[null,{},o.length?o:[Si(e)]]}_mdChannelname(e){e.captured=e.captured.replace(/^\s/,n=>(e.before+=n,"")),e.content=e.captured,e.attrs.href="./"+encodeURIComponent(e.captured)}_mdIrcColorFormatting(e){const n=e.after.indexOf("");if(n===-1)return;e.content=e.after.substring(0,n),e.after=e.after.substring(n+1);const i=[];e.captured.replace(/\x030?(\d{1,2}),?(\d{1,2})?/,(o,r,s)=>{s&&i.push("bg-"+s),r&&i.push("text-"+r)}),i.length&&(e.attrs.class=i.join(" "))}_mdIrcTextFormatting(e){const n=e.after.indexOf(e.captured);n!==-1&&(e.content=e.after.substring(0,n),e.after=e.after.substring(n+e.captured.length),e.tag=e.captured===""?St(["strong"]):e.captured===""?St(["em"]):e.captured===""?St(["u"]):e.captured===""?St(["code"]):St(["span"]))}_mdLink(e){e.content=e.match[1],e.attrs.href=Si(e.match[2]),e.match[2].match(/^\w+:/)&&(e.attrs.target="_blank")}_mdTag(e){if(e.before.match(/\\$/)){e.before=e.before.replace(/\\$/,"");return}const n=e.after.indexOf(e.captured);n!==-1&&(e.content=e.after.substring(0,n),e.after=e.after.substring(n+e.captured.length))}_mdURL(e){e.captured=e.captured.replace(/[,.:;!"')]$/,n=>(e.after=n[0]+e.after,"")),e.content=e.captured.replace(/^(https|mailto):(\/\/)?/,""),e.attrs.href=Si(e.captured),e.attrs.target="_blank"}_tagToHTML(e){if(typeof e=="string")return e;const n=typeof e[2]=="string"?Si(e[2]):e[2].map(r=>this._tagToHTML(r)).join("");if(!e[0])return n;const i=Object.keys(e[1]).sort().map(r=>`${r}="${e[1][r]}"`).join(" ");return(i?e[0][0].replace(/>/," "+i+">"):e[0][0])+n+e[0][1]}}const xe=new th,ot=sf(xe,t=>(...e)=>t.l(...e)),Bt=sf(xe,t=>(...e)=>t.lmd(...e)),cn=[],Nf={};function nh({query:t}){const e=[];for(let n=0;n<cn.length;n++){if(cn[n].cmd.indexOf(t)!==0)continue;const i=cn[n].alias||cn[n].cmd;e.push({val:i,text:xe.md(cn[n].example)})}return e}function ih(t){const e=t.split(/\s/),n=Nf[e[0].toLowerCase()];return Be.function(n)?n(e.slice(1)):n?[n].concat(e.slice(1)).filter(i=>Be.defined(i)&&i.length).join(" "):t}const it=(t,e,n)=>cn.push({cmd:t,description:n,example:e});it("/me","/me <msg>","Send message as an action.");it("/say","/say <msg>",'Used when you want to send a message starting with "/".');it("/whois","/whois <nick>","Show information about a user.");it("/query","/query <nick>","Open up a new chat window with nick.");it("/msg","/msg <nick> <msg>","Send a direct message to nick.");it("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional.");it("/join","/join <#channel>","Join channel and open up a chat window.");it("/close","/close [nick|#channel]","Close conversation.");it("/nick","/nick <nick>","Change your wanted nick.");it("/away","/away <message>","Add or remove an away message");it("/kick","/kick <nick>","Kick a user from the current channel.");it("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user");it("/topic","/topic or /topic <new topic>","Show current topic, or set a new one.");it("/names","/names","Show participants in the channel.");it("/invite","/invite <nick> [#channel]","Invite a user to a channel.");it("/reconnect","/reconnect","Restart the current connection.");it("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation.");it("/oper","/oper <nick> <password>","Gain operator status on a network.");it("/cs","/cs <msg>","Send a message to chanserv.");it("/ns","/ns <msg>","Send a message to nickserv.");it("/ms","/ms <msg>","Send a message to memoserv.");it("/hs","/hs <msg>","Send a message to hostserv.");it("/bs","/bs <msg>","Send a message to botserv.");it("/os","/os <msg>","Send a message to operserv.");it("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");const Vt=(t,e)=>Nf[t]=e;Vt("/close","/part");Vt("/shrug",t=>"/say "+t.concat("Â¯\\_(ã)_/Â¯").join(" "));Vt("/cs","/quote chanserv");Vt("/ns","/quote nickserv");Vt("/ms","/quote memoserv");Vt("/hs","/quote hotserv");Vt("/bs","/quote botserv");Vt("/os","/quote operserv");Vt("/j","/join");Vt("/raw","/quote");function Rn(t,e){return Rn[t]?Rn[t](e):[]}function oh(t,e){t&&Object.hasOwn(t,"val")&&(t=t.val);const n=e.append?e.value.length:e.cursorPos;let[i,o]=[e.value.substring(0,n),e.value.substring(n)];return Be.undefined(t)?{before:i,middle:"",after:o}:(e.append&&(i=i.replace(/[ ]$/,""),i.length&&(t=" "+t)),e.padBefore&&(i=i.replace(/[ ]$/,""),i.length&&(t=" "+t)),e.padAfter&&(o=o.replace(/^[ ]/,""),t=t+" "),e.replace&&(i=i.replace(/\S*\s?$/,"")),{before:i,middle:t,after:o})}function rh(t,e,{conversation:n,user:i}){let o="",r="";const s=t.substring(0,e).replace(/(\S)(\S*)$/,(f,u,d)=>(o=u,r=d,"")),l=o===":"&&r.length?"emojis":o==="/"&&!s.length?"commands":o==="@"&&r.length?"nicks":o==="#"||o==="&"?"conversations":"none",a=Rn(l,{conversation:n,query:o+r,user:i});return a.length&&a.unshift({autocompleteCategory:l,val:o+r}),a}Rn.commands=({query:t})=>nh({query:t});Rn.conversations=({conversation:t,query:e,user:n})=>{const i=n.findConversation({connection_id:t.connection_id}),o=i?i.conversations.toArray():n.conversations(),r=[];for(let s=0;s<o.length&&!(o[s].name.toLowerCase().indexOf(e)!==-1&&(r.push({text:o[s].name,val:o[s].conversation_id}),r.length>=20));s++);return r};Rn.emojis=({query:t})=>{const e=xe.emojis,n=[];for(let i of e.search(t.substring(1)))if(n.push({val:i.emoji,text:e.markup(i.emoji)}),n.length>=30)break;return n};Rn.nicks=({conversation:t,query:e})=>{const n=new RegExp("^"+ci(e.slice(1)),"i"),i=[];for(let o of t.participants.toArray()){if(i.length>=20)break;o.nick.match(n)&&i.push({val:o.nick})}return i};function Tf(t){const e=t-1;return e*e*e+1}function Dt(t,{delay:e=0,duration:n=400,easing:i=Va}={}){const o=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:i,css:r=>`opacity: ${r*o}`}}function Yt(t,{delay:e=0,duration:n=400,easing:i=Tf,x:o=0,y:r=0,opacity:s=0}={}){const l=getComputedStyle(t),a=+l.opacity,f=l.transform==="none"?"":l.transform,u=a*(1-s);return{delay:e,duration:n,easing:i,css:(d,p)=>`
			transform: ${f} translate(${(1-d)*o}px, ${(1-d)*r}px);
			opacity: ${a-u*p}`}}function li(t,{delay:e=0,duration:n=400,easing:i=Tf}={}){const o=getComputedStyle(t),r=+o.opacity,s=parseFloat(o.height),l=parseFloat(o.paddingTop),a=parseFloat(o.paddingBottom),f=parseFloat(o.marginTop),u=parseFloat(o.marginBottom),d=parseFloat(o.borderTopWidth),p=parseFloat(o.borderBottomWidth);return{delay:e,duration:n,easing:i,css:h=>`overflow: hidden;opacity: ${Math.min(h*20,1)*r};height: ${h*s}px;padding-top: ${h*l}px;padding-bottom: ${h*a}px;margin-top: ${h*f}px;margin-bottom: ${h*u}px;border-top-width: ${h*d}px;border-bottom-width: ${h*p}px;`}}function Ks(t){const e=t.is("private")?t.participants.nicks().sort().join("-and-"):t.title;return encodeURIComponent(e).toLowerCase()}const bo=yo(null,{conversationToInternalUrl(t){const e=this.get();if(!e)return null;const n=De.urlFor("/video/"+e.hostname+"/"+Ks(t));return new URL(n,location.href).href},conversationToExternalUrl(t){const e=this.get();return e?new URL("/"+Ks(t),e).href:null},fromString(t){this.set(t?new URL(t):null)}}),sh=yo(null,{close(){const t=this.get();return t?[!0,t.close(),this.set(null)][0]:!1},open(t,e={}){this.window||(this.window=window),t=t.toString(),e.nick&&(t+="?nick="+encodeURIComponent(e.nick));const n=this.window.open(t,"convos_video");["beforeunload","close"].forEach(i=>n.addEventListener(i,()=>this.set(null))),this.set(n)}});function Ys(t,e,n){const i=t.slice();return i[39]=e[n],i[41]=n,i}function Vs(t){let e,n,i,o,r,s;return n=new $e({props:{name:"plus-circle"}}),i=new $e({props:{name:"times"}}),{c(){e=m("a"),q(n.$$.fragment),q(i.$$.fragment),k(e,"href","#actions"),k(e,"class","btn-hallow can-toggle"),Qe(e,"is-active",t[2]==="actions")},m(l,a){w(l,e,a),z(n,e,null),z(i,e,null),o=!0,r||(s=Te(e,"click",st(t[13])),r=!0)},p(l,a){(!o||a[0]&4)&&Qe(e,"is-active",l[2]==="actions")},i(l){o||(v(n.$$.fragment,l),v(i.$$.fragment,l),o=!0)},o(l){y(n.$$.fragment,l),y(i.$$.fragment,l),o=!1},d(l){l&&$(e),H(n),H(i),r=!1,s()}}}function lh(t){let e,n,i,o,r=t[4],s=[];for(let l=0;l<r.length;l+=1)s[l]=Zs(Ys(t,r,l));return{c(){e=m("div");for(let l=0;l<s.length;l+=1)s[l].c();k(e,"class",n="chat-input_menu for-"+t[5])},m(l,a){w(l,e,a);for(let f=0;f<s.length;f+=1)s[f].m(e,null);o=!0},p(l,a){if(t=l,a[0]&65560){r=t[4];let f;for(f=0;f<r.length;f+=1){const u=Ys(t,r,f);s[f]?s[f].p(u,a):(s[f]=Zs(u),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=r.length}(!o||a[0]&32&&n!==(n="chat-input_menu for-"+t[5]))&&k(e,"class",n)},i(l){o||(at(()=>{i||(i=tt(e,Yt,t[12],!0)),i.run(1)}),o=!0)},o(l){i||(i=tt(e,Yt,t[12],!1)),i.run(0),o=!1},d(l){l&&$(e),wt(s,l),l&&i&&i.end()}}}function ah(t){let e,n,i,o,r,s=t[1]("Attach a file")+"",l,a,f,u=t[8]&&Js(t);return o=new $e({props:{name:"cloud-upload-alt"}}),{c(){e=m("div"),u&&u.c(),n=S(),i=m("label"),q(o.$$.fragment),r=S(),l=O(s),k(i,"for","upload_files"),k(e,"class","chat-input_menu for-actions")},m(d,p){w(d,e,p),u&&u.m(e,null),c(e,n),c(e,i),z(o,i,null),c(i,r),c(i,l),f=!0},p(d,p){t=d,t[8]?u?(u.p(t,p),p[0]&256&&v(u,1)):(u=Js(t),u.c(),v(u,1),u.m(e,n)):u&&(Oe(),y(u,1,1,()=>{u=null}),Ne()),(!f||p[0]&2)&&s!==(s=t[1]("Attach a file")+"")&&T(l,s)},i(d){f||(v(u),v(o.$$.fragment,d),at(()=>{a||(a=tt(e,Yt,t[12],!0)),a.run(1)}),f=!0)},o(d){y(u),y(o.$$.fragment,d),a||(a=tt(e,Yt,t[12],!1)),a.run(0),f=!1},d(d){d&&$(e),u&&u.d(),H(o),d&&a&&a.end()}}}function Zs(t){let e,n=(t[39].text||t[39].val)+"",i,o;return{c(){e=m("a"),k(e,"href","#index:"+t[41]),k(e,"tabindex","-1"),Qe(e,"has-focus",t[41]===t[3])},m(r,s){w(r,e,s),e.innerHTML=n,i||(o=Te(e,"click",st(t[16])),i=!0)},p(r,s){s[0]&16&&n!==(n=(r[39].text||r[39].val)+"")&&(e.innerHTML=n),s[0]&8&&Qe(e,"has-focus",r[41]===r[3])},d(r){r&&$(e),i=!1,o()}}}function Js(t){let e,n,i,o=t[1]("Start a video conference")+"",r,s,l,a;return n=new $e({props:{name:"video"}}),{c(){e=m("a"),q(n.$$.fragment),i=S(),r=O(o),k(e,"href",t[8])},m(f,u){w(f,e,u),z(n,e,null),c(e,i),c(e,r),s=!0,l||(a=Te(e,"click",t[15]),l=!0)},p(f,u){(!s||u[0]&2)&&o!==(o=f[1]("Start a video conference")+"")&&T(r,o),(!s||u[0]&256)&&k(e,"href",f[8])},i(f){s||(v(n.$$.fragment,f),s=!0)},o(f){y(n.$$.fragment,f),s=!1},d(f){f&&$(e),H(n),l=!1,a()}}}function fh(t){let e,n,i,o,r,s,l,a=t[0].is("conversation"),f,u,d,p,h,_=At(t[1](t[9]))+"",g,E,b,C,M,D,L,A,R=a&&Vs(t);d=new $e({props:{name:t[10]}});const U=[ah,lh],B=[];function W(G,I){return I[0]&5&&(b=null),b==null&&(b=!!(G[2]==="actions"&&G[0].is("conversation"))),b?0:G[4].length?1:-1}return~(C=W(t,[-1,-1]))&&(M=B[C]=U[C](t)),{c(){e=m("form"),n=m("input"),i=S(),o=m("textarea"),r=S(),s=m("textarea"),l=S(),R&&R.c(),f=S(),u=m("button"),q(d.$$.fragment),p=S(),h=m("span"),g=O(_),E=S(),M&&M.c(),k(n,"type","file"),k(n,"id","upload_files"),k(n,"name","upload_files"),k(n,"class","non-interactive"),k(o,"class","non-interactive"),k(o,"placeholder",t[11]),k(s,"class","is-primary-input"),k(s,"placeholder",t[11]),k(h,"class","tooltip is-above is-left"),k(u,"type","buttton"),k(u,"class","btn-hallow has-tooltip chat-input__send"),k(e,"class","chat-input")},m(G,I){w(G,e,I),c(e,n),c(e,i),c(e,o),t[29](o),c(e,r),c(e,s),c(e,l),R&&R.m(e,null),c(e,f),c(e,u),z(d,u,null),c(u,p),c(u,h),c(h,g),c(e,E),~C&&B[C].m(e,null),D=!0,L||(A=[Te(window,"click",t[28]),Te(n,"change",function(){Ln(t[7])&&t[7].apply(this,arguments)}),Or(t[14].call(null,s)),Te(u,"click",t[17]),Te(e,"submit",st(t[27]))],L=!0)},p(G,I){t=G,(!D||I[0]&2048)&&k(o,"placeholder",t[11]),(!D||I[0]&2048)&&k(s,"placeholder",t[11]),I[0]&1&&(a=t[0].is("conversation")),a?R?(R.p(t,I),I[0]&1&&v(R,1)):(R=Vs(t),R.c(),v(R,1),R.m(e,f)):R&&(Oe(),y(R,1,1,()=>{R=null}),Ne());const K={};I[0]&1024&&(K.name=t[10]),d.$set(K),(!D||I[0]&514)&&_!==(_=At(t[1](t[9]))+"")&&T(g,_);let X=C;C=W(t,I),C===X?~C&&B[C].p(t,I):(M&&(Oe(),y(B[X],1,1,()=>{B[X]=null}),Ne()),~C?(M=B[C],M?M.p(t,I):(M=B[C]=U[C](t),M.c()),v(M,1),M.m(e,null)):M=null)},i(G){D||(v(R),v(d.$$.fragment,G),v(M),D=!0)},o(G){y(R),y(d.$$.fragment,G),y(M),D=!1},d(G){G&&$(e),t[29](null),R&&R.d(),H(d),~C&&B[C].d(),L=!1,ut(A)}}}function uh(t,e,n){let i,o,r,s,l,a,f,u,d=Re,p=()=>(d(),d=dt(g,se=>n(26,u=se)),g);Ce(t,ot,se=>n(1,f=se)),t.$$.on_destroy.push(()=>d());const h=re;let{uploadProgress:_=0}=e,{conversation:g}=e;p();let E="",b=0,C=[],M="none",D={y:-10,duration:200},L,A,R=0;const U=ht("user"),B=new uc;function W(se){const he=se.target.closest("a"),Ue=!he||E?"":he.href.replace(/.*#/,"");setTimeout(()=>{n(2,E=Ue)},1)}function G(se,he){const{before:Ue,middle:Le,after:_e}=oh(se,{...he,cursorPos:L.selectionStart,value:L.value});Y(Ue+Le+_e),L.selectionStart=L.selectionEnd=(Ue+Le).length}function I(){L&&L.focus()}function K(se,he){C.length&&(se.preventDefault(),n(3,b+=he),b<0&&n(3,b=C.length-1),b>=C.length&&n(3,b=0),G(C[b],{replace:!0}))}function X(se){!se.conversation_id&&g.conversation_id&&(se.conversation_id=g.conversation_id)}function J(se){n(3,b=0),n(22,R=se.selectionStart),g.update({userInput:se.value}),se.value.length||B.update({index:-1})}function N(se){L=se,L.addEventListener("focus",()=>n(22,R=L.value.length+1)),L.addEventListener("change",()=>J(L)),L.addEventListener("input",Z),L.addEventListener("keyup",he=>{(he.key.length===1||["ArrowLeft","ArrowRight","Backspace"].indexOf(he.key)!==-1)&&J(L)}),L.addEventListener("keydown",he=>{if(!(he.key==="ArrowDown"&&B.render(he,-1))&&!(he.key==="ArrowUp"&&B.render(he,1))){if(he.key==="ArrowDown")return K(he,he.shiftKey?4:1);if(he.key==="ArrowUp")return K(he,he.shiftKey?-4:-1);if(he.key==="Enter")return V(he);if(he.key==="Tab")return K(he,he.shiftKey?-1:1)}}),B.attach(L),Y(Be.undefined(g.userInput)?"":g.userInput)}function P(se){se.preventDefault(),sh.open(a,{nick:g.participants.me().nick});const he=g.messages.toArray().slice(-20).find(Ue=>Ue.message.indexOf(a)!==-1);he&&he.ts.toEpoch()>Ci()-600||g.send({method:"send",message:bo.conversationToExternalUrl(g)})}function Z(){A.maxHeight||n(6,A.maxHeight=A.parentNode.offsetHeight,A),n(6,A.value=L.value,A),n(6,A.style.width=L.offsetWidth+"px",A),L.style.height=(A.maxHeight>A.scrollHeight?A.scrollHeight:A.maxHeight)+"px"}function j(se){n(3,b=parseInt(se.target.closest("a").href.replace(/.*index:/,""),10)),G(C[b],{padAfter:!0,replace:!0}),setTimeout(()=>{J(L),L.focus()},1)}function V(se){if(C[b])se.preventDefault(),G(C[b],{replace:!0}),n(22,R=L.selectionStart+1);else if(!se.altKey&&!se.ctrlKey&&!se.metaKey&&!se.shiftKey){se.preventDefault();const Ue={method:"send"};Ue.message=ih(L.value),Ue.message.length&&g.send(Ue,X),B.add(Ue.message),g.is("search")||Y(""),setTimeout(Z,10)}}function Y(se){L&&(L.value=se),g.update({userInput:se})}function F(se){L&&(n(4,C=se>L.value.length?[]:rh(L.value,se,{conversation:g,user:U})),n(5,M=C.length&&C[0].autocompleteCategory||"none"))}function oe(se){oe.lock!==se.path&&(n(23,oe.lock=se.path,oe),Y(Be.undefined(se.userInput)?"":se.userInput))}function re(se){const he=se.target&&se.target.files||se.dataTransfer&&se.dataTransfer.files;if(!he||!he.length)return;if(he.length>1)return g.addMessages({message:"Cannot upload more than one file.",type:"error"});const Ue=new FormData;Ue.append("file",he[0]),n(7,re.file=he[0],re);const Le=et.op("uploadFile");Le.on("progress",_e=>{_<100&&n(18,_=parseInt(100*(_e.total?_e.loaded/_e.total:.02),10)),_>=100&&n(18,_=0)}),n(18,_=1),Le.perform({formData:Ue}).then(_e=>{const pe=_e.res.body;if(n(18,_=0),pe.files&&pe.files.length)return G(pe.files[0].url,{append:!0});pe.errors&&g.addMessages({message:"Could not upload file: %1",vars:[f(Rr(pe.errors))],type:"error"})})}function ne(se){In.call(this,t,se)}const de=()=>{n(2,E="")};function Se(se){be[se?"unshift":"push"](()=>{A=se,n(6,A)})}return t.$$set=se=>{"uploadProgress"in se&&n(18,_=se.uploadProgress),"conversation"in se&&p(n(0,g=se.conversation))},t.$$.update=()=>{t.$$.dirty[0]&1&&g&&n(2,E=""),t.$$.dirty[0]&1&&n(25,i=U.findConversation({connection_id:g.connection_id})),t.$$.dirty[0]&33554432&&n(24,o=i&&i.nick),t.$$.dirty[0]&50331651&&n(11,r=g.is("search")?f("What are you looking for?"):i&&i.is("unreachable")?f("Connecting..."):f("What is on your mind %1?",o)),t.$$.dirty[0]&1&&n(10,s=g.is("search")?"search":"paper-plane"),t.$$.dirty[0]&3&&n(9,l=g.is("search")?f("Search"):f("Send")),t.$$.dirty[0]&1&&n(8,a=bo.conversationToInternalUrl(g)),t.$$.dirty[0]&67108864&&B.update({conversation:u}),t.$$.dirty[0]&4194304&&F(R),t.$$.dirty[0]&8388609&&oe(g)},[g,f,E,b,C,M,A,re,a,l,s,r,D,W,N,P,j,V,_,h,G,I,R,oe,o,i,u,ne,de,Se]}class Mf extends Je{constructor(e){super(),Ze(this,e,uh,fh,Ye,{uploader:19,uploadProgress:18,conversation:0,fillIn:20,focus:21},null,[-1,-1])}get uploader(){return this.$$.ctx[19]}get fillIn(){return this.$$.ctx[20]}get focus(){return this.$$.ctx[21]}}const Xn={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",i:"invite_only",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",M:"login_to_talk",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",R:"login_to_join",s:"secret",S:"secure_connection_only",t:"topic_protection"};function di(t){return Xn[t]?Xn[t]:Object.keys(Xn).filter(e=>t===Xn[e])[0]||""}const Qs=["Members","Bots","Bots","Voiced","Half operators","Operators","Administrators","Founders"],ch={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",q:"founder",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function Xs(t,e,n){const i=t.slice();return i[5]=e[n],i}function ph(t){let e,n,i,o=t[1]("Settings")+"",r,s,l,a;return n=new $e({props:{name:"users-cog"}}),{c(){e=m("a"),q(n.$$.fragment),i=S(),r=O(o),k(e,"href","#settings")},m(f,u){w(f,e,u),z(n,e,null),c(e,i),c(e,r),s=!0,l||(a=Te(e,"click",$t.toggle),l=!0)},p(f,u){(!s||u&2)&&o!==(o=f[1]("Settings")+"")&&T(r,o)},i(f){s||(v(n.$$.fragment,f),s=!0)},o(f){y(n.$$.fragment,f),s=!1},d(f){f&&$(e),H(n),l=!1,a()}}}function dh(t){let e,n,i=t[3](t[2].toArray()),o=[];for(let s=0;s<i.length;s+=1)o[s]=xs(Xs(t,i,s));const r=s=>y(o[s],1,1,()=>{o[s]=null});return{c(){for(let s=0;s<o.length;s+=1)o[s].c();e=ct()},m(s,l){for(let a=0;a<o.length;a+=1)o[a].m(s,l);w(s,e,l),n=!0},p(s,l){if(l&14){i=s[3](s[2].toArray());let a;for(a=0;a<i.length;a+=1){const f=Xs(s,i,a);o[a]?(o[a].p(f,l),v(o[a],1)):(o[a]=xs(f),o[a].c(),v(o[a],1),o[a].m(e.parentNode,e))}for(Oe(),a=i.length;a<o.length;a+=1)r(a);Ne()}},i(s){if(!n){for(let l=0;l<i.length;l+=1)v(o[l]);n=!0}},o(s){o=o.filter(Boolean);for(let l=0;l<o.length;l+=1)y(o[l]);n=!1},d(s){wt(o,s),s&&$(e)}}}function hh(t){let e,n,i,o,r=t[5].nick+"",s,l,a,f;return n=new $e({props:{name:"pick:"+t[5].nick,family:"solid",color:t[5].color}}),{c(){e=m("a"),q(n.$$.fragment),i=S(),o=m("span"),s=O(r),l=S(),k(e,"href",a="#action:join:"+t[5].nick),k(e,"class","participant prevent-default")},m(u,d){w(u,e,d),z(n,e,null),c(e,i),c(e,o),c(o,s),c(e,l),f=!0},p(u,d){const p={};d&4&&(p.name="pick:"+u[5].nick),d&4&&(p.color=u[5].color),n.$set(p),(!f||d&4)&&r!==(r=u[5].nick+"")&&T(s,r),(!f||d&4&&a!==(a="#action:join:"+u[5].nick))&&k(e,"href",a)},i(u){f||(v(n.$$.fragment,u),f=!0)},o(u){y(n.$$.fragment,u),f=!1},d(u){u&&$(e),H(n)}}}function _h(t){let e,n=t[1](t[5].heading)+"",i;return{c(){e=m("h3"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&6&&n!==(n=o[1](o[5].heading)+"")&&T(i,n)},i:Re,o:Re,d(o){o&&$(e)}}}function xs(t){let e,n,i,o;const r=[_h,hh],s=[];function l(a,f){return a[5].heading?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=ct()},m(a,f){s[e].m(a,f),w(a,i,f),o=!0},p(a,f){let u=e;e=l(a),e===u?s[e].p(a,f):(Oe(),y(s[u],1,1,()=>{s[u]=null}),Ne(),n=s[e],n?n.p(a,f):(n=s[e]=r[e](a),n.c()),v(n,1),n.m(i.parentNode,i))},i(a){o||(v(n),o=!0)},o(a){y(n),o=!1},d(a){s[e].d(a),a&&$(i)}}}function mh(t){let e,n=t[1]("Participants (%1)",t[2].length)+"",i,o,r,s,l,a;const f=[dh,ph],u=[];function d(p,h){return p[2].length?0:1}return s=d(t),l=u[s]=f[s](t),{c(){e=m("h2"),i=O(n),o=S(),r=m("nav"),l.c(),k(e,"class","participants-heading"),k(r,"class","participants")},m(p,h){w(p,e,h),c(e,i),w(p,o,h),w(p,r,h),u[s].m(r,null),a=!0},p(p,[h]){(!a||h&6)&&n!==(n=p[1]("Participants (%1)",p[2].length)+"")&&T(i,n);let _=s;s=d(p),s===_?u[s].p(p,h):(Oe(),y(u[_],1,1,()=>{u[_]=null}),Ne(),l=u[s],l?l.p(p,h):(l=u[s]=f[s](p),l.c()),v(l,1),l.m(r,null))},i(p){a||(v(l),a=!0)},o(p){y(l),a=!1},d(p){p&&$(e),p&&$(o),p&&$(r),u[s].d()}}}function gh(t,e,n){let i,o,r,s=Re,l=()=>(s(),s=dt(i,u=>n(2,r=u)),i);Ce(t,ot,u=>n(1,o=u)),t.$$.on_destroy.push(()=>s());let{conversation:a}=e;function f(u){const d=[];let p=-1;for(const h of u)p!=h.group&&d.push({heading:Qs[h.group]||Qs[0]}),p=h.group,d.push(h);return d}return t.$$set=u=>{"conversation"in u&&n(4,a=u.conversation)},t.$$.update=()=>{t.$$.dirty&16&&l(n(0,i=a.participants))},[i,o,r,f,a]}class Rf extends Je{constructor(e){super(),Ze(this,e,gh,mh,Ye,{conversation:4})}}function bh(t){let e,n,i,o,r=t[3](t[2].topic?"Topic for %1 is: %2":"No topic is set for %1.",t[2].name,t[2].topic)+"",s,l,a,f,u;n=new $e({props:{name:"info-circle"}}),a=new $e({props:{name:"info-circle"}});function d(_,g){return _[4].length===1?wh:$h}let p=d(t),h=p(t);return{c(){e=m("p"),q(n.$$.fragment),i=S(),o=new Tt(!1),s=S(),l=m("p"),q(a.$$.fragment),f=S(),h.c(),o.a=null},m(_,g){w(_,e,g),z(n,e,null),c(e,i),o.m(r,e),w(_,s,g),w(_,l,g),z(a,l,null),c(l,f),h.m(l,null),u=!0},p(_,g){(!u||g&12)&&r!==(r=_[3](_[2].topic?"Topic for %1 is: %2":"No topic is set for %1.",_[2].name,_[2].topic)+"")&&o.p(r),p===(p=d(_))&&h?h.p(_,g):(h.d(1),h=p(_),h&&(h.c(),h.m(l,null)))},i(_){u||(v(n.$$.fragment,_),v(a.$$.fragment,_),u=!0)},o(_){y(n.$$.fragment,_),y(a.$$.fragment,_),u=!1},d(_){_&&$(e),H(n),_&&$(s),_&&$(l),H(a),h.d()}}}function vh(t){let e,n,i,o,r=t[3]('This is a private conversation with "%1".',t[2].name)+"",s;return n=new $e({props:{name:"info-circle"}}),{c(){e=m("p"),q(n.$$.fragment),i=S(),o=new Tt(!1),o.a=null},m(l,a){w(l,e,a),z(n,e,null),c(e,i),o.m(r,e),s=!0},p(l,a){(!s||a&12)&&r!==(r=l[3]('This is a private conversation with "%1".',l[2].name)+"")&&o.p(r)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function $h(t){let e,n=t[3]("There are %1 participants in this conversation.",t[4].length)+"",i;return{c(){e=new Tt(!1),i=ct(),e.a=i},m(o,r){e.m(n,o,r),w(o,i,r)},p(o,r){r&24&&n!==(n=o[3]("There are %1 participants in this conversation.",o[4].length)+"")&&e.p(n)},d(o){o&&$(i),o&&e.d()}}}function wh(t){let e=t[5]("You are the only participant in this conversation.")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&32&&e!==(e=i[5]("You are the only participant in this conversation.")+"")&&T(n,e)},d(i){i&&$(n)}}}function kh(t){let e,n,i,o,r;const s=[vh,bh],l=[];function a(f,u){return u&4&&(e=null),e==null&&(e=!!f[2].is("private")),e?0:f[2].frozen?-1:1}return~(n=a(t,-1))&&(i=l[n]=s[n](t)),{c(){i&&i.c(),o=ct()},m(f,u){~n&&l[n].m(f,u),w(f,o,u),r=!0},p(f,[u]){let d=n;n=a(f,u),n===d?~n&&l[n].p(f,u):(i&&(Oe(),y(l[d],1,1,()=>{l[d]=null}),Ne()),~n?(i=l[n],i?i.p(f,u):(i=l[n]=s[n](f),i.c()),v(i,1),i.m(o.parentNode,o)):i=null)},i(f){r||(v(i),r=!0)},o(f){y(i),r=!1},d(f){~n&&l[n].d(f),f&&$(o)}}}function yh(t,e,n){let i,o,r=Re,s=()=>(r(),r=dt(p,h=>n(2,o=h)),p),l,a,f=Re,u=()=>(f(),f=dt(i,h=>n(4,a=h)),i),d;Ce(t,Bt,h=>n(3,l=h)),Ce(t,ot,h=>n(5,d=h)),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>f());let{conversation:p}=e;return s(),t.$$set=h=>{"conversation"in h&&s(n(0,p=h.conversation))},t.$$.update=()=>{t.$$.dirty&1&&u(n(1,i=p.participants))},[p,i,o,l,a,d]}class Sh extends Je{constructor(e){super(),Ze(this,e,yh,kh,Ye,{conversation:0})}}const Eh={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},el={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},Ch=t=>!!String(t||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/);class vt extends Date{constructor(e){typeof e=="string"&&!e.match(/Z$/)&&(e+="Z"),super(e||new Date)}format(e){return e.replace(/%(\w)/g,(n,i)=>el[i]?this[el[i]]():i)}getHumanDate(e={}){let n=this.format("%b %e");const i=new vt;return(!(this.getYear()===i.getYear())||e.year)&&(n+=", "+this.getFullYear()),n}setDate(e,n){return[n?super.setUTCDate(e):super.setDate(e),this][1]}setFullYear(e,n){return[n?super.setUTCFullYear(e):super.setFullYear(e),this][1]}setHours(e,n){return[n?super.setUTCHours(e):super.setHours(e),this][1]}setMilliseconds(e,n){return[n?super.setUTCMilliseconds(e):super.setMilliseconds(e),this][1]}setMinutes(e,n){return[n?super.setUTCMinutes(e):super.setMinutes(e),this][1]}setMonth(e,n){return[n?super.setUTCMonth(e):super.setMonth(e),this][1]}setSeconds(e,n){return[n?super.setUTCSeconds(e):super.setSeconds(e),this][1]}setTime(e){return[super.setTime(e),this][1]}setYear(e){return[this.setYear(e),this][1]}toEpoch(){return this.getTime()/1e3}_getMonthAbbr(){return Eh[this.getMonth()]||""}_getPaddedHours(){return String(this.getHours()).padStart(2,"0")}_getPaddedMinutes(){return String(this.getMinutes()).padStart(2,"0")}_getPaddedSeconds(){return String(this.getSeconds()).padStart(2,"0")}}function Ah(t){let e,n,i,o,r,s,l;n=new $e({props:{animation:t[2],name:t[4]}});const a=t[13].default,f=qt(a,t,t[12],null);return{c(){e=m("button"),q(n.$$.fragment),i=S(),f&&f.c(),k(e,"class",o=t[3].join(" ")),e.disabled=t[5],k(e,"type",t[1])},m(u,d){w(u,e,d),z(n,e,null),c(e,i),f&&f.m(e,null),r=!0,s||(l=Te(e,"click",t[14]),s=!0)},p(u,[d]){const p={};d&4&&(p.animation=u[2]),d&16&&(p.name=u[4]),n.$set(p),f&&f.p&&(!r||d&4096)&&Gt(f,a,u,u[12],r?Wt(a,u[12],d,null):Kt(u[12]),null),(!r||d&8&&o!==(o=u[3].join(" ")))&&k(e,"class",o),(!r||d&32)&&(e.disabled=u[5]),(!r||d&2)&&k(e,"type",u[1])},i(u){r||(v(n.$$.fragment,u),v(f,u),r=!0)},o(u){y(n.$$.fragment,u),y(f,u),r=!1},d(u){u&&$(e),H(n),f&&f.d(u),s=!1,l()}}}const Oh=500;function Nh(t,e,n){let i,o,r=Re,s=()=>(r(),r=dt(E,L=>n(11,o=L)),E);t.$$.on_destroy.push(()=>r());let{$$slots:l={},$$scope:a}=e,f="",{class:u=""}=e,d=[],p=!1,h=0,{disabled:_=!1}=e,{icon:g=""}=e,{op:E=new Eo({api:!1,id:""})}=e;s();let{type:b=""}=e,C=g;function M(L){L&&n(10,h=new vt().toEpoch()),n(2,f=L?"spin":""),n(4,C=L?"spinner":g),n(9,p=L)}function D(L){In.call(this,t,L)}return t.$$set=L=>{"class"in L&&n(6,u=L.class),"disabled"in L&&n(7,_=L.disabled),"icon"in L&&n(8,g=L.icon),"op"in L&&s(n(0,E=L.op)),"type"in L&&n(1,b=L.type),"$$scope"in L&&n(12,a=L.$$scope)},t.$$.update=()=>{t.$$.dirty&2048&&o.is("loading")&&M(!0),t.$$.dirty&3072&&(o.is("loading")||setTimeout(()=>M(!1),Oh-(new vt().toEpoch()-h))),t.$$.dirty&320&&n(3,d=["btn","for-"+(g||"default")].concat(u)),t.$$.dirty&640&&n(5,i=_||p)},[E,b,f,d,C,i,u,_,g,p,h,o,a,l,D]}class ft extends Je{constructor(e){super(),Ze(this,e,Nh,Ah,Ye,{class:6,disabled:7,icon:8,op:0,type:1})}}const Th=t=>({}),tl=t=>({});function Mh(t){let e,n,i,o,r,s,l,a,f;r=new $e({props:{family:"regular",name:t[7]}});const u=t[11].label,d=qt(u,t,t[10],tl);return{c(){e=m("label"),n=m("input"),o=S(),q(r.$$.fragment),s=S(),d&&d.c(),k(n,"type","checkbox"),k(n,"id",t[5]),k(n,"name",t[4]),n.checked=i=!!t[0],n.disabled=t[2],k(e,"class","checkbox"),e.hidden=t[3],Qe(e,"has-badge",t[1]),Qe(e,"has-focus",t[6]),Qe(e,"is-disabled",t[2])},m(p,h){w(p,e,h),c(e,n),c(e,o),z(r,e,null),c(e,s),d&&d.m(e,null),l=!0,a||(f=[Te(n,"blur",t[12]),Te(n,"change",t[13]),Te(n,"focus",t[14])],a=!0)},p(p,[h]){(!l||h&32)&&k(n,"id",p[5]),(!l||h&16)&&k(n,"name",p[4]),(!l||h&1&&i!==(i=!!p[0]))&&(n.checked=i),(!l||h&4)&&(n.disabled=p[2]);const _={};h&128&&(_.name=p[7]),r.$set(_),d&&d.p&&(!l||h&1024)&&Gt(d,u,p,p[10],l?Wt(u,p[10],h,Th):Kt(p[10]),tl),(!l||h&8)&&(e.hidden=p[3]),(!l||h&2)&&Qe(e,"has-badge",p[1]),(!l||h&64)&&Qe(e,"has-focus",p[6]),(!l||h&4)&&Qe(e,"is-disabled",p[2])},i(p){l||(v(r.$$.fragment,p),v(d,p),l=!0)},o(p){y(r.$$.fragment,p),y(d,p),l=!1},d(p){p&&$(e),H(r),d&&d.d(p),a=!1,ut(f)}}}function Rh(t,e,n){let i,o,{$$slots:r={},$$scope:s}=e,{badge:l=!1}=e,{disabled:a=!1}=e,{hidden:f=!1}=e,{icon:u="square"}=e,{name:d=""}=e,{id:p=d?"form_"+d:So()}=e,{value:h}=e,_=!1;const g=()=>{n(6,_=!1)},E=C=>{n(0,h=C.target.checked)},b=()=>{n(6,_=!0)};return t.$$set=C=>{"badge"in C&&n(1,l=C.badge),"disabled"in C&&n(2,a=C.disabled),"hidden"in C&&n(3,f=C.hidden),"icon"in C&&n(8,u=C.icon),"name"in C&&n(4,d=C.name),"id"in C&&n(5,p=C.id),"value"in C&&n(0,h=C.value),"$$scope"in C&&n(10,s=C.$$scope)},t.$$.update=()=>{t.$$.dirty&256&&n(9,i=u==="caret"?["caret-square-down","caret-square-up"]:["square","check-square"]),t.$$.dirty&513&&n(7,o=i[h?1:0])},[h,l,a,f,d,p,_,o,u,i,s,r,g,E,b]}class nt extends Je{constructor(e){super(),Ze(this,e,Rh,Mh,Ye,{badge:1,disabled:2,hidden:3,icon:8,name:4,id:5,value:0})}}class hn{constructor(e="http://localhost"){this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:()=>this._url.href.replace(/^http:/,this.protocol),set:n=>{this._url.href=n.replace(/^\w+:/,"http:"),this.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach(n=>{Object.defineProperty(this,n,{get:()=>this._url[n],set:i=>{this._url[n]=i}})}),this.href=e}fromFields(e){Be.string(e.protocol)&&(this.protocol=e.protocol.replace(/:?$/,":")),Be.string(e.host)&&(this.host=e.host),Be.string(e.password)&&(this.password=encodeURIComponent(e.password)),Be.string(e.username)&&(this.username=encodeURIComponent(e.username)),Be.string(e.conversation_id)&&(this.pathname=encodeURIComponent(e.conversation_id));const n=this.searchParams;return Be.string(e.local_address)&&n.append("local_address",e.local_address||""),Be.string(e.nick)&&n.append("nick",e.nick.trim()),Be.string(e.realname)&&e.realname.length&&n.append("realname",e.realname.trim()),Be.string(e.sasl)&&n.append("sasl",e.sasl||"none"),n.append("tls",Be.true(e.tls)?"1":"0"),n.append("tls_verify",Be.true(e.tls)&&Be.true(e.tls_verify)?"1":"0"),this}toFields(e={}){e.protocol=this.protocol.replace(/:$/,""),e.host=this.host,e.password=Be.string(this.password)?decodeURIComponent(this.password):"",e.username=Be.string(this.username)?decodeURIComponent(this.username):"",e.conversation_id=decodeURIComponent(this.pathname.split("/").filter(i=>i.length)[0]||"");const n=this.searchParams;return e.local_address=n.get("local_address")||e.local_address||"",e.nick=n.get("nick")||e.nick||"",e.realname=n.get("realname")||e.realname||"",e.sasl=n.get("sasl")||e.sasl||"none",e.realname=n.get("realname")||e.realname||"",e.tls=Be.true(n.get("tls")),e.tls_verify=Be.true(n.get("tls_verify")),e}toString(){return this.href.replace(/^http:/,this.protocol)}}function Lh(t){let e,n=t[4](t[1])+"",i,o,r;return{c(){e=m("div"),i=O(n),k(e,"class","success")},m(s,l){w(s,e,l),c(e,i),r=!0},p(s,l){(!r||l&18)&&n!==(n=s[4](s[1])+"")&&T(i,n)},i(s){r||(at(()=>{o||(o=tt(e,Dt,{},!0)),o.run(1)}),r=!0)},o(s){o||(o=tt(e,Dt,{},!1)),o.run(0),r=!1},d(s){s&&$(e),s&&o&&o.end()}}}function Ih(t){let e,n=t[4](t[2].error())+"",i,o,r;return{c(){e=m("div"),i=O(n),k(e,"class","error")},m(s,l){w(s,e,l),c(e,i),r=!0},p(s,l){(!r||l&20)&&n!==(n=s[4](s[2].error())+"")&&T(i,n)},i(s){r||(at(()=>{o||(o=tt(e,Dt,{},!0)),o.run(1)}),r=!0)},o(s){o||(o=tt(e,Dt,{},!1)),o.run(0),r=!1},d(s){s&&$(e),s&&o&&o.end()}}}function Ph(t){let e,n,i,o,r,s;const l=[Ih,Lh],a=[];function f(u,d){return d&4&&(e=null),d&12&&(n=null),e==null&&(e=!!u[2].is("error")),e?0:(n==null&&(n=!!(u[2].is("success")&&u[3])),n?1:-1)}return~(i=f(t,-1))&&(o=a[i]=l[i](t)),{c(){o&&o.c(),r=ct()},m(u,d){~i&&a[i].m(u,d),w(u,r,d),s=!0},p(u,[d]){let p=i;i=f(u,d),i===p?~i&&a[i].p(u,d):(o&&(Oe(),y(a[p],1,1,()=>{a[p]=null}),Ne()),~i?(o=a[i],o?o.p(u,d):(o=a[i]=l[i](u),o.c()),v(o,1),o.m(r.parentNode,r)):o=null)},i(u){s||(v(o),s=!0)},o(u){y(o),s=!1},d(u){~i&&a[i].d(u),u&&$(r)}}}function Dh(t,e,n){let i,o=Re,r=()=>(o(),o=dt(l,p=>n(2,i=p)),l),s;Ce(t,ot,p=>n(4,s=p)),t.$$.on_destroy.push(()=>o());let{op:l=new Eo({})}=e;r();let{success:a="Saved."}=e,f=!1,u;Tr(()=>u&&clearTimeout(u));function d(p){if(!p.is("success"))return n(3,f=!1);f||(n(3,f=!0),u=setTimeout(()=>n(3,f=!1),2e3))}return t.$$set=p=>{"op"in p&&r(n(0,l=p.op)),"success"in p&&n(1,a=p.success)},t.$$.update=()=>{t.$$.dirty&4&&d(i)},[l,a,i,f,s]}class Mt extends Je{constructor(e){super(),Ze(this,e,Dh,Ph,Ye,{op:0,success:1})}}function nl(t,e,n){const i=t.slice();return i[26]=e[n],i[28]=n,i}const Uh=t=>({}),il=t=>({});function Bh(t){let e;return{c(){e=O("Label")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function ol(t){let e,n=(t[26].length>1?t[26][1]:t[26][0])+"",i,o,r,s;function l(){return t[20](t[28])}function a(){return t[21](t[28])}return{c(){e=m("a"),i=O(n),k(e,"href",o="#"+t[28]+":"+t[26][0]),k(e,"class","select-field__option"),k(e,"tabindex","-1"),Qe(e,"is-active",t[28]===t[8])},m(f,u){w(f,e,u),c(e,i),r||(s=[Te(e,"focus",l),Te(e,"mouseover",a)],r=!0)},p(f,u){t=f,u&512&&n!==(n=(t[26].length>1?t[26][1]:t[26][0])+"")&&T(i,n),u&512&&o!==(o="#"+t[28]+":"+t[26][0])&&k(e,"href",o),u&256&&Qe(e,"is-active",t[28]===t[8])},d(f){f&&$(e),r=!1,ut(s)}}}function Fh(t){let e,n,i,o,r,s,l,a,f,u,d;const p=t[17].label,h=qt(p,t,t[16],il),_=h||Bh();let g=t[9],E=[];for(let b=0;b<g.length;b+=1)E[b]=ol(nl(t,g,b));return{c(){e=m("div"),n=m("label"),_&&_.c(),i=S(),o=m("input"),r=S(),s=m("input"),l=S(),a=m("div");for(let b=0;b<E.length;b+=1)E[b].c();k(n,"for",t[3]),k(o,"type","hidden"),k(o,"name",t[2]),k(s,"type","text"),k(s,"id",t[3]),k(s,"autocomplete","off"),k(s,"placeholder",t[4]),s.readOnly=t[5],k(a,"class","select-field__options"),k(e,"class","select-field text-field"),e.hidden=t[1],Qe(e,"is-open",t[7]),Qe(e,"is-readonly",t[5])},m(b,C){w(b,e,C),c(e,n),_&&_.m(n,null),c(e,i),c(e,o),Ct(o,t[0]),c(e,r),c(e,s),t[19](s),c(e,l),c(e,a);for(let M=0;M<E.length;M+=1)E[M].m(a,null);f=!0,u||(d=[Te(o,"input",t[18]),Te(o,"keydown",t[11]),Te(s,"blur",t[10]),Te(s,"keydown",t[11]),Te(s,"keyup",t[12]),Te(s,"click",st(t[13])),Te(a,"click",st(t[13]))],u=!0)},p(b,[C]){if(h&&h.p&&(!f||C&65536)&&Gt(h,p,b,b[16],f?Wt(p,b[16],C,Uh):Kt(b[16]),il),(!f||C&8)&&k(n,"for",b[3]),(!f||C&4)&&k(o,"name",b[2]),C&1&&Ct(o,b[0]),(!f||C&8)&&k(s,"id",b[3]),(!f||C&16)&&k(s,"placeholder",b[4]),(!f||C&32)&&(s.readOnly=b[5]),C&768){g=b[9];let M;for(M=0;M<g.length;M+=1){const D=nl(b,g,M);E[M]?E[M].p(D,C):(E[M]=ol(D),E[M].c(),E[M].m(a,null))}for(;M<E.length;M+=1)E[M].d(1);E.length=g.length}(!f||C&2)&&(e.hidden=b[1]),(!f||C&128)&&Qe(e,"is-open",b[7]),(!f||C&32)&&Qe(e,"is-readonly",b[5])},i(b){f||(v(_,b),f=!0)},o(b){y(_,b),f=!1},d(b){b&&$(e),_&&_.d(b),t[19](null),wt(E,b),u=!1,ut(d)}}}function jh(t,e,n){let{$$slots:i={},$$scope:o}=e,r=0,s,l=!1,a="",f=[],{hidden:u=!1}=e,{name:d=""}=e,{id:p=d?"form_"+d:So()}=e,{options:h}=e,{placeholder:_=""}=e,{readonly:g=!1}=e,{value:E}=e;const b=["ArrowDown","ArrowUp","Enter"];function C(){setTimeout(()=>document.activeElement.closest(".select-field__option")||n(7,l=!1),100),R(E)}function M(K,X){let J=new RegExp("(?:^|\\s|-)"+ci(X),"i"),N=K.filter(P=>String(P[0])===X);N.length||(N=K.filter(P=>P[0].match(J)));for(let P=0;P<K.length;P++){const Z=K[P];Z.length>1&&N.indexOf(Z)===-1&&Z[1].match(J)&&N.push(Z)}n(8,r=0),n(9,f=N)}function D(K){if(b.indexOf(K.key)!==-1&&K.preventDefault(),K.key==="Tab"){l&&A(K);return}if(!l)return U(K);K.key==="ArrowDown"&&n(8,r++,r),K.key==="ArrowUp"&&n(8,r--,r),K.key==="Enter"&&A(K),r>=h.length&&n(8,r=0),r<0&&n(8,r=h.length-1)}function L(K){(K.key.length===1||K.key==="Backspace")&&n(15,a=s.value)}function A(K){let X;if(K.type==="keydown")X=f.length&&f[r]||h.filter(J=>J[0]===E)[0];else{const J=_r(K.target,".select-field__option").href.replace(/^.*?#\d+:/,"");X=f.filter(N=>String(N[0])===J)[0]||[]}(!X||!X.length)&&(X=[""]),n(0,E=X[0]),n(7,l=!1)}function R(K){const X=f.filter(J=>String(J[0])===K)[0]||[];n(6,s.value=X.length>1?X[1]:X.length?X[0]:K,s)}function U(K){if(g)return;const X=K&&K.target&&_r(K.target,".select-field__option");return l||(n(8,r=f.map(J=>J[0]).indexOf(E)),s.setSelectionRange(0,9999)),X?A(K):n(7,l=!l)}function B(){E=this.value,n(0,E)}function W(K){be[K?"unshift":"push"](()=>{s=K,n(6,s),n(14,h),n(0,E)})}const G=K=>{n(8,r=K)},I=K=>{n(8,r=K)};return t.$$set=K=>{"hidden"in K&&n(1,u=K.hidden),"name"in K&&n(2,d=K.name),"id"in K&&n(3,p=K.id),"options"in K&&n(14,h=K.options),"placeholder"in K&&n(4,_=K.placeholder),"readonly"in K&&n(5,g=K.readonly),"value"in K&&n(0,E=K.value),"$$scope"in K&&n(16,o=K.$$scope)},t.$$.update=()=>{if(t.$$.dirty&128&&l===!1&&n(15,a=""),t.$$.dirty&49152&&M(h,a),t.$$.dirty&16449&&s&&!s.value&&s!==document.activeElement){const K=h.find(X=>X[0]===E);K&&n(6,s.value=K[1]||K[0],s)}t.$$.dirty&65&&s&&R(E)},[E,u,d,p,_,g,s,l,r,f,C,D,L,U,h,a,o,i,B,W,G,I]}class xn extends Je{constructor(e){super(),Ze(this,e,jh,Fh,Ye,{hidden:1,name:2,id:3,options:14,placeholder:4,readonly:5,value:0})}}const zh=t=>({}),rl=t=>({});function Hh(t){let e;return{c(){e=O("Label")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function qh(t){let e,n,i,o,r,s,l;const a=t[7].label,f=qt(a,t,t[6],rl),u=f||Hh();return{c(){e=m("div"),n=m("label"),u&&u.c(),i=S(),o=m("textarea"),k(n,"for",t[3]),k(o,"id",t[3]),k(o,"name",t[2]),k(o,"placeholder",t[4]),o.readOnly=t[5],k(e,"class","text-area"),e.hidden=t[1]},m(d,p){w(d,e,p),c(e,n),u&&u.m(n,null),c(e,i),c(e,o),Ct(o,t[0]),r=!0,s||(l=Te(o,"input",t[8]),s=!0)},p(d,[p]){f&&f.p&&(!r||p&64)&&Gt(f,a,d,d[6],r?Wt(a,d[6],p,zh):Kt(d[6]),rl),(!r||p&8)&&k(n,"for",d[3]),(!r||p&8)&&k(o,"id",d[3]),(!r||p&4)&&k(o,"name",d[2]),(!r||p&16)&&k(o,"placeholder",d[4]),(!r||p&32)&&(o.readOnly=d[5]),p&1&&Ct(o,d[0]),(!r||p&2)&&(e.hidden=d[1])},i(d){r||(v(u,d),r=!0)},o(d){y(u,d),r=!1},d(d){d&&$(e),u&&u.d(d),s=!1,l()}}}function Wh(t,e,n){let{$$slots:i={},$$scope:o}=e,{hidden:r=!1}=e,{name:s=""}=e,{id:l=s?"form_"+s:So()}=e,{placeholder:a=""}=e,{readonly:f=!1}=e,{value:u}=e;function d(){u=this.value,n(0,u)}return t.$$set=p=>{"hidden"in p&&n(1,r=p.hidden),"name"in p&&n(2,s=p.name),"id"in p&&n(3,l=p.id),"placeholder"in p&&n(4,a=p.placeholder),"readonly"in p&&n(5,f=p.readonly),"value"in p&&n(0,u=p.value),"$$scope"in p&&n(6,o=p.$$scope)},[u,r,s,l,a,f,o,i,d]}class Lf extends Je{constructor(e){super(),Ze(this,e,Wh,qh,Ye,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0})}}const Gh=t=>({}),sl=t=>({}),Kh=t=>({}),ll=t=>({});function Yh(t){let e;return{c(){e=O("Label")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function al(t){let e,n,i,o,r;return n=new $e({props:{name:t[8]?"eye-slash":"eye"}}),{c(){e=m("a"),q(n.$$.fragment),k(e,"href","#toggle"),k(e,"class","text-field__toggle")},m(s,l){w(s,e,l),z(n,e,null),i=!0,o||(r=Te(e,"click",st(t[13])),o=!0)},p(s,l){const a={};l&256&&(a.name=s[8]?"eye-slash":"eye"),n.$set(a)},i(s){i||(v(n.$$.fragment,s),i=!0)},o(s){y(n.$$.fragment,s),i=!1},d(s){s&&$(e),H(n),o=!1,r()}}}function Vh(t){let e,n,i,o,r,s,l,a,f,u;const d=t[11].label,p=qt(d,t,t[10],ll),h=p||Yh();let _=t[7]==="password"&&!t[6]&&al(t);const g=t[11].help,E=qt(g,t,t[10],sl);return{c(){e=m("div"),n=m("label"),h&&h.c(),i=S(),o=m("input"),s=S(),_&&_.c(),l=S(),E&&E.c(),k(n,"for",t[4]),k(o,"type",r=t[8]?"text":t[7]),k(o,"id",t[4]),k(o,"name",t[3]),k(o,"autocomplete",t[1]),k(o,"placeholder",t[5]),o.readOnly=t[6],o.value=t[0],k(e,"class","text-field"),e.hidden=t[2],Qe(e,"has-password",t[7]==="password")},m(b,C){w(b,e,C),c(e,n),h&&h.m(n,null),c(e,i),c(e,o),c(e,s),_&&_.m(e,null),w(b,l,C),E&&E.m(b,C),a=!0,f||(u=[Te(o,"input",t[9]),Te(o,"keyup",t[12])],f=!0)},p(b,[C]){p&&p.p&&(!a||C&1024)&&Gt(p,d,b,b[10],a?Wt(d,b[10],C,Kh):Kt(b[10]),ll),(!a||C&16)&&k(n,"for",b[4]),(!a||C&384&&r!==(r=b[8]?"text":b[7]))&&k(o,"type",r),(!a||C&16)&&k(o,"id",b[4]),(!a||C&8)&&k(o,"name",b[3]),(!a||C&2)&&k(o,"autocomplete",b[1]),(!a||C&32)&&k(o,"placeholder",b[5]),(!a||C&64)&&(o.readOnly=b[6]),(!a||C&1&&o.value!==b[0])&&(o.value=b[0]),b[7]==="password"&&!b[6]?_?(_.p(b,C),C&192&&v(_,1)):(_=al(b),_.c(),v(_,1),_.m(e,null)):_&&(Oe(),y(_,1,1,()=>{_=null}),Ne()),(!a||C&4)&&(e.hidden=b[2]),(!a||C&128)&&Qe(e,"has-password",b[7]==="password"),E&&E.p&&(!a||C&1024)&&Gt(E,g,b,b[10],a?Wt(g,b[10],C,Gh):Kt(b[10]),sl)},i(b){a||(v(h,b),v(_),v(E,b),a=!0)},o(b){y(h,b),y(_),y(E,b),a=!1},d(b){b&&$(e),h&&h.d(b),_&&_.d(),b&&$(l),E&&E.d(b),f=!1,ut(u)}}}function Zh(t,e,n){let{$$slots:i={},$$scope:o}=e,r=!1,{autocomplete:s=null}=e,{hidden:l=!1}=e,{name:a=""}=e,{id:f=a?"form_"+a:So()}=e,{placeholder:u=""}=e,{readonly:d=!1}=e,{type:p="text"}=e,{value:h}=e;function _(b){n(0,h=p.match(/^(number|range)$/)?parseInt(b.target.value,10):b.target.value)}function g(b){In.call(this,t,b)}const E=()=>{n(8,r=!r)};return t.$$set=b=>{"autocomplete"in b&&n(1,s=b.autocomplete),"hidden"in b&&n(2,l=b.hidden),"name"in b&&n(3,a=b.name),"id"in b&&n(4,f=b.id),"placeholder"in b&&n(5,u=b.placeholder),"readonly"in b&&n(6,d=b.readonly),"type"in b&&n(7,p=b.type),"value"in b&&n(0,h=b.value),"$$scope"in b&&n(10,o=b.$$scope)},[h,s,l,a,f,u,d,p,r,_,o,i,g,E]}class Ve extends Je{constructor(e){super(),Ze(this,e,Zh,Vh,Ye,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0})}}function Jh(t){let e,n=t[5]("Host and port")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Host and port")+"")&&T(i,n)},d(o){o&&$(e)}}}function Qh(t){let e,n=t[5]("You cannot create custom connections.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help"),e.hidden=!t[7].forced_connection},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("You cannot create custom connections.")+"")&&T(i,n)},d(o){o&&$(e)}}}function Xh(t){let e,n=t[5]("Nickname")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Nickname")+"")&&T(i,n)},d(o){o&&$(e)}}}function xh(t){let e,n=t[5]("Your name")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Your name")+"")&&T(i,n)},d(o){o&&$(e)}}}function e_(t){let e,n,i;function o(s){t[19](s)}let r={name:"conversation_id",placeholder:t[5]("Ex: #convos"),$$slots:{label:[n_]},$$scope:{ctx:t}};return t[2].conversation_id!==void 0&&(r.value=t[2].conversation_id),e=new Ve({props:r}),be.push(()=>ye(e,"value",o,t[2].conversation_id)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32&&(a.placeholder=s[5]("Ex: #convos")),l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].conversation_id,ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function t_(t){let e,n,i;function o(s){t[18](s)}let r={name:"want_to_be_connected",$$slots:{label:[i_]},$$scope:{ctx:t}};return t[2].want_to_be_connected!==void 0&&(r.value=t[2].want_to_be_connected),e=new nt({props:r}),be.push(()=>ye(e,"value",o,t[2].want_to_be_connected)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].want_to_be_connected,ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function n_(t){let e,n=t[5]("Conversation name")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Conversation name")+"")&&T(i,n)},d(o){o&&$(e)}}}function i_(t){let e,n=t[5]("Want to be connected")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Want to be connected")+"")&&T(i,n)},d(o){o&&$(e)}}}function o_(t){let e,n=t[5]("Secure connection (TLS)")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Secure connection (TLS)")+"")&&T(i,n)},d(o){o&&$(e)}}}function r_(t){let e,n=t[5]("Verify certificate (TLS)")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Verify certificate (TLS)")+"")&&T(i,n)},d(o){o&&$(e)}}}function s_(t){let e,n=t[5]("Advanced settings")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Advanced settings")+"")&&T(i,n)},d(o){o&&$(e)}}}function fl(t){let e,n,i,o,r,s;function l(u){t[23](u)}let a={name:"on_connect_commands",placeholder:t[5]("Put each command on a new line."),$$slots:{label:[l_]},$$scope:{ctx:t}};t[2].on_connect_commands!==void 0&&(a.value=t[2].on_connect_commands),n=new Lf({props:a}),be.push(()=>ye(n,"value",l,t[2].on_connect_commands));let f=!t[7].forced_connection&&a_(t);return{c(){e=m("div"),q(n.$$.fragment),o=S(),f&&f.c(),k(e,"class","form-group")},m(u,d){w(u,e,d),z(n,e,null),c(e,o),f&&f.m(e,null),s=!0},p(u,d){const p={};d[0]&32&&(p.placeholder=u[5]("Put each command on a new line.")),d[0]&32|d[1]&16&&(p.$$scope={dirty:d,ctx:u}),!i&&d[0]&4&&(i=!0,p.value=u[2].on_connect_commands,ke(()=>i=!1)),n.$set(p),u[7].forced_connection||f.p(u,d)},i(u){s||(v(n.$$.fragment,u),v(f),at(()=>{r||(r=tt(e,li,{duration:150},!0)),r.run(1)}),s=!0)},o(u){y(n.$$.fragment,u),y(f),r||(r=tt(e,li,{duration:150},!1)),r.run(0),s=!1},d(u){u&&$(e),H(n),f&&f.d(),u&&r&&r.end()}}}function l_(t){let e,n=t[5]("On-connect commands")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("On-connect commands")+"")&&T(i,n)},d(o){o&&$(e)}}}function a_(t){let e,n,i;function o(s){t[24](s)}let r={name:"local_address",$$slots:{help:[u_],label:[f_]},$$scope:{ctx:t}};return t[2].local_address!==void 0&&(r.value=t[2].local_address),e=new Ve({props:r}),be.push(()=>ye(e,"value",o,t[2].local_address)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].local_address,ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function f_(t){let e,n=t[5]("Source IP")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Source IP")+"")&&T(i,n)},d(o){o&&$(e)}}}function u_(t){let e,n=t[5]("Leave this blank, unless you know what you are doing.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Leave this blank, unless you know what you are doing.")+"")&&T(i,n)},d(o){o&&$(e)}}}function c_(t){let e,n,i,o,r;function s(f){t[25](f)}let l={icon:"caret",name:"show_auth_settings",$$slots:{label:[p_]},$$scope:{ctx:t}};t[4]!==void 0&&(l.value=t[4]),e=new nt({props:l}),be.push(()=>ye(e,"value",s,t[4]));let a=t[4]&&ul(t);return{c(){q(e.$$.fragment),i=S(),a&&a.c(),o=ct()},m(f,u){z(e,f,u),w(f,i,u),a&&a.m(f,u),w(f,o,u),r=!0},p(f,u){const d={};u[0]&32|u[1]&16&&(d.$$scope={dirty:u,ctx:f}),!n&&u[0]&16&&(n=!0,d.value=f[4],ke(()=>n=!1)),e.$set(d),f[4]?a?(a.p(f,u),u[0]&16&&v(a,1)):(a=ul(f),a.c(),v(a,1),a.m(o.parentNode,o)):a&&(Oe(),y(a,1,1,()=>{a=null}),Ne())},i(f){r||(v(e.$$.fragment,f),v(a),r=!0)},o(f){y(e.$$.fragment,f),y(a),r=!1},d(f){H(e,f),f&&$(i),a&&a.d(f),f&&$(o)}}}function p_(t){let e,n=t[5]("Authentication settings")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Authentication settings")+"")&&T(i,n)},d(o){o&&$(e)}}}function ul(t){let e,n,i,o,r,s,l,a,f,u,d;function p(M){t[26](M)}let h={name:"username",placeholder:t[2].nick,$$slots:{help:[h_],label:[d_]},$$scope:{ctx:t}};t[2].username!==void 0&&(h.value=t[2].username),n=new Ve({props:h}),be.push(()=>ye(n,"value",p,t[2].username));const _=[m_,__],g=[];function E(M,D){return M[2].sasl==="external"?0:1}r=E(t),s=g[r]=_[r](t);function b(M){t[29](M)}let C={name:"sasl",options:t[8],$$slots:{label:[w_]},$$scope:{ctx:t}};return t[2].sasl!==void 0&&(C.value=t[2].sasl),a=new xn({props:C}),be.push(()=>ye(a,"value",b,t[2].sasl)),{c(){e=m("div"),q(n.$$.fragment),o=S(),s.c(),l=S(),q(a.$$.fragment),k(e,"class","form-group")},m(M,D){w(M,e,D),z(n,e,null),c(e,o),g[r].m(e,null),c(e,l),z(a,e,null),d=!0},p(M,D){const L={};D[0]&4&&(L.placeholder=M[2].nick),D[0]&32|D[1]&16&&(L.$$scope={dirty:D,ctx:M}),!i&&D[0]&4&&(i=!0,L.value=M[2].username,ke(()=>i=!1)),n.$set(L);let A=r;r=E(M),r===A?g[r].p(M,D):(Oe(),y(g[A],1,1,()=>{g[A]=null}),Ne(),s=g[r],s?s.p(M,D):(s=g[r]=_[r](M),s.c()),v(s,1),s.m(e,l));const R={};D[0]&32|D[1]&16&&(R.$$scope={dirty:D,ctx:M}),!f&&D[0]&4&&(f=!0,R.value=M[2].sasl,ke(()=>f=!1)),a.$set(R)},i(M){d||(v(n.$$.fragment,M),v(s),v(a.$$.fragment,M),at(()=>{u||(u=tt(e,li,{duration:150},!0)),u.run(1)}),d=!0)},o(M){y(n.$$.fragment,M),y(s),y(a.$$.fragment,M),u||(u=tt(e,li,{duration:150},!1)),u.run(0),d=!1},d(M){M&&$(e),H(n),g[r].d(),H(a),M&&u&&u.end()}}}function d_(t){let e,n=t[5]("Username")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Username")+"")&&T(i,n)},d(o){o&&$(e)}}}function h_(t){let e,n=t[5]("SASL and IRC server username.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL and IRC server username.")+"")&&T(i,n)},d(o){o&&$(e)}}}function __(t){let e,n,i;function o(s){t[28](s)}let r={type:"password",name:"password",$$slots:{help:[b_],label:[g_]},$$scope:{ctx:t}};return t[2].password!==void 0&&(r.value=t[2].password),e=new Ve({props:r}),be.push(()=>ye(e,"value",o,t[2].password)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].password,ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function m_(t){let e,n,i;function o(s){t[27](s)}let r={type:"text",name:"fingerprint",readonly:!0,$$slots:{help:[$_],label:[v_]},$$scope:{ctx:t}};return t[2].fingerprint!==void 0&&(r.value=t[2].fingerprint),e=new Ve({props:r}),be.push(()=>ye(e,"value",o,t[2].fingerprint)),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&32|l[1]&16&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&4&&(n=!0,a.value=s[2].fingerprint,ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function g_(t){let e,n=t[5]("Password")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Password")+"")&&T(i,n)},d(o){o&&$(e)}}}function b_(t){let e,n=t[5]("SASL plain or IRC server password.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL plain or IRC server password.")+"")&&T(i,n)},d(o){o&&$(e)}}}function v_(t){let e,n=t[5]("Fingerprint")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Fingerprint")+"")&&T(i,n)},d(o){o&&$(e)}}}function $_(t){let e,n=t[5]("The certificate fingerprint is used for SASL external authentication.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("The certificate fingerprint is used for SASL external authentication.")+"")&&T(i,n)},d(o){o&&$(e)}}}function w_(t){let e,n=t[5]("SASL authentication mechanism")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("SASL authentication mechanism")+"")&&T(i,n)},d(o){o&&$(e)}}}function k_(t){let e,n;return e=new ft({props:{icon:"plus-circle",op:t[9],$$slots:{default:[S_]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&32|o[1]&16&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function y_(t){let e,n;return e=new ft({props:{icon:"save",op:t[11],$$slots:{default:[E_]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&32|o[1]&16&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function S_(t){let e,n=t[5]("Add")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Add")+"")&&T(i,n)},d(o){o&&$(e)}}}function E_(t){let e,n=t[5]("Update")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Update")+"")&&T(i,n)},d(o){o&&$(e)}}}function cl(t){let e,n=t[5]("Delete")+"",i,o,r,s=t[5]("This will permanently remove chat logs and other connection related data.")+"",l,a,f,u=t[6]('Please confirm by entering "**%1**" before hitting **%2**.',t[0],t[5]("Delete"))+"",d,p,h,_,g,E,b,C,M;function D(A){t[30](A)}let L={name:"confirm_connection_id",$$slots:{label:[C_]},$$scope:{ctx:t}};return t[1]!==void 0&&(L.value=t[1]),p=new Ve({props:L}),be.push(()=>ye(p,"value",D,t[1])),E=new ft({props:{icon:"trash",op:t[10],disabled:t[1]!==t[0],$$slots:{default:[A_]},$$scope:{ctx:t}}}),E.$on("click",t[12]),C=new Mt({props:{op:t[10],success:"Deleted."}}),{c(){e=m("h3"),i=O(n),o=S(),r=m("p"),l=O(s),a=S(),f=new Tt(!1),d=S(),q(p.$$.fragment),_=S(),g=m("div"),q(E.$$.fragment),b=S(),q(C.$$.fragment),f.a=null,k(g,"class","form-actions")},m(A,R){w(A,e,R),c(e,i),w(A,o,R),w(A,r,R),c(r,l),c(r,a),f.m(u,r),w(A,d,R),z(p,A,R),w(A,_,R),w(A,g,R),z(E,g,null),w(A,b,R),z(C,A,R),M=!0},p(A,R){(!M||R[0]&32)&&n!==(n=A[5]("Delete")+"")&&T(i,n),(!M||R[0]&32)&&s!==(s=A[5]("This will permanently remove chat logs and other connection related data.")+"")&&T(l,s),(!M||R[0]&97)&&u!==(u=A[6]('Please confirm by entering "**%1**" before hitting **%2**.',A[0],A[5]("Delete"))+"")&&f.p(u);const U={};R[0]&32|R[1]&16&&(U.$$scope={dirty:R,ctx:A}),!h&&R[0]&2&&(h=!0,U.value=A[1],ke(()=>h=!1)),p.$set(U);const B={};R[0]&3&&(B.disabled=A[1]!==A[0]),R[0]&32|R[1]&16&&(B.$$scope={dirty:R,ctx:A}),E.$set(B)},i(A){M||(v(p.$$.fragment,A),v(E.$$.fragment,A),v(C.$$.fragment,A),M=!0)},o(A){y(p.$$.fragment,A),y(E.$$.fragment,A),y(C.$$.fragment,A),M=!1},d(A){A&&$(e),A&&$(o),A&&$(r),A&&$(d),H(p,A),A&&$(_),A&&$(g),H(E),A&&$(b),H(C,A)}}}function C_(t){let e,n=t[5]("Confirm connection ID")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Confirm connection ID")+"")&&T(i,n)},d(o){o&&$(e)}}}function A_(t){let e,n=t[5]("Delete")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&32&&n!==(n=o[5]("Delete")+"")&&T(i,n)},d(o){o&&$(e)}}}function O_(t){let e,n,i,o,r,s,l,a,f,u,d,p,h,_,g,E,b,C,M,D,L,A,R,U,B,W,G,I,K,X,J,N,P,Z,j;function V(ie){t[15](ie)}let Y={name:"host",placeholder:t[5]("Ex: irc.libera.chat:6697"),readonly:t[7].forced_connection,$$slots:{help:[Qh],label:[Jh]},$$scope:{ctx:t}};t[2].host!==void 0&&(Y.value=t[2].host),n=new Ve({props:Y}),be.push(()=>ye(n,"value",V,t[2].host));function F(ie){t[16](ie)}let oe={name:"nick",placeholder:t[5]("Ex: superman"),$$slots:{label:[Xh]},$$scope:{ctx:t}};t[2].nick!==void 0&&(oe.value=t[2].nick),r=new Ve({props:oe}),be.push(()=>ye(r,"value",F,t[2].nick));function re(ie){t[17](ie)}let ne={name:"realname",placeholder:t[5]("Ex: Clark Kent"),$$slots:{label:[xh]},$$scope:{ctx:t}};t[2].realname!==void 0&&(ne.value=t[2].realname),a=new Ve({props:ne}),be.push(()=>ye(a,"value",re,t[2].realname));const de=[t_,e_],Se=[];function se(ie,ve){return ie[0]!=="add"?0:1}d=se(t),p=Se[d]=de[d](t);function he(ie){t[20](ie)}let Ue={name:"tls",$$slots:{label:[o_]},$$scope:{ctx:t}};t[2].tls!==void 0&&(Ue.value=t[2].tls),_=new nt({props:Ue}),be.push(()=>ye(_,"value",he,t[2].tls));function Le(ie){t[21](ie)}let _e={name:"tls_verify",disabled:!t[2].tls,hidden:!t[2].tls,$$slots:{label:[r_]},$$scope:{ctx:t}};t[2].tls_verify!==void 0&&(_e.value=t[2].tls_verify),b=new nt({props:_e}),be.push(()=>ye(b,"value",Le,t[2].tls_verify));function pe(ie){t[22](ie)}let Pe={icon:"caret",name:"show_advanced_settings",$$slots:{label:[s_]},$$scope:{ctx:t}};t[3]!==void 0&&(Pe.value=t[3]),D=new nt({props:Pe}),be.push(()=>ye(D,"value",pe,t[3]));let x=t[3]&&fl(t),me=!t[7].forced_connection&&c_(t);const we=[y_,k_],Fe=[];function je(ie,ve){return ie[0]!=="add"?0:1}W=je(t),G=Fe[W]=we[W](t),K=new Mt({props:{op:t[9]}}),J=new Mt({props:{op:t[11]}});let fe=t[0]!=="add"&&cl(t);return{c(){e=m("form"),q(n.$$.fragment),o=S(),q(r.$$.fragment),l=S(),q(a.$$.fragment),u=S(),p.c(),h=S(),q(_.$$.fragment),E=S(),q(b.$$.fragment),M=S(),q(D.$$.fragment),A=S(),x&&x.c(),R=S(),me&&me.c(),U=S(),B=m("div"),G.c(),I=S(),q(K.$$.fragment),X=S(),q(J.$$.fragment),N=S(),fe&&fe.c(),k(B,"class","form-actions"),k(e,"method","post")},m(ie,ve){w(ie,e,ve),z(n,e,null),c(e,o),z(r,e,null),c(e,l),z(a,e,null),c(e,u),Se[d].m(e,null),c(e,h),z(_,e,null),c(e,E),z(b,e,null),c(e,M),z(D,e,null),c(e,A),x&&x.m(e,null),c(e,R),me&&me.m(e,null),c(e,U),c(e,B),Fe[W].m(B,null),c(e,I),z(K,e,null),c(e,X),z(J,e,null),c(e,N),fe&&fe.m(e,null),P=!0,Z||(j=Te(e,"submit",st(t[13])),Z=!0)},p(ie,ve){const Ee={};ve[0]&32&&(Ee.placeholder=ie[5]("Ex: irc.libera.chat:6697")),ve[0]&32|ve[1]&16&&(Ee.$$scope={dirty:ve,ctx:ie}),!i&&ve[0]&4&&(i=!0,Ee.value=ie[2].host,ke(()=>i=!1)),n.$set(Ee);const ce={};ve[0]&32&&(ce.placeholder=ie[5]("Ex: superman")),ve[0]&32|ve[1]&16&&(ce.$$scope={dirty:ve,ctx:ie}),!s&&ve[0]&4&&(s=!0,ce.value=ie[2].nick,ke(()=>s=!1)),r.$set(ce);const ee={};ve[0]&32&&(ee.placeholder=ie[5]("Ex: Clark Kent")),ve[0]&32|ve[1]&16&&(ee.$$scope={dirty:ve,ctx:ie}),!f&&ve[0]&4&&(f=!0,ee.value=ie[2].realname,ke(()=>f=!1)),a.$set(ee);let ae=d;d=se(ie),d===ae?Se[d].p(ie,ve):(Oe(),y(Se[ae],1,1,()=>{Se[ae]=null}),Ne(),p=Se[d],p?p.p(ie,ve):(p=Se[d]=de[d](ie),p.c()),v(p,1),p.m(e,h));const te={};ve[0]&32|ve[1]&16&&(te.$$scope={dirty:ve,ctx:ie}),!g&&ve[0]&4&&(g=!0,te.value=ie[2].tls,ke(()=>g=!1)),_.$set(te);const Q={};ve[0]&4&&(Q.disabled=!ie[2].tls),ve[0]&4&&(Q.hidden=!ie[2].tls),ve[0]&32|ve[1]&16&&(Q.$$scope={dirty:ve,ctx:ie}),!C&&ve[0]&4&&(C=!0,Q.value=ie[2].tls_verify,ke(()=>C=!1)),b.$set(Q);const ue={};ve[0]&32|ve[1]&16&&(ue.$$scope={dirty:ve,ctx:ie}),!L&&ve[0]&8&&(L=!0,ue.value=ie[3],ke(()=>L=!1)),D.$set(ue),ie[3]?x?(x.p(ie,ve),ve[0]&8&&v(x,1)):(x=fl(ie),x.c(),v(x,1),x.m(e,R)):x&&(Oe(),y(x,1,1,()=>{x=null}),Ne()),ie[7].forced_connection||me.p(ie,ve);let ge=W;W=je(ie),W===ge?Fe[W].p(ie,ve):(Oe(),y(Fe[ge],1,1,()=>{Fe[ge]=null}),Ne(),G=Fe[W],G?G.p(ie,ve):(G=Fe[W]=we[W](ie),G.c()),v(G,1),G.m(B,null)),ie[0]!=="add"?fe?(fe.p(ie,ve),ve[0]&1&&v(fe,1)):(fe=cl(ie),fe.c(),v(fe,1),fe.m(e,null)):fe&&(Oe(),y(fe,1,1,()=>{fe=null}),Ne())},i(ie){P||(v(n.$$.fragment,ie),v(r.$$.fragment,ie),v(a.$$.fragment,ie),v(p),v(_.$$.fragment,ie),v(b.$$.fragment,ie),v(D.$$.fragment,ie),v(x),v(me),v(G),v(K.$$.fragment,ie),v(J.$$.fragment,ie),v(fe),P=!0)},o(ie){y(n.$$.fragment,ie),y(r.$$.fragment,ie),y(a.$$.fragment,ie),y(p),y(_.$$.fragment,ie),y(b.$$.fragment,ie),y(D.$$.fragment,ie),y(x),y(me),y(G),y(K.$$.fragment,ie),y(J.$$.fragment,ie),y(fe),P=!1},d(ie){ie&&$(e),H(n),H(r),H(a),Se[d].d(),H(_),H(b),H(D),x&&x.d(),me&&me.d(),Fe[W].d(),H(K),H(J),fe&&fe.d(),Z=!1,j()}}}function N_(t,e,n){let i,o,r;Ce(t,ot,F=>n(5,o=F)),Ce(t,Bt,F=>n(6,r=F));let{id:s="add"}=e,{is_page:l=!1}=e;const a=ht("user");Ce(t,a,F=>n(32,i=F));const f=[["none","None"],["plain","Plain"],["external","External"]],u=et.op("createConnection"),d=et.op("removeConnection"),p=et.op("updateConnection");let h="",_={},g={},E=!1,b=!1;Ft(()=>{_=s==="add"?{}:i.findConversation({connection_id:s})||{},_.connection_id?C(_):M()});function C(F){const oe=F.url?F.url.toFields():{};Be.array(F.on_connect_commands)&&(oe.on_connect_commands=F.on_connect_commands.join(`
`)),oe.nick||(oe.nick=a.email.replace(/@.*/,"").replace(/\W/g,"_")),oe.want_to_be_connected=F.wanted_state!=="disconnected",n(2,g={...g,...oe,fingerprint:F.certificate.fingerprint||""})}function M(){const F=new hn(De.query.uri||a.default_connection||"irc://localhost").toFields();a.connections.size&&!De.query.uri&&(F.host=""),F.nick||(F.nick=a.email.replace(/@.*/,"").replace(/\W/g,"_")),n(2,g={...g,...F,want_to_be_connected:!0})}async function D(){await d.perform(_),a.removeConversation(_),De.go("/settings/connections")}async function L(){if(n(2,g.on_connect_commands=(g.on_connect_commands||"").split(/\n\r?/).filter(F=>F.length),g),n(2,g.url=new hn("irc://localhost").fromFields(g).toString(),g),_.connection_id)n(2,g.connection_id=_.connection_id,g),n(2,g.wanted_state=g.want_to_be_connected?"connected":"disconnected",g),await p.perform(g),_=a.ensureConversation(p.res.body),C(_);else{await u.perform(g);const F=u.res.body;F.connection_id&&De.go(a.ensureConversation(F).path)}l&&De.go("/settings/connections")}function A(F){t.$$.not_equal(g.host,F)&&(g.host=F,n(2,g))}function R(F){t.$$.not_equal(g.nick,F)&&(g.nick=F,n(2,g))}function U(F){t.$$.not_equal(g.realname,F)&&(g.realname=F,n(2,g))}function B(F){t.$$.not_equal(g.want_to_be_connected,F)&&(g.want_to_be_connected=F,n(2,g))}function W(F){t.$$.not_equal(g.conversation_id,F)&&(g.conversation_id=F,n(2,g))}function G(F){t.$$.not_equal(g.tls,F)&&(g.tls=F,n(2,g))}function I(F){t.$$.not_equal(g.tls_verify,F)&&(g.tls_verify=F,n(2,g))}function K(F){E=F,n(3,E)}function X(F){t.$$.not_equal(g.on_connect_commands,F)&&(g.on_connect_commands=F,n(2,g))}function J(F){t.$$.not_equal(g.local_address,F)&&(g.local_address=F,n(2,g))}function N(F){b=F,n(4,b)}function P(F){t.$$.not_equal(g.username,F)&&(g.username=F,n(2,g))}function Z(F){t.$$.not_equal(g.fingerprint,F)&&(g.fingerprint=F,n(2,g))}function j(F){t.$$.not_equal(g.password,F)&&(g.password=F,n(2,g))}function V(F){t.$$.not_equal(g.sasl,F)&&(g.sasl=F,n(2,g))}function Y(F){h=F,n(1,h)}return t.$$set=F=>{"id"in F&&n(0,s=F.id),"is_page"in F&&n(14,l=F.is_page)},[s,h,g,E,b,o,r,a,f,u,d,p,D,L,l,A,R,U,B,W,G,I,K,X,J,N,P,Z,j,V,Y]}class If extends Je{constructor(e){super(),Ze(this,e,N_,O_,Ye,{id:0,is_page:14},null,[-1,-1])}}function T_(t){let e,n=t[4]("Currently connecting to %1.",t[3])+"",i;return{c(){e=m("p"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&24&&n!==(n=o[4]("Currently connecting to %1.",o[3])+"")&&T(i,n)},d(o){o&&$(e)}}}function M_(t){let e,n=t[4]("Currently connected to %1.",t[3])+"",i;return{c(){e=m("p"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&24&&n!==(n=o[4]("Currently connected to %1.",o[3])+"")&&T(i,n)},d(o){o&&$(e)}}}function R_(t){let e,n=t[4]("Currently disconnected from %1.",t[3])+"",i;return{c(){e=m("p"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&24&&n!==(n=o[4]("Currently disconnected from %1.",o[3])+"")&&T(i,n)},d(o){o&&$(e)}}}function L_(t){let e,n=t[4]("Connection not found.")+"",i;return{c(){e=m("p"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Connection not found.")+"")&&T(i,n)},d(o){o&&$(e)}}}function I_(t){let e,n,i,o=t[4]("Connection")+"",r,s,l,a,f,u,d,p,h,_,g,E;a=new $e({props:{name:"bars"}}),f=new $e({props:{name:"times"}});function b(D,L){return D[2].url?D[2].state==="disconnected"?R_:D[2].state==="connected"?M_:T_:L_}let C=b(t),M=C(t);return p=new If({props:{id:t[0].connection_id}}),{c(){e=m("div"),n=m("div"),i=m("h2"),r=O(o),s=S(),l=m("a"),q(a.$$.fragment),q(f.$$.fragment),u=S(),M.c(),d=S(),q(p.$$.fragment),k(l,"href","#settings"),k(l,"class","btn-hallow can-toggle is-active"),k(n,"class","sidebar-header"),k(e,"class","sidebar-left")},m(D,L){w(D,e,L),c(e,n),c(n,i),c(i,r),c(n,s),c(n,l),z(a,l,null),z(f,l,null),c(e,u),M.m(e,null),c(e,d),z(p,e,null),_=!0,g||(E=Te(l,"click",$t.toggle),g=!0)},p(D,[L]){t=D,(!_||L&16)&&o!==(o=t[4]("Connection")+"")&&T(r,o),C===(C=b(t))&&M?M.p(t,L):(M.d(1),M=C(t),M&&(M.c(),M.m(e,d)));const A={};L&1&&(A.id=t[0].connection_id),p.$set(A)},i(D){_||(v(a.$$.fragment,D),v(f.$$.fragment,D),v(p.$$.fragment,D),at(()=>{h||(h=tt(e,Yt,t[1],!0)),h.run(1)}),_=!0)},o(D){y(a.$$.fragment,D),y(f.$$.fragment,D),y(p.$$.fragment,D),h||(h=tt(e,Yt,t[1],!1)),h.run(0),_=!1},d(D){D&&$(e),H(a),H(f),M.d(),H(p),D&&h&&h.end(),g=!1,E()}}}function P_(t,e,n){let i,o;Ce(t,ot,f=>n(4,o=f));let{conversation:r={}}=e,{transition:s}=e;const l=ht("user");let a={};return Ft(async()=>{n(2,a=l.findConversation({connection_id:r.connection_id})||{})}),t.$$set=f=>{"conversation"in f&&n(0,r=f.conversation),"transition"in f&&n(1,s=f.transition)},t.$$.update=()=>{t.$$.dirty&4&&n(3,i=a.real_host||a.url&&a.url.host)},[r,s,a,i,o]}let D_=class extends Je{constructor(e){super(),Ze(this,e,P_,I_,Ye,{conversation:0,transition:1})}};function Li(t){if(!t.nick)return["Loading..."];const e=Object.keys(t.channels||{}).sort(),n=[t.nick,t.name||t.user];let i="%1 (%2)";return t.away&&(i+=" is away (%3) and",n.push(t.away)),t.idle_for&&e.length?(i+=" has been idle for %4s in %5.",n.push(t.idle_for),n.push(e.sort().join(", "))):t.idle_for&&!e.length?(i+=" has been idle for %4s, and is not in any channels.",n.push(t.idle_for)):e.length?(i+=" is active in %4.",n.push(e.join(", "))):i+=" is not in any channels.",t.away||(i=i.replace(/%(4|5)/g,(o,r)=>"%"+(r-1))),[i,...n]}function vo(t){const e=["","chat",t.connection_id];return t.conversation_id&&e.push(t.conversation_id),De.urlFor(e.map(encodeURIComponent).join("/")+"#"+t.ts.toISOString())}function Pf(t){t.target.closest("a")||(t.preventDefault(),De.go(t.target.closest(".message").querySelector("a").href))}function U_(t,{conversation:e}){const n=t.detail.visibleEls.filter(r=>r.dataset.ts);if(!n.length)return;const i=r=>De.go(e.path+(r.length?"#"+r:""),{replace:!0}),o=t.detail.pos;if(o==="top"){const r=n[0].dataset.ts;e.historyStartAt||e.load({before:r}),i(r)}else if(o==="bottom"){const r=n.slice(-1)[0].dataset.ts;e.historyStopAt||e.load({after:r}),i(e.historyStopAt?"":r)}else i(n[0].dataset.ts)}function B_(t,{conversation:e,timestampFromUrl:n}){const{infinityEl:i,scrollHeightChanged:o,scrollTo:r,visibleEls:s,visibleElsChanged:l}=t.detail,a=e.messages;!(i.scrollHeight>i.offsetHeight)&&a.length&&e.load({before:a.get(0).ts.toISOString()}),o&&(r(De.hash?'.message[data-ts="'+De.hash+'"]':-1),F_(i,n===De.hash)),l&&s.forEach(u=>a.render(u.dataset.index))}function F_(t,e){const n=e&&De.hash&&t.querySelector('.message[data-ts="'+De.hash+'"]');bt(t,".has-focus",i=>i.classList.remove("has-focus")),n&&n.classList.add("has-focus")}function $o(t,e){return e.is("not_found")?"":t.frozen?t.frozen:t===e?"Connection messages.":e.info.away?e.info.away:e.info.idle_for?xe.l("User has been idle for %1s.",e.info.idle_for):(e.frozen?e.frozen:e.topic)||(e.is("private")?"Private conversation.":"No topic is set.")}function j_(t){let e=t[11]("You are not a channel operator in %1.",t[0].name)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&2049&&e!==(e=i[11]("You are not a channel operator in %1.",i[0].name)+"")&&T(n,e)},d(i){i&&$(n)}}}function z_(t){let e=t[11]("You are channel operator in %1.",t[0].name)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&2049&&e!==(e=i[11]("You are channel operator in %1.",i[0].name)+"")&&T(n,e)},d(i){i&&$(n)}}}function H_(t){let e,n=t[12](...Li(t[2].info))+"",i,o,r,s,l=t[11]("Update information")+"",a,f,u;return{c(){e=m("span"),i=S(),o=m("br"),r=m("small"),s=m("a"),a=O(l),k(s,"href","#update")},m(d,p){w(d,e,p),e.innerHTML=n,w(d,i,p),w(d,o,p),w(d,r,p),c(r,s),c(s,a),f||(u=Te(s,"click",st(t[17])),f=!0)},p(d,p){p[0]&4100&&n!==(n=d[12](...Li(d[2].info))+"")&&(e.innerHTML=n),p[0]&2048&&l!==(l=d[11]("Update information")+"")&&T(a,l)},d(d){d&&$(e),d&&$(i),d&&$(o),d&&$(r),f=!1,u()}}}function q_(t){let e=t[11]("Conversation with %1 is frozen. Reason: %2",t[0].name,t[11](t[0].frozen))+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o[0]&2049&&e!==(e=i[11]("Conversation with %1 is frozen. Reason: %2",i[0].name,i[11](i[0].frozen))+"")&&T(n,e)},d(i){i&&$(n)}}}function pl(t){let e,n,i,o;const r=[G_,W_],s=[];function l(a,f){return a[8]||!a[2].modes.topic_protection?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=ct()},m(a,f){s[e].m(a,f),w(a,i,f),o=!0},p(a,f){let u=e;e=l(a),e===u?s[e].p(a,f):(Oe(),y(s[u],1,1,()=>{s[u]=null}),Ne(),n=s[e],n?n.p(a,f):(n=s[e]=r[e](a),n.c()),v(n,1),n.m(i.parentNode,i))},i(a){o||(v(n),o=!0)},o(a){y(n),o=!1},d(a){s[e].d(a),a&&$(i)}}}function W_(t){let e,n,i=t[11]("Topic")+"",o,r,s,l=t[12](t[0].topic||"No topic is set.")+"";return{c(){e=m("div"),n=m("label"),o=O(i),r=S(),s=m("div"),k(n,"for","nothing"),k(s,"class","input"),k(e,"class","text-field")},m(a,f){w(a,e,f),c(e,n),c(n,o),c(e,r),c(e,s),s.innerHTML=l},p(a,f){f[0]&2048&&i!==(i=a[11]("Topic")+"")&&T(o,i),f[0]&4097&&l!==(l=a[12](a[0].topic||"No topic is set.")+"")&&(s.innerHTML=l)},i:Re,o:Re,d(a){a&&$(e)}}}function G_(t){let e,n,i;function o(s){t[19](s)}let r={name:"topic",placeholder:t[11]("No topic is set."),$$slots:{label:[K_]},$$scope:{ctx:t}};return t[6]!==void 0&&(r.value=t[6]),e=new Lf({props:r}),be.push(()=>ye(e,"value",o,t[6])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&2048&&(a.placeholder=s[11]("No topic is set.")),l[0]&2048|l[1]&1&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&64&&(n=!0,a.value=s[6],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function K_(t){let e,n=t[11]("Topic")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Topic")+"")&&T(i,n)},d(o){o&&$(e)}}}function dl(t){let e,n,i;function o(s){t[20](s)}let r={name:"want_notifications",$$slots:{label:[Y_]},$$scope:{ctx:t}};return t[7]!==void 0&&(r.value=t[7]),e=new nt({props:r}),be.push(()=>ye(e,"value",o,t[7])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&2048|l[1]&1&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&128&&(n=!0,a.value=s[7],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function Y_(t){let e,n=t[11]("Notify me on new messages")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Notify me on new messages")+"")&&T(i,n)},d(o){o&&$(e)}}}function V_(t){let e,n=t[11]("Show raw messages")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Show raw messages")+"")&&T(i,n)},d(o){o&&$(e)}}}function hl(t){let e,n,i=t[11]("Conversation modes")+"",o,r,s,l,a,f,u,d,p,h,_,g,E,b,C,M,D,L,A;function R(j){t[22](j)}let U={badge:!0,name:"invite_only",disabled:!t[8],$$slots:{label:[Z_]},$$scope:{ctx:t}};t[3].invite_only!==void 0&&(U.value=t[3].invite_only),s=new nt({props:U}),be.push(()=>ye(s,"value",R,t[3].invite_only));function B(j){t[23](j)}let W={badge:!0,name:"moderated",disabled:!t[8],$$slots:{label:[J_]},$$scope:{ctx:t}};t[3].moderated!==void 0&&(W.value=t[3].moderated),f=new nt({props:W}),be.push(()=>ye(f,"value",B,t[3].moderated));function G(j){t[24](j)}let I={badge:!0,name:"prevent_external_send",disabled:!t[8],$$slots:{label:[Q_]},$$scope:{ctx:t}};t[3].prevent_external_send!==void 0&&(I.value=t[3].prevent_external_send),p=new nt({props:I}),be.push(()=>ye(p,"value",G,t[3].prevent_external_send));function K(j){t[25](j)}let X={badge:!0,name:"topic_protection",disabled:!t[8],$$slots:{label:[X_]},$$scope:{ctx:t}};t[3].topic_protection!==void 0&&(X.value=t[3].topic_protection),g=new nt({props:X}),be.push(()=>ye(g,"value",K,t[3].topic_protection));function J(j){t[26](j)}let N={badge:!0,name:"password",disabled:!t[8],$$slots:{label:[x_]},$$scope:{ctx:t}};t[3].password!==void 0&&(N.value=t[3].password),C=new nt({props:N}),be.push(()=>ye(C,"value",J,t[3].password));let P=t[3].password&&_l(t),Z=!t[8]&&ml(t);return{c(){e=m("nav"),n=m("h3"),o=O(i),r=S(),q(s.$$.fragment),a=S(),q(f.$$.fragment),d=S(),q(p.$$.fragment),_=S(),q(g.$$.fragment),b=S(),q(C.$$.fragment),D=S(),P&&P.c(),L=S(),Z&&Z.c(),k(e,"class","sidebar-left__nav")},m(j,V){w(j,e,V),c(e,n),c(n,o),c(e,r),z(s,e,null),c(e,a),z(f,e,null),c(e,d),z(p,e,null),c(e,_),z(g,e,null),c(e,b),z(C,e,null),c(e,D),P&&P.m(e,null),c(e,L),Z&&Z.m(e,null),A=!0},p(j,V){(!A||V[0]&2048)&&i!==(i=j[11]("Conversation modes")+"")&&T(o,i);const Y={};V[0]&256&&(Y.disabled=!j[8]),V[0]&2056|V[1]&1&&(Y.$$scope={dirty:V,ctx:j}),!l&&V[0]&8&&(l=!0,Y.value=j[3].invite_only,ke(()=>l=!1)),s.$set(Y);const F={};V[0]&256&&(F.disabled=!j[8]),V[0]&2056|V[1]&1&&(F.$$scope={dirty:V,ctx:j}),!u&&V[0]&8&&(u=!0,F.value=j[3].moderated,ke(()=>u=!1)),f.$set(F);const oe={};V[0]&256&&(oe.disabled=!j[8]),V[0]&2056|V[1]&1&&(oe.$$scope={dirty:V,ctx:j}),!h&&V[0]&8&&(h=!0,oe.value=j[3].prevent_external_send,ke(()=>h=!1)),p.$set(oe);const re={};V[0]&256&&(re.disabled=!j[8]),V[0]&2056|V[1]&1&&(re.$$scope={dirty:V,ctx:j}),!E&&V[0]&8&&(E=!0,re.value=j[3].topic_protection,ke(()=>E=!1)),g.$set(re);const ne={};V[0]&256&&(ne.disabled=!j[8]),V[0]&2056|V[1]&1&&(ne.$$scope={dirty:V,ctx:j}),!M&&V[0]&8&&(M=!0,ne.value=j[3].password,ke(()=>M=!1)),C.$set(ne),j[3].password?P?(P.p(j,V),V[0]&8&&v(P,1)):(P=_l(j),P.c(),v(P,1),P.m(e,L)):P&&(Oe(),y(P,1,1,()=>{P=null}),Ne()),j[8]?Z&&(Z.d(1),Z=null):Z?Z.p(j,V):(Z=ml(j),Z.c(),Z.m(e,null))},i(j){A||(v(s.$$.fragment,j),v(f.$$.fragment,j),v(p.$$.fragment,j),v(g.$$.fragment,j),v(C.$$.fragment,j),v(P),A=!0)},o(j){y(s.$$.fragment,j),y(f.$$.fragment,j),y(p.$$.fragment,j),y(g.$$.fragment,j),y(C.$$.fragment,j),y(P),A=!1},d(j){j&&$(e),H(s),H(f),H(p),H(g),H(C),P&&P.d(),Z&&Z.d()}}}function Z_(t){let e,n=t[11]("Invite only")+"",i,o,r,s=t[3].invite_only?"+":"-",l,a=di("invite_only")+"",f;return{c(){e=m("span"),i=O(n),o=S(),r=m("b"),l=O(s),f=O(a),k(r,"class","badge"),k(e,"slot","label")},m(u,d){w(u,e,d),c(e,i),c(e,o),c(e,r),c(r,l),c(r,f)},p(u,d){d[0]&2048&&n!==(n=u[11]("Invite only")+"")&&T(i,n),d[0]&8&&s!==(s=u[3].invite_only?"+":"-")&&T(l,s)},d(u){u&&$(e)}}}function J_(t){let e,n=t[11]("Moderated")+"",i,o,r,s=t[3].moderated?"+":"-",l,a=di("moderated")+"",f;return{c(){e=m("span"),i=O(n),o=S(),r=m("b"),l=O(s),f=O(a),k(r,"class","badge"),k(e,"slot","label")},m(u,d){w(u,e,d),c(e,i),c(e,o),c(e,r),c(r,l),c(r,f)},p(u,d){d[0]&2048&&n!==(n=u[11]("Moderated")+"")&&T(i,n),d[0]&8&&s!==(s=u[3].moderated?"+":"-")&&T(l,s)},d(u){u&&$(e)}}}function Q_(t){let e,n=t[11]("Prevent external send")+"",i,o,r,s=t[3].prevent_external_send?"+":"-",l,a=di("prevent_external_send")+"",f;return{c(){e=m("span"),i=O(n),o=S(),r=m("b"),l=O(s),f=O(a),k(r,"class","badge"),k(e,"slot","label")},m(u,d){w(u,e,d),c(e,i),c(e,o),c(e,r),c(r,l),c(r,f)},p(u,d){d[0]&2048&&n!==(n=u[11]("Prevent external send")+"")&&T(i,n),d[0]&8&&s!==(s=u[3].prevent_external_send?"+":"-")&&T(l,s)},d(u){u&&$(e)}}}function X_(t){let e,n=t[11]("Protected topic")+"",i,o,r,s=t[3].topic_protection?"+":"-",l,a=di("topic_protection")+"",f;return{c(){e=m("span"),i=O(n),o=S(),r=m("b"),l=O(s),f=O(a),k(r,"class","badge"),k(e,"slot","label")},m(u,d){w(u,e,d),c(e,i),c(e,o),c(e,r),c(r,l),c(r,f)},p(u,d){d[0]&2048&&n!==(n=u[11]("Protected topic")+"")&&T(i,n),d[0]&8&&s!==(s=u[3].topic_protection?"+":"-")&&T(l,s)},d(u){u&&$(e)}}}function x_(t){let e,n=t[11]("Password")+"",i,o,r,s=t[3].password?"+":"-",l,a=di("password")+"",f;return{c(){e=m("span"),i=O(n),o=S(),r=m("b"),l=O(s),f=O(a),k(r,"class","badge"),k(e,"slot","label")},m(u,d){w(u,e,d),c(e,i),c(e,o),c(e,r),c(r,l),c(r,f)},p(u,d){d[0]&2048&&n!==(n=u[11]("Password")+"")&&T(i,n),d[0]&8&&s!==(s=u[3].password?"+":"-")&&T(l,s)},d(u){u&&$(e)}}}function _l(t){let e,n,i;function o(s){t[27](s)}let r={type:"password",name:"password",$$slots:{label:[em]},$$scope:{ctx:t}};return t[4]!==void 0&&(r.value=t[4]),e=new Ve({props:r}),be.push(()=>ye(e,"value",o,t[4])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&2048|l[1]&1&&(a.$$scope={dirty:l,ctx:s}),!n&&l[0]&16&&(n=!0,a.value=s[4],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function em(t){let e,n=t[11]("Password")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Password")+"")&&T(i,n)},d(o){o&&$(e)}}}function ml(t){let e,n,i=t[11]("Only operators can change modes.")+"",o;return{c(){e=m("p"),n=m("i"),o=O(i)},m(r,s){w(r,e,s),c(e,n),c(n,o)},p(r,s){s[0]&2048&&i!==(i=r[11]("Only operators can change modes.")+"")&&T(o,i)},d(r){r&&$(e)}}}function tm(t){let e,n=t[11]("Save")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Save")+"")&&T(i,n)},d(o){o&&$(e)}}}function nm(t){let e,n=t[11]("Leave")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&2048&&n!==(n=o[11]("Leave")+"")&&T(i,n)},d(o){o&&$(e)}}}function gl(t){let e,n;return e=new Rf({props:{conversation:t[0]}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&1&&(r.conversation=i[0]),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function im(t){let e,n,i,o=t[11]("Conversation")+"",r,s,l,a,f,u,d,p,h,_,g=Object.hasOwn(t[2],"wantNotifications"),E,b,C,M,D,L,A,R,U,B,W,G,I,K,X,J;a=new $e({props:{name:"bars"}}),f=new $e({props:{name:"times"}});function N(ne,de){return ne[2].frozen?q_:ne[9]?H_:ne[8]?z_:j_}let P=N(t),Z=P(t),j=!t[9]&&pl(t),V=g&&dl(t);function Y(ne){t[21](ne)}let F={name:"raw_messages",$$slots:{label:[V_]},$$scope:{ctx:t}};t[5]!==void 0&&(F.value=t[5]),b=new nt({props:F}),be.push(()=>ye(b,"value",Y,t[5]));let oe=!t[9]&&hl(t);A=new ft({props:{icon:"save",op:t[14],$$slots:{default:[tm]},$$scope:{ctx:t}}}),U=new ft({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[nm]},$$scope:{ctx:t}}}),U.$on("click",t[15]),W=new Mt({props:{op:t[14]}});let re=!t[0].frozen&&!t[13].hasRightColumn&&gl(t);return{c(){e=m("div"),n=m("div"),i=m("h2"),r=O(o),s=S(),l=m("a"),q(a.$$.fragment),q(f.$$.fragment),u=S(),d=m("p"),Z.c(),p=S(),h=m("form"),j&&j.c(),_=S(),V&&V.c(),E=S(),q(b.$$.fragment),M=S(),oe&&oe.c(),D=S(),L=m("div"),q(A.$$.fragment),R=S(),q(U.$$.fragment),B=S(),q(W.$$.fragment),G=S(),re&&re.c(),k(l,"href","#settings"),k(l,"class","btn-hallow can-toggle is-active"),k(n,"class","sidebar-header"),k(L,"class","form-actions"),k(h,"method","post"),k(e,"class","sidebar-left")},m(ne,de){w(ne,e,de),c(e,n),c(n,i),c(i,r),c(n,s),c(n,l),z(a,l,null),z(f,l,null),c(e,u),c(e,d),Z.m(d,null),c(e,p),c(e,h),j&&j.m(h,null),c(h,_),V&&V.m(h,null),c(h,E),z(b,h,null),c(h,M),oe&&oe.m(h,null),c(h,D),c(h,L),z(A,L,null),c(L,R),z(U,L,null),c(h,B),z(W,h,null),c(e,G),re&&re.m(e,null),K=!0,X||(J=[Te(l,"click",$t.toggle),Te(h,"submit",st(t[16]))],X=!0)},p(ne,de){t=ne,(!K||de[0]&2048)&&o!==(o=t[11]("Conversation")+"")&&T(r,o),P===(P=N(t))&&Z?Z.p(t,de):(Z.d(1),Z=P(t),Z&&(Z.c(),Z.m(d,null))),t[9]?j&&(Oe(),y(j,1,1,()=>{j=null}),Ne()):j?(j.p(t,de),de[0]&512&&v(j,1)):(j=pl(t),j.c(),v(j,1),j.m(h,_)),de[0]&4&&(g=Object.hasOwn(t[2],"wantNotifications")),g?V?(V.p(t,de),de[0]&4&&v(V,1)):(V=dl(t),V.c(),v(V,1),V.m(h,E)):V&&(Oe(),y(V,1,1,()=>{V=null}),Ne());const Se={};de[0]&2048|de[1]&1&&(Se.$$scope={dirty:de,ctx:t}),!C&&de[0]&32&&(C=!0,Se.value=t[5],ke(()=>C=!1)),b.$set(Se),t[9]?oe&&(Oe(),y(oe,1,1,()=>{oe=null}),Ne()):oe?(oe.p(t,de),de[0]&512&&v(oe,1)):(oe=hl(t),oe.c(),v(oe,1),oe.m(h,D));const se={};de[0]&2048|de[1]&1&&(se.$$scope={dirty:de,ctx:t}),A.$set(se);const he={};de[0]&2048|de[1]&1&&(he.$$scope={dirty:de,ctx:t}),U.$set(he),!t[0].frozen&&!t[13].hasRightColumn?re?(re.p(t,de),de[0]&8193&&v(re,1)):(re=gl(t),re.c(),v(re,1),re.m(e,null)):re&&(Oe(),y(re,1,1,()=>{re=null}),Ne())},i(ne){K||(v(a.$$.fragment,ne),v(f.$$.fragment,ne),v(j),v(V),v(b.$$.fragment,ne),v(oe),v(A.$$.fragment,ne),v(U.$$.fragment,ne),v(W.$$.fragment,ne),v(re),at(()=>{I||(I=tt(e,Yt,t[1],!0)),I.run(1)}),K=!0)},o(ne){y(a.$$.fragment,ne),y(f.$$.fragment,ne),y(j),y(V),y(b.$$.fragment,ne),y(oe),y(A.$$.fragment,ne),y(U.$$.fragment,ne),y(W.$$.fragment,ne),y(re),I||(I=tt(e,Yt,t[1],!1)),I.run(0),K=!1},d(ne){ne&&$(e),H(a),H(f),Z.d(),j&&j.d(),V&&V.d(),H(b),oe&&oe.d(),H(A),H(U),H(W),re&&re.d(),ne&&I&&I.end(),X=!1,ut(J)}}}function om(t,e,n){let i,o,r,s,l,a=Re,f=()=>(a(),a=dt(i,F=>n(18,l=F)),i),u,d=Re,p=()=>(d(),d=dt(E,F=>n(2,u=F)),E),h,_,g;Ce(t,$t,F=>n(28,s=F)),Ce(t,ot,F=>n(11,h=F)),Ce(t,Bt,F=>n(12,_=F)),Ce(t,Mn,F=>n(13,g=F)),t.$$.on_destroy.push(()=>a()),t.$$.on_destroy.push(()=>d());let{conversation:E}=e;p();let{transition:b}=e;const C=new Eo({api:!1,id:"saveConversationSettings"});let M={invite_only:!1,moderated:!1,password:!1,prevent_external_send:!1,topic_protection:!1},D="",L=!1,A="",R=!1;Ft(async()=>{Object.keys(E.modes).length===0&&!o&&await new Promise(F=>E.send("/mode",F)),await Ri(),n(3,M=Object.assign({},M,E.modes)),n(5,L=E.messages.raw),n(6,A=E.topic),n(7,R=E.wantNotifications)});function U(){E.send("/part",F=>!F.errrors&&Ti($t,s="",s))}function B(){const F=[];for(const oe in M)oe==="password"&&M[oe]?(D&&E.send(r?"/mode +k "+D:"/join "+E.name+" "+D),n(4,D="")):M[oe]!==(E.modes[oe]||!1)&&F.push((M[oe]?"+":"-")+di(oe));return r&&F.length&&E.send("/mode "+F.join(""))}function W(){return!r&&E.modes.topic_protection?!1:A!==E.topic&&E.send("/topic "+A)}async function G(){C.update({status:"loading"}),await C.on("update"),E.update({wantNotifications:R}),E.messages.update({raw:L}),B(),W(),await Ri(),C.update({status:"success"})}function I(){E.send("/whois "+E.name,F=>F.stopPropagation())}function K(F){A=F,n(6,A)}function X(F){R=F,n(7,R)}function J(F){L=F,n(5,L)}function N(F){t.$$.not_equal(M.invite_only,F)&&(M.invite_only=F,n(3,M))}function P(F){t.$$.not_equal(M.moderated,F)&&(M.moderated=F,n(3,M))}function Z(F){t.$$.not_equal(M.prevent_external_send,F)&&(M.prevent_external_send=F,n(3,M))}function j(F){t.$$.not_equal(M.topic_protection,F)&&(M.topic_protection=F,n(3,M))}function V(F){t.$$.not_equal(M.password,F)&&(M.password=F,n(3,M))}function Y(F){D=F,n(4,D)}return t.$$set=F=>{"conversation"in F&&p(n(0,E=F.conversation)),"transition"in F&&n(1,b=F.transition)},t.$$.update=()=>{t.$$.dirty[0]&4&&f(n(10,i=u.participants)),t.$$.dirty[0]&4&&n(9,o=u.is("private")),t.$$.dirty[0]&262144&&n(8,r=l.me().modes.operator)},[E,b,u,M,D,L,A,R,r,o,i,h,_,g,C,U,G,I,l,K,X,J,N,P,Z,j,V,Y]}class rm extends Je{constructor(e){super(),Ze(this,e,om,im,Ye,{conversation:0,transition:1},null,[-1,-1])}}function sm(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Df=sm,lm=/\s/;function am(t){for(var e=t.length;e--&&lm.test(t.charAt(e)););return e}var fm=am,um=fm,cm=/^\s+/;function pm(t){return t&&t.slice(0,um(t)+1).replace(cm,"")}var dm=pm,hm=dm,bl=Df,_m=pf,vl=0/0,mm=/^[-+]0x[0-9a-f]+$/i,gm=/^0b[01]+$/i,bm=/^0o[0-7]+$/i,vm=parseInt;function $m(t){if(typeof t=="number")return t;if(_m(t))return vl;if(bl(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=bl(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=hm(t);var n=gm.test(t);return n||bm.test(t)?vm(t.slice(2),n?2:8):mm.test(t)?vl:+t}var wm=$m,km=Df,or=Ci,$l=wm,ym="Expected a function",Sm=Math.max,Em=Math.min;function Cm(t,e,n){var i,o,r,s,l,a,f=0,u=!1,d=!1,p=!0;if(typeof t!="function")throw new TypeError(ym);e=$l(e)||0,km(n)&&(u=!!n.leading,d="maxWait"in n,r=d?Sm($l(n.maxWait)||0,e):r,p="trailing"in n?!!n.trailing:p);function h(A){var R=i,U=o;return i=o=void 0,f=A,s=t.apply(U,R),s}function _(A){return f=A,l=setTimeout(b,e),u?h(A):s}function g(A){var R=A-a,U=A-f,B=e-R;return d?Em(B,r-U):B}function E(A){var R=A-a,U=A-f;return a===void 0||R>=e||R<0||d&&U>=r}function b(){var A=or();if(E(A))return C(A);l=setTimeout(b,g(A))}function C(A){return l=void 0,p&&i?h(A):(i=o=void 0,s)}function M(){l!==void 0&&clearTimeout(l),f=0,i=a=o=l=void 0}function D(){return l===void 0?s:C(or())}function L(){var A=or(),R=E(A);if(i=arguments,o=this,a=A,R){if(l===void 0)return _(a);if(d)return clearTimeout(l),l=setTimeout(b,e),h(a)}return l===void 0&&(l=setTimeout(b,e)),s}return L.cancel=M,L.flush=D,L}var Wr=Cm;class Am{constructor(){this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=Wr(()=>this._removeDragOver(),100)}attach(e,n,i=document){this.dropEl=e,this.uploader=n,this.targetEl=i,Object.keys(this.dragAndDropEvents).forEach(o=>{i.addEventListener(o,this.dragAndDropEvents[o])}),Object.keys(this.pasteEvents).forEach(o=>{document.addEventListener(o,this.pasteEvents[o])})}detach(){Object.keys(this.dragAndDropEvents).forEach(e=>{this.targetEl.removeEventListener(e,this.dragAndDropEvents[e])}),Object.keys(this.pasteEvents).forEach(e=>{document.removeEventListener(e,this.pasteEvents[e])})}drop(e){this.stop(e),this.uploader&&this.uploader(e)}paste(e){const n=(e.clipboardData||e.originalEvent.clipboardData).items;if(this.uploader){for(let i=0;i<n.length;i++)if(n[i].kind==="file")return this.uploader({dataTransfer:{files:[n[i].getAsFile()]}})}}stop(e){this._preventDefault(e),this.removeDragOverDebounced()}start(e){if(!this.dropEl)return;this._preventDefault(e);const n=this.dropIndicatorEl.style;n.height=this.dropEl.offsetHeight+"px",n.width=this.dropEl.offsetWidth+"px",n.top=this.dropEl.offsetTop+"px",n.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}_preventDefault(e){e.preventDefault(),e.stopPropagation()}_removeDragOver(){this.dropIndicatorEl.classList.add("hidden")}}function Om(t){let e,n,i,o,r,s,l;const a=t[6].default,f=qt(a,t,t[5],null);return{c(){e=m("main"),n=m("div"),f&&f.c(),at(()=>t[7].call(n)),k(e,"class",o=t[1].join(" "))},m(u,d){w(u,e,d),c(e,n),f&&f.m(n,null),i=Iu(n,t[7].bind(n)),r=!0,s||(l=Or(t[2].call(null,e)),s=!0)},p(u,[d]){f&&f.p&&(!r||d&32)&&Gt(f,a,u,u[5],r?Wt(a,u[5],d,null):Kt(u[5]),null),(!r||d&2&&o!==(o=u[1].join(" ")))&&k(e,"class",o)},i(u){r||(v(f,u),r=!0)},o(u){y(f,u),r=!1},d(u){u&&$(e),f&&f.d(u),i(),s=!1,l()}}}function Nm(t,e,n){let i,{$$slots:o={},$$scope:r}=e;const s=Fu(),l={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]};let{class:a=""}=e,f=Ci(),u=0,{pos:d="top"}=e;function p(){const C=l.infinityEl;if(!C)return;n(3,d=C.scrollTop>u-C.offsetHeight-l.scrollOffset?"bottom":C.scrollTop<l.scrollOffset?"top":"middle"),l.pos=d,l.scrollHeightChanged=l.scrollHeight!==u,l.scrollHeight=u,l.visibleElsChanged=!1;const M=oc(C.firstElementChild,C);(M.length!==l.visibleEls.length||M[0]!==l.visibleEls[0])&&(l.visibleEls=M,l.visibleElsChanged=!0),(l.scrollHeightChanged||l.visibleElsChanged)&&s("visibility",l),l.scrollHeightChanged&&s("rendered",l)}function h(C){l.infinityEl=C,l.scrollTo=E,C.addEventListener("scroll",()=>_(C)),p()}function _(C){l.scrollTid&&clearTimeout(l.scrollTid),l.scrollTid=setTimeout(()=>g(C),l.scrollDelay)}function g(C){f+500>Ci()?(Math.abs(C.scrollTop-l.scrollTop)>40&&(C.scrollTop=l.scrollTop),l.scrollTid&&clearTimeout(l.scrollTid),p()):(l.scrollTop=C.scrollTop,p(),s("scrolled",l))}function E(C){return Be.undefined(C)||(C===-1&&(C=u),Be.string(C)&&(C=l.infinityEl.querySelector(C)),C&&C.tagName&&(C=C.offsetTop),Be.undefined(C))||C<0?!1:(f=Ci(),l.infinityEl.scrollTop=C,l.scrollTop=l.infinityEl.scrollTop,!0)}function b(){u=this.offsetHeight,n(0,u)}return t.$$set=C=>{"class"in C&&n(4,a=C.class),"pos"in C&&n(3,d=C.pos),"$$scope"in C&&n(5,r=C.$$scope)},t.$$.update=()=>{t.$$.dirty&24&&n(1,i=[a||"infinity-scroll"].concat(["has-pos-"+d])),t.$$.dirty&1&&u&&p()},[u,i,h,d,a,r,o,b]}class Gr extends Je{constructor(e){super(),Ze(this,e,Nm,Om,Ye,{class:4,pos:3})}}function Tm(t){let e,n,i,o;const r=t[9].default,s=qt(r,t,t[8],null);return{c(){e=m("a"),s&&s.c(),k(e,"href",t[2]),k(e,"class",t[0]),k(e,"style",t[1]),Qe(e,"has-path",t[4])},m(l,a){w(l,e,a),s&&s.m(e,null),t[11](e),n=!0,i||(o=Te(e,"click",t[10]),i=!0)},p(l,[a]){s&&s.p&&(!n||a&256)&&Gt(s,r,l,l[8],n?Wt(r,l[8],a,null):Kt(l[8]),null),(!n||a&4)&&k(e,"href",l[2]),(!n||a&1)&&k(e,"class",l[0]),(!n||a&2)&&k(e,"style",l[1]),(!n||a&17)&&Qe(e,"has-path",l[4])},i(l){n||(v(s,l),n=!0)},o(l){y(s,l),n=!1},d(l){l&&$(e),s&&s.d(l),t[11](null),i=!1,o()}}}function Mm(t,e,n){let i,o,r;Ce(t,De,g=>n(7,r=g));let{$$slots:s={},$$scope:l}=e,{class:a=""}=e,f,{href:u="/"}=e,{style:d=""}=e;const p=()=>f.focus();function h(g){In.call(this,t,g)}function _(g){be[g?"unshift":"push"](()=>{f=g,n(3,f)})}return t.$$set=g=>{"class"in g&&n(0,a=g.class),"href"in g&&n(5,u=g.href),"style"in g&&n(1,d=g.style),"$$scope"in g&&n(8,l=g.$$scope)},t.$$.update=()=>{t.$$.dirty&160&&n(2,i=u.indexOf("/")===0?r.basePath+u:u),t.$$.dirty&132&&n(4,o=r.basePath+r.path===i.replace(/(#|\?).*/,""))},[a,d,i,f,o,u,p,r,l,s,h,_]}class We extends Je{constructor(e){super(),Ze(this,e,Mm,Tm,Ye,{class:0,href:5,style:1,focus:6})}get focus(){return this.$$.ctx[6]}}const Rm=ui("notify");class Lm extends Rt{constructor(){super(),this.Notification=window.Notification||{permission:"denied"},this.prop("persist","volume",0),this.prop("persist","notificationCloseDelay",5e3),this.prop("persist","wantNotifications",this.Notification.requestPermission?null:!1),this.prop("ro","appHasFocus",()=>document.hasFocus()),this.prop("ro","volumeOptions",[["0","Muted"],["25","Low"],["50","Medium"],["100","Max"]]),this.prop("rw","desktopAccess",this.Notification.permission)}play(e=this){const n=document.getElementById("audio_notification");n&&(n.muted=!1,n.volume=parseInt(e.volume,10)/100,n.play())}requestDesktopAccess(){return this.Notification.requestPermission?(this.Notification.requestPermission(e=>this.update({desktopAccess:e})),this):this.update({desktopAccess:this.Notification.permission})}show(e,n={}){if(n.title||(n.title=document.title),!this.wantNotifications)return this._showInConsole(e,n);if(this.volume&&this.play(),this.desktopAccess!=="granted")return this.showInApp(e,n);const i=new Notification(n.title,{...n,body:e});return i.onclick=o=>this._onClick(o,i,n),setTimeout(()=>i.close(),this.notificationCloseDelay),i}showInApp(e,n={}){n.title||(n.title=document.title);const i=document.createElement("div"),o={...n,body:e,close:()=>{i.remove(),o.closed=!0},target:"app"};return i.className="notify-notification fade-in",i.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',i.querySelector("a").addEventListener("click",r=>{r.preventDefault(),o.close()}),i.querySelector("h6").textContent=n.title,i.querySelector("div").textContent=e,n.closeAfter===-1?i.querySelector("a").remove():setTimeout(()=>o.close(),n.closeAfter||this.notificationCloseDelay),setTimeout(()=>i.classList.add("is-visible"),1),document.body.appendChild(i),o}_onClick(e,n,i){n.close(),window.focus(),this.emit("click",{...i,sourceEvent:e})}_showInConsole(e,n){return Rm.info("[Notify]",e,n),{...n,body:e,close:()=>{},target:"console"}}}const gt=new Lm;function wl(t,e,n){const i=t.slice();return i[40]=e[n],i[42]=n,i}function kl(t,e,n){const i=t.slice();return i[43]=e[n],i}function yl(t){let e,n=$o(t[16],t[3])+"",i;return{c(){e=m("span"),i=O(n),k(e,"class","chat-header__topic ellipsis")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r[0]&65544&&n!==(n=$o(o[16],o[3])+"")&&T(i,n)},d(o){o&&$(e)}}}function Sl(t){let e,n,i,o,r,s;return n=new $e({props:{name:"users-cog"}}),i=new $e({props:{name:"times"}}),{c(){e=m("a"),q(n.$$.fragment),q(i.$$.fragment),k(e,"href","#settings"),k(e,"class","btn-hallow can-toggle"),Qe(e,"is-active",t[17]==="settings")},m(l,a){w(l,e,a),z(n,e,null),z(i,e,null),o=!0,r||(s=Te(e,"click",$t.toggle),r=!0)},p(l,a){(!o||a[0]&131072)&&Qe(e,"is-active",l[17]==="settings")},i(l){o||(v(n.$$.fragment,l),v(i.$$.fragment,l),o=!0)},o(l){y(n.$$.fragment,l),y(i.$$.fragment,l),o=!1},d(l){l&&$(e),H(n),H(i),r=!1,s()}}}function Im(t){let e,n,i=t[14](t[1].name)+"",o,r,s,l=!t[3].is("not_found"),a,f,u,d,p=!t[15].isSingleColumn&&yl(t),h=l&&Sl(t);return{c(){e=m("h1"),n=m("a"),o=O(i),r=S(),p&&p.c(),s=S(),h&&h.c(),a=ct(),k(n,"href","#settings"),k(e,"class","ellipsis")},m(_,g){w(_,e,g),c(e,n),c(n,o),w(_,r,g),p&&p.m(_,g),w(_,s,g),h&&h.m(_,g),w(_,a,g),f=!0,u||(d=Te(n,"click",$t.toggle),u=!0)},p(_,g){(!f||g[0]&16386)&&i!==(i=_[14](_[1].name)+"")&&T(o,i),_[15].isSingleColumn?p&&(p.d(1),p=null):p?p.p(_,g):(p=yl(_),p.c(),p.m(s.parentNode,s)),g[0]&8&&(l=!_[3].is("not_found")),l?h?(h.p(_,g),g[0]&8&&v(h,1)):(h=Sl(_),h.c(),v(h,1),h.m(a.parentNode,a)):h&&(Oe(),y(h,1,1,()=>{h=null}),Ne())},i(_){f||(v(h),f=!0)},o(_){y(h),f=!1},d(_){_&&$(e),_&&$(r),p&&p.d(_),_&&$(s),h&&h.d(_),_&&$(a),u=!1,d()}}}function El(t){let e,n,i,o;const r=[Dm,Pm],s=[];function l(a,f){return a[0]?0:1}return e=l(t),n=s[e]=r[e](t),{c(){n.c(),i=ct()},m(a,f){s[e].m(a,f),w(a,i,f),o=!0},p(a,f){let u=e;e=l(a),e===u?s[e].p(a,f):(Oe(),y(s[u],1,1,()=>{s[u]=null}),Ne(),n=s[e],n?n.p(a,f):(n=s[e]=r[e](a),n.c()),v(n,1),n.m(i.parentNode,i))},i(a){o||(v(n),o=!0)},o(a){y(n),o=!1},d(a){s[e].d(a),a&&$(i)}}}function Pm(t){let e,n;return e=new D_({props:{conversation:t[1],transition:{duration:250,x:t[15].isSingleColumn?t[15].width:0}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&2&&(r.conversation=i[1]),o[0]&32768&&(r.transition={duration:250,x:i[15].isSingleColumn?i[15].width:0}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Dm(t){let e,n;return e=new rm({props:{conversation:t[1],transition:{duration:250,x:t[15].isSingleColumn?t[15].width:0}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&2&&(r.conversation=i[1]),o[0]&32768&&(r.transition={duration:250,x:i[15].isSingleColumn?i[15].width:0}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Cl(t){let e,n;return e=new Sh({props:{conversation:t[3]}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&8&&(r.conversation=i[3]),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Al(t){let e,n,i,o,r,s=t[14]("Loading...")+"",l,a;return i=new $e({props:{name:"spinner",animation:"spin"}}),{c(){e=m("div"),n=m("span"),q(i.$$.fragment),o=S(),r=m("i"),l=O(s),k(e,"class","message__status-line for-loading has-pos-top")},m(f,u){w(f,e,u),c(e,n),z(i,n,null),c(n,o),c(n,r),c(r,l),a=!0},p(f,u){(!a||u[0]&16384)&&s!==(s=f[14]("Loading...")+"")&&T(l,s)},i(f){a||(v(i.$$.fragment,f),a=!0)},o(f){y(i.$$.fragment,f),a=!1},d(f){f&&$(e),H(i)}}}function Ol(t){let e,n,i,o,r,s=t[14]("Started chatting on %1",t[3].historyStartAt.getHumanDate())+"",l,a;return i=new $e({props:{name:"calendar-alt"}}),{c(){e=m("div"),n=m("span"),q(i.$$.fragment),o=S(),r=m("i"),l=O(s),k(e,"class","message__status-line for-start-of-history")},m(f,u){w(f,e,u),c(e,n),z(i,n,null),c(n,o),c(n,r),c(r,l),a=!0},p(f,u){(!a||u[0]&16392)&&s!==(s=f[14]("Started chatting on %1",f[3].historyStartAt.getHumanDate())+"")&&T(l,s)},i(f){a||(v(i.$$.fragment,f),a=!0)},o(f){y(i.$$.fragment,f),a=!1},d(f){f&&$(e),H(i)}}}function Nl(t){let e,n,i,o,r,s=t[40].ts.getHumanDate()+"",l,a;return i=new $e({props:{name:"calendar-alt"}}),{c(){e=m("div"),n=m("span"),q(i.$$.fragment),o=S(),r=m("i"),l=O(s),k(e,"class","message__status-line for-day-changed")},m(f,u){w(f,e,u),c(e,n),z(i,n,null),c(n,o),c(n,r),c(r,l),a=!0},p(f,u){(!a||u[0]&262144)&&s!==(s=f[40].ts.getHumanDate()+"")&&T(l,s)},i(f){a||(v(i.$$.fragment,f),a=!0)},o(f){y(i.$$.fragment,f),a=!1},d(f){f&&$(e),H(i)}}}function Tl(t){let e,n,i,o,r=t[14]("New messages")+"",s,l;return i=new $e({props:{name:"comments"}}),{c(){e=m("div"),n=m("span"),q(i.$$.fragment),o=S(),s=O(r),k(e,"class","message__status-line for-last-read")},m(a,f){w(a,e,f),c(e,n),z(i,n,null),c(n,o),c(n,s),l=!0},p(a,f){(!l||f[0]&16384)&&r!==(r=a[14]("New messages")+"")&&T(s,r)},i(a){l||(v(i.$$.fragment,a),l=!0)},o(a){y(i.$$.fragment,a),l=!1},d(a){a&&$(e),H(i)}}}function Ml(t){let e,n,i,o;return n=new $e({props:{name:t[40].expanded?"caret-square-up":"caret-square-down"}}),{c(){e=m("a"),q(n.$$.fragment),k(e,"href",i="#action:expand:"+t[40].index),k(e,"class","prevent-default")},m(r,s){w(r,e,s),z(n,e,null),o=!0},p(r,s){const l={};s[0]&262144&&(l.name=r[40].expanded?"caret-square-up":"caret-square-down"),n.$set(l),(!o||s[0]&262144&&i!==(i="#action:expand:"+r[40].index))&&k(e,"href",i)},i(r){o||(v(n.$$.fragment,r),o=!0)},o(r){y(n.$$.fragment,r),o=!1},d(r){r&&$(e),H(n)}}}function Um(t){return{c:Re,m:Re,p:Re,d:Re}}function Bm(t){let e,n,i,o,r,s;return{c(){e=m("div"),o=S(),k(e,"class",n="embed "+t[46].className)},m(l,a){w(l,e,a),w(l,o,a),r||(s=Or(i=eg.call(null,e,t[46])),r=!0)},p(l,a){t=l,a[0]&262144&&n!==(n="embed "+t[46].className)&&k(e,"class",n),i&&Ln(i.update)&&a[0]&262144&&i.update.call(null,t[46])},d(l){l&&$(e),l&&$(o),r=!1,s()}}}function Fm(t){return{c:Re,m:Re,p:Re,d:Re}}function Rl(t){let e,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:Fm,then:Bm,catch:Um,value:46};return ar(n=t[43],i),{c(){e=ct(),i.block.c()},m(o,r){w(o,e,r),i.block.m(o,i.anchor=r),i.mount=()=>e.parentNode,i.anchor=e},p(o,r){t=o,i.ctx=t,r[0]&262144&&n!==(n=t[43])&&ar(n,i)||of(i,t,r)},d(o){o&&$(e),i.block.d(o),i.token=null,i=null}}}function Ll(t){let e,n,i,o,r=t[40].from+"",s,l,a,f,u,d,p=t[14]("Mention")+"",h,_,g,E,b,C,M=t[14]("Chat")+"",D,L,A,R,U,B,W=t[14]("Whois")+"",G,I,K,X;return i=new $e({props:{name:"pick:"+t[40].from,color:t[40].color}}),u=new $e({props:{name:"quote-left"}}),b=new $e({props:{name:"comments"}}),U=new $e({props:{name:"address-card"}}),{c(){e=m("div"),n=m("a"),q(i.$$.fragment),o=S(),s=O(r),a=S(),f=m("a"),q(u.$$.fragment),d=S(),h=O(p),g=S(),E=m("a"),q(b.$$.fragment),C=S(),D=O(M),A=S(),R=m("a"),q(U.$$.fragment),B=S(),G=O(W),k(n,"href",l="#action:popover:"+t[40].index),k(n,"class","prevent-default"),k(f,"href",_="#action:mention:"+encodeURIComponent(t[40].from)),k(f,"class","on-hover prevent-default"),k(E,"href",L="#action:join:"+encodeURIComponent(t[40].from)),k(E,"class","on-hover prevent-default"),k(R,"href",I="#action:whois:"+encodeURIComponent(t[40].from)),k(R,"class","on-hover prevent-default"),k(e,"class","popover")},m(J,N){w(J,e,N),c(e,n),z(i,n,null),c(n,o),c(n,s),c(e,a),c(e,f),z(u,f,null),c(f,d),c(f,h),c(e,g),c(e,E),z(b,E,null),c(E,C),c(E,D),c(e,A),c(e,R),z(U,R,null),c(R,B),c(R,G),X=!0},p(J,N){const P={};N[0]&262144&&(P.name="pick:"+J[40].from),N[0]&262144&&(P.color=J[40].color),i.$set(P),(!X||N[0]&262144)&&r!==(r=J[40].from+"")&&T(s,r),(!X||N[0]&262144&&l!==(l="#action:popover:"+J[40].index))&&k(n,"href",l),(!X||N[0]&16384)&&p!==(p=J[14]("Mention")+"")&&T(h,p),(!X||N[0]&262144&&_!==(_="#action:mention:"+encodeURIComponent(J[40].from)))&&k(f,"href",_),(!X||N[0]&16384)&&M!==(M=J[14]("Chat")+"")&&T(D,M),(!X||N[0]&262144&&L!==(L="#action:join:"+encodeURIComponent(J[40].from)))&&k(E,"href",L),(!X||N[0]&16384)&&W!==(W=J[14]("Whois")+"")&&T(G,W),(!X||N[0]&262144&&I!==(I="#action:whois:"+encodeURIComponent(J[40].from)))&&k(R,"href",I)},i(J){X||(v(i.$$.fragment,J),v(u.$$.fragment,J),v(b.$$.fragment,J),v(U.$$.fragment,J),at(()=>{K||(K=tt(e,Dt,{duration:200},!0)),K.run(1)}),X=!0)},o(J){y(i.$$.fragment,J),y(u.$$.fragment,J),y(b.$$.fragment,J),y(U.$$.fragment,J),K||(K=tt(e,Dt,{duration:200},!1)),K.run(0),X=!1},d(J){J&&$(e),H(i),H(u),H(b),H(U),J&&K&&K.end()}}}function Il(t){let e,n,i,o,r,s=t[40].ts.format("%H:%M")+"",l,a,f,u=At(t[40].ts.toLocaleString())+"",d,p,h,_,g,E=t[40].from+"",b,C,M,D,L,A,R=t[40].html+"",U,B,W,G,I,K,X,J=t[40].dayChanged&&Nl(t),N=t[42]&&t[42]===t[18].length-t[3].unread&&Tl(t);h=new $e({props:{name:"pick:"+t[40].from,color:t[40].color}});let P=t[40].details&&Ml(t),Z=t[40].embeds,j=[];for(let Y=0;Y<Z.length;Y+=1)j[Y]=Rl(kl(t,Z,Y));let V=t[7]===t[40].index&&Ll(t);return{c(){J&&J.c(),e=S(),N&&N.c(),n=S(),i=m("div"),o=m("div"),r=m("span"),l=O(s),a=S(),f=m("span"),d=O(u),p=S(),q(h.$$.fragment),_=S(),g=m("a"),b=O(E),M=S(),D=m("div"),P&&P.c(),L=S(),A=new Tt(!1),U=S();for(let Y=0;Y<j.length;Y+=1)j[Y].c();B=S(),V&&V.c(),W=S(),k(f,"class","tooltip"),k(o,"class","message__ts has-tooltip"),k(g,"href",C="#action:popover:"+t[40].index),k(g,"class","message__from prevent-default"),Pt(g,"color",t[40].color),k(g,"tabindex","-1"),A.a=null,k(D,"class","message__text"),k(i,"class",G=t[40].className),k(i,"data-index",I=t[40].index),k(i,"data-ts",K=t[40].ts.toISOString()),Qe(i,"is-not-present",!t[19].get(t[40].from)),Qe(i,"is-expanded",!!t[40].expanded)},m(Y,F){J&&J.m(Y,F),w(Y,e,F),N&&N.m(Y,F),w(Y,n,F),w(Y,i,F),c(i,o),c(o,r),c(r,l),c(o,a),c(o,f),c(f,d),c(i,p),z(h,i,null),c(i,_),c(i,g),c(g,b),c(i,M),c(i,D),P&&P.m(D,null),c(D,L),A.m(R,D),c(i,U);for(let oe=0;oe<j.length;oe+=1)j[oe].m(i,null);c(i,B),V&&V.m(i,null),c(i,W),X=!0},p(Y,F){Y[40].dayChanged?J?(J.p(Y,F),F[0]&262144&&v(J,1)):(J=Nl(Y),J.c(),v(J,1),J.m(e.parentNode,e)):J&&(Oe(),y(J,1,1,()=>{J=null}),Ne()),Y[42]&&Y[42]===Y[18].length-Y[3].unread?N?(N.p(Y,F),F[0]&262152&&v(N,1)):(N=Tl(Y),N.c(),v(N,1),N.m(n.parentNode,n)):N&&(Oe(),y(N,1,1,()=>{N=null}),Ne()),(!X||F[0]&262144)&&s!==(s=Y[40].ts.format("%H:%M")+"")&&T(l,s),(!X||F[0]&262144)&&u!==(u=At(Y[40].ts.toLocaleString())+"")&&T(d,u);const oe={};if(F[0]&262144&&(oe.name="pick:"+Y[40].from),F[0]&262144&&(oe.color=Y[40].color),h.$set(oe),(!X||F[0]&262144)&&E!==(E=Y[40].from+"")&&T(b,E),(!X||F[0]&262144&&C!==(C="#action:popover:"+Y[40].index))&&k(g,"href",C),(!X||F[0]&262144)&&Pt(g,"color",Y[40].color),Y[40].details?P?(P.p(Y,F),F[0]&262144&&v(P,1)):(P=Ml(Y),P.c(),v(P,1),P.m(D,L)):P&&(Oe(),y(P,1,1,()=>{P=null}),Ne()),(!X||F[0]&262144)&&R!==(R=Y[40].html+"")&&A.p(R),F[0]&262144){Z=Y[40].embeds;let re;for(re=0;re<Z.length;re+=1){const ne=kl(Y,Z,re);j[re]?j[re].p(ne,F):(j[re]=Rl(ne),j[re].c(),j[re].m(i,B))}for(;re<j.length;re+=1)j[re].d(1);j.length=Z.length}Y[7]===Y[40].index?V?(V.p(Y,F),F[0]&262272&&v(V,1)):(V=Ll(Y),V.c(),v(V,1),V.m(i,W)):V&&(Oe(),y(V,1,1,()=>{V=null}),Ne()),(!X||F[0]&262144&&G!==(G=Y[40].className))&&k(i,"class",G),(!X||F[0]&262144&&I!==(I=Y[40].index))&&k(i,"data-index",I),(!X||F[0]&262144&&K!==(K=Y[40].ts.toISOString()))&&k(i,"data-ts",K),(!X||F[0]&786432)&&Qe(i,"is-not-present",!Y[19].get(Y[40].from)),(!X||F[0]&262144)&&Qe(i,"is-expanded",!!Y[40].expanded)},i(Y){X||(v(J),v(N),v(h.$$.fragment,Y),v(P),v(V),X=!0)},o(Y){y(J),y(N),y(h.$$.fragment,Y),y(P),y(V),X=!1},d(Y){J&&J.d(Y),Y&&$(e),N&&N.d(Y),Y&&$(n),Y&&$(i),H(h),P&&P.d(),wt(j,Y),V&&V.d()}}}function jm(t){let e,n,i,o,r=$o(t[16],t[3])+"",s,l;return i=new $e({props:{name:"exclamation-triangle"}}),{c(){e=m("div"),n=m("div"),q(i.$$.fragment),o=S(),s=O(r),k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(a,f){w(a,e,f),c(e,n),z(i,n,null),c(n,o),c(n,s),l=!0},p(a,f){(!l||f[0]&65544)&&r!==(r=$o(a[16],a[3])+"")&&T(s,r)},i(a){l||(v(i.$$.fragment,a),l=!0)},o(a){y(i.$$.fragment,a),l=!1},d(a){a&&$(e),H(i)}}}function zm(t){let e,n=t[14]("You are invited to join %1.",t[1].name)+"",i,o,r,s=t[14]("Do you want to join?")+"",l,a,f,u,d,p,h;return u=new We({props:{href:"#action:join:"+t[13],class:"btn prevent-default",$$slots:{default:[Gm]},$$scope:{ctx:t}}}),p=new We({props:{href:"#action:close:"+t[13],class:"btn is-secondary prevent-default",$$slots:{default:[Km]},$$scope:{ctx:t}}}),{c(){e=m("h2"),i=O(n),o=S(),r=m("p"),l=O(s),a=S(),f=m("p"),q(u.$$.fragment),d=S(),q(p.$$.fragment)},m(_,g){w(_,e,g),c(e,i),w(_,o,g),w(_,r,g),c(r,l),w(_,a,g),w(_,f,g),z(u,f,null),c(f,d),z(p,f,null),h=!0},p(_,g){(!h||g[0]&16386)&&n!==(n=_[14]("You are invited to join %1.",_[1].name)+"")&&T(i,n),(!h||g[0]&16384)&&s!==(s=_[14]("Do you want to join?")+"")&&T(l,s);const E={};g[0]&8192&&(E.href="#action:join:"+_[13]),g[0]&16384|g[1]&65536&&(E.$$scope={dirty:g,ctx:_}),u.$set(E);const b={};g[0]&8192&&(b.href="#action:close:"+_[13]),g[0]&16384|g[1]&65536&&(b.$$scope={dirty:g,ctx:_}),p.$set(b)},i(_){h||(v(u.$$.fragment,_),v(p.$$.fragment,_),h=!0)},o(_){y(u.$$.fragment,_),y(p.$$.fragment,_),h=!1},d(_){_&&$(e),_&&$(o),_&&$(r),_&&$(a),_&&$(f),H(u),H(p)}}}function Hm(t){let e,n,i,o,r,s=t[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",t[16].name,"/chat/"+t[16].connection_id+"#settings")+"",l,a,f;return i=new $e({props:{name:"exclamation-triangle"}}),{c(){e=m("div"),n=m("div"),q(i.$$.fragment),o=S(),r=new Tt(!1),r.a=null,k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(u,d){w(u,e,d),c(e,n),z(i,n,null),c(n,o),r.m(s,n),l=!0,a||(f=Te(e,"click",$t.toggle),a=!0)},p(u,d){(!l||d[0]&1114112)&&s!==(s=u[20]("Disconnected. Your connection %1 can be edited in [settings](%2).",u[16].name,"/chat/"+u[16].connection_id+"#settings")+"")&&r.p(s)},i(u){l||(v(i.$$.fragment,u),l=!0)},o(u){y(i.$$.fragment,u),l=!1},d(u){u&&$(e),H(i),a=!1,f()}}}function qm(t){let e,n=t[14]("You are not part of this conversation.")+"",i,o,r,s=t[14]('Do you want to chat with "%1"?',t[3].name)+"",l,a,f,u,d,p,h;return u=new We({props:{href:"#action:join:"+t[13],class:"btn prevent-default",$$slots:{default:[Ym]},$$scope:{ctx:t}}}),p=new We({props:{href:"/settings/conversation",class:"btn is-secondary prevent-default",$$slots:{default:[Vm]},$$scope:{ctx:t}}}),{c(){e=m("h2"),i=O(n),o=S(),r=m("p"),l=O(s),a=S(),f=m("p"),q(u.$$.fragment),d=S(),q(p.$$.fragment)},m(_,g){w(_,e,g),c(e,i),w(_,o,g),w(_,r,g),c(r,l),w(_,a,g),w(_,f,g),z(u,f,null),c(f,d),z(p,f,null),h=!0},p(_,g){(!h||g[0]&16384)&&n!==(n=_[14]("You are not part of this conversation.")+"")&&T(i,n),(!h||g[0]&16392)&&s!==(s=_[14]('Do you want to chat with "%1"?',_[3].name)+"")&&T(l,s);const E={};g[0]&8192&&(E.href="#action:join:"+_[13]),g[0]&16384|g[1]&65536&&(E.$$scope={dirty:g,ctx:_}),u.$set(E);const b={};g[0]&16384|g[1]&65536&&(b.$$scope={dirty:g,ctx:_}),p.$set(b)},i(_){h||(v(u.$$.fragment,_),v(p.$$.fragment,_),h=!0)},o(_){y(u.$$.fragment,_),y(p.$$.fragment,_),h=!1},d(_){_&&$(e),_&&$(o),_&&$(r),_&&$(a),_&&$(f),H(u),H(p)}}}function Wm(t){let e,n=t[14]("Connection does not exist.")+"",i,o,r,s=t[14]('Do you want to create the connection "%1"?',t[16].connection_id)+"",l,a,f,u,d,p,h;return u=new We({props:{href:"/settings/connections?uri="+encodeURIComponent(t[22](t[3])),class:"btn",$$slots:{default:[Zm]},$$scope:{ctx:t}}}),p=new We({props:{href:"/settings/connections",class:"btn is-secondary",$$slots:{default:[Jm]},$$scope:{ctx:t}}}),{c(){e=m("h2"),i=O(n),o=S(),r=m("p"),l=O(s),a=S(),f=m("p"),q(u.$$.fragment),d=S(),q(p.$$.fragment)},m(_,g){w(_,e,g),c(e,i),w(_,o,g),w(_,r,g),c(r,l),w(_,a,g),w(_,f,g),z(u,f,null),c(f,d),z(p,f,null),h=!0},p(_,g){(!h||g[0]&16384)&&n!==(n=_[14]("Connection does not exist.")+"")&&T(i,n),(!h||g[0]&81920)&&s!==(s=_[14]('Do you want to create the connection "%1"?',_[16].connection_id)+"")&&T(l,s);const E={};g[0]&8&&(E.href="/settings/connections?uri="+encodeURIComponent(_[22](_[3]))),g[0]&16384|g[1]&65536&&(E.$$scope={dirty:g,ctx:_}),u.$set(E);const b={};g[0]&16384|g[1]&65536&&(b.$$scope={dirty:g,ctx:_}),p.$set(b)},i(_){h||(v(u.$$.fragment,_),v(p.$$.fragment,_),h=!0)},o(_){y(u.$$.fragment,_),y(p.$$.fragment,_),h=!1},d(_){_&&$(e),_&&$(o),_&&$(r),_&&$(a),_&&$(f),H(u),H(p)}}}function Gm(t){let e,n,i,o=t[14]("Yes")+"",r,s;return e=new $e({props:{name:"thumbs-up"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("Yes")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Km(t){let e,n,i,o=t[14]("No")+"",r,s;return e=new $e({props:{name:"thumbs-down"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("No")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Ym(t){let e,n,i,o=t[14]("Yes")+"",r,s;return e=new $e({props:{name:"thumbs-up"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("Yes")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Vm(t){let e,n,i,o=t[14]("No")+"",r,s;return e=new $e({props:{name:"thumbs-down"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a[0]&16384)&&o!==(o=l[14]("No")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Zm(t){let e,n,i=t[14]("Yes")+"",o,r;return e=new $e({props:{name:"thumbs-up"}}),{c(){q(e.$$.fragment),n=S(),o=O(i)},m(s,l){z(e,s,l),w(s,n,l),w(s,o,l),r=!0},p(s,l){(!r||l[0]&16384)&&i!==(i=s[14]("Yes")+"")&&T(o,i)},i(s){r||(v(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){H(e,s),s&&$(n),s&&$(o)}}}function Jm(t){let e,n,i=t[14]("No")+"",o,r;return e=new $e({props:{name:"thumbs-down"}}),{c(){q(e.$$.fragment),n=S(),o=O(i)},m(s,l){z(e,s,l),w(s,n,l),w(s,o,l),r=!0},p(s,l){(!r||l[0]&16384)&&i!==(i=s[14]("No")+"")&&T(o,i)},i(s){r||(v(e.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),r=!1},d(s){H(e,s),s&&$(n),s&&$(o)}}}function Pl(t){let e,n,i=t[14]("Uploading %1...",t[10].file.name)+"",o,r,s,l,a,f,u,d;return{c(){e=m("div"),n=m("div"),o=O(i),r=S(),s=m("div"),l=m("div"),a=O(t[11]),f=O("%"),k(l,"class","progress__bar"),Pt(l,"width",t[11]+"%"),k(s,"class","progress"),k(e,"class","message")},m(p,h){w(p,e,h),c(e,n),c(n,o),c(e,r),c(e,s),c(s,l),c(l,a),c(l,f),d=!0},p(p,h){(!d||h[0]&17408)&&i!==(i=p[14]("Uploading %1...",p[10].file.name)+"")&&T(o,i),(!d||h[0]&2048)&&T(a,p[11]),(!d||h[0]&2048)&&Pt(l,"width",p[11]+"%")},i(p){d||(at(()=>{u||(u=tt(e,Dt,{duration:200},!0)),u.run(1)}),d=!0)},o(p){u||(u=tt(e,Dt,{duration:200},!1)),u.run(0),d=!1},d(p){p&&$(e),p&&u&&u.end()}}}function Qm(t){let e,n,i,o,r,s=t[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"",l;return i=new $e({props:{name:"info-circle"}}),{c(){e=m("div"),n=m("div"),q(i.$$.fragment),o=S(),r=new Tt(!1),r.a=null,k(n,"class","message__text"),k(e,"class","message is-highlighted")},m(a,f){w(a,e,f),c(e,n),z(i,n,null),c(n,o),r.m(s,n),l=!0},p(a,f){(!l||f[0]&1048576)&&s!==(s=a[20]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"")&&r.p(s)},i(a){l||(v(i.$$.fragment,a),l=!0)},o(a){y(i.$$.fragment,a),l=!1},d(a){a&&$(e),H(i)}}}function Dl(t){let e,n,i,o,r,s=t[14]("Loading...")+"",l,a;return i=new $e({props:{name:"spinner",animation:"spin"}}),{c(){e=m("div"),n=m("span"),q(i.$$.fragment),o=S(),r=m("i"),l=O(s),k(e,"class","message__status-line for-loading has-pos-bottom")},m(f,u){w(f,e,u),c(e,n),z(i,n,null),c(n,o),c(n,r),c(r,l),a=!0},p(f,u){(!a||u[0]&16384)&&s!==(s=f[14]("Loading...")+"")&&T(l,s)},i(f){a||(v(i.$$.fragment,f),a=!0)},o(f){y(i.$$.fragment,f),a=!1},d(f){f&&$(e),H(i)}}}function Ul(t){let e,n,i,o,r=t[14]("Jump to %1",t[6].format("%b %e %H:%M"))+"",s,l,a;return i=new $e({props:{name:"external-link-alt"}}),{c(){e=m("div"),n=m("a"),q(i.$$.fragment),o=S(),s=O(r),k(n,"href",l=t[1].path),k(e,"class","message__status-line for-jump-to-now")},m(f,u){w(f,e,u),c(e,n),z(i,n,null),c(n,o),c(n,s),a=!0},p(f,u){(!a||u[0]&16448)&&r!==(r=f[14]("Jump to %1",f[6].format("%b %e %H:%M"))+"")&&T(s,r),(!a||u[0]&2&&l!==(l=f[1].path))&&k(n,"href",l)},i(f){a||(v(i.$$.fragment,f),a=!0)},o(f){y(i.$$.fragment,f),a=!1},d(f){f&&$(e),H(i)}}}function Xm(t){let e=t[18].length<10&&!t[3].is("not_found"),n,i=t[3].is("loading")&&t[18].length>10,o,r=t[3].historyStartAt&&!t[3].is("not_found")&&t[18].length,s,l,a,f,u,d,p,h,_,g,E,b,C=t[3].is("loading"),M,D,L,A=e&&Cl(t),R=i&&Al(t),U=r&&Ol(t),B=t[18].render(),W=[];for(let j=0;j<B.length;j+=1)W[j]=Il(wl(t,B,j));const G=j=>y(W[j],1,1,()=>{W[j]=null}),I=[Wm,qm,Hm,zm,jm],K=[];function X(j,V){return V[0]&65536&&(a=null),V[0]&8&&(f=null),V[0]&65536&&(u=null),V[0]&8&&(d=null),V[0]&8&&(p=null),a==null&&(a=!!j[16].is("not_found")),a?0:(f==null&&(f=!!j[3].is("not_found")),f?1:(u==null&&(u=!!(!j[16].is("unreachable")&&j[16].frozen)),u?2:(d==null&&(d=!!(j[3].frozen&&j[3].is("pending"))),d?3:(p==null&&(p=!!(j[3].frozen&&!j[3].is("locked"))),p?4:-1))))}~(h=X(t,[-1,-1]))&&(_=K[h]=I[h](t));let J=t[11]&&Pl(t),N=gt.wantNotifications===null&&Qm(t),P=C&&Dl(t),Z=!t[3].historyStopAt&&t[18].length&&Ul(t);return{c(){A&&A.c(),n=S(),R&&R.c(),o=S(),U&&U.c(),s=S();for(let j=0;j<W.length;j+=1)W[j].c();l=S(),_&&_.c(),g=S(),J&&J.c(),E=S(),N&&N.c(),b=S(),P&&P.c(),M=S(),Z&&Z.c(),D=ct()},m(j,V){A&&A.m(j,V),w(j,n,V),R&&R.m(j,V),w(j,o,V),U&&U.m(j,V),w(j,s,V);for(let Y=0;Y<W.length;Y+=1)W[Y].m(j,V);w(j,l,V),~h&&K[h].m(j,V),w(j,g,V),J&&J.m(j,V),w(j,E,V),N&&N.m(j,V),w(j,b,V),P&&P.m(j,V),w(j,M,V),Z&&Z.m(j,V),w(j,D,V),L=!0},p(j,V){if(V[0]&262152&&(e=j[18].length<10&&!j[3].is("not_found")),e?A?(A.p(j,V),V[0]&262152&&v(A,1)):(A=Cl(j),A.c(),v(A,1),A.m(n.parentNode,n)):A&&(Oe(),y(A,1,1,()=>{A=null}),Ne()),V[0]&262152&&(i=j[3].is("loading")&&j[18].length>10),i?R?(R.p(j,V),V[0]&262152&&v(R,1)):(R=Al(j),R.c(),v(R,1),R.m(o.parentNode,o)):R&&(Oe(),y(R,1,1,()=>{R=null}),Ne()),V[0]&262152&&(r=j[3].historyStartAt&&!j[3].is("not_found")&&j[18].length),r?U?(U.p(j,V),V[0]&262152&&v(U,1)):(U=Ol(j),U.c(),v(U,1),U.m(s.parentNode,s)):U&&(Oe(),y(U,1,1,()=>{U=null}),Ne()),V[0]&802952){B=j[18].render();let F;for(F=0;F<B.length;F+=1){const oe=wl(j,B,F);W[F]?(W[F].p(oe,V),v(W[F],1)):(W[F]=Il(oe),W[F].c(),v(W[F],1),W[F].m(l.parentNode,l))}for(Oe(),F=B.length;F<W.length;F+=1)G(F);Ne()}let Y=h;h=X(j,V),h===Y?~h&&K[h].p(j,V):(_&&(Oe(),y(K[Y],1,1,()=>{K[Y]=null}),Ne()),~h?(_=K[h],_?_.p(j,V):(_=K[h]=I[h](j),_.c()),v(_,1),_.m(g.parentNode,g)):_=null),j[11]?J?(J.p(j,V),V[0]&2048&&v(J,1)):(J=Pl(j),J.c(),v(J,1),J.m(E.parentNode,E)):J&&(Oe(),y(J,1,1,()=>{J=null}),Ne()),gt.wantNotifications===null&&N.p(j,V),V[0]&8&&(C=j[3].is("loading")),C?P?(P.p(j,V),V[0]&8&&v(P,1)):(P=Dl(j),P.c(),v(P,1),P.m(M.parentNode,M)):P&&(Oe(),y(P,1,1,()=>{P=null}),Ne()),!j[3].historyStopAt&&j[18].length?Z?(Z.p(j,V),V[0]&262152&&v(Z,1)):(Z=Ul(j),Z.c(),v(Z,1),Z.m(D.parentNode,D)):Z&&(Oe(),y(Z,1,1,()=>{Z=null}),Ne())},i(j){if(!L){v(A),v(R),v(U);for(let V=0;V<B.length;V+=1)v(W[V]);v(_),v(J),v(N),v(P),v(Z),L=!0}},o(j){y(A),y(R),y(U),W=W.filter(Boolean);for(let V=0;V<W.length;V+=1)y(W[V]);y(_),y(J),y(N),y(P),y(Z),L=!1},d(j){A&&A.d(j),j&&$(n),R&&R.d(j),j&&$(o),U&&U.d(j),j&&$(s),wt(W,j),j&&$(l),~h&&K[h].d(j),j&&$(g),J&&J.d(j),j&&$(E),N&&N.d(j),j&&$(b),P&&P.d(j),j&&$(M),Z&&Z.d(j),j&&$(D)}}}function Bl(t){let e,n,i,o=t[3].is("private")&&t[3].info.nick,r;n=new Rf({props:{conversation:t[1]}});let s=o&&Fl(t);return{c(){e=m("div"),q(n.$$.fragment),i=S(),s&&s.c(),k(e,"class","sidebar-right")},m(l,a){w(l,e,a),z(n,e,null),c(e,i),s&&s.m(e,null),r=!0},p(l,a){const f={};a[0]&2&&(f.conversation=l[1]),n.$set(f),a[0]&8&&(o=l[3].is("private")&&l[3].info.nick),o?s?s.p(l,a):(s=Fl(l),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(l){r||(v(n.$$.fragment,l),r=!0)},o(l){y(n.$$.fragment,l),r=!1},d(l){l&&$(e),H(n),s&&s.d()}}}function Fl(t){let e,n=t[14]("Information")+"",i,o,r,s=t[20](...Li(t[3].info))+"";return{c(){e=m("h3"),i=O(n),o=S(),r=m("p")},m(l,a){w(l,e,a),c(e,i),w(l,o,a),w(l,r,a),r.innerHTML=s},p(l,a){a[0]&16384&&n!==(n=l[14]("Information")+"")&&T(i,n),a[0]&1048584&&s!==(s=l[20](...Li(l[3].info))+"")&&(r.innerHTML=s)},d(l){l&&$(e),l&&$(o),l&&$(r)}}}function xm(t){let e,n,i,o,r,s,l,a,f,u,d,p=t[15].hasRightColumn&&!t[3].is("not_found"),h,_,g,E;e=new Ut({props:{$$slots:{default:[Im]},$$scope:{ctx:t}}});let b=t[17]==="settings"&&El(t);o=new Gr({props:{class:"main is-above-chat-input",$$slots:{default:[Xm]},$$scope:{ctx:t}}}),o.$on("scrolled",t[28]),o.$on("visibility",t[29]);function C(U){t[30](U)}function M(U){t[31](U)}function D(U){t[32](U)}function L(U){t[33](U)}let A={conversation:t[1]};t[9]!==void 0&&(A.fillIn=t[9]),t[8]!==void 0&&(A.focus=t[8]),t[10]!==void 0&&(A.uploader=t[10]),t[11]!==void 0&&(A.uploadProgress=t[11]),s=new Mf({props:A}),be.push(()=>ye(s,"fillIn",C,t[9])),be.push(()=>ye(s,"focus",M,t[8])),be.push(()=>ye(s,"uploader",D,t[10])),be.push(()=>ye(s,"uploadProgress",L,t[11]));let R=p&&Bl(t);return{c(){q(e.$$.fragment),n=S(),b&&b.c(),i=S(),q(o.$$.fragment),r=S(),q(s.$$.fragment),d=S(),R&&R.c(),h=ct()},m(U,B){z(e,U,B),w(U,n,B),b&&b.m(U,B),w(U,i,B),z(o,U,B),w(U,r,B),z(s,U,B),w(U,d,B),R&&R.m(U,B),w(U,h,B),_=!0,g||(E=Te(window,"focus",t[23]),g=!0)},p(U,B){const W={};B[0]&245770|B[1]&65536&&(W.$$scope={dirty:B,ctx:U}),e.$set(W),U[17]==="settings"?b?(b.p(U,B),B[0]&131072&&v(b,1)):(b=El(U),b.c(),v(b,1),b.m(i.parentNode,i)):b&&(Oe(),y(b,1,1,()=>{b=null}),Ne());const G={};B[0]&1928394|B[1]&65536&&(G.$$scope={dirty:B,ctx:U}),o.$set(G);const I={};B[0]&2&&(I.conversation=U[1]),!l&&B[0]&512&&(l=!0,I.fillIn=U[9],ke(()=>l=!1)),!a&&B[0]&256&&(a=!0,I.focus=U[8],ke(()=>a=!1)),!f&&B[0]&1024&&(f=!0,I.uploader=U[10],ke(()=>f=!1)),!u&&B[0]&2048&&(u=!0,I.uploadProgress=U[11],ke(()=>u=!1)),s.$set(I),B[0]&32776&&(p=U[15].hasRightColumn&&!U[3].is("not_found")),p?R?(R.p(U,B),B[0]&32776&&v(R,1)):(R=Bl(U),R.c(),v(R,1),R.m(h.parentNode,h)):R&&(Oe(),y(R,1,1,()=>{R=null}),Ne())},i(U){_||(v(e.$$.fragment,U),v(b),v(o.$$.fragment,U),v(s.$$.fragment,U),v(R),_=!0)},o(U){y(e.$$.fragment,U),y(b),y(o.$$.fragment,U),y(s.$$.fragment,U),y(R),_=!1},d(U){H(e,U),U&&$(n),b&&b.d(U),U&&$(i),H(o,U),U&&$(r),H(s,U),U&&$(d),R&&R.d(U),U&&$(h),g=!1,E()}}}function eg(t,e){const n=e.nodes[0]&&e.nodes[0].parentNode;if(n&&n.classList){const i=n.classList.contains("embed")?"add":"remove";n.classList[i]("hidden")}e.nodes.forEach(i=>t.appendChild(i))}function tg(t,e,n){let i,o,r=Re,s=()=>(r(),r=dt(I,x=>n(3,o=x)),I),l,a,f,u,d,p=Re,h=()=>(p(),p=dt(G,x=>n(16,d=x)),G),_,g,E=Re,b=()=>(E(),E=dt(K,x=>n(18,g=x)),K),C,M=Re,D=()=>(M(),M=dt(X,x=>n(19,C=x)),X),L;Ce(t,De,x=>n(26,l=x)),Ce(t,ot,x=>n(14,f=x)),Ce(t,Mn,x=>n(15,u=x)),Ce(t,$t,x=>n(17,_=x)),Ce(t,Bt,x=>n(20,L=x)),t.$$.on_destroy.push(()=>r()),t.$$.on_destroy.push(()=>p()),t.$$.on_destroy.push(()=>E()),t.$$.on_destroy.push(()=>M());let{connection_id:A=""}=e,{conversation_id:R=""}=e,{title:U="Chat"}=e;const B=new Am,W=ht("user");Ce(t,W,x=>n(27,a=x));let G=W.notifications;h();let I=W.notifications;s();let K=I.messages;b();let X=I.participants;D();let J=new vt,N=-1,P={},Z,j,V,Y,F="",oe;Ft(()=>{B.attach(document.querySelector(".main"),V),oe=De.on("click",de)}),Tr(()=>{oe(),Object.keys(P).forEach(x=>P[x]()),B.detach()});function re(){const[x,me]=o.connection_id.split("-");return x+"://"+me+"/"+i+"?tls=1"}function ne(){(I.notifications||I.unread)&&I.markAsRead()}function de(x){const me=x.target.closest("a[href]");if((!me||me.href.indexOf("popover:")===-1)&&n(7,N=-1),!me)return;const we=me.classList.contains("le-thumbnail"),Fe=me.classList.contains("prevent-default");if((we||Fe)&&x.preventDefault(),we)return ac(x,me.querySelector("img"));const fe=(Fe||me.closest(".embed"))&&me.hash.match(/action:([a-z]+):(.*)$/)||["all","unknown","value"];if(fe[2]=decodeURIComponent(fe[2]),["close","join","whois"].indexOf(fe[1])!==-1)I.send("/"+fe[1]+" "+fe[2]),fe[1]==="close"&&De.go("/settings/conversation");else if(fe[1]==="expand"){const ie=I.messages.get(fe[2]);ie.expanded=!ie.expanded,I.messages.update({messages:!0})}else if(fe[1]==="mention")j(fe[2]);else if(fe[1]==="popover"){const ie=parseInt(fe[2],10);n(7,N=N!==ie?ie:-1)}else!me.target&&me.getAttribute("href").indexOf("/")!==0&&(me.target="_blank")}function Se(x,me){I.connection_id===x&&I.conversation_id===me||W.setActiveConversation({connection_id:x,conversation_id:me})}function se(x){if(x.activeConversation!==I){if(P.conversation&&P.conversation(),P.unread&&P.unread(),popoverMessage=null,s(n(1,I=x.activeConversation)),b(n(2,K=I.messages)),D(n(5,X=I.participants)),h(n(4,G=x.findConversation({connection_id:I.connection_id})||I)),n(6,J=new vt),P.conversation=I.subscribe(me=>{s(n(1,I=me))}),P.unread=()=>I.update({unread:0}),I.markAsRead(),n(12,F=Ch(De.hash)&&De.hash||""),F)return I.load({around:F});if(!I.historyStopAt)return I.load({around:J.toISOString()})}}const he=x=>U_(x,{conversation:I}),Ue=x=>B_(x,{conversation:I,timestampFromUrl:F});function Le(x){j=x,n(9,j)}function _e(x){Z=x,n(8,Z)}function pe(x){V=x,n(10,V)}function Pe(x){Y=x,n(11,Y)}return t.$$set=x=>{"connection_id"in x&&n(25,A=x.connection_id),"conversation_id"in x&&n(0,R=x.conversation_id),"title"in x&&n(24,U=x.title)},t.$$.update=()=>{t.$$.dirty[0]&33554433&&Se(A,R),t.$$.dirty[0]&134217728&&se(a),t.$$.dirty[0]&134217732&&K.update({expandUrlToMedia:a.expandUrlToMedia}),t.$$.dirty[0]&8&&n(13,i=encodeURIComponent(o.name)),t.$$.dirty[0]&8&&n(24,U=o.title),t.$$.dirty[0]&67108874&&!l.hash&&!o.historyStopAt&&I.load({})},[R,I,K,o,G,X,J,N,Z,j,V,Y,F,i,f,u,d,_,g,C,L,W,re,ne,U,A,l,a,he,Ue,Le,_e,pe,Pe]}class ng extends Je{constructor(e){super(),Ze(this,e,tg,xm,Ye,{connection_id:25,conversation_id:0,title:24},null,[-1,-1])}}function ig(t){let e;const n=t[5].default,i=qt(n,t,t[4],null);return{c(){i&&i.c()},m(o,r){i&&i.m(o,r),e=!0},p(o,r){i&&i.p&&(!e||r&16)&&Gt(i,n,o,o[4],e?Wt(n,o[4],r,null):Kt(o[4]),null)},i(o){e||(v(i,o),e=!0)},o(o){y(i,o),e=!1},d(o){i&&i.d(o)}}}function og(t){let e=t[3]("Loading...")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&8&&e!==(e=i[3]("Loading...")+"")&&T(n,e)},i:Re,o:Re,d(i){i&&$(n)}}}function rg(t){let e,n=t[3](t[2].error())+"",i;return{c(){e=m("div"),i=O(n),k(e,"class","error")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&12&&n!==(n=o[3](o[2].error())+"")&&T(i,n)},i:Re,o:Re,d(o){o&&$(e)}}}function sg(t){let e,n,i,o,r,s,l;const a=[rg,og,ig],f=[];function u(d,p){return p&4&&(i=null),p&4&&(o=null),i==null&&(i=!!d[2].is("error")),i?0:(o==null&&(o=!!d[2].is("loading")),o?1:2)}return r=u(t,-1),s=f[r]=a[r](t),{c(){e=m("tr"),n=m("td"),s.c(),k(n,"colspan",t[0])},m(d,p){w(d,e,p),c(e,n),f[r].m(n,null),l=!0},p(d,[p]){let h=r;r=u(d,p),r===h?f[r].p(d,p):(Oe(),y(f[h],1,1,()=>{f[h]=null}),Ne(),s=f[r],s?s.p(d,p):(s=f[r]=a[r](d),s.c()),v(s,1),s.m(n,null)),(!l||p&1)&&k(n,"colspan",d[0])},i(d){l||(v(s),l=!0)},o(d){y(s),l=!1},d(d){d&&$(e),f[r].d()}}}function lg(t,e,n){let i,o=Re,r=()=>(o(),o=dt(u,d=>n(2,i=d)),u),s;Ce(t,ot,d=>n(3,s=d)),t.$$.on_destroy.push(()=>o());let{$$slots:l={},$$scope:a}=e,{colspan:f=1}=e,{op:u}=e;return r(),t.$$set=d=>{"colspan"in d&&n(0,f=d.colspan),"op"in d&&r(n(1,u=d.op)),"$$scope"in d&&n(4,a=d.$$scope)},[f,u,i,s,a,l]}class Co extends Je{constructor(e){super(),Ze(this,e,lg,sg,Ye,{colspan:0,op:1})}}function jl(t,e,n){const i=t.slice();return i[9]=e[n],i}function zl(t,e,n){const i=t.slice();return i[12]=e[n],i}function ag(t){let e,n=t[2]("Connections")+"",i;return{c(){e=m("h1"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Connections")+"")&&T(i,n)},d(o){o&&$(e)}}}function fg(t){let e=t[12].host.replace(/:\d+$/,"")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&1&&e!==(e=i[12].host.replace(/:\d+$/,"")+"")&&T(n,e)},d(i){i&&$(n)}}}function Hl(t){let e,n,i,o,r,s=(Be.true(t[12].tls_verify)?t[2]("Strict"):Be.true(t[12].tls)?t[2]("Yes"):t[2]("No"))+"",l,a,f,u=t[12].nick+"",d,p,h;return i=new We({props:{href:"/settings/connection/"+t[12].connection_id,$$slots:{default:[fg]},$$scope:{ctx:t}}}),{c(){e=m("tr"),n=m("td"),q(i.$$.fragment),o=S(),r=m("td"),l=O(s),a=S(),f=m("td"),d=O(u),p=S()},m(_,g){w(_,e,g),c(e,n),z(i,n,null),c(e,o),c(e,r),c(r,l),c(e,a),c(e,f),c(f,d),c(e,p),h=!0},p(_,g){const E={};g&1&&(E.href="/settings/connection/"+_[12].connection_id),g&32769&&(E.$$scope={dirty:g,ctx:_}),i.$set(E),(!h||g&5)&&s!==(s=(Be.true(_[12].tls_verify)?_[2]("Strict"):Be.true(_[12].tls)?_[2]("Yes"):_[2]("No"))+"")&&T(l,s),(!h||g&1)&&u!==(u=_[12].nick+"")&&T(d,u)},i(_){h||(v(i.$$.fragment,_),h=!0)},o(_){y(i.$$.fragment,_),h=!1},d(_){_&&$(e),H(i)}}}function ql(t){let e,n,i;return n=new We({props:{href:"/settings/connection/add",class:"btn",$$slots:{default:[ug]},$$scope:{ctx:t}}}),{c(){e=m("div"),q(n.$$.fragment),k(e,"class","form-actions")},m(o,r){w(o,e,r),z(n,e,null),i=!0},p(o,r){const s={};r&32772&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){i||(v(n.$$.fragment,o),i=!0)},o(o){y(n.$$.fragment,o),i=!1},d(o){o&&$(e),H(n)}}}function ug(t){let e,n,i,o=t[2]("Add")+"",r,s;return e=new $e({props:{name:"plus-circle"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Add")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function cg(t){let e=t[9].url.host.replace(/:\d+$/,"")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&8&&e!==(e=i[9].url.host.replace(/:\d+$/,"")+"")&&T(n,e)},d(i){i&&$(n)}}}function Wl(t){let e,n,i,o,r,s=(Be.true(t[9].tls_verify)?t[2]("Strict"):Be.true(t[9].tls)?t[2]("Yes"):t[2]("No"))+"",l,a,f,u=(t[9].is_default?t[2]("Yes"):t[2]("No"))+"",d,p,h,_=(t[9].is_forced?t[2]("Yes"):t[2]("No"))+"",g,E,b;return i=new We({props:{href:"/settings/connection-profile/"+t[9].id,$$slots:{default:[cg]},$$scope:{ctx:t}}}),{c(){e=m("tr"),n=m("td"),q(i.$$.fragment),o=S(),r=m("td"),l=O(s),a=S(),f=m("td"),d=O(u),p=S(),h=m("td"),g=O(_),E=S()},m(C,M){w(C,e,M),c(e,n),z(i,n,null),c(e,o),c(e,r),c(r,l),c(e,a),c(e,f),c(f,d),c(e,p),c(e,h),c(h,g),c(e,E),b=!0},p(C,M){const D={};M&8&&(D.href="/settings/connection-profile/"+C[9].id),M&32776&&(D.$$scope={dirty:M,ctx:C}),i.$set(D),(!b||M&12)&&s!==(s=(Be.true(C[9].tls_verify)?C[2]("Strict"):Be.true(C[9].tls)?C[2]("Yes"):C[2]("No"))+"")&&T(l,s),(!b||M&12)&&u!==(u=(C[9].is_default?C[2]("Yes"):C[2]("No"))+"")&&T(d,u),(!b||M&12)&&_!==(_=(C[9].is_forced?C[2]("Yes"):C[2]("No"))+"")&&T(g,_)},i(C){b||(v(i.$$.fragment,C),b=!0)},o(C){y(i.$$.fragment,C),b=!1},d(C){C&&$(e),H(i)}}}function Gl(t){let e,n,i;return n=new We({props:{href:"/settings/connection-profile/add",class:"btn",$$slots:{default:[pg]},$$scope:{ctx:t}}}),{c(){e=m("div"),q(n.$$.fragment),k(e,"class","form-actions")},m(o,r){w(o,e,r),z(n,e,null),i=!0},p(o,r){const s={};r&32772&&(s.$$scope={dirty:r,ctx:o}),n.$set(s)},i(o){i||(v(n.$$.fragment,o),i=!0)},o(o){y(n.$$.fragment,o),i=!1},d(o){o&&$(e),H(n)}}}function pg(t){let e,n,i,o=t[2]("Add")+"",r,s;return e=new $e({props:{name:"plus-circle"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Add")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function dg(t){let e,n,i,o,r=t[2]("Connections")+"",s,l,a,f,u,d,p=t[2]("Host")+"",h,_,g,E=t[2]("Secure")+"",b,C,M,D=t[2]("Nick")+"",L,A,R,U,B,W,G=t[2]("Connection profiles")+"",I,K,X,J=t[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"",N,P,Z,j,V,Y,F=t[2]("Host")+"",oe,re,ne,de=t[2]("Secure")+"",Se,se,he,Ue=t[2]("Default")+"",Le,_e,pe,Pe=t[2]("Forced")+"",x,me,we,Fe,je,fe,ie;e=new Ut({props:{$$slots:{default:[ag]},$$scope:{ctx:t}}});let ve=t[0],Ee=[];for(let ge=0;ge<ve.length;ge+=1)Ee[ge]=Hl(zl(t,ve,ge));const ce=ge=>y(Ee[ge],1,1,()=>{Ee[ge]=null});let ee=(t[1]||!t[4].forced_connection)&&ql(t);Fe=new Co({props:{op:t[5].op}});let ae=t[3].search(),te=[];for(let ge=0;ge<ae.length;ge+=1)te[ge]=Wl(jl(t,ae,ge));const Q=ge=>y(te[ge],1,1,()=>{te[ge]=null});let ue=t[1]&&Gl(t);return{c(){q(e.$$.fragment),n=S(),i=m("main"),o=m("h2"),s=O(r),l=S(),a=m("table"),f=m("thead"),u=m("tr"),d=m("th"),h=O(p),_=S(),g=m("th"),b=O(E),C=S(),M=m("th"),L=O(D),A=S(),R=m("tbody");for(let ge=0;ge<Ee.length;ge+=1)Ee[ge].c();U=S(),ee&&ee.c(),B=S(),W=m("h2"),I=O(G),K=S(),X=m("p"),N=O(J),P=S(),Z=m("table"),j=m("thead"),V=m("tr"),Y=m("th"),oe=O(F),re=S(),ne=m("th"),Se=O(de),se=S(),he=m("th"),Le=O(Ue),_e=S(),pe=m("th"),x=O(Pe),me=S(),we=m("tbody"),q(Fe.$$.fragment),je=S();for(let ge=0;ge<te.length;ge+=1)te[ge].c();fe=S(),ue&&ue.c(),k(i,"class","main")},m(ge,Ae){z(e,ge,Ae),w(ge,n,Ae),w(ge,i,Ae),c(i,o),c(o,s),c(i,l),c(i,a),c(a,f),c(f,u),c(u,d),c(d,h),c(u,_),c(u,g),c(g,b),c(u,C),c(u,M),c(M,L),c(a,A),c(a,R);for(let Xe=0;Xe<Ee.length;Xe+=1)Ee[Xe].m(R,null);c(i,U),ee&&ee.m(i,null),c(i,B),c(i,W),c(W,I),c(i,K),c(i,X),c(X,N),c(i,P),c(i,Z),c(Z,j),c(j,V),c(V,Y),c(Y,oe),c(V,re),c(V,ne),c(ne,Se),c(V,se),c(V,he),c(he,Le),c(V,_e),c(V,pe),c(pe,x),c(Z,me),c(Z,we),z(Fe,we,null),c(we,je);for(let Xe=0;Xe<te.length;Xe+=1)te[Xe].m(we,null);c(i,fe),ue&&ue.m(i,null),ie=!0},p(ge,[Ae]){const Xe={};if(Ae&32772&&(Xe.$$scope={dirty:Ae,ctx:ge}),e.$set(Xe),(!ie||Ae&4)&&r!==(r=ge[2]("Connections")+"")&&T(s,r),(!ie||Ae&4)&&p!==(p=ge[2]("Host")+"")&&T(h,p),(!ie||Ae&4)&&E!==(E=ge[2]("Secure")+"")&&T(b,E),(!ie||Ae&4)&&D!==(D=ge[2]("Nick")+"")&&T(L,D),Ae&5){ve=ge[0];let ze;for(ze=0;ze<ve.length;ze+=1){const rt=zl(ge,ve,ze);Ee[ze]?(Ee[ze].p(rt,Ae),v(Ee[ze],1)):(Ee[ze]=Hl(rt),Ee[ze].c(),v(Ee[ze],1),Ee[ze].m(R,null))}for(Oe(),ze=ve.length;ze<Ee.length;ze+=1)ce(ze);Ne()}if(ge[1]||!ge[4].forced_connection?ee?(ee.p(ge,Ae),Ae&2&&v(ee,1)):(ee=ql(ge),ee.c(),v(ee,1),ee.m(i,B)):ee&&(Oe(),y(ee,1,1,()=>{ee=null}),Ne()),(!ie||Ae&4)&&G!==(G=ge[2]("Connection profiles")+"")&&T(I,G),(!ie||Ae&4)&&J!==(J=ge[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"")&&T(N,J),(!ie||Ae&4)&&F!==(F=ge[2]("Host")+"")&&T(oe,F),(!ie||Ae&4)&&de!==(de=ge[2]("Secure")+"")&&T(Se,de),(!ie||Ae&4)&&Ue!==(Ue=ge[2]("Default")+"")&&T(Le,Ue),(!ie||Ae&4)&&Pe!==(Pe=ge[2]("Forced")+"")&&T(x,Pe),Ae&12){ae=ge[3].search();let ze;for(ze=0;ze<ae.length;ze+=1){const rt=jl(ge,ae,ze);te[ze]?(te[ze].p(rt,Ae),v(te[ze],1)):(te[ze]=Wl(rt),te[ze].c(),v(te[ze],1),te[ze].m(we,null))}for(Oe(),ze=ae.length;ze<te.length;ze+=1)Q(ze);Ne()}ge[1]?ue?(ue.p(ge,Ae),Ae&2&&v(ue,1)):(ue=Gl(ge),ue.c(),v(ue,1),ue.m(i,null)):ue&&(Oe(),y(ue,1,1,()=>{ue=null}),Ne())},i(ge){if(!ie){v(e.$$.fragment,ge);for(let Ae=0;Ae<ve.length;Ae+=1)v(Ee[Ae]);v(ee),v(Fe.$$.fragment,ge);for(let Ae=0;Ae<ae.length;Ae+=1)v(te[Ae]);v(ue),ie=!0}},o(ge){y(e.$$.fragment,ge),Ee=Ee.filter(Boolean);for(let Ae=0;Ae<Ee.length;Ae+=1)y(Ee[Ae]);y(ee),y(Fe.$$.fragment,ge),te=te.filter(Boolean);for(let Ae=0;Ae<te.length;Ae+=1)y(te[Ae]);y(ue),ie=!1},d(ge){H(e,ge),ge&&$(n),ge&&$(i),wt(Ee,ge),ee&&ee.d(),H(Fe),wt(te,ge),ue&&ue.d()}}}function hg(t,e,n){let i,o,r,s;Ce(t,ot,p=>n(2,r=p));const l="Connections",a=ht("user");Ce(t,a,p=>n(7,o=p));const f=a.connectionProfiles;Ce(t,f,p=>n(3,s=p));const u=p=>p.url.toFields({connection_id:p.connection_id});let d=[];return Ft(()=>f.load()),t.$$.update=()=>{t.$$.dirty&129&&o.is("success")&&!d.length&&n(0,d=a.connections.toArray().map(u))},n(1,i=a.roles.has("admin")),[d,i,r,s,a,f,l,o]}class _g extends Je{constructor(e){super(),Ze(this,e,hg,dg,Ye,{title:6})}get title(){return this.$$.ctx[6]}}function mg(t){let e,n,i,o,r=At(t[4]("See all connection profiles"))+"",s,l;return e=new $e({props:{name:"list"}}),n=new $e({props:{name:"times"}}),{c(){q(e.$$.fragment),q(n.$$.fragment),i=S(),o=m("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,f){z(e,a,f),z(n,a,f),w(a,i,f),w(a,o,f),c(o,s),l=!0},p(a,f){(!l||f&16)&&r!==(r=At(a[4]("See all connection profiles"))+"")&&T(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),l=!1},d(a){H(e,a),H(n,a),a&&$(i),a&&$(o)}}}function gg(t){let e,n=(t[0]==="add"?t[4]("Add connection profile"):t[4]("Edit connection profile"))+"",i,o,r,s;return r=new We({props:{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",$$slots:{default:[mg]},$$scope:{ctx:t}}}),{c(){e=m("h1"),i=O(n),o=S(),q(r.$$.fragment)},m(l,a){w(l,e,a),c(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&17)&&n!==(n=(l[0]==="add"?l[4]("Add connection profile"):l[4]("Edit connection profile"))+"")&&T(i,n);const f={};a&33554448&&(f.$$scope={dirty:a,ctx:l}),r.$set(f)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),H(r,l)}}}function bg(t){let e,n=t[4]("Host and port")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Host and port")+"")&&T(i,n)},d(o){o&&$(e)}}}function vg(t){let e,n=t[4]("Will match connections on hostname.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Will match connections on hostname.")+"")&&T(i,n)},d(o){o&&$(e)}}}function $g(t){let e,n=t[4]("Secure connection (TLS)")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Secure connection (TLS)")+"")&&T(i,n)},d(o){o&&$(e)}}}function wg(t){let e,n=t[4]("Verify certificate (TLS)")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Verify certificate (TLS)")+"")&&T(i,n)},d(o){o&&$(e)}}}function kg(t){let e,n=t[4]("Conversation name")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Conversation name")+"")&&T(i,n)},d(o){o&&$(e)}}}function yg(t){let e,n=t[4]("Service accounts")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Service accounts")+"")&&T(i,n)},d(o){o&&$(e)}}}function Sg(t){let e,n=t[4]("Messages from these nicks will be shown in the connection conversation.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Messages from these nicks will be shown in the connection conversation.")+"")&&T(i,n)},d(o){o&&$(e)}}}function Eg(t){let e,n=t[4]("Default connection")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Default connection")+"")&&T(i,n)},d(o){o&&$(e)}}}function Cg(t){let e,n=t[4]("Force default connection")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Force default connection")+"")&&T(i,n)},d(o){o&&$(e)}}}function Kl(t){let e,n=t[4]("Tick this box if you want to prevent users from creating custom connections.")+"",i,o;return{c(){e=m("p"),i=O(n),k(e,"class","help"),e.hidden=o=!t[1].is_default},m(r,s){w(r,e,s),c(e,i)},p(r,s){s&16&&n!==(n=r[4]("Tick this box if you want to prevent users from creating custom connections.")+"")&&T(i,n),s&2&&o!==(o=!r[1].is_default)&&(e.hidden=o)},d(r){r&&$(e)}}}function Ag(t){let e,n=t[4]("Advanced settings")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Advanced settings")+"")&&T(i,n)},d(o){o&&$(e)}}}function Yl(t){let e,n,i,o,r,s,l,a,f,u,d,p,h,_,g=t[4]("This might result in flood ban.")+"",E,b,C;function M(G){t[19](G)}let D={name:"max_bulk_message_size",type:"number",readonly:!t[3],$$slots:{help:[Ng],label:[Og]},$$scope:{ctx:t}};t[1].max_bulk_message_size!==void 0&&(D.value=t[1].max_bulk_message_size),n=new Ve({props:D}),be.push(()=>ye(n,"value",M,t[1].max_bulk_message_size));function L(G){t[20](G)}let A={name:"max_message_length",type:"number",readonly:!t[3],$$slots:{help:[Mg],label:[Tg]},$$scope:{ctx:t}};t[1].max_message_length!==void 0&&(A.value=t[1].max_message_length),r=new Ve({props:A}),be.push(()=>ye(r,"value",L,t[1].max_message_length));function R(G){t[21](G)}let U={name:"webirc_password",type:"password",readonly:!t[3],$$slots:{label:[Rg]},$$scope:{ctx:t}};t[1].webirc_password!==void 0&&(U.value=t[1].webirc_password),a=new Ve({props:U}),be.push(()=>ye(a,"value",R,t[1].webirc_password));function B(G){t[22](G)}let W={name:"skip_queue",disabled:!t[3],$$slots:{label:[Lg]},$$scope:{ctx:t}};return t[1].skip_queue!==void 0&&(W.value=t[1].skip_queue),d=new nt({props:W}),be.push(()=>ye(d,"value",B,t[1].skip_queue)),{c(){e=m("div"),q(n.$$.fragment),o=S(),q(r.$$.fragment),l=S(),q(a.$$.fragment),u=S(),q(d.$$.fragment),h=S(),_=m("p"),E=O(g),k(_,"class","help"),k(e,"class","form-group")},m(G,I){w(G,e,I),z(n,e,null),c(e,o),z(r,e,null),c(e,l),z(a,e,null),c(e,u),z(d,e,null),c(e,h),c(e,_),c(_,E),C=!0},p(G,I){const K={};I&8&&(K.readonly=!G[3]),I&33554448&&(K.$$scope={dirty:I,ctx:G}),!i&&I&2&&(i=!0,K.value=G[1].max_bulk_message_size,ke(()=>i=!1)),n.$set(K);const X={};I&8&&(X.readonly=!G[3]),I&33554448&&(X.$$scope={dirty:I,ctx:G}),!s&&I&2&&(s=!0,X.value=G[1].max_message_length,ke(()=>s=!1)),r.$set(X);const J={};I&8&&(J.readonly=!G[3]),I&33554448&&(J.$$scope={dirty:I,ctx:G}),!f&&I&2&&(f=!0,J.value=G[1].webirc_password,ke(()=>f=!1)),a.$set(J);const N={};I&8&&(N.disabled=!G[3]),I&33554448&&(N.$$scope={dirty:I,ctx:G}),!p&&I&2&&(p=!0,N.value=G[1].skip_queue,ke(()=>p=!1)),d.$set(N),(!C||I&16)&&g!==(g=G[4]("This might result in flood ban.")+"")&&T(E,g)},i(G){C||(v(n.$$.fragment,G),v(r.$$.fragment,G),v(a.$$.fragment,G),v(d.$$.fragment,G),at(()=>{b||(b=tt(e,li,{duration:150},!0)),b.run(1)}),C=!0)},o(G){y(n.$$.fragment,G),y(r.$$.fragment,G),y(a.$$.fragment,G),y(d.$$.fragment,G),b||(b=tt(e,li,{duration:150},!1)),b.run(0),C=!1},d(G){G&&$(e),H(n),H(r),H(a),H(d),G&&b&&b.end()}}}function Og(t){let e,n=t[4]("Max number of pasted lines")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Max number of pasted lines")+"")&&T(i,n)},d(o){o&&$(e)}}}function Ng(t){let e,n=t[4]("Setting this value too high might get you banned from the server.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Setting this value too high might get you banned from the server.")+"")&&T(i,n)},d(o){o&&$(e)}}}function Tg(t){let e,n=t[4]("Max message length")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Max message length")+"")&&T(i,n)},d(o){o&&$(e)}}}function Mg(t){let e,n=t[4]("Messages longer than this will be split into multiple messages.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Messages longer than this will be split into multiple messages.")+"")&&T(i,n)},d(o){o&&$(e)}}}function Rg(t){let e,n=t[4]("WEBIRC password")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("WEBIRC password")+"")&&T(i,n)},d(o){o&&$(e)}}}function Lg(t){let e,n=t[4]("Skip connection queue")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Skip connection queue")+"")&&T(i,n)},d(o){o&&$(e)}}}function Vl(t){let e,n=t[4]("Only administrators can edit this section.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","error")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Only administrators can edit this section.")+"")&&T(i,n)},d(o){o&&$(e)}}}function Ig(t){let e,n;return e=new ft({props:{icon:"plus-circle",op:t[7],$$slots:{default:[Dg]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&33554448&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Pg(t){let e,n,i,o;return e=new ft({props:{icon:"save",op:t[7],disabled:!t[3],$$slots:{default:[Ug]},$$scope:{ctx:t}}}),i=new ft({props:{icon:"trash",type:"button",op:t[6],disabled:!t[3],$$slots:{default:[Bg]},$$scope:{ctx:t}}}),i.$on("click",t[8]),{c(){q(e.$$.fragment),n=S(),q(i.$$.fragment)},m(r,s){z(e,r,s),w(r,n,s),z(i,r,s),o=!0},p(r,s){const l={};s&8&&(l.disabled=!r[3]),s&33554448&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&8&&(a.disabled=!r[3]),s&33554448&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(v(e.$$.fragment,r),v(i.$$.fragment,r),o=!0)},o(r){y(e.$$.fragment,r),y(i.$$.fragment,r),o=!1},d(r){H(e,r),r&&$(n),H(i,r)}}}function Dg(t){let e,n=t[4]("Add")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add")+"")&&T(i,n)},d(o){o&&$(e)}}}function Ug(t){let e,n=t[4]("Update")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Update")+"")&&T(i,n)},d(o){o&&$(e)}}}function Bg(t){let e,n=t[4]("Delete")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Delete")+"")&&T(i,n)},d(o){o&&$(e)}}}function Fg(t){let e,n,i,o,r,s,l,a,f,u,d,p,h,_,g,E,b,C,M,D,L,A,R,U,B,W,G,I,K,X,J,N,P,Z,j,V,Y,F,oe,re,ne;e=new Ut({props:{$$slots:{default:[gg]},$$scope:{ctx:t}}});function de(Q){t[11](Q)}let Se={name:"host",placeholder:t[4]("Ex: irc.libera.chat:6697"),readonly:!t[3],$$slots:{help:[vg],label:[bg]},$$scope:{ctx:t}};t[1].host!==void 0&&(Se.value=t[1].host),r=new Ve({props:Se}),be.push(()=>ye(r,"value",de,t[1].host));function se(Q){t[12](Q)}let he={name:"tls",disabled:!t[3],$$slots:{label:[$g]},$$scope:{ctx:t}};t[1].tls!==void 0&&(he.value=t[1].tls),a=new nt({props:he}),be.push(()=>ye(a,"value",se,t[1].tls));function Ue(Q){t[13](Q)}let Le={name:"tls_verify",disabled:!t[1].tls||!t[3],hidden:!t[1].tls,$$slots:{label:[wg]},$$scope:{ctx:t}};t[1].tls_verify!==void 0&&(Le.value=t[1].tls_verify),d=new nt({props:Le}),be.push(()=>ye(d,"value",Ue,t[1].tls_verify));function _e(Q){t[14](Q)}let pe={name:"conversation_id",placeholder:t[4]("Ex: #convos"),readonly:!t[3],$$slots:{label:[kg]},$$scope:{ctx:t}};t[1].conversation_id!==void 0&&(pe.value=t[1].conversation_id),_=new Ve({props:pe}),be.push(()=>ye(_,"value",_e,t[1].conversation_id));function Pe(Q){t[15](Q)}let x={name:"service_accounts",placeholder:t[4]("chanserv, nickserv, ..."),readonly:!t[3],$$slots:{help:[Sg],label:[yg]},$$scope:{ctx:t}};t[1].service_accounts!==void 0&&(x.value=t[1].service_accounts),b=new Ve({props:x}),be.push(()=>ye(b,"value",Pe,t[1].service_accounts));function me(Q){t[16](Q)}let we={name:"is_default",disabled:!t[3],$$slots:{label:[Eg]},$$scope:{ctx:t}};t[1].is_default!==void 0&&(we.value=t[1].is_default),D=new nt({props:we}),be.push(()=>ye(D,"value",me,t[1].is_default));function Fe(Q){t[17](Q)}let je={name:"is_forced",disabled:!t[3],hidden:!t[1].is_default,$$slots:{label:[Cg]},$$scope:{ctx:t}};t[1].is_forced!==void 0&&(je.value=t[1].is_forced),R=new nt({props:je}),be.push(()=>ye(R,"value",Fe,t[1].is_forced));let fe=t[3]&&Kl(t);function ie(Q){t[18](Q)}let ve={icon:"caret",name:"show_advanced_settings",$$slots:{label:[Ag]},$$scope:{ctx:t}};t[2]!==void 0&&(ve.value=t[2]),G=new nt({props:ve}),be.push(()=>ye(G,"value",ie,t[2]));let Ee=t[2]&&Yl(t),ce=!t[3]&&Vl(t);const ee=[Pg,Ig],ae=[];function te(Q,ue){return Q[0]!=="add"?0:1}return P=te(t),Z=ae[P]=ee[P](t),V=new Mt({props:{op:t[6],success:"Deleted."}}),F=new Mt({props:{op:t[7]}}),{c(){q(e.$$.fragment),n=S(),i=m("main"),o=m("form"),q(r.$$.fragment),l=S(),q(a.$$.fragment),u=S(),q(d.$$.fragment),h=S(),q(_.$$.fragment),E=S(),q(b.$$.fragment),M=S(),q(D.$$.fragment),A=S(),q(R.$$.fragment),B=S(),fe&&fe.c(),W=S(),q(G.$$.fragment),K=S(),Ee&&Ee.c(),X=S(),ce&&ce.c(),J=S(),N=m("div"),Z.c(),j=S(),q(V.$$.fragment),Y=S(),q(F.$$.fragment),k(N,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(Q,ue){z(e,Q,ue),w(Q,n,ue),w(Q,i,ue),c(i,o),z(r,o,null),c(o,l),z(a,o,null),c(o,u),z(d,o,null),c(o,h),z(_,o,null),c(o,E),z(b,o,null),c(o,M),z(D,o,null),c(o,A),z(R,o,null),c(o,B),fe&&fe.m(o,null),c(o,W),z(G,o,null),c(o,K),Ee&&Ee.m(o,null),c(o,X),ce&&ce.m(o,null),c(o,J),c(o,N),ae[P].m(N,null),c(o,j),z(V,o,null),c(o,Y),z(F,o,null),oe=!0,re||(ne=Te(o,"submit",st(t[9])),re=!0)},p(Q,[ue]){const ge={};ue&33554449&&(ge.$$scope={dirty:ue,ctx:Q}),e.$set(ge);const Ae={};ue&16&&(Ae.placeholder=Q[4]("Ex: irc.libera.chat:6697")),ue&8&&(Ae.readonly=!Q[3]),ue&33554448&&(Ae.$$scope={dirty:ue,ctx:Q}),!s&&ue&2&&(s=!0,Ae.value=Q[1].host,ke(()=>s=!1)),r.$set(Ae);const Xe={};ue&8&&(Xe.disabled=!Q[3]),ue&33554448&&(Xe.$$scope={dirty:ue,ctx:Q}),!f&&ue&2&&(f=!0,Xe.value=Q[1].tls,ke(()=>f=!1)),a.$set(Xe);const ze={};ue&10&&(ze.disabled=!Q[1].tls||!Q[3]),ue&2&&(ze.hidden=!Q[1].tls),ue&33554448&&(ze.$$scope={dirty:ue,ctx:Q}),!p&&ue&2&&(p=!0,ze.value=Q[1].tls_verify,ke(()=>p=!1)),d.$set(ze);const rt={};ue&16&&(rt.placeholder=Q[4]("Ex: #convos")),ue&8&&(rt.readonly=!Q[3]),ue&33554448&&(rt.$$scope={dirty:ue,ctx:Q}),!g&&ue&2&&(g=!0,rt.value=Q[1].conversation_id,ke(()=>g=!1)),_.$set(rt);const yt={};ue&16&&(yt.placeholder=Q[4]("chanserv, nickserv, ...")),ue&8&&(yt.readonly=!Q[3]),ue&33554448&&(yt.$$scope={dirty:ue,ctx:Q}),!C&&ue&2&&(C=!0,yt.value=Q[1].service_accounts,ke(()=>C=!1)),b.$set(yt);const Lt={};ue&8&&(Lt.disabled=!Q[3]),ue&33554448&&(Lt.$$scope={dirty:ue,ctx:Q}),!L&&ue&2&&(L=!0,Lt.value=Q[1].is_default,ke(()=>L=!1)),D.$set(Lt);const lt={};ue&8&&(lt.disabled=!Q[3]),ue&2&&(lt.hidden=!Q[1].is_default),ue&33554448&&(lt.$$scope={dirty:ue,ctx:Q}),!U&&ue&2&&(U=!0,lt.value=Q[1].is_forced,ke(()=>U=!1)),R.$set(lt),Q[3]?fe?fe.p(Q,ue):(fe=Kl(Q),fe.c(),fe.m(o,W)):fe&&(fe.d(1),fe=null);const Zt={};ue&33554448&&(Zt.$$scope={dirty:ue,ctx:Q}),!I&&ue&4&&(I=!0,Zt.value=Q[2],ke(()=>I=!1)),G.$set(Zt),Q[2]?Ee?(Ee.p(Q,ue),ue&4&&v(Ee,1)):(Ee=Yl(Q),Ee.c(),v(Ee,1),Ee.m(o,X)):Ee&&(Oe(),y(Ee,1,1,()=>{Ee=null}),Ne()),Q[3]?ce&&(ce.d(1),ce=null):ce?ce.p(Q,ue):(ce=Vl(Q),ce.c(),ce.m(o,J));let jt=P;P=te(Q),P===jt?ae[P].p(Q,ue):(Oe(),y(ae[jt],1,1,()=>{ae[jt]=null}),Ne(),Z=ae[P],Z?Z.p(Q,ue):(Z=ae[P]=ee[P](Q),Z.c()),v(Z,1),Z.m(N,null))},i(Q){oe||(v(e.$$.fragment,Q),v(r.$$.fragment,Q),v(a.$$.fragment,Q),v(d.$$.fragment,Q),v(_.$$.fragment,Q),v(b.$$.fragment,Q),v(D.$$.fragment,Q),v(R.$$.fragment,Q),v(G.$$.fragment,Q),v(Ee),v(Z),v(V.$$.fragment,Q),v(F.$$.fragment,Q),oe=!0)},o(Q){y(e.$$.fragment,Q),y(r.$$.fragment,Q),y(a.$$.fragment,Q),y(d.$$.fragment,Q),y(_.$$.fragment,Q),y(b.$$.fragment,Q),y(D.$$.fragment,Q),y(R.$$.fragment,Q),y(G.$$.fragment,Q),y(Ee),y(Z),y(V.$$.fragment,Q),y(F.$$.fragment,Q),oe=!1},d(Q){H(e,Q),Q&&$(n),Q&&$(i),H(r),H(a),H(d),H(_),H(b),H(D),H(R),fe&&fe.d(),H(G),Ee&&Ee.d(),ce&&ce.d(),ae[P].d(),H(V),H(F),re=!1,ne()}}}function jg(t,e,n){let i,o,r;Ce(t,ot,I=>n(4,r=I));let{profile_id:s="add"}=e;const l=s==="add"?"Add connection profile":"Edit connection profile",a=ht("user"),f=a.connectionProfiles;Ce(t,f,I=>n(23,o=I));const u=et.op("removeConnectionProfile"),d=et.op("saveConnectionProfile");let p={},h=!1;Ft(async()=>{await f.load(),n(1,p={...o.find(s)||o.defaultProfile()})});async function _(){await u.perform({id:s}),await f.load({force:!0}),await Ri(),De.go("/settings/connections")}async function g(){["is_default","is_forced","skip_queue"].forEach(I=>n(1,p[I]=!!p[I],p)),n(1,p.service_accounts=Lr(p.service_accounts),p),n(1,p.url=new hn("irc://localhost").fromFields(p).toString(),p),await d.perform(p),!d.is("error")&&(p.is_default&&a.update({default_connection:p.url,forced_connection:p.is_forced}),await f.load({force:!0}),await Ri(),De.go("/settings/connections"))}function E(I){t.$$.not_equal(p.host,I)&&(p.host=I,n(1,p))}function b(I){t.$$.not_equal(p.tls,I)&&(p.tls=I,n(1,p))}function C(I){t.$$.not_equal(p.tls_verify,I)&&(p.tls_verify=I,n(1,p))}function M(I){t.$$.not_equal(p.conversation_id,I)&&(p.conversation_id=I,n(1,p))}function D(I){t.$$.not_equal(p.service_accounts,I)&&(p.service_accounts=I,n(1,p))}function L(I){t.$$.not_equal(p.is_default,I)&&(p.is_default=I,n(1,p))}function A(I){t.$$.not_equal(p.is_forced,I)&&(p.is_forced=I,n(1,p))}function R(I){h=I,n(2,h)}function U(I){t.$$.not_equal(p.max_bulk_message_size,I)&&(p.max_bulk_message_size=I,n(1,p))}function B(I){t.$$.not_equal(p.max_message_length,I)&&(p.max_message_length=I,n(1,p))}function W(I){t.$$.not_equal(p.webirc_password,I)&&(p.webirc_password=I,n(1,p))}function G(I){t.$$.not_equal(p.skip_queue,I)&&(p.skip_queue=I,n(1,p))}return t.$$set=I=>{"profile_id"in I&&n(0,s=I.profile_id)},n(3,i=a.roles.has("admin")),[s,p,h,i,r,f,u,d,_,g,l,E,b,C,M,D,L,A,R,U,B,W,G]}class zg extends Je{constructor(e){super(),Ze(this,e,jg,Fg,Ye,{profile_id:0,title:10})}get title(){return this.$$.ctx[10]}}function Hg(t){let e,n,i,o,r=At(t[1]("See all connections"))+"",s,l;return e=new $e({props:{name:"list"}}),n=new $e({props:{name:"times"}}),{c(){q(e.$$.fragment),q(n.$$.fragment),i=S(),o=m("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,f){z(e,a,f),z(n,a,f),w(a,i,f),w(a,o,f),c(o,s),l=!0},p(a,f){(!l||f&2)&&r!==(r=At(a[1]("See all connections"))+"")&&T(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),l=!1},d(a){H(e,a),H(n,a),a&&$(i),a&&$(o)}}}function qg(t){let e,n=(t[0]==="add"?t[1]("Add connection"):t[1]("Edit connection"))+"",i,o,r,s;return r=new We({props:{href:"/settings/connections",class:"btn-hallow can-toggle is-active has-tooltip",$$slots:{default:[Hg]},$$scope:{ctx:t}}}),{c(){e=m("h1"),i=O(n),o=S(),q(r.$$.fragment)},m(l,a){w(l,e,a),c(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&3)&&n!==(n=(l[0]==="add"?l[1]("Add connection"):l[1]("Edit connection"))+"")&&T(i,n);const f={};a&10&&(f.$$scope={dirty:a,ctx:l}),r.$set(f)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),H(r,l)}}}function Wg(t){let e,n,i,o,r;return e=new Ut({props:{$$slots:{default:[qg]},$$scope:{ctx:t}}}),o=new If({props:{id:t[0],is_page:!0}}),{c(){q(e.$$.fragment),n=S(),i=m("main"),q(o.$$.fragment),k(i,"class","main")},m(s,l){z(e,s,l),w(s,n,l),w(s,i,l),z(o,i,null),r=!0},p(s,[l]){const a={};l&11&&(a.$$scope={dirty:l,ctx:s}),e.$set(a);const f={};l&1&&(f.id=s[0]),o.$set(f)},i(s){r||(v(e.$$.fragment,s),v(o.$$.fragment,s),r=!0)},o(s){y(e.$$.fragment,s),y(o.$$.fragment,s),r=!1},d(s){H(e,s),s&&$(n),s&&$(i),H(o)}}}function Gg(t,e,n){let i;Ce(t,ot,s=>n(1,i=s));let{connection_id:o="add"}=e;const r=o==="add"?"Add connection":"Edit connection";return t.$$set=s=>{"connection_id"in s&&n(0,o=s.connection_id)},[o,i,r]}class Kg extends Je{constructor(e){super(),Ze(this,e,Gg,Wg,Ye,{connection_id:0,title:2})}get title(){return this.$$.ctx[2]}}function Zl(t,e,n){const i=t.slice();return i[16]=e[n],i}function Yg(t){let e,n=t[4]("Add conversation")+"",i;return{c(){e=m("h1"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add conversation")+"")&&T(i,n)},d(o){o&&$(e)}}}function Vg(t){let e,n=t[4]("Connection")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Connection")+"")&&T(i,n)},d(o){o&&$(e)}}}function Zg(t){let e,n=t[4](t[1].conversations.length?"Refresh":"Load")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&18&&n!==(n=o[4](o[1].conversations.length?"Refresh":"Load")+"")&&T(i,n)},d(o){o&&$(e)}}}function Jg(t){let e,n=t[4]("Conversation name")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Conversation name")+"")&&T(i,n)},d(o){o&&$(e)}}}function Qg(t){let e,n=t[4]("Add")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Add")+"")&&T(i,n)},d(o){o&&$(e)}}}function Jl(t){let e,n,i,o=t[1].error+"",r;return{c(){e=m("p"),n=O(t[0]),i=O(": "),r=O(o),k(e,"class","error")},m(s,l){w(s,e,l),c(e,n),c(e,i),c(e,r)},p(s,l){l&1&&T(n,s[0]),l&2&&o!==(o=s[1].error+"")&&T(r,o)},d(s){s&&$(e)}}}function Ql(t){let e,n,i;function o(f,u){return f[1].done?xg:Xg}let r=o(t),s=r(t),l=t[1].conversations,a=[];for(let f=0;f<l.length;f+=1)a[f]=Xl(Zl(t,l,f));return{c(){e=m("p"),s.c(),n=S(),i=m("div");for(let f=0;f<a.length;f+=1)a[f].c();k(i,"class","conversation-add-list")},m(f,u){w(f,e,u),s.m(e,null),w(f,n,u),w(f,i,u);for(let d=0;d<a.length;d+=1)a[d].m(i,null)},p(f,u){if(r===(r=o(f))&&s?s.p(f,u):(s.d(1),s=r(f),s&&(s.c(),s.m(e,null))),u&66){l=f[1].conversations;let d;for(d=0;d<l.length;d+=1){const p=Zl(f,l,d);a[d]?a[d].p(p,u):(a[d]=Xl(p),a[d].c(),a[d].m(i,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=l.length}},d(f){f&&$(e),s.d(),f&&$(n),f&&$(i),wt(a,f)}}}function Xg(t){let e=t[4]("Showing %1 of %2 conversations, but the list is still loading.",t[1].conversations.length,t[1].n_conversations)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&18&&e!==(e=i[4]("Showing %1 of %2 conversations, but the list is still loading.",i[1].conversations.length,i[1].n_conversations)+"")&&T(n,e)},d(i){i&&$(n)}}}function xg(t){let e=t[4]("Showing %1 of %2 conversations.",t[1].conversations.length,t[1].n_conversations)+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&18&&e!==(e=i[4]("Showing %1 of %2 conversations.",i[1].conversations.length,i[1].n_conversations)+"")&&T(n,e)},d(i){i&&$(n)}}}function Xl(t){let e,n,i=t[16].n_users+"",o,r,s,l=t[16].name+"",a,f,u,d=(t[16].topic||"No topic.")+"",p,h,_,g,E;return{c(){e=m("a"),n=m("span"),o=O(i),r=S(),s=m("b"),a=O(l),f=S(),u=m("i"),p=O(d),h=S(),k(n,"class","conversation-add-list__n-users"),k(s,"class","conversation-add-list__name"),k(u,"class","conversation-add-list__title"),k(e,"href",_="#add:"+t[16].name)},m(b,C){w(b,e,C),c(e,n),c(n,o),c(e,r),c(e,s),c(s,a),c(e,f),c(e,u),c(u,p),c(e,h),g||(E=Te(e,"click",st(t[6])),g=!0)},p(b,C){C&2&&i!==(i=b[16].n_users+"")&&T(o,i),C&2&&l!==(l=b[16].name+"")&&T(a,l),C&2&&d!==(d=(b[16].topic||"No topic.")+"")&&T(p,d),C&2&&_!==(_="#add:"+b[16].name)&&k(e,"href",_)},d(b){b&&$(e),g=!1,E()}}}function e1(t){let e,n,i,o,r=t[4]("Enter the name of an exising conversation, or create a new conversation.")+"",s,l,a,f,u,d,p,h,_,g,E,b,C,M,D,L,A,R,U,B,W;e=new Ut({props:{$$slots:{default:[Yg]},$$scope:{ctx:t}}});function G(P){t[11](P)}let I={name:"connection_id",options:t[3],placeholder:t[4]("Select..."),$$slots:{label:[Vg]},$$scope:{ctx:t}};t[0]!==void 0&&(I.value=t[0]),u=new xn({props:I}),be.push(()=>ye(u,"value",G,t[0])),_=new ft({props:{type:"button",icon:"sync-alt",disabled:!t[0]||t[1].done===!1,$$slots:{default:[Zg]},$$scope:{ctx:t}}}),_.$on("click",t[7]);function K(P){t[12](P)}let X={name:"conversation_id",placeholder:t[4]("#room or nick"),autocomplete:"off",$$slots:{label:[Jg]},$$scope:{ctx:t}};t[2]!==void 0&&(X.value=t[2]),b=new Ve({props:X}),be.push(()=>ye(b,"value",K,t[2])),b.$on("keyup",t[8]),L=new ft({props:{icon:"comment",disabled:!t[0]||!t[2],$$slots:{default:[Qg]},$$scope:{ctx:t}}});let J=t[1].error&&Jl(t),N=t[1].done!==null&&Ql(t);return{c(){q(e.$$.fragment),n=S(),i=m("main"),o=m("p"),s=O(r),l=S(),a=m("form"),f=m("div"),q(u.$$.fragment),p=S(),h=m("div"),q(_.$$.fragment),g=S(),E=m("div"),q(b.$$.fragment),M=S(),D=m("div"),q(L.$$.fragment),A=S(),J&&J.c(),R=S(),N&&N.c(),k(h,"class","flex-basis-30"),k(f,"class","inputs-side-by-side"),k(D,"class","flex-basis-30"),k(E,"class","inputs-side-by-side"),k(a,"method","post"),k(i,"class","main")},m(P,Z){z(e,P,Z),w(P,n,Z),w(P,i,Z),c(i,o),c(o,s),c(i,l),c(i,a),c(a,f),z(u,f,null),c(f,p),c(f,h),z(_,h,null),c(a,g),c(a,E),z(b,E,null),c(E,M),c(E,D),z(L,D,null),c(a,A),J&&J.m(a,null),c(a,R),N&&N.m(a,null),U=!0,B||(W=Te(a,"submit",st(t[6])),B=!0)},p(P,[Z]){const j={};Z&524304&&(j.$$scope={dirty:Z,ctx:P}),e.$set(j),(!U||Z&16)&&r!==(r=P[4]("Enter the name of an exising conversation, or create a new conversation.")+"")&&T(s,r);const V={};Z&8&&(V.options=P[3]),Z&16&&(V.placeholder=P[4]("Select...")),Z&524304&&(V.$$scope={dirty:Z,ctx:P}),!d&&Z&1&&(d=!0,V.value=P[0],ke(()=>d=!1)),u.$set(V);const Y={};Z&3&&(Y.disabled=!P[0]||P[1].done===!1),Z&524306&&(Y.$$scope={dirty:Z,ctx:P}),_.$set(Y);const F={};Z&16&&(F.placeholder=P[4]("#room or nick")),Z&524304&&(F.$$scope={dirty:Z,ctx:P}),!C&&Z&4&&(C=!0,F.value=P[2],ke(()=>C=!1)),b.$set(F);const oe={};Z&5&&(oe.disabled=!P[0]||!P[2]),Z&524304&&(oe.$$scope={dirty:Z,ctx:P}),L.$set(oe),P[1].error?J?J.p(P,Z):(J=Jl(P),J.c(),J.m(a,R)):J&&(J.d(1),J=null),P[1].done!==null?N?N.p(P,Z):(N=Ql(P),N.c(),N.m(a,null)):N&&(N.d(1),N=null)},i(P){U||(v(e.$$.fragment,P),v(u.$$.fragment,P),v(_.$$.fragment,P),v(b.$$.fragment,P),v(L.$$.fragment,P),U=!0)},o(P){y(e.$$.fragment,P),y(u.$$.fragment,P),y(_.$$.fragment,P),y(b.$$.fragment,P),y(L.$$.fragment,P),U=!1},d(P){H(e,P),P&&$(n),P&&$(i),H(u),H(_),H(b),H(L),J&&J.d(),N&&N.d(),B=!1,W()}}}function t1(t,e,n){let i,o,r;Ce(t,ot,M=>n(4,r=M));const s="Add conversation",l=ht("socket"),a=ht("user");Ce(t,a,M=>n(10,o=M));let f={conversations:[],done:null,n_conversations:0},u="",d="",p;function h(M){const D=M&&M.target&&M.target.closest("a");D&&D.href&&n(2,d=D.href.replace(/.*#add:/,""));const L=a.findConversation({connection_id:u});L&&d&&L.send("/join "+d)}async function _(M){let D="/list"+(d.length?" /"+d+"/":"");M.type==="click"&&f.done&&(D+=" refresh"),p&&clearTimeout(p),l.send({connection_id:u,message:D,method:"send"},L=>{const A=Rr(L);n(1,f=A?{conversations:[],done:!0,n_conversations:0,error:A}:L);let R=M.interval?M.interval+500:500;R>2e3&&(R=2e3),!A&&!L.done&&(p=setTimeout(()=>_({interval:R}),R))})}function g(){n(0,u=De.param("connection_id")||i[0][0]||""),n(2,d=De.param("conversation_id")||"")}const E=Wr(_,250);function b(M){u=M,n(0,u)}function C(M){d=M,n(2,d)}return t.$$.update=()=>{t.$$.dirty&1024&&n(3,i=Array.from(o.connections.keys()).map(M=>[M])),t.$$.dirty&1&&(u||g())},[u,f,d,i,r,a,h,_,E,s,o,b,C]}class n1 extends Je{constructor(e){super(),Ze(this,e,t1,e1,Ye,{title:9})}get title(){return this.$$.ctx[9]}}function i1(t){let e,n=t[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"",i,o,r,s,l,a=t[2]("Go to start page")+"",f,u;return s=new $e({props:{name:"play"}}),{c(){e=m("p"),i=S(),o=m("p"),r=m("a"),q(s.$$.fragment),l=S(),f=O(a),k(r,"href",t[1]),k(r,"target","_self"),k(r,"class","btn")},m(d,p){w(d,e,p),e.innerHTML=n,w(d,i,p),w(d,o,p),c(o,r),z(s,r,null),c(r,l),c(r,f),u=!0},p(d,p){(!u||p&16)&&n!==(n=d[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"")&&(e.innerHTML=n),(!u||p&4)&&a!==(a=d[2]("Go to start page")+"")&&T(f,a),(!u||p&2)&&k(r,"href",d[1])},i(d){u||(v(s.$$.fragment,d),u=!0)},o(d){y(s.$$.fragment,d),u=!1},d(d){d&&$(e),d&&$(i),d&&$(o),H(s)}}}function o1(t){let e,n=t[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"",i,o,r,s,l,a,f=t[2]("Go to start page")+"",u,d;return l=new $e({props:{name:"play"}}),{c(){e=m("p"),i=O(n),o=S(),r=m("p"),s=m("a"),q(l.$$.fragment),a=S(),u=O(f),k(s,"href",t[1]),k(s,"target","_self"),k(s,"class","btn")},m(p,h){w(p,e,h),c(e,i),w(p,o,h),w(p,r,h),c(r,s),z(l,s,null),c(s,a),c(s,u),d=!0},p(p,h){(!d||h&4)&&n!==(n=p[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"")&&T(i,n),(!d||h&4)&&f!==(f=p[2]("Go to start page")+"")&&T(u,f),(!d||h&2)&&k(s,"href",p[1])},i(p){d||(v(l.$$.fragment,p),d=!0)},o(p){y(l.$$.fragment,p),d=!1},d(p){p&&$(e),p&&$(o),p&&$(r),H(l)}}}function r1(t){let e,n,i,o=t[2]("Downloaded Convos.")+"",r,s,l,a,f,u=t[2]("Started Convos.")+"",d,p,h,_,g,E,b,C,M,D=t[2]("Contact admin")+"",L,A,R;n=new $e({props:{name:"download"}}),a=new $e({props:{name:"rocket"}});const U=[l1,s1],B=[];function W(I,K){return I[3].error?0:1}h=W(t),_=B[h]=U[h](t),C=new $e({props:{name:"paper-plane"}});let G={ctx:t,current:null,token:null,hasCatch:!1,pending:u1,then:f1,catch:a1,blocks:[,,,]};return ar(t[8],G),{c(){e=m("p"),q(n.$$.fragment),i=S(),r=O(o),s=S(),l=m("p"),q(a.$$.fragment),f=S(),d=O(u),p=S(),_.c(),g=S(),E=m("p"),b=m("a"),q(C.$$.fragment),M=S(),L=O(D),A=S(),G.block.c(),k(b,"class","btn"),k(b,"href",Ge("contact"))},m(I,K){w(I,e,K),z(n,e,null),c(e,i),c(e,r),w(I,s,K),w(I,l,K),z(a,l,null),c(l,f),c(l,d),w(I,p,K),B[h].m(I,K),w(I,g,K),w(I,E,K),c(E,b),z(C,b,null),c(b,M),c(b,L),c(E,A),G.block.m(E,G.anchor=null),G.mount=()=>E,G.anchor=null,R=!0},p(I,K){t=I,(!R||K&4)&&o!==(o=t[2]("Downloaded Convos.")+"")&&T(r,o),(!R||K&4)&&u!==(u=t[2]("Started Convos.")+"")&&T(d,u);let X=h;h=W(t),h===X?B[h].p(t,K):(Oe(),y(B[X],1,1,()=>{B[X]=null}),Ne(),_=B[h],_?_.p(t,K):(_=B[h]=U[h](t),_.c()),v(_,1),_.m(g.parentNode,g)),(!R||K&4)&&D!==(D=t[2]("Contact admin")+"")&&T(L,D),of(G,t,K)},i(I){R||(v(n.$$.fragment,I),v(a.$$.fragment,I),v(_),v(C.$$.fragment,I),v(G.block),R=!0)},o(I){y(n.$$.fragment,I),y(a.$$.fragment,I),y(_),y(C.$$.fragment,I);for(let K=0;K<3;K+=1){const X=G.blocks[K];y(X)}R=!1},d(I){I&&$(e),H(n),I&&$(s),I&&$(l),H(a),I&&$(p),B[h].d(I),I&&$(g),I&&$(E),H(C),G.block.d(),G.token=null,G=null}}}function s1(t){let e,n,i,o=t[2]("Loading user data...")+"",r,s;return n=new $e({props:{name:"spinner fa-spin"}}),{c(){e=m("p"),q(n.$$.fragment),i=S(),r=O(o)},m(l,a){w(l,e,a),z(n,e,null),c(e,i),c(e,r),s=!0},p(l,a){(!s||a&4)&&o!==(o=l[2]("Loading user data...")+"")&&T(r,o)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function l1(t){let e,n,i,o=t[2]("Loading user data failed: %1",t[2](t[3].error))+"",r,s;return n=new $e({props:{name:"exclamation-triangle"}}),{c(){e=m("p"),q(n.$$.fragment),i=S(),r=O(o)},m(l,a){w(l,e,a),z(n,e,null),c(e,i),c(e,r),s=!0},p(l,a){(!s||a&12)&&o!==(o=l[2]("Loading user data failed: %1",l[2](l[3].error))+"")&&T(r,o)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function a1(t){return{c:Re,m:Re,p:Re,i:Re,o:Re,d:Re}}function f1(t){let e,n,i,o=t[2]("Retry")+"",r,s,l;return n=new $e({props:{name:"redo"}}),{c(){e=m("a"),q(n.$$.fragment),i=S(),r=O(o),k(e,"href",t[1]),k(e,"target","_self"),k(e,"class","btn is-secondary")},m(a,f){w(a,e,f),z(n,e,null),c(e,i),c(e,r),l=!0},p(a,f){(!l||f&4)&&o!==(o=a[2]("Retry")+"")&&T(r,o),(!l||f&2)&&k(e,"href",a[1])},i(a){l||(v(n.$$.fragment,a),at(()=>{s||(s=tt(e,Dt,{},!0)),s.run(1)}),l=!0)},o(a){y(n.$$.fragment,a),s||(s=tt(e,Dt,{},!1)),s.run(0),l=!1},d(a){a&&$(e),H(n),a&&s&&s.end()}}}function u1(t){return{c:Re,m:Re,p:Re,i:Re,o:Re,d:Re}}function c1(t){let e,n,i=t[2](t[5][t[0]])+"",o,r,s,l,a;const f=[r1,o1,i1],u=[];function d(p,h){return p[0]==="loading"?0:p[0]==="not_found"?1:2}return s=d(t),l=u[s]=f[s](t),{c(){e=m("main"),n=m("h2"),o=O(i),r=S(),l.c(),k(e,"class","cms-main")},m(p,h){w(p,e,h),c(e,n),c(n,o),c(e,r),u[s].m(e,null),a=!0},p(p,[h]){(!a||h&5)&&i!==(i=p[2](p[5][p[0]])+"")&&T(o,i);let _=s;s=d(p),s===_?u[s].p(p,h):(Oe(),y(u[_],1,1,()=>{u[_]=null}),Ne(),l=u[s],l?l.p(p,h):(l=u[s]=f[s](p),l.c()),v(l,1),l.m(e,null))},i(p){a||(v(l),a=!0)},o(p){y(l),a=!1},d(p){p&&$(e),u[s].d()}}}function p1(t,e){const n=t.path.match(/\/err\/(\w+)/);return n?n[1]:e.is("pending")||e.is("loading")?"loading":"not_found"}function d1(t,e,n){let i,o,r,s,l,a,f;Ce(t,De,g=>n(11,s=g)),Ce(t,ot,g=>n(2,l=g)),Ce(t,Bt,g=>n(4,f=g));let{title:u="Loading..."}=e;const d={loading:"Loading...",not_found:"Not Found"},p=ht("socket");Ce(t,p,g=>n(3,a=g));const h=ht("user");Ce(t,h,g=>n(10,r=g));const _=fc(5e3);return t.$$set=g=>{"title"in g&&n(9,u=g.title)},t.$$.update=()=>{t.$$.dirty&3072&&n(0,i=p1(s,r)),t.$$.dirty&1&&n(9,u=d[i])},n(1,o=De.urlFor(h.email?"/chat":"/login")),[i,o,l,a,f,d,p,h,_,u,r,s]}class Uf extends Je{constructor(e){super(),Ze(this,e,d1,c1,Ye,{title:9})}}function xl(t,e,n){const i=t.slice();return i[5]=e[n],i}function h1(t){let e,n=t[0]("Help")+"",i,o,r,s,l,a=Ge("version")+"",f;return{c(){e=m("h1"),i=O(n),o=S(),r=m("small"),s=m("a"),l=O("v"),f=O(a),k(s,"href",t[2]),k(s,"target","_blank")},m(u,d){w(u,e,d),c(e,i),c(e,o),c(e,r),c(r,s),c(s,l),c(s,f)},p(u,d){d&1&&n!==(n=u[0]("Help")+"")&&T(i,n)},d(u){u&&$(e)}}}function ea(t){let e,n=t[5].example+"",i,o,r=t[0](t[5].description)+"",s;return{c(){e=m("dt"),i=O(n),o=m("dd"),s=O(r)},m(l,a){w(l,e,a),c(e,i),w(l,o,a),c(o,s)},p(l,a){a&1&&r!==(r=l[0](l[5].description)+"")&&T(s,r)},d(l){l&&$(e),l&&$(o)}}}function _1(t){let e,n,i=Ge("organization_name")+"",o;return{c(){e=m("li"),n=m("a"),o=O(i),k(n,"href",Ge("organization_url")),k(n,"target","_blank")},m(r,s){w(r,e,s),c(e,n),c(n,o)},p:Re,d(r){r&&$(e)}}}function m1(t){let e;return{c(){e=O("Loading")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function g1(t){let e;return{c(){e=O("Not found")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function b1(t){let e;return{c(){e=O("Unknown")},m(n,i){w(n,e,i)},d(n){n&&$(e)}}}function v1(t){let e,n,i,o,r,s=t[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"",l,a,f=t[1]("More information can also be found on https://convos.chat.")+"",u,d,p=t[0]("Quick search")+"",h,_,g,E=t[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"",b,C,M,D,L,A=t[0]("Filter conversations with unread messages.")+"",R,U,B,W=t[0]("Filter private conversations with unread messages.")+"",G,I,K,X=t[0]("Filter channels with unread messages.")+"",J,N,P=t[0]("Any other combination")+"",Z,j,V=t[0]("Filter channels, private conversations or search for a string.")+"",Y,F,oe,re=t[0]("Autocomplete")+"",ne,de,Se,se=t[0]("The following rules apply when typing a message:")+"",he,Ue,Le,_e,pe,Pe=t[0]('"@" followed by a character will show matching nicks in the current conversation.')+"",x,me,we,Fe=t[0]('":" followed by a character will show matching emojis.')+"",je,fe,ie,ve=t[0]('"/" will show the available commands.')+"",Ee,ce,ee,ae=t[0]('"#" will show the matching conversation names.')+"",te,Q,ue,ge=t[0]("Text formatting")+"",Ae,Xe,ze,rt=t[0]("Convos supports some special way of formatting text:")+"",yt,Lt,lt,Zt,jt,Dn=t[0]("Will be automatically converted into emojis.")+"",Un,hi,gn=t[0]("> some text")+"",_i,Bn,Fn=t[0]('A line starting with ">" will be converted into a quote.')+"",jn,Ot,le=t[0]("*some text*, **some text**, ***some text***")+"",Ie,bn,xt=t[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",en,tn=t[0]("`some fragment`")+"",vn,nn,on=t[1]("Using backticks around some text, will format it as a `code fragment`.")+"",$n,wn,rn=t[0]("URLs will be converted to links, and might be embedded in the chat.")+"",sn,kn,ln,an=t[0]("Available commands")+"",zn,Xr,zi,Hi=t[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",xr,qi,es,Wi,Gi=t[0]("Other resources")+"",Oo,ts,Nt,No,mi,Ki=t[0]("Changelog for v%1",Ge("version"))+"",To,ns,Mo,gi,Yi=t[0]("Project homepage")+"",Ro,is,Lo,bi,Vi=t[0]("Bug/issue tracker")+"",Io,os,Po,vi,Zi=t[0]("Source code")+"",Do,rs,ss=Ge("organization_name")!=="Convos"&&Ge("organization_url")!=="https://convos.chat",ls,Uo,$i,Ji=t[0]("Contact admin")+"",Bo,as,Qi,Xi=t[0]("Demo error pages")+"",Fo,fs,yn,jo,Sn,us,zo,En,cs,Ho,Cn,qe;e=new Ut({props:{$$slots:{default:[h1]},$$scope:{ctx:t}}});let Hn=cn,Et=[];for(let Me=0;Me<Hn.length;Me+=1)Et[Me]=ea(xl(t,Hn,Me));let An=ss&&_1();return Sn=new We({props:{href:"/err/loading",$$slots:{default:[m1]},$$scope:{ctx:t}}}),En=new We({props:{href:"/err/not_found",$$slots:{default:[g1]},$$scope:{ctx:t}}}),Cn=new We({props:{href:"/err/unknown",$$slots:{default:[b1]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment),n=S(),i=m("main"),o=m("p"),r=new Tt(!1),l=S(),a=new Tt(!1),u=S(),d=m("h2"),h=O(p),_=S(),g=m("p"),b=O(E),C=S(),M=m("dl"),D=m("dt"),D.textContent="+",L=m("dd"),R=O(A),U=m("dt"),U.textContent="+@",B=m("dd"),G=O(W),I=m("dt"),I.textContent="+#",K=m("dd"),J=O(X),N=m("dt"),Z=O(P),j=m("dd"),Y=O(V),F=S(),oe=m("h2"),ne=O(re),de=S(),Se=m("p"),he=O(se),Ue=S(),Le=m("dl"),_e=m("dt"),_e.textContent="@nick",pe=m("dd"),x=O(Pe),me=m("dt"),me.textContent=":emoji_name",we=m("dd"),je=O(Fe),fe=m("dt"),fe.textContent="/command",ie=m("dd"),Ee=O(ve),ce=m("dt"),ce.textContent="#conversation",ee=m("dd"),te=O(ae),Q=S(),ue=m("h2"),Ae=O(ge),Xe=S(),ze=m("p"),yt=O(rt),Lt=S(),lt=m("dl"),Zt=m("dt"),jt=m("dd"),Un=O(Dn),hi=m("dt"),_i=O(gn),Bn=m("dd"),jn=O(Fn),Ot=m("dt"),Ie=O(le),bn=m("dd"),en=m("dt"),vn=O(tn),nn=m("dd"),$n=m("dt"),$n.textContent="https://...",wn=m("dd"),sn=O(rn),kn=S(),ln=m("h2"),zn=O(an),Xr=S(),zi=m("p"),xr=S(),qi=m("dl");for(let Me=0;Me<Et.length;Me+=1)Et[Me].c();es=S(),Wi=m("h2"),Oo=O(Gi),ts=S(),Nt=m("ul"),No=m("li"),mi=m("a"),To=O(Ki),ns=S(),Mo=m("li"),gi=m("a"),Ro=O(Yi),is=S(),Lo=m("li"),bi=m("a"),Io=O(Vi),os=S(),Po=m("li"),vi=m("a"),Do=O(Zi),rs=S(),An&&An.c(),ls=S(),Uo=m("li"),$i=m("a"),Bo=O(Ji),as=S(),Qi=m("h2"),Fo=O(Xi),fs=S(),yn=m("ul"),jo=m("li"),q(Sn.$$.fragment),us=S(),zo=m("li"),q(En.$$.fragment),cs=S(),Ho=m("li"),q(Cn.$$.fragment),r.a=l,a.a=null,k(d,"id","quick-search"),k(oe,"id","autocomplete"),k(ue,"id","formatting"),k(ln,"id","commands"),k(Wi,"id","resources"),k(mi,"href",t[2]),k(mi,"target","_blank"),k(gi,"href","https://convos.chat"),k(gi,"target","_blank"),k(bi,"href","https://github.com/convos-chat/convos/issues"),k(bi,"target","_blank"),k(vi,"href","https://github.com/convos-chat/convos"),k(vi,"target","_blank"),k($i,"href",Ge("contact")),k($i,"target","_blank"),k(Qi,"id","fallback"),k(i,"class","main")},m(Me,He){z(e,Me,He),w(Me,n,He),w(Me,i,He),c(i,o),r.m(s,o),c(o,l),a.m(f,o),c(i,u),c(i,d),c(d,h),c(i,_),c(i,g),c(g,b),c(i,C),c(i,M),c(M,D),c(M,L),c(L,R),c(M,U),c(M,B),c(B,G),c(M,I),c(M,K),c(K,J),c(M,N),c(N,Z),c(M,j),c(j,Y),c(i,F),c(i,oe),c(oe,ne),c(i,de),c(i,Se),c(Se,he),c(i,Ue),c(i,Le),c(Le,_e),c(Le,pe),c(pe,x),c(Le,me),c(Le,we),c(we,je),c(Le,fe),c(Le,ie),c(ie,Ee),c(Le,ce),c(Le,ee),c(ee,te),c(i,Q),c(i,ue),c(ue,Ae),c(i,Xe),c(i,ze),c(ze,yt),c(i,Lt),c(i,lt),c(lt,Zt),Zt.innerHTML=t[3],c(lt,jt),c(jt,Un),c(lt,hi),c(hi,_i),c(lt,Bn),c(Bn,jn),c(lt,Ot),c(Ot,Ie),c(lt,bn),bn.innerHTML=xt,c(lt,en),c(en,vn),c(lt,nn),nn.innerHTML=on,c(lt,$n),c(lt,wn),c(wn,sn),c(i,kn),c(i,ln),c(ln,zn),c(i,Xr),c(i,zi),zi.innerHTML=Hi,c(i,xr),c(i,qi);for(let qn=0;qn<Et.length;qn+=1)Et[qn].m(qi,null);c(i,es),c(i,Wi),c(Wi,Oo),c(i,ts),c(i,Nt),c(Nt,No),c(No,mi),c(mi,To),c(Nt,ns),c(Nt,Mo),c(Mo,gi),c(gi,Ro),c(Nt,is),c(Nt,Lo),c(Lo,bi),c(bi,Io),c(Nt,os),c(Nt,Po),c(Po,vi),c(vi,Do),c(Nt,rs),An&&An.m(Nt,null),c(Nt,ls),c(Nt,Uo),c(Uo,$i),c($i,Bo),c(i,as),c(i,Qi),c(Qi,Fo),c(i,fs),c(i,yn),c(yn,jo),z(Sn,jo,null),c(yn,us),c(yn,zo),z(En,zo,null),c(yn,cs),c(yn,Ho),z(Cn,Ho,null),qe=!0},p(Me,[He]){const qn={};if(He&257&&(qn.$$scope={dirty:He,ctx:Me}),e.$set(qn),(!qe||He&2)&&s!==(s=Me[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"")&&r.p(s),(!qe||He&2)&&f!==(f=Me[1]("More information can also be found on https://convos.chat.")+"")&&a.p(f),(!qe||He&1)&&p!==(p=Me[0]("Quick search")+"")&&T(h,p),(!qe||He&1)&&E!==(E=Me[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"")&&T(b,E),(!qe||He&1)&&A!==(A=Me[0]("Filter conversations with unread messages.")+"")&&T(R,A),(!qe||He&1)&&W!==(W=Me[0]("Filter private conversations with unread messages.")+"")&&T(G,W),(!qe||He&1)&&X!==(X=Me[0]("Filter channels with unread messages.")+"")&&T(J,X),(!qe||He&1)&&P!==(P=Me[0]("Any other combination")+"")&&T(Z,P),(!qe||He&1)&&V!==(V=Me[0]("Filter channels, private conversations or search for a string.")+"")&&T(Y,V),(!qe||He&1)&&re!==(re=Me[0]("Autocomplete")+"")&&T(ne,re),(!qe||He&1)&&se!==(se=Me[0]("The following rules apply when typing a message:")+"")&&T(he,se),(!qe||He&1)&&Pe!==(Pe=Me[0]('"@" followed by a character will show matching nicks in the current conversation.')+"")&&T(x,Pe),(!qe||He&1)&&Fe!==(Fe=Me[0]('":" followed by a character will show matching emojis.')+"")&&T(je,Fe),(!qe||He&1)&&ve!==(ve=Me[0]('"/" will show the available commands.')+"")&&T(Ee,ve),(!qe||He&1)&&ae!==(ae=Me[0]('"#" will show the matching conversation names.')+"")&&T(te,ae),(!qe||He&1)&&ge!==(ge=Me[0]("Text formatting")+"")&&T(Ae,ge),(!qe||He&1)&&rt!==(rt=Me[0]("Convos supports some special way of formatting text:")+"")&&T(yt,rt),(!qe||He&1)&&Dn!==(Dn=Me[0]("Will be automatically converted into emojis.")+"")&&T(Un,Dn),(!qe||He&1)&&gn!==(gn=Me[0]("> some text")+"")&&T(_i,gn),(!qe||He&1)&&Fn!==(Fn=Me[0]('A line starting with ">" will be converted into a quote.')+"")&&T(jn,Fn),(!qe||He&1)&&le!==(le=Me[0]("*some text*, **some text**, ***some text***")+"")&&T(Ie,le),(!qe||He&2)&&xt!==(xt=Me[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"")&&(bn.innerHTML=xt),(!qe||He&1)&&tn!==(tn=Me[0]("`some fragment`")+"")&&T(vn,tn),(!qe||He&2)&&on!==(on=Me[1]("Using backticks around some text, will format it as a `code fragment`.")+"")&&(nn.innerHTML=on),(!qe||He&1)&&rn!==(rn=Me[0]("URLs will be converted to links, and might be embedded in the chat.")+"")&&T(sn,rn),(!qe||He&1)&&an!==(an=Me[0]("Available commands")+"")&&T(zn,an),(!qe||He&2)&&Hi!==(Hi=Me[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"")&&(zi.innerHTML=Hi),He&1){Hn=cn;let It;for(It=0;It<Hn.length;It+=1){const _s=xl(Me,Hn,It);Et[It]?Et[It].p(_s,He):(Et[It]=ea(_s),Et[It].c(),Et[It].m(qi,null))}for(;It<Et.length;It+=1)Et[It].d(1);Et.length=Hn.length}(!qe||He&1)&&Gi!==(Gi=Me[0]("Other resources")+"")&&T(Oo,Gi),(!qe||He&1)&&Ki!==(Ki=Me[0]("Changelog for v%1",Ge("version"))+"")&&T(To,Ki),(!qe||He&1)&&Yi!==(Yi=Me[0]("Project homepage")+"")&&T(Ro,Yi),(!qe||He&1)&&Vi!==(Vi=Me[0]("Bug/issue tracker")+"")&&T(Io,Vi),(!qe||He&1)&&Zi!==(Zi=Me[0]("Source code")+"")&&T(Do,Zi),ss&&An.p(Me,He),(!qe||He&1)&&Ji!==(Ji=Me[0]("Contact admin")+"")&&T(Bo,Ji),(!qe||He&1)&&Xi!==(Xi=Me[0]("Demo error pages")+"")&&T(Fo,Xi);const ps={};He&256&&(ps.$$scope={dirty:He,ctx:Me}),Sn.$set(ps);const ds={};He&256&&(ds.$$scope={dirty:He,ctx:Me}),En.$set(ds);const hs={};He&256&&(hs.$$scope={dirty:He,ctx:Me}),Cn.$set(hs)},i(Me){qe||(v(e.$$.fragment,Me),v(Sn.$$.fragment,Me),v(En.$$.fragment,Me),v(Cn.$$.fragment,Me),qe=!0)},o(Me){y(e.$$.fragment,Me),y(Sn.$$.fragment,Me),y(En.$$.fragment,Me),y(Cn.$$.fragment,Me),qe=!1},d(Me){H(e,Me),Me&&$(n),Me&&$(i),wt(Et,Me),An&&An.d(),H(Sn),H(En),H(Cn)}}}function $1(t,e,n){let i,o;Ce(t,ot,a=>n(0,i=a)),Ce(t,Bt,a=>n(1,o=a));const r="Help",s="https://github.com/convos-chat/convos/blob/v"+Ge("version")+"/Changes#L3",l=Object.keys(xe.emojis.aliases).sort().join(", ");return[i,o,s,l,r]}class w1 extends Je{constructor(e){super(),Ze(this,e,$1,v1,Ye,{title:4})}get title(){return this.$$.ctx[4]}}function ta(t,e,n){const i=t.slice();return i[22]=e[n],i}function k1(t){let e,n=t[2]("Sign up")+"",i,o,r,s=t[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"",l,a,f,u,d,p,h=t[2]("Contact admin")+"",_,g,E,b;return d=new $e({props:{name:"paper-plane"}}),E=new We({props:{href:"/login",$$slots:{default:[C1]},$$scope:{ctx:t}}}),{c(){e=m("h2"),i=O(n),o=S(),r=m("p"),l=O(s),a=S(),f=m("div"),u=m("a"),q(d.$$.fragment),p=S(),_=O(h),g=S(),q(E.$$.fragment),k(u,"class","btn"),k(u,"href",Ge("contact")),k(f,"class","form-actions")},m(C,M){w(C,e,M),c(e,i),w(C,o,M),w(C,r,M),c(r,l),w(C,a,M),w(C,f,M),c(f,u),z(d,u,null),c(u,p),c(u,_),c(f,g),z(E,f,null),b=!0},p(C,M){(!b||M&4)&&n!==(n=C[2]("Sign up")+"")&&T(i,n),(!b||M&4)&&s!==(s=C[2]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"")&&T(l,s),(!b||M&4)&&h!==(h=C[2]("Contact admin")+"")&&T(_,h);const D={};M&33554436&&(D.$$scope={dirty:M,ctx:C}),E.$set(D)},i(C){b||(v(d.$$.fragment,C),v(E.$$.fragment,C),b=!0)},o(C){y(d.$$.fragment,C),y(E.$$.fragment,C),b=!1},d(C){C&&$(e),C&&$(o),C&&$(r),C&&$(a),C&&$(f),H(d),H(E)}}}function y1(t){let e,n=t[2]("Sign in")+"",i,o,r,s,l,a,f,u,d,p,h,_,g,E,b;function C(A){t[17](A)}let M={type:"email",name:"email",placeholder:t[2]("Ex: john@doe.com"),$$slots:{label:[A1]},$$scope:{ctx:t}};t[0].email!==void 0&&(M.value=t[0].email),r=new Ve({props:M}),be.push(()=>ye(r,"value",C,t[0].email));function D(A){t[18](A)}let L={type:"password",name:"password",autocomplete:"current-password",$$slots:{help:[N1],label:[O1]},$$scope:{ctx:t}};return t[0].password!==void 0&&(L.value=t[0].password),a=new Ve({props:L}),be.push(()=>ye(a,"value",D,t[0].password)),p=new ft({props:{icon:"sign-in-alt",op:t[6],$$slots:{default:[T1]},$$scope:{ctx:t}}}),_=new We({props:{href:"/register",$$slots:{default:[M1]},$$scope:{ctx:t}}}),E=new Mt({props:{op:t[6],success:"Loading Convos..."}}),{c(){e=m("h2"),i=O(n),o=S(),q(r.$$.fragment),l=S(),q(a.$$.fragment),u=S(),d=m("div"),q(p.$$.fragment),h=S(),q(_.$$.fragment),g=S(),q(E.$$.fragment),k(d,"class","form-actions")},m(A,R){w(A,e,R),c(e,i),w(A,o,R),z(r,A,R),w(A,l,R),z(a,A,R),w(A,u,R),w(A,d,R),z(p,d,null),c(d,h),z(_,d,null),w(A,g,R),z(E,A,R),b=!0},p(A,R){(!b||R&4)&&n!==(n=A[2]("Sign in")+"")&&T(i,n);const U={};R&4&&(U.placeholder=A[2]("Ex: john@doe.com")),R&33554436&&(U.$$scope={dirty:R,ctx:A}),!s&&R&1&&(s=!0,U.value=A[0].email,ke(()=>s=!1)),r.$set(U);const B={};R&33554444&&(B.$$scope={dirty:R,ctx:A}),!f&&R&1&&(f=!0,B.value=A[0].password,ke(()=>f=!1)),a.$set(B);const W={};R&33554436&&(W.$$scope={dirty:R,ctx:A}),p.$set(W);const G={};R&33554436&&(G.$$scope={dirty:R,ctx:A}),_.$set(G)},i(A){b||(v(r.$$.fragment,A),v(a.$$.fragment,A),v(p.$$.fragment,A),v(_.$$.fragment,A),v(E.$$.fragment,A),b=!0)},o(A){y(r.$$.fragment,A),y(a.$$.fragment,A),y(p.$$.fragment,A),y(_.$$.fragment,A),y(E.$$.fragment,A),b=!1},d(A){A&&$(e),A&&$(o),H(r,A),A&&$(l),H(a,A),A&&$(u),A&&$(d),H(p),H(_),A&&$(g),H(E,A)}}}function S1(t){let e,n=(t[1]==="recover"?t[2]("Recover account"):t[2]("Sign up"))+"",i,o,r=Ge("first_user"),s,l,a,f,u,d,p,h,_,g,E,b,C,M,D=!Ge("first_user"),L,A,R,U,B,W=r&&R1(t);function G(N){t[15](N)}let I={type:"email",name:"email",placeholder:t[2]("Ex: john@doe.com"),readonly:t[1]!=="register",$$slots:{help:[I1],label:[L1]},$$scope:{ctx:t}};t[0].email!==void 0&&(I.value=t[0].email),d=new Ve({props:I}),be.push(()=>ye(d,"value",G,t[0].email));function K(N){t[16](N)}let X={type:"password",name:"password",$$slots:{help:[D1],label:[P1]},$$scope:{ctx:t}};t[0].password!==void 0&&(X.value=t[0].password),_=new Ve({props:X}),be.push(()=>ye(_,"value",K,t[0].password)),C=new ft({props:{icon:"save",op:t[7],$$slots:{default:[U1]},$$scope:{ctx:t}}});let J=D&&B1(t);return A=new Mt({props:{op:t[7],success:"Loading Convos..."}}),{c(){e=m("h2"),i=O(n),o=S(),W&&W.c(),s=S(),l=m("input"),a=S(),f=m("input"),u=S(),q(d.$$.fragment),h=S(),q(_.$$.fragment),E=S(),b=m("div"),q(C.$$.fragment),M=S(),J&&J.c(),L=S(),q(A.$$.fragment),k(l,"type","hidden"),k(l,"name","exp"),k(f,"type","hidden"),k(f,"name","token"),k(b,"class","form-actions")},m(N,P){w(N,e,P),c(e,i),w(N,o,P),W&&W.m(N,P),w(N,s,P),w(N,l,P),Ct(l,t[0].exp),w(N,a,P),w(N,f,P),Ct(f,t[0].token),w(N,u,P),z(d,N,P),w(N,h,P),z(_,N,P),w(N,E,P),w(N,b,P),z(C,b,null),c(b,M),J&&J.m(b,null),w(N,L,P),z(A,N,P),R=!0,U||(B=[Te(l,"input",t[13]),Te(f,"input",t[14])],U=!0)},p(N,P){(!R||P&6)&&n!==(n=(N[1]==="recover"?N[2]("Recover account"):N[2]("Sign up"))+"")&&T(i,n),r&&W.p(N,P),P&1&&Ct(l,N[0].exp),P&1&&Ct(f,N[0].token);const Z={};P&4&&(Z.placeholder=N[2]("Ex: john@doe.com")),P&2&&(Z.readonly=N[1]!=="register"),P&33554438&&(Z.$$scope={dirty:P,ctx:N}),!p&&P&1&&(p=!0,Z.value=N[0].email,ke(()=>p=!1)),d.$set(Z);const j={};P&33554436&&(j.$$scope={dirty:P,ctx:N}),!g&&P&1&&(g=!0,j.value=N[0].password,ke(()=>g=!1)),_.$set(j);const V={};P&33554438&&(V.$$scope={dirty:P,ctx:N}),C.$set(V),D&&J.p(N,P)},i(N){R||(v(d.$$.fragment,N),v(_.$$.fragment,N),v(C.$$.fragment,N),v(J),v(A.$$.fragment,N),R=!0)},o(N){y(d.$$.fragment,N),y(_.$$.fragment,N),y(C.$$.fragment,N),y(J),y(A.$$.fragment,N),R=!1},d(N){N&&$(e),N&&$(o),W&&W.d(N),N&&$(s),N&&$(l),N&&$(a),N&&$(f),N&&$(u),H(d,N),N&&$(h),H(_,N),N&&$(E),N&&$(b),H(C),J&&J.d(),N&&$(L),H(A,N),U=!1,ut(B)}}}function E1(t){let e,n=t[2]("Invalid invite/recover URL")+"",i,o,r,s=t[2](Ge("status")==410?"The link has expired.":"The link is invalid.")+"",l,a,f,u=t[2]("Please ask your Convos admin for a new link.")+"",d,p,h,_,g=t[2]("Contact admin")+"",E,b,C,M;return C=new We({props:{href:"/login",$$slots:{default:[j1]},$$scope:{ctx:t}}}),{c(){e=m("h2"),i=O(n),o=S(),r=m("p"),l=O(s),a=S(),f=m("p"),d=O(u),p=S(),h=m("p"),_=m("a"),E=O(g),b=S(),q(C.$$.fragment),k(_,"class","btn"),k(_,"href",Ge("contact"))},m(D,L){w(D,e,L),c(e,i),w(D,o,L),w(D,r,L),c(r,l),w(D,a,L),w(D,f,L),c(f,d),w(D,p,L),w(D,h,L),c(h,_),c(_,E),c(h,b),z(C,h,null),M=!0},p(D,L){(!M||L&4)&&n!==(n=D[2]("Invalid invite/recover URL")+"")&&T(i,n),(!M||L&4)&&s!==(s=D[2](Ge("status")==410?"The link has expired.":"The link is invalid.")+"")&&T(l,s),(!M||L&4)&&u!==(u=D[2]("Please ask your Convos admin for a new link.")+"")&&T(d,u),(!M||L&4)&&g!==(g=D[2]("Contact admin")+"")&&T(E,g);const A={};L&33554436&&(A.$$scope={dirty:L,ctx:D}),C.$set(A)},i(D){M||(v(C.$$.fragment,D),M=!0)},o(D){y(C.$$.fragment,D),M=!1},d(D){D&&$(e),D&&$(o),D&&$(r),D&&$(a),D&&$(f),D&&$(p),D&&$(h),H(C)}}}function C1(t){let e=t[2]("Sign in")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&T(n,e)},d(i){i&&$(n)}}}function A1(t){let e,n=t[2]("Email")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&T(i,n)},d(o){o&&$(e)}}}function O1(t){let e,n=t[2]("Password")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&T(i,n)},d(o){o&&$(e)}}}function N1(t){let e,n=t[3]("Contact your [Convos admin](%1) if you have forgotten your password.",Ge("contact"))+"";return{c(){e=m("p"),k(e,"class","help"),k(e,"slot","help")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&8&&n!==(n=i[3]("Contact your [Convos admin](%1) if you have forgotten your password.",Ge("contact"))+"")&&(e.innerHTML=n)},d(i){i&&$(e)}}}function T1(t){let e,n=t[2]("Sign in")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Sign in")+"")&&T(i,n)},d(o){o&&$(e)}}}function M1(t){let e=t[2]("Sign up")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign up")+"")&&T(n,e)},d(i){i&&$(n)}}}function R1(t){let e,n=t[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"",i;return{c(){e=m("p"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"")&&T(i,n)},d(o){o&&$(e)}}}function L1(t){let e,n=t[2]("Email")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&T(i,n)},d(o){o&&$(e)}}}function I1(t){let e,n=(t[1]==="invitation"?t[2]("Your email is from the invite link."):t[2]("Your email will be used if you forget your password."))+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&6&&n!==(n=(o[1]==="invitation"?o[2]("Your email is from the invite link."):o[2]("Your email will be used if you forget your password."))+"")&&T(i,n)},d(o){o&&$(e)}}}function P1(t){let e,n=t[2]("Password")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&T(i,n)},d(o){o&&$(e)}}}function D1(t){let e,n=t[2]("Hint: Use a phrase from a book.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Hint: Use a phrase from a book.")+"")&&T(i,n)},d(o){o&&$(e)}}}function U1(t){let e,n=(t[1]==="recover"?t[2]("Set new password"):t[2]("Sign up"))+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&6&&n!==(n=(o[1]==="recover"?o[2]("Set new password"):o[2]("Sign up"))+"")&&T(i,n)},d(o){o&&$(e)}}}function B1(t){let e,n;return e=new We({props:{href:"/login",$$slots:{default:[F1]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&33554436&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function F1(t){let e=t[2]("Sign in")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&T(n,e)},d(i){i&&$(n)}}}function j1(t){let e=t[2]("Sign in")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&4&&e!==(e=i[2]("Sign in")+"")&&T(n,e)},d(i){i&&$(n)}}}function na(t){let e,n=t[22][1]+"",i,o,r,s;function l(){return t[19](t[22])}return{c(){e=m("a"),i=O(n),k(e,"href",o="#"+t[22][0])},m(a,f){w(a,e,f),c(e,i),r||(s=Te(e,"click",l),r=!0)},p(a,f){t=a,f&16&&n!==(n=t[22][1]+"")&&T(i,n),f&16&&o!==(o="#"+t[22][0])&&k(e,"href",o)},d(a){a&&$(e),r=!1,s()}}}function z1(t){let e,n,i,o,r,s,l,a,f,u,d,p,h,_,g;const E=[E1,S1,y1,k1],b=[];function C(L,A){return A&2&&(r=null),L[1]==="invalid_invitation"?0:(r==null&&(r=["recover","invitation","register"].indexOf(L[1])!==-1),r?1:L[1]==="login"?2:3)}s=C(t,-1),l=b[s]=E[s](t),d=new $e({props:{name:"globe"}});let M=t[4].languageOptions,D=[];for(let L=0;L<M.length;L+=1)D[L]=na(ta(t,M,L));return{c(){e=m("main"),n=m("form"),i=m("input"),o=S(),l.c(),a=S(),f=m("div"),u=m("footer"),q(d.$$.fragment),p=S();for(let L=0;L<D.length;L+=1)D[L].c();k(i,"type","hidden"),k(i,"name","mode"),k(n,"method","post"),k(e,"class","cms-main"),k(u,"class","footer language-selector"),k(f,"class","footer--wrapper is-small")},m(L,A){w(L,e,A),c(e,n),c(n,i),Ct(i,t[0].mode),c(n,o),b[s].m(n,null),w(L,a,A),w(L,f,A),c(f,u),z(d,u,null),c(u,p);for(let R=0;R<D.length;R+=1)D[R].m(u,null);h=!0,_||(g=[Te(i,"input",t[12]),Te(n,"submit",st(t[8]))],_=!0)},p(L,[A]){A&1&&Ct(i,L[0].mode);let R=s;if(s=C(L,A),s===R?b[s].p(L,A):(Oe(),y(b[R],1,1,()=>{b[R]=null}),Ne(),l=b[s],l?l.p(L,A):(l=b[s]=E[s](L),l.c()),v(l,1),l.m(n,null)),A&16){M=L[4].languageOptions;let U;for(U=0;U<M.length;U+=1){const B=ta(L,M,U);D[U]?D[U].p(B,A):(D[U]=na(B),D[U].c(),D[U].m(u,null))}for(;U<D.length;U+=1)D[U].d(1);D.length=M.length}},i(L){h||(v(l),v(d.$$.fragment,L),h=!0)},o(L){y(l),y(d.$$.fragment,L),h=!1},d(L){L&&$(e),b[s].d(),L&&$(a),L&&$(f),H(d),wt(D,L),_=!1,ut(g)}}}function H1(t,e,n){let i,o,r,s,l,a;Ce(t,De,B=>n(10,o=B)),Ce(t,ot,B=>n(2,s=B)),Ce(t,Bt,B=>n(3,l=B)),Ce(t,xe,B=>n(4,a=B));let{title:f="Sign in"}=e;const u=ht("user");Ce(t,u,B=>n(11,r=B));const d=et.op("loginUser"),p=et.op("registerUser");let h={};function _(B){if(B.is("loading")||!B.email)return;const W=B.conversations()[0],G=B.lastUrl?B.lastUrl:W?W.path:"/settings/connections";De.go(G,{replace:!0})}function g(B){const W=B.path.indexOf("register")!==-1,G=!h.mode&&Ge("status")>=400?"invalid_invitation":B.param("email")&&Ge("existing_user")?"recover":B.param("email")?"invitation":Ge("first_user")||W&&Ge("open_to_public")?"register":W?"invalid":"login";return n(0,h={email:B.param("email")||h.email||"",exp:B.param("exp")||"",mode:G,password:"",token:B.param("token")||""}),n(9,f=G==="login"?"Sign in":"Sign up"),"ontouchstart"in window||setTimeout(()=>bt(document,".text-field input").reverse().map(I=>I.readOnly||I.focus()),1),G}async function E(B){const W=i==="login"?d:p,G=B.target.closest("form");n(0,h.email=G.email.value,h),n(0,h.password=G.password.value,h),await W.perform(h),i!=="login"&&De.update({lastUrl:""}),W.error()||await u.load()}function b(){h.mode=this.value,n(0,h)}function C(){h.exp=this.value,n(0,h)}function M(){h.token=this.value,n(0,h)}function D(B){t.$$.not_equal(h.email,B)&&(h.email=B,n(0,h))}function L(B){t.$$.not_equal(h.password,B)&&(h.password=B,n(0,h))}function A(B){t.$$.not_equal(h.email,B)&&(h.email=B,n(0,h))}function R(B){t.$$.not_equal(h.password,B)&&(h.password=B,n(0,h))}const U=B=>a.load(B[0]);return t.$$set=B=>{"title"in B&&n(9,f=B.title)},t.$$.update=()=>{t.$$.dirty&2048&&_(r),t.$$.dirty&1024&&n(1,i=g(o))},[h,i,s,l,a,u,d,p,E,f,o,r,b,C,M,D,L,A,R,U]}class Bf extends Je{constructor(e){super(),Ze(this,e,H1,z1,Ye,{title:9})}}function ia(t,e,n){const i=t.slice();return i[8]=e[n],i[10]=n,i}function q1(t){let e,n;return e=new $e({props:{name:"user-cog"}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p:Re,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function W1(t){let e,n=t[3]("Notifications")+"",i,o,r,s;return r=new We({props:{href:"/settings/account",class:"btn-hallow",$$slots:{default:[q1]},$$scope:{ctx:t}}}),{c(){e=m("h1"),i=O(n),o=S(),q(r.$$.fragment)},m(l,a){w(l,e,a),c(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&8)&&n!==(n=l[3]("Notifications")+"")&&T(i,n);const f={};a&2048&&(f.$$scope={dirty:a,ctx:l}),r.$set(f)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),H(r,l)}}}function oa(t){let e,n=t[3]("No notifications.")+"",i;return{c(){e=m("h2"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&8&&n!==(n=o[3]("No notifications.")+"")&&T(i,n)},d(o){o&&$(e)}}}function ra(t){let e,n,i,o,r,s=t[8].ts.getHumanDate()+"",l,a;return i=new $e({props:{name:"calendar-alt"}}),{c(){e=m("div"),n=m("span"),q(i.$$.fragment),o=S(),r=m("i"),l=O(s),k(e,"class","message__status-line for-day-changed")},m(f,u){w(f,e,u),c(e,n),z(i,n,null),c(n,o),c(n,r),c(r,l),a=!0},p(f,u){(!a||u&16)&&s!==(s=f[8].ts.getHumanDate()+"")&&T(l,s)},i(f){a||(v(i.$$.fragment,f),a=!0)},o(f){y(i.$$.fragment,f),a=!1},d(f){f&&$(e),H(i)}}}function sa(t){let e,n,i,o,r,s,l=t[8].ts.format("%H:%M")+"",a,f,u,d=At(t[8].ts.toLocaleString())+"",p,h,_,g=t[3]("%1 in %2",t[8].from,t[8].conversation_id)+"",E,b,C,M,D=t[8].html+"",L,A,R,U,B=(!t[10]||t[8].dayChanged)&&ra(t);return i=new $e({props:{name:"pick:"+t[8].from,color:t[8].color}}),{c(){B&&B.c(),e=S(),n=m("div"),q(i.$$.fragment),o=S(),r=m("div"),s=m("span"),a=O(l),f=S(),u=m("span"),p=O(d),h=S(),_=m("a"),E=O(g),C=S(),M=m("div"),k(u,"class","tooltip"),k(r,"class","message__ts has-tooltip"),k(_,"href",b=vo(t[8])),k(_,"class","message__from"),Pt(_,"color",t[8].color),k(M,"class","message__text"),k(n,"class",L=t[8].className)},m(W,G){B&&B.m(W,G),w(W,e,G),w(W,n,G),z(i,n,null),c(n,o),c(n,r),c(r,s),c(s,a),c(r,f),c(r,u),c(u,p),c(n,h),c(n,_),c(_,E),c(n,C),c(n,M),M.innerHTML=D,A=!0,R||(U=Te(n,"click",Pf),R=!0)},p(W,G){!W[10]||W[8].dayChanged?B?(B.p(W,G),G&16&&v(B,1)):(B=ra(W),B.c(),v(B,1),B.m(e.parentNode,e)):B&&(Oe(),y(B,1,1,()=>{B=null}),Ne());const I={};G&16&&(I.name="pick:"+W[8].from),G&16&&(I.color=W[8].color),i.$set(I),(!A||G&16)&&l!==(l=W[8].ts.format("%H:%M")+"")&&T(a,l),(!A||G&16)&&d!==(d=At(W[8].ts.toLocaleString())+"")&&T(p,d),(!A||G&24)&&g!==(g=W[3]("%1 in %2",W[8].from,W[8].conversation_id)+"")&&T(E,g),(!A||G&16&&b!==(b=vo(W[8])))&&k(_,"href",b),(!A||G&16)&&Pt(_,"color",W[8].color),(!A||G&16)&&D!==(D=W[8].html+"")&&(M.innerHTML=D),(!A||G&16&&L!==(L=W[8].className))&&k(n,"class",L)},i(W){A||(v(B),v(i.$$.fragment,W),A=!0)},o(W){y(B),y(i.$$.fragment,W),A=!1},d(W){B&&B.d(W),W&&$(e),W&&$(n),H(i),R=!1,U()}}}function la(t){let e,n,i,o,r,s=t[3]("Loading...")+"",l,a;return i=new $e({props:{name:"spinner",animation:"spin"}}),{c(){e=m("div"),n=m("span"),q(i.$$.fragment),o=S(),r=m("i"),l=O(s),k(e,"class","message__status-line for-loading")},m(f,u){w(f,e,u),c(e,n),z(i,n,null),c(n,o),c(n,r),c(r,l),a=!0},p(f,u){(!a||u&8)&&s!==(s=f[3]("Loading...")+"")&&T(l,s)},i(f){a||(v(i.$$.fragment,f),a=!0)},o(f){y(i.$$.fragment,f),a=!1},d(f){f&&$(e),H(i)}}}function G1(t){let e=t[4].length===0&&!t[5].is("loading"),n,i,o=t[1].is("loading"),r,s,l=e&&oa(t),a=t[4].render(),f=[];for(let p=0;p<a.length;p+=1)f[p]=sa(ia(t,a,p));const u=p=>y(f[p],1,1,()=>{f[p]=null});let d=o&&la(t);return{c(){l&&l.c(),n=S();for(let p=0;p<f.length;p+=1)f[p].c();i=S(),d&&d.c(),r=ct()},m(p,h){l&&l.m(p,h),w(p,n,h);for(let _=0;_<f.length;_+=1)f[_].m(p,h);w(p,i,h),d&&d.m(p,h),w(p,r,h),s=!0},p(p,h){if(h&16&&(e=p[4].length===0&&!p[5].is("loading")),e?l?l.p(p,h):(l=oa(p),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),h&24){a=p[4].render();let _;for(_=0;_<a.length;_+=1){const g=ia(p,a,_);f[_]?(f[_].p(g,h),v(f[_],1)):(f[_]=sa(g),f[_].c(),v(f[_],1),f[_].m(i.parentNode,i))}for(Oe(),_=a.length;_<f.length;_+=1)u(_);Ne()}h&2&&(o=p[1].is("loading")),o?d?(d.p(p,h),h&2&&v(d,1)):(d=la(p),d.c(),v(d,1),d.m(r.parentNode,r)):d&&(Oe(),y(d,1,1,()=>{d=null}),Ne())},i(p){if(!s){for(let h=0;h<a.length;h+=1)v(f[h]);v(d),s=!0}},o(p){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)y(f[h]);y(d),s=!1},d(p){l&&l.d(p),p&&$(n),wt(f,p),p&&$(i),d&&d.d(p),p&&$(r)}}}function K1(t){let e,n,i,o;return e=new Ut({props:{$$slots:{default:[W1]},$$scope:{ctx:t}}}),i=new Gr({props:{class:t[2].join(" "),$$slots:{default:[G1]},$$scope:{ctx:t}}}),i.$on("rendered",Y1),{c(){q(e.$$.fragment),n=S(),q(i.$$.fragment)},m(r,s){z(e,r,s),w(r,n,s),z(i,r,s),o=!0},p(r,[s]){const l={};s&2056&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&4&&(a.class=r[2].join(" ")),s&2074&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(v(e.$$.fragment,r),v(i.$$.fragment,r),o=!0)},o(r){y(e.$$.fragment,r),y(i.$$.fragment,r),o=!1},d(r){H(e,r),r&&$(n),H(i,r)}}}const Y1=t=>t.detail.scrollTo(-1);function V1(t,e,n){let i,o,r,s,l,a=Re,f=()=>(a(),a=dt(o,h=>n(4,l=h)),o);Ce(t,ot,h=>n(3,s=h)),t.$$.on_destroy.push(()=>a());const u="Notifications",p=ht("user").notifications;return Ce(t,p,h=>n(1,r=h)),Ft(async()=>{await p.load(),await p.markAsRead()}),t.$$.update=()=>{t.$$.dirty&2&&f(n(0,o=r.messages)),t.$$.dirty&1&&n(2,i=["main",o.length&&"has-results"].filter(h=>h))},[o,r,i,s,l,p,u]}let Z1=class extends Je{constructor(e){super(),Ze(this,e,V1,K1,Ye,{title:6})}get title(){return this.$$.ctx[6]}};function aa(t,e,n){const i=t.slice();return i[13]=e[n],i[15]=n,i}function J1(t){let e,n,i,o,r=t[6]("Clear")+"",s,l;return e=new $e({props:{name:"search"}}),n=new $e({props:{name:"times"}}),{c(){q(e.$$.fragment),q(n.$$.fragment),i=S(),o=m("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,f){z(e,a,f),z(n,a,f),w(a,i,f),w(a,o,f),c(o,s),l=!0},p(a,f){(!l||f&64)&&r!==(r=a[6]("Clear")+"")&&T(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),l=!1},d(a){H(e,a),H(n,a),a&&$(i),a&&$(o)}}}function Q1(t){let e,n=t[6](t[8].name)+"",i,o,r,s;return r=new We({props:{href:"/search",class:"btn-hallow can-toggle "+(t[4]?"has-tooltip is-active":""),$$slots:{default:[J1]},$$scope:{ctx:t}}}),r.$on("click",t[9]),{c(){e=m("h1"),i=O(n),o=S(),q(r.$$.fragment)},m(l,a){w(l,e,a),c(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&64)&&n!==(n=l[6](l[8].name)+"")&&T(i,n);const f={};a&16&&(f.class="btn-hallow can-toggle "+(l[4]?"has-tooltip is-active":"")),a&65600&&(f.$$scope={dirty:a,ctx:l}),r.$set(f)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),H(r,l)}}}function fa(t){let e,n,i,o,r;const s=[x1,X1],l=[];function a(f,u){return u&4&&(e=null),e==null&&(e=!!f[2].param("q")),e?0:1}return n=a(t,-1),i=l[n]=s[n](t),{c(){i.c(),o=ct()},m(f,u){l[n].m(f,u),w(f,o,u),r=!0},p(f,u){let d=n;n=a(f,u),n===d?l[n].p(f,u):(Oe(),y(l[d],1,1,()=>{l[d]=null}),Ne(),i=l[n],i?i.p(f,u):(i=l[n]=s[n](f),i.c()),v(i,1),i.m(o.parentNode,o))},i(f){r||(v(i),r=!0)},o(f){y(i),r=!1},d(f){l[n].d(f),f&&$(o)}}}function X1(t){let e,n,i,o,r=t[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"",s;return n=new $e({props:{name:"info-circle"}}),{c(){e=m("p"),q(n.$$.fragment),i=S(),o=new Tt(!1),o.a=null},m(l,a){w(l,e,a),z(n,e,null),c(e,i),o.m(r,e),s=!0},p(l,a){(!s||a&128)&&r!==(r=l[7]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"")&&o.p(r)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function x1(t){let e,n,i,o=t[6]('No search results for "%1".',t[2].param("q"))+"",r,s;return n=new $e({props:{name:"info-circle"}}),{c(){e=m("p"),q(n.$$.fragment),i=S(),r=O(o)},m(l,a){w(l,e,a),z(n,e,null),c(e,i),c(e,r),s=!0},p(l,a){(!s||a&68)&&o!==(o=l[6]('No search results for "%1".',l[2].param("q"))+"")&&T(r,o)},i(l){s||(v(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&$(e),H(n)}}}function ua(t){let e,n,i,o,r,s=t[13].ts.getHumanDate()+"",l,a;return i=new $e({props:{name:"calendar-alt"}}),{c(){e=m("div"),n=m("span"),q(i.$$.fragment),o=S(),r=m("i"),l=O(s),k(e,"class","message__status-line for-day-changed")},m(f,u){w(f,e,u),c(e,n),z(i,n,null),c(n,o),c(n,r),c(r,l),a=!0},p(f,u){(!a||u&2)&&s!==(s=f[13].ts.getHumanDate()+"")&&T(l,s)},i(f){a||(v(i.$$.fragment,f),a=!0)},o(f){y(i.$$.fragment,f),a=!1},d(f){f&&$(e),H(i)}}}function ca(t){let e,n,i,o,r,s,l=t[13].ts.format("%H:%M")+"",a,f,u,d=At(t[13].ts.toLocaleString())+"",p,h,_,g=t[6]("%1 in %2",t[13].from,t[13].conversation_id)+"",E,b,C,M,D=t[13].html+"",L,A,R,U,B,W=(!t[15]||t[13].dayChanged)&&ua(t);return i=new $e({props:{name:"pick:"+t[13].from,color:t[13].color}}),{c(){W&&W.c(),e=S(),n=m("div"),q(i.$$.fragment),o=S(),r=m("div"),s=m("span"),a=O(l),f=S(),u=m("span"),p=O(d),h=S(),_=m("a"),E=O(g),C=S(),M=m("div"),L=S(),k(u,"class","tooltip"),k(r,"class","message__ts has-tooltip"),k(_,"href",b=vo(t[13])),k(_,"class","message__from"),Pt(_,"color",t[13].color),k(M,"class","message__text"),k(n,"class",A=t[13].className)},m(G,I){W&&W.m(G,I),w(G,e,I),w(G,n,I),z(i,n,null),c(n,o),c(n,r),c(r,s),c(s,a),c(r,f),c(r,u),c(u,p),c(n,h),c(n,_),c(_,E),c(n,C),c(n,M),M.innerHTML=D,c(n,L),R=!0,U||(B=Te(n,"click",Pf),U=!0)},p(G,I){!G[15]||G[13].dayChanged?W?(W.p(G,I),I&2&&v(W,1)):(W=ua(G),W.c(),v(W,1),W.m(e.parentNode,e)):W&&(Oe(),y(W,1,1,()=>{W=null}),Ne());const K={};I&2&&(K.name="pick:"+G[13].from),I&2&&(K.color=G[13].color),i.$set(K),(!R||I&2)&&l!==(l=G[13].ts.format("%H:%M")+"")&&T(a,l),(!R||I&2)&&d!==(d=At(G[13].ts.toLocaleString())+"")&&T(p,d),(!R||I&66)&&g!==(g=G[6]("%1 in %2",G[13].from,G[13].conversation_id)+"")&&T(E,g),(!R||I&2&&b!==(b=vo(G[13])))&&k(_,"href",b),(!R||I&2)&&Pt(_,"color",G[13].color),(!R||I&2)&&D!==(D=G[13].html+"")&&(M.innerHTML=D),(!R||I&2&&A!==(A=G[13].className))&&k(n,"class",A)},i(G){R||(v(W),v(i.$$.fragment,G),R=!0)},o(G){y(W),y(i.$$.fragment,G),R=!1},d(G){W&&W.d(G),G&&$(e),G&&$(n),H(i),U=!1,B()}}}function pa(t){let e,n,i,o,r,s=t[6]("Loading...")+"",l,a;return i=new $e({props:{name:"spinner",animation:"spin"}}),{c(){e=m("div"),n=m("span"),q(i.$$.fragment),o=S(),r=m("i"),l=O(s),k(e,"class","message__status-line for-loading")},m(f,u){w(f,e,u),c(e,n),z(i,n,null),c(n,o),c(n,r),c(r,l),a=!0},p(f,u){(!a||u&64)&&s!==(s=f[6]("Loading...")+"")&&T(l,s)},i(f){a||(v(i.$$.fragment,f),a=!0)},o(f){y(i.$$.fragment,f),a=!1},d(f){f&&$(e),H(i)}}}function eb(t){let e=t[1].length===0&&!t[8].is("loading"),n,i,o=t[3].is("loading"),r,s,l=e&&fa(t),a=t[1].render(),f=[];for(let p=0;p<a.length;p+=1)f[p]=ca(aa(t,a,p));const u=p=>y(f[p],1,1,()=>{f[p]=null});let d=o&&pa(t);return{c(){l&&l.c(),n=S();for(let p=0;p<f.length;p+=1)f[p].c();i=S(),d&&d.c(),r=ct()},m(p,h){l&&l.m(p,h),w(p,n,h);for(let _=0;_<f.length;_+=1)f[_].m(p,h);w(p,i,h),d&&d.m(p,h),w(p,r,h),s=!0},p(p,h){if(h&2&&(e=p[1].length===0&&!p[8].is("loading")),e?l?(l.p(p,h),h&2&&v(l,1)):(l=fa(p),l.c(),v(l,1),l.m(n.parentNode,n)):l&&(Oe(),y(l,1,1,()=>{l=null}),Ne()),h&66){a=p[1].render();let _;for(_=0;_<a.length;_+=1){const g=aa(p,a,_);f[_]?(f[_].p(g,h),v(f[_],1)):(f[_]=ca(g),f[_].c(),v(f[_],1),f[_].m(i.parentNode,i))}for(Oe(),_=a.length;_<f.length;_+=1)u(_);Ne()}h&8&&(o=p[3].is("loading")),o?d?(d.p(p,h),h&8&&v(d,1)):(d=pa(p),d.c(),v(d,1),d.m(r.parentNode,r)):d&&(Oe(),y(d,1,1,()=>{d=null}),Ne())},i(p){if(!s){v(l);for(let h=0;h<a.length;h+=1)v(f[h]);v(d),s=!0}},o(p){y(l),f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)y(f[h]);y(d),s=!1},d(p){l&&l.d(p),p&&$(n),wt(f,p),p&&$(i),d&&d.d(p),p&&$(r)}}}function tb(t){let e,n;return e=new Mf({props:{conversation:t[8]}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p:Re,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function nb(t){let e,n,i,o,r=t[8].is("search"),s,l;e=new Ut({props:{$$slots:{default:[Q1]},$$scope:{ctx:t}}}),i=new Gr({props:{class:t[5].join(" "),$$slots:{default:[eb]},$$scope:{ctx:t}}}),i.$on("rendered",ib);let a=r&&tb(t);return{c(){q(e.$$.fragment),n=S(),q(i.$$.fragment),o=S(),a&&a.c(),s=ct()},m(f,u){z(e,f,u),w(f,n,u),z(i,f,u),w(f,o,u),a&&a.m(f,u),w(f,s,u),l=!0},p(f,[u]){const d={};u&65616&&(d.$$scope={dirty:u,ctx:f}),e.$set(d);const p={};u&32&&(p.class=f[5].join(" ")),u&65742&&(p.$$scope={dirty:u,ctx:f}),i.$set(p),r&&a.p(f,u)},i(f){l||(v(e.$$.fragment,f),v(i.$$.fragment,f),v(a),l=!0)},o(f){y(e.$$.fragment,f),y(i.$$.fragment,f),y(a),l=!1},d(f){H(e,f),f&&$(n),H(i,f),f&&$(o),a&&a.d(f),f&&$(s)}}}const ib=t=>t.detail.scrollTo(-1);function ob(t,e,n){let i,o,r,s,l=Re,a=()=>(l(),l=dt(i,C=>n(1,s=C)),i),f,u,d,p;Ce(t,De,C=>n(2,f=C)),Ce(t,ot,C=>n(6,d=C)),Ce(t,Bt,C=>n(7,p=C)),t.$$.on_destroy.push(()=>l());const h="Search",_=ht("user"),g=_.search;Ce(t,g,C=>n(3,u=C)),Ft(()=>{_.search.on("send",b),De.param("q")&&b({message:De.param("q")})});function E(C){if(r)return s.clear();C.preventDefault(),document.querySelector(".is-primary-input").focus()}function b(C){const M=C.message;return g.update({userInput:M}),De.go("/search?q="+encodeURIComponent(M),{replace:!0}),M?g.load({match:M}):i.clear()}return t.$$.update=()=>{t.$$.dirty&8&&a(n(0,i=u.messages)),t.$$.dirty&9&&n(5,o=["main",i.length&&"has-results",u.is("search")&&"is-above-chat-input"].filter(C=>C)),t.$$.dirty&6&&n(4,r=f.param("q")||s.length)},[i,s,f,u,r,o,d,p,g,E,h]}let rb=class extends Je{constructor(e){super(),Ze(this,e,ob,nb,Ye,{title:10})}get title(){return this.$$.ctx[10]}};function sb(t){let e,n=t[2]("Account")+"",i;return{c(){e=m("h1"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Account")+"")&&T(i,n)},d(o){o&&$(e)}}}function lb(t){let e,n=t[2]("Email")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Email")+"")&&T(i,n)},d(o){o&&$(e)}}}function ab(t){let e,n=t[2]("Notification keywords")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Notification keywords")+"")&&T(i,n)},d(o){o&&$(e)}}}function fb(t){let e,n=t[2]("Enable notifications")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Enable notifications")+"")&&T(i,n)},d(o){o&&$(e)}}}function ub(t){let e,n=t[2]("Notification sound volume")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Notification sound volume")+"")&&T(i,n)},d(o){o&&$(e)}}}function cb(t){let e,n=t[2]("Test")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Test")+"")&&T(i,n)},d(o){o&&$(e)}}}function pb(t){let e,n=t[2]("Ignore join/part messages")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Ignore join/part messages")+"")&&T(i,n)},d(o){o&&$(e)}}}function db(t){let e,n=t[2]("Expand URL to media")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Expand URL to media")+"")&&T(i,n)},d(o){o&&$(e)}}}function hb(t){let e,n=t[2]("Enable compact message display")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Enable compact message display")+"")&&T(i,n)},d(o){o&&$(e)}}}function _b(t){let e,n=t[2]("Theme")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Theme")+"")&&T(i,n)},d(o){o&&$(e)}}}function mb(t){let e,n=t[2]("Color scheme")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Color scheme")+"")&&T(i,n)},d(o){o&&$(e)}}}function gb(t){let e,n=t[2]("Language")+"",i,o,r,s;return r=new $e({props:{name:"globe"}}),{c(){e=m("span"),i=O(n),o=S(),q(r.$$.fragment),k(e,"slot","label")},m(l,a){w(l,e,a),c(e,i),c(e,o),z(r,e,null),s=!0},p(l,a){(!s||a&4)&&n!==(n=l[2]("Language")+"")&&T(i,n)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&$(e),H(r)}}}function bb(t){let e,n=t[2]("Password")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Password")+"")&&T(i,n)},d(o){o&&$(e)}}}function vb(t){let e,n=t[2]("Repeat password")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Repeat password")+"")&&T(i,n)},d(o){o&&$(e)}}}function $b(t){let e,n=t[2]("Save settings")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("Save settings")+"")&&T(i,n)},d(o){o&&$(e)}}}function wb(t){let e,n,i,o,r=t[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",t[2]("Convos"))+"",s,l,a=t[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",t[2]("Convos"))+"",f,u,d,p,h,_,g=t[3]("Test it by clicking on %1.","irc://localhost:6667")+"",E,b,C,M,D,L=t[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"",A,R,U;function B(K){t[25](K)}let W={name:"handle_protocol_irc",$$slots:{label:[kb]},$$scope:{ctx:t}};t[0].handle_protocol_irc!==void 0&&(W.value=t[0].handle_protocol_irc),d=new nt({props:W}),be.push(()=>ye(d,"value",B,t[0].handle_protocol_irc));function G(K){t[26](K)}let I={name:"handle_protocol_ircs",$$slots:{label:[yb]},$$scope:{ctx:t}};return t[0].handle_protocol_ircs!==void 0&&(I.value=t[0].handle_protocol_ircs),b=new nt({props:I}),be.push(()=>ye(b,"value",G,t[0].handle_protocol_ircs)),{c(){e=m("form"),n=m("h2"),n.textContent="Protocol handlers",i=S(),o=m("p"),s=O(r),l=S(),f=O(a),u=S(),q(d.$$.fragment),h=S(),_=m("p"),E=S(),q(b.$$.fragment),M=S(),D=m("p"),k(_,"class","help"),k(D,"class","help")},m(K,X){w(K,e,X),c(e,n),c(e,i),c(e,o),c(o,s),c(o,l),c(o,f),c(e,u),z(d,e,null),c(e,h),c(e,_),_.innerHTML=g,c(e,E),z(b,e,null),c(e,M),c(e,D),D.innerHTML=L,A=!0,R||(U=Te(e,"submit",st(t[11])),R=!0)},p(K,X){(!A||X&4)&&r!==(r=K[2]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",K[2]("Convos"))+"")&&T(s,r),(!A||X&4)&&a!==(a=K[2]("If you do not see any popup, then it probably means %1 already handles the protocol.",K[2]("Convos"))+"")&&T(f,a);const J={};X&536870916&&(J.$$scope={dirty:X,ctx:K}),!p&&X&1&&(p=!0,J.value=K[0].handle_protocol_irc,ke(()=>p=!1)),d.$set(J),(!A||X&8)&&g!==(g=K[3]("Test it by clicking on %1.","irc://localhost:6667")+"")&&(_.innerHTML=g);const N={};X&536870916&&(N.$$scope={dirty:X,ctx:K}),!C&&X&1&&(C=!0,N.value=K[0].handle_protocol_ircs,ke(()=>C=!1)),b.$set(N),(!A||X&8)&&L!==(L=K[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"")&&(D.innerHTML=L)},i(K){A||(v(d.$$.fragment,K),v(b.$$.fragment,K),A=!0)},o(K){y(d.$$.fragment,K),y(b.$$.fragment,K),A=!1},d(K){K&&$(e),H(d),H(b),R=!1,U()}}}function kb(t){let e,n=t[2]("irc://")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("irc://")+"")&&T(i,n)},d(o){o&&$(e)}}}function yb(t){let e,n=t[2]("ircs://")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&4&&n!==(n=o[2]("ircs://")+"")&&T(i,n)},d(o){o&&$(e)}}}function Sb(t){let e,n,i,o,r,s,l,a,f,u,d,p,h,_,g=t[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"",E,b,C,M,D,L,A,R,U,B,W,G,I,K,X,J,N,P,Z,j,V,Y,F,oe,re,ne,de,Se,se,he,Ue,Le,_e,pe=t[2]("Leave the password fields empty to keep the current password.")+"",Pe,x,me,we,Fe,je,fe,ie,ve,Ee;e=new Ut({props:{$$slots:{default:[sb]},$$scope:{ctx:t}}});function ce(le){t[12](le)}let ee={type:"email",name:"email",readonly:!0,$$slots:{label:[lb]},$$scope:{ctx:t}};t[0].email!==void 0&&(ee.value=t[0].email),r=new Ve({props:ee}),be.push(()=>ye(r,"value",ce,t[0].email));function ae(le){t[13](le)}let te={name:"highlightKeywords",placeholder:t[2]("whatever, keywords"),$$slots:{label:[ab]},$$scope:{ctx:t}};t[0].highlightKeywords!==void 0&&(te.value=t[0].highlightKeywords),a=new Ve({props:te}),be.push(()=>ye(a,"value",ae,t[0].highlightKeywords));function Q(le){t[14](le)}let ue={name:"wantNotifications",$$slots:{label:[fb]},$$scope:{ctx:t}};t[0].wantNotifications!==void 0&&(ue.value=t[0].wantNotifications),d=new nt({props:ue}),be.push(()=>ye(d,"value",Q,t[0].wantNotifications));function ge(le){t[15](le)}let Ae={name:"volume",options:gt.volumeOptions,$$slots:{label:[ub]},$$scope:{ctx:t}};t[0].volume!==void 0&&(Ae.value=t[0].volume),C=new xn({props:Ae}),be.push(()=>ye(C,"value",ge,t[0].volume)),A=new ft({props:{icon:"play",disabled:!parseInt(t[0].volume,10),type:"button",$$slots:{default:[cb]},$$scope:{ctx:t}}}),A.$on("click",t[16]);function Xe(le){t[17](le)}let ze={name:"ignoreStatuses",$$slots:{label:[pb]},$$scope:{ctx:t}};t[0].ignoreStatuses!==void 0&&(ze.value=t[0].ignoreStatuses),U=new nt({props:ze}),be.push(()=>ye(U,"value",Xe,t[0].ignoreStatuses));function rt(le){t[18](le)}let yt={name:"expandUrlToMedia",$$slots:{label:[db]},$$scope:{ctx:t}};t[0].expandUrlToMedia!==void 0&&(yt.value=t[0].expandUrlToMedia),G=new nt({props:yt}),be.push(()=>ye(G,"value",rt,t[0].expandUrlToMedia));function Lt(le){t[19](le)}let lt={name:"compactDisplay",$$slots:{label:[hb]},$$scope:{ctx:t}};t[0].compactDisplay!==void 0&&(lt.value=t[0].compactDisplay),X=new nt({props:lt}),be.push(()=>ye(X,"value",Lt,t[0].compactDisplay));function Zt(le){t[20](le)}let jt={name:"activeTheme",options:t[6].themeOptions,$$slots:{label:[_b]},$$scope:{ctx:t}};t[0].activeTheme!==void 0&&(jt.value=t[0].activeTheme),P=new xn({props:jt}),be.push(()=>ye(P,"value",Zt,t[0].activeTheme));function Dn(le){t[21](le)}let Un={name:"colorScheme",readonly:t[1],options:t[6].colorSchemeOptions,$$slots:{label:[mb]},$$scope:{ctx:t}};t[0].colorScheme!==void 0&&(Un.value=t[0].colorScheme),V=new xn({props:Un}),be.push(()=>ye(V,"value",Dn,t[0].colorScheme));function hi(le){t[22](le)}let gn={name:"lang",options:t[4].languageOptions,$$slots:{label:[gb]},$$scope:{ctx:t}};t[0].lang!==void 0&&(gn.value=t[0].lang),oe=new xn({props:gn}),be.push(()=>ye(oe,"value",hi,t[0].lang));function _i(le){t[23](le)}let Bn={type:"password",name:"password",autocomplete:"new-password",$$slots:{label:[bb]},$$scope:{ctx:t}};t[0].password!==void 0&&(Bn.value=t[0].password),de=new Ve({props:Bn}),be.push(()=>ye(de,"value",_i,t[0].password));function Fn(le){t[24](le)}let jn={type:"password",name:"password_again",autocomplete:"new-password",$$slots:{label:[vb]},$$scope:{ctx:t}};t[0].password_again!==void 0&&(jn.value=t[0].password_again),he=new Ve({props:jn}),be.push(()=>ye(he,"value",Fn,t[0].password_again)),we=new ft({props:{icon:"save",op:t[7],$$slots:{default:[$b]},$$scope:{ctx:t}}}),je=new Mt({props:{op:t[7]}});let Ot=t[5]&&wb(t);return{c(){q(e.$$.fragment),n=S(),i=m("main"),o=m("form"),q(r.$$.fragment),l=S(),q(a.$$.fragment),u=S(),q(d.$$.fragment),h=S(),_=m("p"),E=S(),b=m("div"),q(C.$$.fragment),D=S(),L=m("div"),q(A.$$.fragment),R=S(),q(U.$$.fragment),W=S(),q(G.$$.fragment),K=S(),q(X.$$.fragment),N=S(),q(P.$$.fragment),j=S(),q(V.$$.fragment),F=S(),q(oe.$$.fragment),ne=S(),q(de.$$.fragment),se=S(),q(he.$$.fragment),Le=S(),_e=m("p"),Pe=O(pe),x=S(),me=m("div"),q(we.$$.fragment),Fe=S(),q(je.$$.fragment),fe=S(),Ot&&Ot.c(),k(_,"class","help"),k(L,"class","flex-basis-30"),k(b,"class","inputs-side-by-side"),k(me,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(le,Ie){z(e,le,Ie),w(le,n,Ie),w(le,i,Ie),c(i,o),z(r,o,null),c(o,l),z(a,o,null),c(o,u),z(d,o,null),c(o,h),c(o,_),_.innerHTML=g,c(o,E),c(o,b),z(C,b,null),c(b,D),c(b,L),z(A,L,null),c(o,R),z(U,o,null),c(o,W),z(G,o,null),c(o,K),z(X,o,null),c(o,N),z(P,o,null),c(o,j),z(V,o,null),c(o,F),z(oe,o,null),c(o,ne),z(de,o,null),c(o,se),z(he,o,null),c(o,Le),c(o,_e),c(_e,Pe),c(o,x),c(o,me),z(we,me,null),c(o,Fe),z(je,o,null),c(i,fe),Ot&&Ot.m(i,null),ie=!0,ve||(Ee=Te(o,"submit",st(t[8])),ve=!0)},p(le,[Ie]){const bn={};Ie&536870916&&(bn.$$scope={dirty:Ie,ctx:le}),e.$set(bn);const xt={};Ie&536870916&&(xt.$$scope={dirty:Ie,ctx:le}),!s&&Ie&1&&(s=!0,xt.value=le[0].email,ke(()=>s=!1)),r.$set(xt);const en={};Ie&4&&(en.placeholder=le[2]("whatever, keywords")),Ie&536870916&&(en.$$scope={dirty:Ie,ctx:le}),!f&&Ie&1&&(f=!0,en.value=le[0].highlightKeywords,ke(()=>f=!1)),a.$set(en);const tn={};Ie&536870916&&(tn.$$scope={dirty:Ie,ctx:le}),!p&&Ie&1&&(p=!0,tn.value=le[0].wantNotifications,ke(()=>p=!1)),d.$set(tn),(!ie||Ie&8)&&g!==(g=le[3]('Leave this unchecked, and hit "Save" to disable notifications.')+"")&&(_.innerHTML=g);const vn={};Ie&536870916&&(vn.$$scope={dirty:Ie,ctx:le}),!M&&Ie&1&&(M=!0,vn.value=le[0].volume,ke(()=>M=!1)),C.$set(vn);const nn={};Ie&1&&(nn.disabled=!parseInt(le[0].volume,10)),Ie&536870916&&(nn.$$scope={dirty:Ie,ctx:le}),A.$set(nn);const on={};Ie&536870916&&(on.$$scope={dirty:Ie,ctx:le}),!B&&Ie&1&&(B=!0,on.value=le[0].ignoreStatuses,ke(()=>B=!1)),U.$set(on);const $n={};Ie&536870916&&($n.$$scope={dirty:Ie,ctx:le}),!I&&Ie&1&&(I=!0,$n.value=le[0].expandUrlToMedia,ke(()=>I=!1)),G.$set($n);const wn={};Ie&536870916&&(wn.$$scope={dirty:Ie,ctx:le}),!J&&Ie&1&&(J=!0,wn.value=le[0].compactDisplay,ke(()=>J=!1)),X.$set(wn);const rn={};Ie&536870916&&(rn.$$scope={dirty:Ie,ctx:le}),!Z&&Ie&1&&(Z=!0,rn.value=le[0].activeTheme,ke(()=>Z=!1)),P.$set(rn);const sn={};Ie&2&&(sn.readonly=le[1]),Ie&536870916&&(sn.$$scope={dirty:Ie,ctx:le}),!Y&&Ie&1&&(Y=!0,sn.value=le[0].colorScheme,ke(()=>Y=!1)),V.$set(sn);const kn={};Ie&16&&(kn.options=le[4].languageOptions),Ie&536870916&&(kn.$$scope={dirty:Ie,ctx:le}),!re&&Ie&1&&(re=!0,kn.value=le[0].lang,ke(()=>re=!1)),oe.$set(kn);const ln={};Ie&536870916&&(ln.$$scope={dirty:Ie,ctx:le}),!Se&&Ie&1&&(Se=!0,ln.value=le[0].password,ke(()=>Se=!1)),de.$set(ln);const an={};Ie&536870916&&(an.$$scope={dirty:Ie,ctx:le}),!Ue&&Ie&1&&(Ue=!0,an.value=le[0].password_again,ke(()=>Ue=!1)),he.$set(an),(!ie||Ie&4)&&pe!==(pe=le[2]("Leave the password fields empty to keep the current password.")+"")&&T(Pe,pe);const zn={};Ie&536870916&&(zn.$$scope={dirty:Ie,ctx:le}),we.$set(zn),le[5]&&Ot.p(le,Ie)},i(le){ie||(v(e.$$.fragment,le),v(r.$$.fragment,le),v(a.$$.fragment,le),v(d.$$.fragment,le),v(C.$$.fragment,le),v(A.$$.fragment,le),v(U.$$.fragment,le),v(G.$$.fragment,le),v(X.$$.fragment,le),v(P.$$.fragment,le),v(V.$$.fragment,le),v(oe.$$.fragment,le),v(de.$$.fragment,le),v(he.$$.fragment,le),v(we.$$.fragment,le),v(je.$$.fragment,le),v(Ot),ie=!0)},o(le){y(e.$$.fragment,le),y(r.$$.fragment,le),y(a.$$.fragment,le),y(d.$$.fragment,le),y(C.$$.fragment,le),y(A.$$.fragment,le),y(U.$$.fragment,le),y(G.$$.fragment,le),y(X.$$.fragment,le),y(P.$$.fragment,le),y(V.$$.fragment,le),y(oe.$$.fragment,le),y(de.$$.fragment,le),y(he.$$.fragment,le),y(we.$$.fragment,le),y(je.$$.fragment,le),y(Ot),ie=!1},d(le){H(e,le),le&&$(n),le&&$(i),H(r),H(a),H(d),H(C),H(A),H(U),H(G),H(X),H(P),H(V),H(oe),H(de),H(he),H(we),H(je),Ot&&Ot.d(),ve=!1,Ee()}}}function Eb(t,e,n){let i,o,r,s,l;Ce(t,ot,N=>n(2,o=N)),Ce(t,Bt,N=>n(3,s=N)),Ce(t,xe,N=>n(4,l=N));const a="Account",f="registerProtocolHandler"in navigator,u=ht("themeManager");Ce(t,u,N=>n(10,r=N));const d=ht("user"),p=et.op("updateUser");let h={};Ft(()=>{n(0,h={activeTheme:u.activeTheme,colorScheme:u.colorScheme,compactDisplay:u.compactDisplay,email:d.email,expandUrlToMedia:d.expandUrlToMedia,highlightKeywords:d.highlightKeywords.join(", "),ignoreStatuses:d.ignoreStatuses,lang:xe.lang,password:"",password_again:"",volume:gt.volume,wantNotifications:gt.wantNotifications})}),Tr(gt.on("update",(N,P)=>{!P.wantNotifications&&!P.desktopAccess||N.wantNotifications&&N.show(o("You have enabled notifications."))}));function _(N){navigator.registerProtocolHandler(N,De.urlFor("/register?uri=%s"),o("Convos %1 handler",N))}function g(){const N=[h.password,h.password_again];if(N.join("").length&&N[0]!==N[1])return p.error("Passwords does not match.");h.wantNotifications||n(0,h.wantNotifications=!1,h),h.wantNotifications&&gt.requestDesktopAccess(),gt.update(h),i&&n(0,h.colorScheme="auto",h),u.update(h);const P=Lr(h.highlightKeywords),Z={email:d.email,highlight_keywords:P};N[0]&&(Z.password=N[0]),d.update(h).update({highlightKeywords:P}),p.perform(Z)}function E(N){In.call(this,t,N)}function b(N){t.$$.not_equal(h.email,N)&&(h.email=N,n(0,h))}function C(N){t.$$.not_equal(h.highlightKeywords,N)&&(h.highlightKeywords=N,n(0,h))}function M(N){t.$$.not_equal(h.wantNotifications,N)&&(h.wantNotifications=N,n(0,h))}function D(N){t.$$.not_equal(h.volume,N)&&(h.volume=N,n(0,h))}const L=()=>gt.play({volume:h.volume});function A(N){t.$$.not_equal(h.ignoreStatuses,N)&&(h.ignoreStatuses=N,n(0,h))}function R(N){t.$$.not_equal(h.expandUrlToMedia,N)&&(h.expandUrlToMedia=N,n(0,h))}function U(N){t.$$.not_equal(h.compactDisplay,N)&&(h.compactDisplay=N,n(0,h))}function B(N){t.$$.not_equal(h.activeTheme,N)&&(h.activeTheme=N,n(0,h))}function W(N){t.$$.not_equal(h.colorScheme,N)&&(h.colorScheme=N,n(0,h))}function G(N){t.$$.not_equal(h.lang,N)&&(h.lang=N,n(0,h))}function I(N){t.$$.not_equal(h.password,N)&&(h.password=N,n(0,h))}function K(N){t.$$.not_equal(h.password_again,N)&&(h.password_again=N,n(0,h))}function X(N){t.$$.not_equal(h.handle_protocol_irc,N)&&(h.handle_protocol_irc=N,n(0,h))}function J(N){t.$$.not_equal(h.handle_protocol_ircs,N)&&(h.handle_protocol_ircs=N,n(0,h))}return t.$$.update=()=>{t.$$.dirty&1025&&n(1,i=!r.hasColorScheme(h.activeTheme)),t.$$.dirty&1&&xe.load(h.lang),t.$$.dirty&1&&h.handle_protocol_irc&&_("irc"),t.$$.dirty&1&&h.handle_protocol_ircs&&_("ircs")},[h,i,o,s,l,f,u,p,g,a,r,E,b,C,M,D,L,A,R,U,B,W,G,I,K,X,J]}class Cb extends Je{constructor(e){super(),Ze(this,e,Eb,Sb,Ye,{title:9})}get title(){return this.$$.ctx[9]}}function Ab(t){let e,n=t[5]("Global settings")+"",i;return{c(){e=m("h1"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("Global settings")+"")&&T(i,n)},d(o){o&&$(e)}}}function Ob(t){let e,n=t[5]("Organization name")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("Organization name")+"")&&T(i,n)},d(o){o&&$(e)}}}function Nb(t){let e,n=t[5]("Can be changed if you want to add a touch of your organization.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("Can be changed if you want to add a touch of your organization.")+"")&&T(i,n)},d(o){o&&$(e)}}}function Tb(t){let e,n=t[5]("Organization URL")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("Organization URL")+"")&&T(i,n)},d(o){o&&$(e)}}}function Mb(t){let e,n=t[5]('Used together with "Organization name" to add a link to your organization on the login screen.')+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]('Used together with "Organization name" to add a link to your organization on the login screen.')+"")&&T(i,n)},d(o){o&&$(e)}}}function Rb(t){let e,n=t[5]("Admin email")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("Admin email")+"")&&T(i,n)},d(o){o&&$(e)}}}function Lb(t){let e,n=t[5]("This email can be used by users to get in touch with the Convos admin.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("This email can be used by users to get in touch with the Convos admin.")+"")&&T(i,n)},d(o){o&&$(e)}}}function Ib(t){let e,n=t[5]("Video service")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("Video service")+"")&&T(i,n)},d(o){o&&$(e)}}}function Pb(t){let e,n=t[6]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"";return{c(){e=m("p"),k(e,"class","help"),k(e,"slot","help")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&64&&n!==(n=i[6]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"")&&(e.innerHTML=n)},d(i){i&&$(e)}}}function Db(t){let e,n=t[5]("Registration is open to public")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("Registration is open to public")+"")&&T(i,n)},d(o){o&&$(e)}}}function Ub(t){let e,n=t[5]("Save settings")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("Save settings")+"")&&T(i,n)},d(o){o&&$(e)}}}function Bb(t){let e,n=t[6]("You currently have Convos v%1 installed.",Ge("version"))+"",i;return{c(){e=m("p"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&64&&n!==(n=o[6]("You currently have Convos v%1 installed.",Ge("version"))+"")&&T(i,n)},d(o){o&&$(e)}}}function Fb(t){let e,n=t[6](t[4]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",t[0])+"",i;return{c(){e=m("p"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&81&&n!==(n=o[6](o[4]?"You have Convos v%1, which is the latest version.":"Convos v%1 is available.",o[0])+"")&&T(i,n)},d(o){o&&$(e)}}}function jb(t){let e,n=t[5](t[1].error())+"",i;return{c(){e=m("div"),i=O(n),k(e,"class","error")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&34&&n!==(n=o[5](o[1].error())+"")&&T(i,n)},d(o){o&&$(e)}}}function zb(t){let e,n=t[5]("Check for updates")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&32&&n!==(n=o[5]("Check for updates")+"")&&T(i,n)},d(o){o&&$(e)}}}function da(t){let e,n,i=t[5]("Disk usage")+"",o,r,s,l,a=t[2].blocks_pct+"",f,u,d,p,h=t[5]("Disk usage")+"",_,g,E=t[2].blocks_used+"",b,C,M=t[2].blocks_total+"",D,L,A,R,U=t[2].inodes_pct+"",B,W,G,I,K=t[5]("Inode usage")+"",X,J,N=t[2].inodes_used+"",P,Z,j=t[2].inodes_total+"",V;return{c(){e=m("div"),n=m("h2"),o=O(i),r=S(),s=m("div"),l=m("div"),f=O(a),u=O("%"),d=S(),p=m("p"),_=O(h),g=O(": "),b=O(E),C=O(" / "),D=O(M),L=S(),A=m("div"),R=m("div"),B=O(U),W=O("%"),G=S(),I=m("p"),X=O(K),J=O(": "),P=O(N),Z=O(" / "),V=O(j),k(l,"class","progress__bar"),Pt(l,"width",t[2].blocks_pct+"%"),k(s,"class","progress"),k(p,"class","help"),k(R,"class","progress__bar"),Pt(R,"width",t[2].inodes_pct+"%"),k(A,"class","progress"),k(I,"class","help"),k(e,"id","disk-usage")},m(Y,F){w(Y,e,F),c(e,n),c(n,o),c(e,r),c(e,s),c(s,l),c(l,f),c(l,u),c(e,d),c(e,p),c(p,_),c(p,g),c(p,b),c(p,C),c(p,D),c(e,L),c(e,A),c(A,R),c(R,B),c(R,W),c(e,G),c(e,I),c(I,X),c(I,J),c(I,P),c(I,Z),c(I,V)},p(Y,F){F&32&&i!==(i=Y[5]("Disk usage")+"")&&T(o,i),F&4&&a!==(a=Y[2].blocks_pct+"")&&T(f,a),F&4&&Pt(l,"width",Y[2].blocks_pct+"%"),F&32&&h!==(h=Y[5]("Disk usage")+"")&&T(_,h),F&4&&E!==(E=Y[2].blocks_used+"")&&T(b,E),F&4&&M!==(M=Y[2].blocks_total+"")&&T(D,M),F&4&&U!==(U=Y[2].inodes_pct+"")&&T(B,U),F&4&&Pt(R,"width",Y[2].inodes_pct+"%"),F&32&&K!==(K=Y[5]("Inode usage")+"")&&T(X,K),F&4&&N!==(N=Y[2].inodes_used+"")&&T(P,N),F&4&&j!==(j=Y[2].inodes_total+"")&&T(V,j)},d(Y){Y&&$(e)}}}function Hb(t){let e,n,i,o,r,s=t[5]("Convos settings")+"",l,a,f,u=t[6]("These settings control what users experience when they visit [%1](%1).",Ge("base_url"))+"",d,p,h,_,g,E,b,C,M,D,L,A,R,U,B,W,G,I=t[5]("Tick this box if you want users to be able to register without an invite URL.")+"",K,X,J,N,P,Z,j,V,Y=t[5]("Check for updates")+"",F,oe,re,ne,de,Se,se,he,Ue,Le,_e;e=new Ut({props:{$$slots:{default:[Ab]},$$scope:{ctx:t}}});function pe(te){t[11](te)}let Pe={name:"organization_name",$$slots:{help:[Nb],label:[Ob]},$$scope:{ctx:t}};t[3].organization_name!==void 0&&(Pe.value=t[3].organization_name),p=new Ve({props:Pe}),be.push(()=>ye(p,"value",pe,t[3].organization_name));function x(te){t[12](te)}let me={name:"organization_url",placeholder:t[5]("https://convos.chat"),$$slots:{help:[Mb],label:[Tb]},$$scope:{ctx:t}};t[3].organization_url!==void 0&&(me.value=t[3].organization_url),g=new Ve({props:me}),be.push(()=>ye(g,"value",x,t[3].organization_url));function we(te){t[13](te)}let Fe={name:"contact",placeholder:t[5]("Ex: jhthorsen@cpan.org"),$$slots:{help:[Lb],label:[Rb]},$$scope:{ctx:t}};t[3].contact!==void 0&&(Fe.value=t[3].contact),C=new Ve({props:Fe}),be.push(()=>ye(C,"value",we,t[3].contact));function je(te){t[14](te)}let fe={name:"video_service",placeholder:t[5]("Ex: https://meet.jit.si/"),$$slots:{help:[Pb],label:[Ib]},$$scope:{ctx:t}};t[3].video_service!==void 0&&(fe.value=t[3].video_service),L=new Ve({props:fe}),be.push(()=>ye(L,"value",je,t[3].video_service));function ie(te){t[15](te)}let ve={name:"open_to_public",$$slots:{label:[Db]},$$scope:{ctx:t}};t[3].open_to_public!==void 0&&(ve.value=t[3].open_to_public),U=new nt({props:ve}),be.push(()=>ye(U,"value",ie,t[3].open_to_public)),N=new ft({props:{icon:"save",op:t[8],$$slots:{default:[Ub]},$$scope:{ctx:t}}}),Z=new Mt({props:{op:t[8]}});function Ee(te,Q){return Q&2&&(ne=null),Q&2&&(de=null),ne==null&&(ne=!!te[1].is("error")),ne?jb:(de==null&&(de=!!te[1].is("success")),de?Fb:Bb)}let ce=Ee(t,-1),ee=ce(t);se=new ft({props:{icon:"sync-alt",op:t[7],$$slots:{default:[zb]},$$scope:{ctx:t}}});let ae=t[2]&&da(t);return{c(){q(e.$$.fragment),n=S(),i=m("main"),o=m("form"),r=m("h2"),l=O(s),a=S(),f=m("p"),d=S(),q(p.$$.fragment),_=S(),q(g.$$.fragment),b=S(),q(C.$$.fragment),D=S(),q(L.$$.fragment),R=S(),q(U.$$.fragment),W=S(),G=m("p"),K=O(I),X=S(),J=m("div"),q(N.$$.fragment),P=S(),q(Z.$$.fragment),j=S(),V=m("h2"),F=O(Y),oe=S(),re=m("form"),ee.c(),Se=S(),q(se.$$.fragment),he=S(),ae&&ae.c(),k(G,"class","help"),k(J,"class","form-actions"),k(o,"id","convos-settings"),k(o,"method","post"),k(re,"id","convos-updates"),k(re,"method","post"),k(i,"class","main")},m(te,Q){z(e,te,Q),w(te,n,Q),w(te,i,Q),c(i,o),c(o,r),c(r,l),c(o,a),c(o,f),f.innerHTML=u,c(o,d),z(p,o,null),c(o,_),z(g,o,null),c(o,b),z(C,o,null),c(o,D),z(L,o,null),c(o,R),z(U,o,null),c(o,W),c(o,G),c(G,K),c(o,X),c(o,J),z(N,J,null),c(o,P),z(Z,o,null),c(i,j),c(i,V),c(V,F),c(i,oe),c(i,re),ee.m(re,null),c(re,Se),z(se,re,null),c(i,he),ae&&ae.m(i,null),Ue=!0,Le||(_e=[Te(o,"submit",st(t[9])),Te(re,"submit",st(t[16]))],Le=!0)},p(te,[Q]){const ue={};Q&524320&&(ue.$$scope={dirty:Q,ctx:te}),e.$set(ue),(!Ue||Q&32)&&s!==(s=te[5]("Convos settings")+"")&&T(l,s),(!Ue||Q&64)&&u!==(u=te[6]("These settings control what users experience when they visit [%1](%1).",Ge("base_url"))+"")&&(f.innerHTML=u);const ge={};Q&524320&&(ge.$$scope={dirty:Q,ctx:te}),!h&&Q&8&&(h=!0,ge.value=te[3].organization_name,ke(()=>h=!1)),p.$set(ge);const Ae={};Q&32&&(Ae.placeholder=te[5]("https://convos.chat")),Q&524320&&(Ae.$$scope={dirty:Q,ctx:te}),!E&&Q&8&&(E=!0,Ae.value=te[3].organization_url,ke(()=>E=!1)),g.$set(Ae);const Xe={};Q&32&&(Xe.placeholder=te[5]("Ex: jhthorsen@cpan.org")),Q&524320&&(Xe.$$scope={dirty:Q,ctx:te}),!M&&Q&8&&(M=!0,Xe.value=te[3].contact,ke(()=>M=!1)),C.$set(Xe);const ze={};Q&32&&(ze.placeholder=te[5]("Ex: https://meet.jit.si/")),Q&524384&&(ze.$$scope={dirty:Q,ctx:te}),!A&&Q&8&&(A=!0,ze.value=te[3].video_service,ke(()=>A=!1)),L.$set(ze);const rt={};Q&524320&&(rt.$$scope={dirty:Q,ctx:te}),!B&&Q&8&&(B=!0,rt.value=te[3].open_to_public,ke(()=>B=!1)),U.$set(rt),(!Ue||Q&32)&&I!==(I=te[5]("Tick this box if you want users to be able to register without an invite URL.")+"")&&T(K,I);const yt={};Q&524320&&(yt.$$scope={dirty:Q,ctx:te}),N.$set(yt),(!Ue||Q&32)&&Y!==(Y=te[5]("Check for updates")+"")&&T(F,Y),ce===(ce=Ee(te,Q))&&ee?ee.p(te,Q):(ee.d(1),ee=ce(te),ee&&(ee.c(),ee.m(re,Se)));const Lt={};Q&524320&&(Lt.$$scope={dirty:Q,ctx:te}),se.$set(Lt),te[2]?ae?ae.p(te,Q):(ae=da(te),ae.c(),ae.m(i,null)):ae&&(ae.d(1),ae=null)},i(te){Ue||(v(e.$$.fragment,te),v(p.$$.fragment,te),v(g.$$.fragment,te),v(C.$$.fragment,te),v(L.$$.fragment,te),v(U.$$.fragment,te),v(N.$$.fragment,te),v(Z.$$.fragment,te),v(se.$$.fragment,te),Ue=!0)},o(te){y(e.$$.fragment,te),y(p.$$.fragment,te),y(g.$$.fragment,te),y(C.$$.fragment,te),y(L.$$.fragment,te),y(U.$$.fragment,te),y(N.$$.fragment,te),y(Z.$$.fragment,te),y(se.$$.fragment,te),Ue=!1},d(te){H(e,te),te&&$(n),te&&$(i),H(p),H(g),H(C),H(L),H(U),H(N),H(Z),ee.d(),H(se),ae&&ae.d(),Le=!1,ut(_e)}}}function qb(t,e,n){let i,o,r,s,l;Ce(t,ot,A=>n(5,s=A)),Ce(t,Bt,A=>n(6,l=A));const a="Global settings",f=et.op("checkForUpdates");Ce(t,f,A=>n(1,r=A));const u=et.op("getSettings"),d=et.op("updateSettings");let p=null,h={};Ft(async()=>{await u.perform();const A=u.res.body;n(2,p=_(A.disk_usage)),delete A.disk_usage,A.contact=A.contact.replace(/mailto:/,""),n(3,h={...h,...A})});function _(A){if(!A)return null;const R=A.block_size||1024;return{blocks_pct:Math.ceil(A.blocks_used/A.blocks_total*100),blocks_total:Qn(R*A.blocks_total,"B"),blocks_used:Qn(R*A.blocks_used,"B"),inodes_pct:Math.ceil(A.inodes_used/A.inodes_total*100),inodes_total:Qn(A.inodes_total),inodes_used:Qn(A.inodes_used)}}function g(){h.contact&&h.contact.indexOf("@")>0&&n(3,h.contact="mailto:"+h.contact,h),Ge("contact",h.contact),Ge("open_to_public",h.open_to_public),Ge("organization_name",h.organization_name),Ge("organization_url",h.organization_url),bo.fromString(h.video_service),d.perform(h),n(3,h.contact=h.contact.replace(/mailto:/,""),h)}function E(A){t.$$.not_equal(h.organization_name,A)&&(h.organization_name=A,n(3,h))}function b(A){t.$$.not_equal(h.organization_url,A)&&(h.organization_url=A,n(3,h))}function C(A){t.$$.not_equal(h.contact,A)&&(h.contact=A,n(3,h))}function M(A){t.$$.not_equal(h.video_service,A)&&(h.video_service=A,n(3,h))}function D(A){t.$$.not_equal(h.open_to_public,A)&&(h.open_to_public=A,n(3,h))}const L=()=>f.perform();return t.$$.update=()=>{t.$$.dirty&2&&n(0,i=r.res.body.available),t.$$.dirty&1&&n(4,o=i===Ge("version"))},[i,r,p,h,o,s,l,f,d,g,a,E,b,C,M,D,L]}class Wb extends Je{constructor(e){super(),Ze(this,e,qb,Hb,Ye,{title:10})}get title(){return this.$$.ctx[10]}}function ha(t,e,n){const i=t.slice();return i[25]=e[n],i}function Gb(t){let e,n,i,o,r=At(t[4]("See all users"))+"",s,l;return e=new $e({props:{name:"list"}}),n=new $e({props:{name:"times"}}),{c(){q(e.$$.fragment),q(n.$$.fragment),i=S(),o=m("span"),s=O(r),k(o,"class","tooltip is-left")},m(a,f){z(e,a,f),z(n,a,f),w(a,i,f),w(a,o,f),c(o,s),l=!0},p(a,f){(!l||f&16)&&r!==(r=At(a[4]("See all users"))+"")&&T(s,r)},i(a){l||(v(e.$$.fragment,a),v(n.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),l=!1},d(a){H(e,a),H(n,a),a&&$(i),a&&$(o)}}}function Kb(t){let e,n=t[4](t[0].uid?"Account":"Users")+"",i,o,r,s;return r=new We({props:{href:"/settings/users",class:"btn-hallow can-toggle has-tooltip "+(t[0].uid?"is-active":""),$$slots:{default:[Gb]},$$scope:{ctx:t}}}),{c(){e=m("h1"),i=O(n),o=S(),q(r.$$.fragment)},m(l,a){w(l,e,a),c(e,i),w(l,o,a),z(r,l,a),s=!0},p(l,a){(!s||a&17)&&n!==(n=l[4](l[0].uid?"Account":"Users")+"")&&T(i,n);const f={};a&1&&(f.class="btn-hallow can-toggle has-tooltip "+(l[0].uid?"is-active":"")),a&268435472&&(f.$$scope={dirty:a,ctx:l}),r.$set(f)},i(l){s||(v(r.$$.fragment,l),s=!0)},o(l){y(r.$$.fragment,l),s=!1},d(l){l&&$(e),l&&$(o),H(r,l)}}}function Yb(t){let e,n,i=t[4]("Invite or recover password")+"",o,r,s,l,a,f,u,d,p,h,_,g,E=t[4]("Users")+"",b,C,M,D,L=t[1].length+"",A,R,U,B,W,G,I,K=t[4]("Email")+"",X,J,N,P=t[4]("Roles")+"",Z,j,V,Y=t[4]("Registered")+"",F,oe,re,ne,de,Se,se,he;function Ue(x){t[22](x)}let Le={type:"email",name:"email",placeholder:t[4]("user@example.com"),$$slots:{help:[Jb],label:[Zb]},$$scope:{ctx:t}};t[0].email!==void 0&&(Le.value=t[0].email),s=new Ve({props:Le}),be.push(()=>ye(s,"value",Ue,t[0].email));let _e=t[3].url&&_a(t);d=new ft({props:{icon:"save",op:t[9],disabled:!t[0].email,$$slots:{default:[Qb]},$$scope:{ctx:t}}}),h=new Mt({props:{op:t[9],success:"Link generated."}}),ne=new Co({props:{colspan:"3",op:t[6]}});let pe=t[1],Pe=[];for(let x=0;x<pe.length;x+=1)Pe[x]=ma(ha(t,pe,x));return{c(){e=m("form"),n=m("h2"),o=O(i),r=S(),q(s.$$.fragment),a=S(),_e&&_e.c(),f=S(),u=m("div"),q(d.$$.fragment),p=S(),q(h.$$.fragment),_=S(),g=m("h2"),b=O(E),C=S(),M=m("small"),D=O("("),A=O(L),R=O(")"),U=S(),B=m("table"),W=m("thead"),G=m("tr"),I=m("th"),X=O(K),J=S(),N=m("th"),Z=O(P),j=S(),V=m("th"),F=O(Y),oe=S(),re=m("tbody"),q(ne.$$.fragment),de=S();for(let x=0;x<Pe.length;x+=1)Pe[x].c();k(u,"class","form-actions"),k(e,"id","invite"),k(e,"method","post")},m(x,me){w(x,e,me),c(e,n),c(n,o),c(e,r),z(s,e,null),c(e,a),_e&&_e.m(e,null),c(e,f),c(e,u),z(d,u,null),c(e,p),z(h,e,null),w(x,_,me),w(x,g,me),c(g,b),c(g,C),c(g,M),c(M,D),c(M,A),c(M,R),w(x,U,me),w(x,B,me),c(B,W),c(W,G),c(G,I),c(I,X),c(G,J),c(G,N),c(N,Z),c(G,j),c(G,V),c(V,F),c(B,oe),c(B,re),z(ne,re,null),c(re,de);for(let we=0;we<Pe.length;we+=1)Pe[we].m(re,null);Se=!0,se||(he=Te(e,"submit",st(t[13])),se=!0)},p(x,me){(!Se||me&16)&&i!==(i=x[4]("Invite or recover password")+"")&&T(o,i);const we={};me&16&&(we.placeholder=x[4]("user@example.com")),me&268435472&&(we.$$scope={dirty:me,ctx:x}),!l&&me&1&&(l=!0,we.value=x[0].email,ke(()=>l=!1)),s.$set(we),x[3].url?_e?_e.p(x,me):(_e=_a(x),_e.c(),_e.m(e,f)):_e&&(_e.d(1),_e=null);const Fe={};me&1&&(Fe.disabled=!x[0].email),me&268435472&&(Fe.$$scope={dirty:me,ctx:x}),d.$set(Fe),(!Se||me&16)&&E!==(E=x[4]("Users")+"")&&T(b,E),(!Se||me&2)&&L!==(L=x[1].length+"")&&T(A,L),(!Se||me&16)&&K!==(K=x[4]("Email")+"")&&T(X,K),(!Se||me&16)&&P!==(P=x[4]("Roles")+"")&&T(Z,P),(!Se||me&16)&&Y!==(Y=x[4]("Registered")+"")&&T(F,Y);const je={};if(me&64&&(je.op=x[6]),ne.$set(je),me&2){pe=x[1];let fe;for(fe=0;fe<pe.length;fe+=1){const ie=ha(x,pe,fe);Pe[fe]?Pe[fe].p(ie,me):(Pe[fe]=ma(ie),Pe[fe].c(),Pe[fe].m(re,null))}for(;fe<Pe.length;fe+=1)Pe[fe].d(1);Pe.length=pe.length}},i(x){Se||(v(s.$$.fragment,x),v(d.$$.fragment,x),v(h.$$.fragment,x),v(ne.$$.fragment,x),Se=!0)},o(x){y(s.$$.fragment,x),y(d.$$.fragment,x),y(h.$$.fragment,x),y(ne.$$.fragment,x),Se=!1},d(x){x&&$(e),H(s),_e&&_e.d(),H(d),H(h),x&&$(_),x&&$(g),x&&$(U),x&&$(B),H(ne),wt(Pe,x),se=!1,he()}}}function Vb(t){let e,n,i,o,r,s,l,a,f,u,d,p,h,_,g,E,b,C,M=t[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",D,L,A,R=t[5]('Please confirm by entering "**%1**" before hitting **%2**.',t[0].email,t[4]("Delete user"))+"",U,B,W,G,I,K,X,J,N,P,Z;function j(ne){t[19](ne)}let V={name:"email",readonly:!0,$$slots:{label:[Xb]},$$scope:{ctx:t}};t[0].email!==void 0&&(V.value=t[0].email),o=new Ve({props:V}),be.push(()=>ye(o,"value",j,t[0].email));function Y(ne){t[20](ne)}let F={name:"roles",placeholder:t[4]("admin, bot, ..."),$$slots:{help:[ev],label:[xb]},$$scope:{ctx:t}};t[0].roles!==void 0&&(F.value=t[0].roles),l=new Ve({props:F}),be.push(()=>ye(l,"value",Y,t[0].roles)),d=new ft({props:{icon:"save",op:t[10],$$slots:{default:[tv]},$$scope:{ctx:t}}}),h=new Mt({props:{op:t[10]}});function oe(ne){t[21](ne)}let re={name:"confirm_email",$$slots:{label:[nv]},$$scope:{ctx:t}};return t[2]!==void 0&&(re.value=t[2]),B=new Ve({props:re}),be.push(()=>ye(B,"value",oe,t[2])),K=new ft({props:{icon:"trash",op:t[7],disabled:t[2]!==t[0].email,$$slots:{default:[iv]},$$scope:{ctx:t}}}),J=new Mt({props:{op:t[7],success:"Deleted."}}),{c(){e=m("form"),n=m("input"),i=S(),q(o.$$.fragment),s=S(),q(l.$$.fragment),f=S(),u=m("div"),q(d.$$.fragment),p=S(),q(h.$$.fragment),_=S(),g=m("h2"),g.textContent="Delete account",E=S(),b=m("form"),C=m("p"),D=O(M),L=S(),A=new Tt(!1),U=S(),q(B.$$.fragment),G=S(),I=m("div"),q(K.$$.fragment),X=S(),q(J.$$.fragment),k(n,"type","hidden"),k(n,"name","uid"),k(u,"class","form-actions"),k(e,"id","edit"),k(e,"method","post"),A.a=null,k(I,"class","form-actions"),k(b,"id","delete"),k(b,"method","post")},m(ne,de){w(ne,e,de),c(e,n),Ct(n,t[0].uid),c(e,i),z(o,e,null),c(e,s),z(l,e,null),c(e,f),c(e,u),z(d,u,null),c(e,p),z(h,e,null),w(ne,_,de),w(ne,g,de),w(ne,E,de),w(ne,b,de),c(b,C),c(C,D),c(C,L),A.m(R,C),c(b,U),z(B,b,null),c(b,G),c(b,I),z(K,I,null),c(b,X),z(J,b,null),N=!0,P||(Z=[Te(n,"input",t[18]),Te(e,"submit",st(t[14])),Te(b,"submit",st(t[12]))],P=!0)},p(ne,de){de&1&&Ct(n,ne[0].uid);const Se={};de&268435472&&(Se.$$scope={dirty:de,ctx:ne}),!r&&de&1&&(r=!0,Se.value=ne[0].email,ke(()=>r=!1)),o.$set(Se);const se={};de&16&&(se.placeholder=ne[4]("admin, bot, ...")),de&268435472&&(se.$$scope={dirty:de,ctx:ne}),!a&&de&1&&(a=!0,se.value=ne[0].roles,ke(()=>a=!1)),l.$set(se);const he={};de&268435472&&(he.$$scope={dirty:de,ctx:ne}),d.$set(he),(!N||de&16)&&M!==(M=ne[4]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"")&&T(D,M),(!N||de&49)&&R!==(R=ne[5]('Please confirm by entering "**%1**" before hitting **%2**.',ne[0].email,ne[4]("Delete user"))+"")&&A.p(R);const Ue={};de&268435472&&(Ue.$$scope={dirty:de,ctx:ne}),!W&&de&4&&(W=!0,Ue.value=ne[2],ke(()=>W=!1)),B.$set(Ue);const Le={};de&5&&(Le.disabled=ne[2]!==ne[0].email),de&268435472&&(Le.$$scope={dirty:de,ctx:ne}),K.$set(Le)},i(ne){N||(v(o.$$.fragment,ne),v(l.$$.fragment,ne),v(d.$$.fragment,ne),v(h.$$.fragment,ne),v(B.$$.fragment,ne),v(K.$$.fragment,ne),v(J.$$.fragment,ne),N=!0)},o(ne){y(o.$$.fragment,ne),y(l.$$.fragment,ne),y(d.$$.fragment,ne),y(h.$$.fragment,ne),y(B.$$.fragment,ne),y(K.$$.fragment,ne),y(J.$$.fragment,ne),N=!1},d(ne){ne&&$(e),H(o),H(l),H(d),H(h),ne&&$(_),ne&&$(g),ne&&$(E),ne&&$(b),H(B),H(K),H(J),P=!1,ut(Z)}}}function Zb(t){let e,n=t[4]("User email")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("User email")+"")&&T(i,n)},d(o){o&&$(e)}}}function Jb(t){let e,n=t[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Using this form, you can generate a forgotten password or invite link for a user.")+"")&&T(i,n)},d(o){o&&$(e)}}}function _a(t){let e,n=t[4]("A link was generated")+"",i,o,r,s,l=t[5](t[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",a,f,u=t[5]("The link is valid until **%1**.",new Date(t[3].expires).toLocaleString())+"",d,p,h=t[3].url+"",_,g,E,b,C,M=t[4]("Tip: Clicking on the link will copy it to your clipboard.")+"",D,L,A;return{c(){e=m("h3"),i=O(n),o=S(),r=m("p"),s=new Tt(!1),a=S(),f=new Tt(!1),d=S(),p=m("a"),_=O(h),E=S(),b=m("p"),C=m("small"),D=O(M),s.a=a,f.a=null,k(p,"href",g=t[3].url)},m(R,U){w(R,e,U),c(e,i),w(R,o,U),w(R,r,U),s.m(l,r),c(r,a),f.m(u,r),w(R,d,U),w(R,p,U),c(p,_),w(R,E,U),w(R,b,U),c(b,C),c(C,D),L||(A=Te(p,"click",st(t[11])),L=!0)},p(R,U){U&16&&n!==(n=R[4]("A link was generated")+"")&&T(i,n),U&40&&l!==(l=R[5](R[3].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&s.p(l),U&40&&u!==(u=R[5]("The link is valid until **%1**.",new Date(R[3].expires).toLocaleString())+"")&&f.p(u),U&8&&h!==(h=R[3].url+"")&&T(_,h),U&8&&g!==(g=R[3].url)&&k(p,"href",g),U&16&&M!==(M=R[4]("Tip: Clicking on the link will copy it to your clipboard.")+"")&&T(D,M)},d(R){R&&$(e),R&&$(o),R&&$(r),R&&$(d),R&&$(p),R&&$(E),R&&$(b),L=!1,A()}}}function Qb(t){let e,n=t[4]("Generate link")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Generate link")+"")&&T(i,n)},d(o){o&&$(e)}}}function ma(t){let e,n,i,o=t[25].email+"",r,s,l,a,f=t[25].roles.join(", ")+"",u,d,p,h=new vt(t[25].registered).getHumanDate({year:!0})+"",_,g;return{c(){e=m("tr"),n=m("td"),i=m("a"),r=O(o),l=S(),a=m("td"),u=O(f),d=S(),p=m("td"),_=O(h),g=S(),k(i,"href",s="#"+t[25].uid)},m(E,b){w(E,e,b),c(e,n),c(n,i),c(i,r),c(e,l),c(e,a),c(a,u),c(e,d),c(e,p),c(p,_),c(e,g)},p(E,b){b&2&&o!==(o=E[25].email+"")&&T(r,o),b&2&&s!==(s="#"+E[25].uid)&&k(i,"href",s),b&2&&f!==(f=E[25].roles.join(", ")+"")&&T(u,f),b&2&&h!==(h=new vt(E[25].registered).getHumanDate({year:!0})+"")&&T(_,h)},d(E){E&&$(e)}}}function Xb(t){let e,n=t[4]("Email")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Email")+"")&&T(i,n)},d(o){o&&$(e)}}}function xb(t){let e,n=t[4]("Roles")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Roles")+"")&&T(i,n)},d(o){o&&$(e)}}}function ev(t){let e,n=t[4]("Roles must be separated by comma.")+"",i;return{c(){e=m("p"),i=O(n),k(e,"class","help"),k(e,"slot","help")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Roles must be separated by comma.")+"")&&T(i,n)},d(o){o&&$(e)}}}function tv(t){let e,n=t[4]("Save user")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Save user")+"")&&T(i,n)},d(o){o&&$(e)}}}function nv(t){let e,n=t[4]("Confirm email")+"",i;return{c(){e=m("span"),i=O(n),k(e,"slot","label")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Confirm email")+"")&&T(i,n)},d(o){o&&$(e)}}}function iv(t){let e,n=t[4]("Delete user")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&16&&n!==(n=o[4]("Delete user")+"")&&T(i,n)},d(o){o&&$(e)}}}function ov(t){let e,n,i,o,r,s;e=new Ut({props:{$$slots:{default:[Kb]},$$scope:{ctx:t}}});const l=[Vb,Yb],a=[];function f(u,d){return u[0].uid?0:1}return o=f(t),r=a[o]=l[o](t),{c(){q(e.$$.fragment),n=S(),i=m("main"),r.c(),k(i,"class","main")},m(u,d){z(e,u,d),w(u,n,d),w(u,i,d),a[o].m(i,null),s=!0},p(u,[d]){const p={};d&268435473&&(p.$$scope={dirty:d,ctx:u}),e.$set(p);let h=o;o=f(u),o===h?a[o].p(u,d):(Oe(),y(a[h],1,1,()=>{a[h]=null}),Ne(),r=a[o],r?r.p(u,d):(r=a[o]=l[o](u),r.c()),v(r,1),r.m(i,null))},i(u){s||(v(e.$$.fragment,u),v(r),s=!0)},o(u){y(e.$$.fragment,u),y(r),s=!1},d(u){H(e,u),u&&$(n),u&&$(i),a[o].d()}}}function rv(t,e,n){let i,o,r,s,l,a;Ce(t,ot,I=>n(4,o=I)),Ce(t,De,I=>n(17,s=I)),Ce(t,Bt,I=>n(5,l=I));let{title:f="Users"}=e;const u=et.op("deleteUser"),d=et.op("getUsers");Ce(t,d,I=>n(6,a=I));const p=et.op("inviteUser");Ce(t,p,I=>n(16,r=I));const h=et.op("updateUser");let _="",g={email:""},E=[];Ft(L);function b(I){const K=af(I.target);K&&gt.showInApp(K,{title:o("Invite link copied")})}async function C(){u.reset(),h.reset(),_===g.email&&(await u.perform(g),u.is("success")&&(L(),De.go("/settings/users",{replace:!0})))}function M(I,K){const X=I.hash,J=X&&K.filter(N=>N.uid===X)[0];n(0,g=J?{...g,confirm_email:"",...J}:{...g,confirm_email:"",uid:""})}function D(){p.perform({email:g.email})}async function L(){await d.perform(),n(1,E=d.res.body.users||[]),d.reset()}function A(){u.reset(),h.perform({email:g.email,roles:Lr(g.roles)})}function R(){g.uid=this.value,n(0,g)}function U(I){t.$$.not_equal(g.email,I)&&(g.email=I,n(0,g))}function B(I){t.$$.not_equal(g.roles,I)&&(g.roles=I,n(0,g))}function W(I){_=I,n(2,_)}function G(I){t.$$.not_equal(g.email,I)&&(g.email=I,n(0,g))}return t.$$set=I=>{"title"in I&&n(15,f=I.title)},t.$$.update=()=>{t.$$.dirty&131074&&M(s,E),t.$$.dirty&65536&&n(3,i=r.res.body||{}),t.$$.dirty&1&&n(15,f=g.uid?g.email:"Users")},[g,E,_,i,o,l,a,u,d,p,h,b,C,D,A,f,r,s,R,U,B,W,G]}class sv extends Je{constructor(e){super(),Ze(this,e,rv,ov,Ye,{title:15})}}function ga(t,e,n){const i=t.slice();return i[21]=e[n],i[22]=e,i[23]=n,i}function lv(t){let e,n=t[6]("Files")+"",i;return{c(){e=m("h1"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&64&&n!==(n=o[6]("Files")+"")&&T(i,n)},d(o){o&&$(e)}}}function ba(t){let e,n,i=new vt(t[21].saved).getHumanDate({year:!0})+"",o,r,s,l,a,f,u,d=t[21].name+"",p,h,_,g,E=Qn(t[21].size,"B")+"",b,C,M,D,L,A;l=new $e({props:{name:"copy"}}),l.$on("click",t[12]);function R(B){t[17](B,t[21])}let U={name:t[21].id};return t[21].selected!==void 0&&(U.value=t[21].selected),D=new nt({props:U}),be.push(()=>ye(D,"value",R,t[21].selected)),{c(){e=m("tr"),n=m("td"),o=O(i),r=S(),s=m("td"),q(l.$$.fragment),a=S(),f=m("td"),u=m("a"),p=O(d),_=S(),g=m("td"),b=O(E),C=S(),M=m("td"),q(D.$$.fragment),k(u,"href",h=De.urlFor("/file/"+t[11].id+"/"+t[21].id)),k(u,"target","convos_files_file"),k(g,"class","text-right"),k(M,"class","text-right")},m(B,W){w(B,e,W),c(e,n),c(n,o),c(e,r),c(e,s),z(l,s,null),c(e,a),c(e,f),c(f,u),c(u,p),c(e,_),c(e,g),c(g,b),c(e,C),c(e,M),z(D,M,null),A=!0},p(B,W){t=B,(!A||W&8)&&i!==(i=new vt(t[21].saved).getHumanDate({year:!0})+"")&&T(o,i),(!A||W&8)&&d!==(d=t[21].name+"")&&T(p,d),(!A||W&8&&h!==(h=De.urlFor("/file/"+t[11].id+"/"+t[21].id)))&&k(u,"href",h),(!A||W&8)&&E!==(E=Qn(t[21].size,"B")+"")&&T(b,E);const G={};W&8&&(G.name=t[21].id),!L&&W&8&&(L=!0,G.value=t[21].selected,ke(()=>L=!1)),D.$set(G)},i(B){A||(v(l.$$.fragment,B),v(D.$$.fragment,B),A=!0)},o(B){y(l.$$.fragment,B),y(D.$$.fragment,B),A=!1},d(B){B&&$(e),H(l),H(D)}}}function va(t){let e,n,i=t[6]("No files.")+"",o;return{c(){e=m("tr"),n=m("td"),o=O(i),k(n,"colspan","5")},m(r,s){w(r,e,s),c(e,n),c(n,o)},p(r,s){s&64&&i!==(i=r[6]("No files.")+"")&&T(o,i)},d(r){r&&$(e)}}}function $a(t){let e,n;return e=new Co({props:{colspan:"5",op:t[10],$$slots:{default:[av]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&16777216&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function av(t){let e;return{c(){e=m("div"),e.textContent="Â "},m(n,i){w(n,e,i)},p:Re,d(n){n&&$(e)}}}function fv(t){let e,n=t[6]("Previous")+"",i;return{c(){e=m("span"),i=O(n),k(e,"class","disabled")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&64&&n!==(n=o[6]("Previous")+"")&&T(i,n)},i:Re,o:Re,d(o){o&&$(e)}}}function uv(t){let e,n;return e=new We({props:{href:"/settings/files?after="+t[5],$$slots:{default:[cv]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&32&&(r.href="/settings/files?after="+i[5]),o&16777280&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function cv(t){let e=t[6]("Previous")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&64&&e!==(e=i[6]("Previous")+"")&&T(n,e)},d(i){i&&$(n)}}}function pv(t){let e,n=t[6]("Next")+"",i;return{c(){e=m("span"),i=O(n),k(e,"class","disabled")},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&64&&n!==(n=o[6]("Next")+"")&&T(i,n)},i:Re,o:Re,d(o){o&&$(e)}}}function dv(t){let e,n;return e=new We({props:{href:"/settings/files?after="+t[4],$$slots:{default:[hv]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&16&&(r.href="/settings/files?after="+i[4]),o&16777280&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function hv(t){let e=t[6]("Next")+"",n;return{c(){n=O(e)},m(i,o){w(i,n,o)},p(i,o){o&64&&e!==(e=i[6]("Next")+"")&&T(n,e)},d(i){i&&$(n)}}}function _v(t){let e,n=t[6]("Delete selected files")+"",i;return{c(){e=m("span"),i=O(n)},m(o,r){w(o,e,r),c(e,i)},p(o,r){r&64&&n!==(n=o[6]("Delete selected files")+"")&&T(i,n)},d(o){o&&$(e)}}}function wa(t){let e,n=t[8]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"";return{c(){e=m("p")},m(i,o){w(i,e,o),e.innerHTML=n},p(i,o){o&256&&n!==(n=i[8]("By deleting the files, you and everyone with the link *should* lose access to the file: Aggressive caching in browsers or proxies between Convos and other users might keep the file around for some time.")+"")&&(e.innerHTML=n)},d(i){i&&$(e)}}}function mv(t){let e,n,i,o,r,s,l,a,f=t[6]("Uploaded")+"",u,d,p,h,_,g=t[6]("Name")+"",E,b,C,M=t[6]("Size")+"",D,L,A,R,U,B,W,G,I,K,X,J=!t[7].is("loading"),N,P,Z,j,V,Y,F,oe,re,ne,de,Se,se,he;e=new Ut({props:{$$slots:{default:[lv]},$$scope:{ctx:t}}});function Ue(ce){t[16](ce)}let Le={};t[0]!==void 0&&(Le.value=t[0]),R=new nt({props:Le}),be.push(()=>ye(R,"value",Ue,t[0]));let _e=t[3],pe=[];for(let ce=0;ce<_e.length;ce+=1)pe[ce]=ba(ga(t,_e,ce));const Pe=ce=>y(pe[ce],1,1,()=>{pe[ce]=null});let x=t[3].length===0&&va(t);K=new Co({props:{colspan:"5",op:t[9]}});let me=J&&$a(t);const we=[uv,fv],Fe=[];function je(ce,ee){return ce[5]||ce[1].query.after?0:1}Z=je(t),j=Fe[Z]=we[Z](t);const fe=[dv,pv],ie=[];function ve(ce,ee){return ce[4]?0:1}Y=ve(t),F=ie[Y]=fe[Y](t),ne=new ft({props:{icon:"trash",op:t[9],disabled:t[2],$$slots:{default:[_v]},$$scope:{ctx:t}}}),ne.$on("click",t[13]);let Ee=(t[3].length||t[1].query.after)&&wa(t);return{c(){q(e.$$.fragment),n=S(),i=m("main"),o=m("form"),r=m("table"),s=m("thead"),l=m("tr"),a=m("th"),u=O(f),d=S(),p=m("th"),p.textContent="Â ",h=S(),_=m("th"),E=O(g),b=S(),C=m("th"),D=O(M),L=S(),A=m("th"),q(R.$$.fragment),B=S(),W=m("tbody");for(let ce=0;ce<pe.length;ce+=1)pe[ce].c();G=S(),x&&x.c(),I=S(),q(K.$$.fragment),X=S(),me&&me.c(),N=S(),P=m("div"),j.c(),V=S(),F.c(),oe=S(),re=m("div"),q(ne.$$.fragment),de=S(),Ee&&Ee.c(),k(C,"class","text-right"),k(A,"class","text-right"),k(P,"class","pagination"),k(re,"class","form-actions"),k(o,"method","post"),k(i,"class","main")},m(ce,ee){z(e,ce,ee),w(ce,n,ee),w(ce,i,ee),c(i,o),c(o,r),c(r,s),c(s,l),c(l,a),c(a,u),c(l,d),c(l,p),c(l,h),c(l,_),c(_,E),c(l,b),c(l,C),c(C,D),c(l,L),c(l,A),z(R,A,null),c(r,B),c(r,W);for(let ae=0;ae<pe.length;ae+=1)pe[ae].m(W,null);c(W,G),x&&x.m(W,null),c(W,I),z(K,W,null),c(W,X),me&&me.m(W,null),c(o,N),c(o,P),Fe[Z].m(P,null),c(P,V),ie[Y].m(P,null),c(o,oe),c(o,re),z(ne,re,null),c(o,de),Ee&&Ee.m(o,null),Se=!0,se||(he=[Te(o,"change",t[14]),Te(o,"submit",st(t[15]))],se=!0)},p(ce,[ee]){const ae={};ee&16777280&&(ae.$$scope={dirty:ee,ctx:ce}),e.$set(ae),(!Se||ee&64)&&f!==(f=ce[6]("Uploaded")+"")&&T(u,f),(!Se||ee&64)&&g!==(g=ce[6]("Name")+"")&&T(E,g),(!Se||ee&64)&&M!==(M=ce[6]("Size")+"")&&T(D,M);const te={};if(!U&&ee&1&&(U=!0,te.value=ce[0],ke(()=>U=!1)),R.$set(te),ee&6152){_e=ce[3];let Ae;for(Ae=0;Ae<_e.length;Ae+=1){const Xe=ga(ce,_e,Ae);pe[Ae]?(pe[Ae].p(Xe,ee),v(pe[Ae],1)):(pe[Ae]=ba(Xe),pe[Ae].c(),v(pe[Ae],1),pe[Ae].m(W,G))}for(Oe(),Ae=_e.length;Ae<pe.length;Ae+=1)Pe(Ae);Ne()}ce[3].length===0?x?x.p(ce,ee):(x=va(ce),x.c(),x.m(W,I)):x&&(x.d(1),x=null),ee&128&&(J=!ce[7].is("loading")),J?me?(me.p(ce,ee),ee&128&&v(me,1)):(me=$a(ce),me.c(),v(me,1),me.m(W,null)):me&&(Oe(),y(me,1,1,()=>{me=null}),Ne());let Q=Z;Z=je(ce),Z===Q?Fe[Z].p(ce,ee):(Oe(),y(Fe[Q],1,1,()=>{Fe[Q]=null}),Ne(),j=Fe[Z],j?j.p(ce,ee):(j=Fe[Z]=we[Z](ce),j.c()),v(j,1),j.m(P,V));let ue=Y;Y=ve(ce),Y===ue?ie[Y].p(ce,ee):(Oe(),y(ie[ue],1,1,()=>{ie[ue]=null}),Ne(),F=ie[Y],F?F.p(ce,ee):(F=ie[Y]=fe[Y](ce),F.c()),v(F,1),F.m(P,null));const ge={};ee&4&&(ge.disabled=ce[2]),ee&16777280&&(ge.$$scope={dirty:ee,ctx:ce}),ne.$set(ge),ce[3].length||ce[1].query.after?Ee?Ee.p(ce,ee):(Ee=wa(ce),Ee.c(),Ee.m(o,null)):Ee&&(Ee.d(1),Ee=null)},i(ce){if(!Se){v(e.$$.fragment,ce),v(R.$$.fragment,ce);for(let ee=0;ee<_e.length;ee+=1)v(pe[ee]);v(K.$$.fragment,ce),v(me),v(j),v(F),v(ne.$$.fragment,ce),Se=!0}},o(ce){y(e.$$.fragment,ce),y(R.$$.fragment,ce),pe=pe.filter(Boolean);for(let ee=0;ee<pe.length;ee+=1)y(pe[ee]);y(K.$$.fragment,ce),y(me),y(j),y(F),y(ne.$$.fragment,ce),Se=!1},d(ce){H(e,ce),ce&&$(n),ce&&$(i),H(R),wt(pe,ce),x&&x.d(),H(K),me&&me.d(),Fe[Z].d(),ie[Y].d(),H(ne),Ee&&Ee.d(),se=!1,ut(he)}}}function gv(t,e,n){let i,o,r,s,l;Ce(t,ot,U=>n(6,o=U)),Ce(t,De,U=>n(1,r=U)),Ce(t,Bt,U=>n(8,l=U));const a=et.op("deleteFiles");Ce(t,a,U=>n(7,s=U));const f=et.op("getFiles");Ce(t,f,U=>n(18,i=U));const u=ht("user");let d=!1,p=!0,h=[],_="",g="";function E(U){const B=U.target.closest("tr").querySelector('[target="convos_files_file"]'),W=af({value:B.href});W&&gt.showInApp(W,{closeAfter:3e3,title:o("File URL copied")})}async function b(){const U=h.filter(B=>B.selected);await a.perform({fid:U.map(B=>B.id).join(","),uid:u.id}),n(3,h=h.filter(B=>!B.selected)),n(0,d=!1),M(),h.length===0&&C(De)}async function C(U){const B=U.query.after||"";await f.perform({after:B,limit:20}),n(3,h=f.res.body.files||[]),n(0,d=!1),M(),(h.length||!B)&&(n(4,_=i.res.body.next&&h.slice(-1)[0].id||""),n(5,g=i.res.body.prev||""))}function M(){n(2,p=!h.find(U=>U.selected))}function D(U){n(3,h=h.map(B=>(B.selected=U,B)))}function L(U){In.call(this,t,U)}function A(U){d=U,n(0,d)}function R(U,B){t.$$.not_equal(B.selected,U)&&(B.selected=U,n(3,h))}return t.$$.update=()=>{t.$$.dirty&2&&C(r),t.$$.dirty&1&&D(d)},[d,r,p,h,_,g,o,s,l,a,f,u,E,b,M,L,A,R]}class bv extends Je{constructor(e){super(),Ze(this,e,gv,mv,Ye,{})}}function ka(t,e,n){const i=t.slice();return i[23]=e[n],i}function ya(t,e,n){const i=t.slice();return i[26]=e[n],i}function vv(t){let e,n,i,o,r,s,l,a,f,u,d,p;return l=new $e({props:{name:"search"}}),f=new We({props:{href:"/chat",class:"btn-hallow for-notifications",$$slots:{default:[$v]},$$scope:{ctx:t}}}),{c(){e=m("div"),n=m("form"),i=m("input"),r=S(),s=m("label"),q(l.$$.fragment),a=S(),q(f.$$.fragment),k(i,"type","text"),k(i,"id","search_input"),k(i,"class","is-primary-menu-item"),k(i,"placeholder",o=t[4]?t[7]("Search..."):t[7]("Convos")),k(s,"for","search_input"),k(s,"class","btn-hallow"),k(n,"class","sidebar-header"),Qe(n,"has-focus",t[4]),k(e,"class","header-wrapper svelte-1v8ohem")},m(h,_){w(h,e,_),c(e,n),c(n,i),Ct(i,t[1]),c(n,r),c(n,s),z(l,s,null),c(n,a),z(f,n,null),u=!0,d||(p=[Te(i,"input",t[18]),Te(i,"blur",t[11]),Te(i,"focus",t[12]),Te(i,"keydown",t[14]),Te(n,"submit",Uv)],d=!0)},p(h,_){(!u||_&144&&o!==(o=h[4]?h[7]("Search..."):h[7]("Convos")))&&k(i,"placeholder",o),_&2&&i.value!==h[1]&&Ct(i,h[1]);const g={};_&536871168&&(g.$$scope={dirty:_,ctx:h}),f.$set(g),(!u||_&16)&&Qe(n,"has-focus",h[4])},i(h){u||(v(l.$$.fragment,h),v(f.$$.fragment,h),u=!0)},o(h){y(l.$$.fragment,h),y(f.$$.fragment,h),u=!1},d(h){h&&$(e),H(l),H(f),d=!1,ut(p)}}}function $v(t){let e,n,i,o=_n(t[8])+"",r,s,l;return e=new $e({props:{family:"regular",name:"bell"}}),{c(){q(e.$$.fragment),n=S(),i=m("small"),r=O(o),k(i,"class","badge is-important"),i.hidden=s=!t[8].unread},m(a,f){z(e,a,f),w(a,n,f),w(a,i,f),c(i,r),l=!0},p(a,f){(!l||f&256)&&o!==(o=_n(a[8])+"")&&T(r,o),(!l||f&256&&s!==(s=!a[8].unread))&&(i.hidden=s)},i(a){l||(v(e.$$.fragment,a),l=!0)},o(a){y(e.$$.fragment,a),l=!1},d(a){H(e,a),a&&$(n),a&&$(i)}}}function Sa(t){let e,n;return e=new We({props:{href:"/settings/connections",$$slots:{default:[wv]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&536871040&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function wv(t){let e,n,i,o=t[7]("No conversations")+"",r,s;return e=new $e({props:{name:"exclamation-circle"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("No conversations")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function kv(t){let e,n,i,o=(t[23].name||t[23].connection_id)+"",r,s,l,a=t[7](t[23].frozen)+"",f,u,d,p=_n(t[23])+"",h,_,g;return e=new $e({props:{name:"network-wired"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o),s=S(),l=m("span"),f=O(a),u=S(),d=m("b"),h=O(p),k(l,"class","tooltip"),k(d,"class","badge"),d.hidden=_=!t[23].unread},m(E,b){z(e,E,b),w(E,n,b),w(E,i,b),c(i,r),w(E,s,b),w(E,l,b),c(l,f),w(E,u,b),w(E,d,b),c(d,h),g=!0},p(E,b){(!g||b&8)&&o!==(o=(E[23].name||E[23].connection_id)+"")&&T(r,o),(!g||b&136)&&a!==(a=E[7](E[23].frozen)+"")&&T(f,a),(!g||b&8)&&p!==(p=_n(E[23])+"")&&T(h,p),(!g||b&8&&_!==(_=!E[23].unread))&&(d.hidden=_)},i(E){g||(v(e.$$.fragment,E),g=!0)},o(E){y(e.$$.fragment,E),g=!1},d(E){H(e,E),E&&$(n),E&&$(i),E&&$(s),E&&$(l),E&&$(u),E&&$(d)}}}function yv(t){let e,n;return e=new $e({props:{name:t[26].is("private")?"user":"user-friends"}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&8&&(r.name=i[26].is("private")?"user":"user-friends"),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Sv(t){let e,n;return e=new $e({props:{name:"exclamation-triangle"}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p:Re,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Ev(t){let e,n,i,o,r,s=t[26].name+"",l,a,f,u=t[7](t[26].frozen)+"",d,p,h,_=_n(t[26])+"",g,E,b;const C=[Sv,yv],M=[];function D(L,A){return A&8&&(e=null),e==null&&(e=!!(L[26].frozen&&!L[26].is("private"))),e?0:1}return n=D(t,-1),i=M[n]=C[n](t),{c(){i.c(),o=S(),r=m("span"),l=O(s),a=S(),f=m("span"),d=O(u),p=S(),h=m("b"),g=O(_),k(f,"class","tooltip"),k(h,"class","badge"),h.hidden=E=!t[26].unread},m(L,A){M[n].m(L,A),w(L,o,A),w(L,r,A),c(r,l),w(L,a,A),w(L,f,A),c(f,d),w(L,p,A),w(L,h,A),c(h,g),b=!0},p(L,A){let R=n;n=D(L,A),n===R?M[n].p(L,A):(Oe(),y(M[R],1,1,()=>{M[R]=null}),Ne(),i=M[n],i?i.p(L,A):(i=M[n]=C[n](L),i.c()),v(i,1),i.m(o.parentNode,o)),(!b||A&8)&&s!==(s=L[26].name+"")&&T(l,s),(!b||A&136)&&u!==(u=L[7](L[26].frozen)+"")&&T(d,u),(!b||A&8)&&_!==(_=_n(L[26])+"")&&T(g,_),(!b||A&8&&E!==(E=!L[26].unread))&&(h.hidden=E)},i(L){b||(v(i),b=!0)},o(L){y(i),b=!1},d(L){M[n].d(L),L&&$(o),L&&$(r),L&&$(a),L&&$(f),L&&$(p),L&&$(h)}}}function Ea(t){let e,n;return e=new We({props:{href:t[26].path,class:wo(t[23],t[26]),$$slots:{default:[Ev]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o&8&&(r.href=i[26].path),o&8&&(r.class=wo(i[23],i[26])),o&536871048&&(r.$$scope={dirty:o,ctx:i}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Ca(t){let e,n,i,o;e=new We({props:{href:t[23].path,class:wo(t[23],t[23]),$$slots:{default:[kv]},$$scope:{ctx:t}}});let r=t[23].conversations.toArray(),s=[];for(let a=0;a<r.length;a+=1)s[a]=Ea(ya(t,r,a));const l=a=>y(s[a],1,1,()=>{s[a]=null});return{c(){q(e.$$.fragment),n=S();for(let a=0;a<s.length;a+=1)s[a].c();i=ct()},m(a,f){z(e,a,f),w(a,n,f);for(let u=0;u<s.length;u+=1)s[u].m(a,f);w(a,i,f),o=!0},p(a,f){const u={};if(f&8&&(u.href=a[23].path),f&8&&(u.class=wo(a[23],a[23])),f&536871048&&(u.$$scope={dirty:f,ctx:a}),e.$set(u),f&136){r=a[23].conversations.toArray();let d;for(d=0;d<r.length;d+=1){const p=ya(a,r,d);s[d]?(s[d].p(p,f),v(s[d],1)):(s[d]=Ea(p),s[d].c(),v(s[d],1),s[d].m(i.parentNode,i))}for(Oe(),d=r.length;d<s.length;d+=1)l(d);Ne()}},i(a){if(!o){v(e.$$.fragment,a);for(let f=0;f<r.length;f+=1)v(s[f]);o=!0}},o(a){y(e.$$.fragment,a),s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)y(s[f]);o=!1},d(a){H(e,a),a&&$(n),wt(s,a),a&&$(i)}}}function Cv(t){let e,n,i,o=t[7]("Notifications")+"",r,s,l,a=_n(t[8])+"",f,u,d;return e=new $e({props:{name:"bell"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o),s=S(),l=m("b"),f=O(a),k(l,"class","badge"),l.hidden=u=!t[8].unread},m(p,h){z(e,p,h),w(p,n,h),w(p,i,h),c(i,r),w(p,s,h),w(p,l,h),c(l,f),d=!0},p(p,h){(!d||h&128)&&o!==(o=p[7]("Notifications")+"")&&T(r,o),(!d||h&256)&&a!==(a=_n(p[8])+"")&&T(f,a),(!d||h&256&&u!==(u=!p[8].unread))&&(l.hidden=u)},i(p){d||(v(e.$$.fragment,p),d=!0)},o(p){y(e.$$.fragment,p),d=!1},d(p){H(e,p),p&&$(n),p&&$(i),p&&$(s),p&&$(l)}}}function Av(t){let e,n,i,o=t[7]("Search")+"",r,s;return e=new $e({props:{name:"search"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Search")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Ov(t){let e,n,i,o=t[7]("Add conversation")+"",r,s;return e=new $e({props:{name:"comment"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Add conversation")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Nv(t){let e,n,i,o=t[7]("Connections")+"",r,s;return e=new $e({props:{name:"network-wired"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Connections")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Tv(t){let e,n,i,o=t[7]("Account")+"",r,s;return e=new $e({props:{name:"user-cog"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Account")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Mv(t){let e,n,i,o=t[7]("Files")+"",r,s;return e=new $e({props:{name:"folder-open"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Files")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Aa(t){let e,n,i,o;return e=new We({props:{href:"/settings",$$slots:{default:[Rv]},$$scope:{ctx:t}}}),i=new We({props:{href:"/settings/users",$$slots:{default:[Lv]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment),n=S(),q(i.$$.fragment)},m(r,s){z(e,r,s),w(r,n,s),z(i,r,s),o=!0},p(r,s){const l={};s&536871040&&(l.$$scope={dirty:s,ctx:r}),e.$set(l);const a={};s&536871040&&(a.$$scope={dirty:s,ctx:r}),i.$set(a)},i(r){o||(v(e.$$.fragment,r),v(i.$$.fragment,r),o=!0)},o(r){y(e.$$.fragment,r),y(i.$$.fragment,r),o=!1},d(r){H(e,r),r&&$(n),H(i,r)}}}function Rv(t){let e,n,i,o=t[7]("Settings")+"",r,s;return e=new $e({props:{name:"tools"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Settings")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Lv(t){let e,n,i,o=t[7]("Users")+"",r,s;return e=new $e({props:{name:"users"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Users")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Iv(t){let e,n,i,o=t[7]("Help")+"",r,s;return e=new $e({props:{name:"question-circle"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&128)&&o!==(o=l[7]("Help")+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Pv(t){let e,n,i,o=t[7]('Search for "%1"',t[5])+"",r,s;return e=new $e({props:{name:"search"}}),{c(){q(e.$$.fragment),n=S(),i=m("span"),r=O(o)},m(l,a){z(e,l,a),w(l,n,a),w(l,i,a),c(i,r),s=!0},p(l,a){(!s||a&160)&&o!==(o=l[7]('Search for "%1"',l[5])+"")&&T(r,o)},i(l){s||(v(e.$$.fragment,l),s=!0)},o(l){y(e.$$.fragment,l),s=!1},d(l){H(e,l),l&&$(n),l&&$(i)}}}function Dv(t){let e,n,i,o,r=t[7]("Conversations")+"",s,l,a,f,u,d=(t[3].email||t[7]("Account"))+"",p,h,_,g,E,b,C,M,D,L,A,R,U,B,W=t[3].is("admin"),G,I,K,X,J,N,P,Z=t[7]("Log out")+"",j,V,Y,F,oe,re,ne,de=!Mn.isSingleColumn&&vv(t),Se=!t[3].connections.size&&Sa(t),se=t[3].connections.toArray(),he=[];for(let _e=0;_e<se.length;_e+=1)he[_e]=Ca(ka(t,se,_e));const Ue=_e=>y(he[_e],1,1,()=>{he[_e]=null});_=new We({props:{href:"/chat",$$slots:{default:[Cv]},$$scope:{ctx:t}}}),E=new We({props:{href:"/search",$$slots:{default:[Av]},$$scope:{ctx:t}}}),C=new We({props:{href:t[6],$$slots:{default:[Ov]},$$scope:{ctx:t}}}),D=new We({props:{href:"/settings/connections",$$slots:{default:[Nv]},$$scope:{ctx:t}}}),A=new We({props:{href:"/settings/account",$$slots:{default:[Tv]},$$scope:{ctx:t}}}),U=new We({props:{href:"/settings/files",$$slots:{default:[Mv]},$$scope:{ctx:t}}});let Le=W&&Aa(t);return I=new We({props:{href:"/help",$$slots:{default:[Iv]},$$scope:{ctx:t}}}),J=new $e({props:{name:"power-off"}}),Y=new We({props:{href:"/search?q="+encodeURIComponent(t[5]),class:"for-search hidden",$$slots:{default:[Pv]},$$scope:{ctx:t}}}),{c(){e=m("div"),de&&de.c(),n=S(),i=m("nav"),o=m("h3"),s=O(r),l=S(),Se&&Se.c(),a=S();for(let _e=0;_e<he.length;_e+=1)he[_e].c();f=S(),u=m("h3"),p=O(d),h=S(),q(_.$$.fragment),g=S(),q(E.$$.fragment),b=S(),q(C.$$.fragment),M=S(),q(D.$$.fragment),L=S(),q(A.$$.fragment),R=S(),q(U.$$.fragment),B=S(),Le&&Le.c(),G=S(),q(I.$$.fragment),K=S(),X=m("a"),q(J.$$.fragment),N=S(),P=m("span"),j=O(Z),V=S(),q(Y.$$.fragment),k(X,"href",De.urlFor("/logout")+"?csrf="+Ge("csrf")),k(X,"target","_self"),k(i,"class","sidebar-left__nav"),Qe(i,"is-filtering",t[1].length>0),k(e,"class","sidebar-left")},m(_e,pe){w(_e,e,pe),de&&de.m(e,null),c(e,n),c(e,i),c(i,o),c(o,s),c(i,l),Se&&Se.m(i,null),c(i,a);for(let Pe=0;Pe<he.length;Pe+=1)he[Pe].m(i,null);c(i,f),c(i,u),c(u,p),c(i,h),z(_,i,null),c(i,g),z(E,i,null),c(i,b),z(C,i,null),c(i,M),z(D,i,null),c(i,L),z(A,i,null),c(i,R),z(U,i,null),c(i,B),Le&&Le.m(i,null),c(i,G),z(I,i,null),c(i,K),c(i,X),z(J,X,null),c(X,N),c(X,P),c(P,j),c(i,V),z(Y,i,null),t[19](i),oe=!0,re||(ne=Te(i,"click",t[13]),re=!0)},p(_e,[pe]){if(t=_e,Mn.isSingleColumn||de.p(t,pe),(!oe||pe&128)&&r!==(r=t[7]("Conversations")+"")&&T(s,r),t[3].connections.size?Se&&(Oe(),y(Se,1,1,()=>{Se=null}),Ne()):Se?(Se.p(t,pe),pe&8&&v(Se,1)):(Se=Sa(t),Se.c(),v(Se,1),Se.m(i,a)),pe&136){se=t[3].connections.toArray();let ve;for(ve=0;ve<se.length;ve+=1){const Ee=ka(t,se,ve);he[ve]?(he[ve].p(Ee,pe),v(he[ve],1)):(he[ve]=Ca(Ee),he[ve].c(),v(he[ve],1),he[ve].m(i,f))}for(Oe(),ve=se.length;ve<he.length;ve+=1)Ue(ve);Ne()}(!oe||pe&136)&&d!==(d=(t[3].email||t[7]("Account"))+"")&&T(p,d);const Pe={};pe&536871296&&(Pe.$$scope={dirty:pe,ctx:t}),_.$set(Pe);const x={};pe&536871040&&(x.$$scope={dirty:pe,ctx:t}),E.$set(x);const me={};pe&64&&(me.href=t[6]),pe&536871040&&(me.$$scope={dirty:pe,ctx:t}),C.$set(me);const we={};pe&536871040&&(we.$$scope={dirty:pe,ctx:t}),D.$set(we);const Fe={};pe&536871040&&(Fe.$$scope={dirty:pe,ctx:t}),A.$set(Fe);const je={};pe&536871040&&(je.$$scope={dirty:pe,ctx:t}),U.$set(je),pe&8&&(W=t[3].is("admin")),W?Le?(Le.p(t,pe),pe&8&&v(Le,1)):(Le=Aa(t),Le.c(),v(Le,1),Le.m(i,G)):Le&&(Oe(),y(Le,1,1,()=>{Le=null}),Ne());const fe={};pe&536871040&&(fe.$$scope={dirty:pe,ctx:t}),I.$set(fe),(!oe||pe&128)&&Z!==(Z=t[7]("Log out")+"")&&T(j,Z);const ie={};pe&32&&(ie.href="/search?q="+encodeURIComponent(t[5])),pe&536871072&&(ie.$$scope={dirty:pe,ctx:t}),Y.$set(ie),(!oe||pe&2)&&Qe(i,"is-filtering",t[1].length>0)},i(_e){if(!oe){v(de),v(Se);for(let pe=0;pe<se.length;pe+=1)v(he[pe]);v(_.$$.fragment,_e),v(E.$$.fragment,_e),v(C.$$.fragment,_e),v(D.$$.fragment,_e),v(A.$$.fragment,_e),v(U.$$.fragment,_e),v(Le),v(I.$$.fragment,_e),v(J.$$.fragment,_e),v(Y.$$.fragment,_e),at(()=>{F||(F=tt(e,Yt,t[0],!0)),F.run(1)}),oe=!0}},o(_e){y(de),y(Se),he=he.filter(Boolean);for(let pe=0;pe<he.length;pe+=1)y(he[pe]);y(_.$$.fragment,_e),y(E.$$.fragment,_e),y(C.$$.fragment,_e),y(D.$$.fragment,_e),y(A.$$.fragment,_e),y(U.$$.fragment,_e),y(Le),y(I.$$.fragment,_e),y(J.$$.fragment,_e),y(Y.$$.fragment,_e),F||(F=tt(e,Yt,t[0],!1)),F.run(0),oe=!1},d(_e){_e&&$(e),de&&de.d(),Se&&Se.d(),wt(he,_e),H(_),H(E),H(C),H(D),H(A),H(U),Le&&Le.d(),H(I),H(J),H(Y),t[19](null),_e&&F&&F.end(),re=!1,ne()}}}function wo(t,e){const n=[e.conversation_id?"for-conversation":"for-connection"];return(e.frozen||t.state!=="connected")&&n.push("is-frozen"),e.frozen&&n.push("has-tooltip"),e.errors&&n.push("has-errors"),e.notifications&&n.push("has-notifications"),n.join(" ")}function _n(t,e=60){return t.unread>e?e+"+":t.unread||0}const Uv=t=>t.preventDefault();function Bv(t,e,n){let i,o,r,s,l,a,f;Ce(t,$t,W=>n(20,r=W)),Ce(t,De,W=>n(17,s=W)),Ce(t,ot,W=>n(7,a=W));let{transition:u}=e;const d=ht("user");Ce(t,d,W=>n(3,l=W));const p=d.notifications;Ce(t,p,W=>n(8,f=W));let h=0,_="",g,E=!1,b=[];function C(){bt(g,"a",W=>W.classList.remove("has-focus")),setTimeout(()=>{if(!g)return;n(1,_="");const W=document.activeElement;W&&_r(W,g)&&bt(g,"a.has-path",G=>G.focus())},100)}function M(){if(!g)return;n(15,h=0),n(16,b=[]);const W=[_.match(/^\W+/)?"":"\\b\\W*"];W[0]&&W.push("");for(let I=0;I<W.length;I++){const K=_==="+"?new RegExp(/[1-9]\d*\+?\s*$/):_==="+@"?new RegExp(/^\s*\w.*[1-9]\d*\+?\s*$/):_==="+#"?new RegExp(/^\s*#.*[1-9]\d*\+?\s*$/):new RegExp(W[I]+ci(_),"i"),X={};if(bt(g,"a",(J,N)=>{const P=J.classList;!_.length&&P.contains("has-path")&&n(15,h=N),P.remove("has-focus");const Z=!_.length||!J.href.match(/\/search$/)&&!X[J.href]&&J.textContent.match(K);Z&&b.push(J),J.classList[Z?"remove":"add"]("hidden"),X[J.href]=!0}),b.length)break}bt(g,".for-connection",I=>{let K=I;for(;(K=K.nextElementSibling)&&K.classList.contains("for-conversation");)if(!K.classList.contains("hidden"))return I.classList.remove("hidden")});const G=g.querySelector(".for-search");G.classList[_?"remove":"add"]("hidden"),G.classList.contains("hidden")||b.push(G),bt(g,"h3",I=>{let K=I;for(;(K=K.nextElementSibling)&&!Ir(K,"h3");)if(!K.classList.contains("hidden"))return I.classList.remove("hidden");I.classList.add("hidden")})}function D(){n(4,E=!1),_.indexOf("+")!==0&&C()}function L(){n(4,E=!0)}function A(W){(W.target.className||"").match(/(network|user)/)?(W.target.closest("a").pathname===location.pathname&&W.preventDefault(),setTimeout(()=>{Ti($t,r="settings",r)},50)):W.target.closest("a")&&setTimeout(()=>{Ti($t,r="",r)},50)}function R(W){if(W.keyCode==13){W.preventDefault(),C(),b[h]&&De.go(b[h].href);return}const G=W.keyCode==38?-1:W.keyCode==40?1:0;G&&(W.preventDefault(),b[h]&&b[h].classList.remove("has-focus"),n(15,h+=W.ctrlKey?G*4:G)),h<0&&n(15,h=b.length-1),h>=b.length&&n(15,h=0)}function U(){_=this.value,n(1,_)}function B(W){be[W?"unshift":"push"](()=>{g=W,n(2,g)})}return t.$$set=W=>{"transition"in W&&n(0,u=W.transition)},t.$$.update=()=>{t.$$.dirty&2&&M(),t.$$.dirty&8&&n(6,i="/settings/conversation?connection_id="+(l.activeConversation.connection_id||"")),t.$$.dirty&2&&n(5,o=_.replace(/^\//,"")),t.$$.dirty&131076&&g&&C(),t.$$.dirty&98304&&b[h]&&b[h].classList.add("has-focus")},[u,_,g,l,E,o,i,a,f,d,p,D,L,A,R,h,b,s,U,B]}class Fv extends Je{constructor(e){super(),Ze(this,e,Bv,Dv,Ye,{transition:0})}}class jv extends Rt{constructor(){super(),this.prop("cookie","activeTheme","convos",{key:"theme"}),this.prop("cookie","colorScheme","auto"),this.prop("cookie","compactDisplay",!1),this.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map(e=>[e.toLowerCase(),e])),this.prop("ro","themeOptions",()=>Array.from(this._stylesheets.entries())),this.prop("rw","osColorScheme",""),this._stylesheets=new Map([])}hasColorScheme(e){return bt(document,'link[id$="-'+e+'"]').length>1}start(){bt(document,'link[rel="alternate stylesheet"][title]',n=>{const i=n.title.replace(/\s\([a-z]+\)$/,"");this._stylesheets.set(n.id.replace(/^theme_alt__[a-z]+-/,""),i)});let e=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:()=>{}},this._matchMedia.addListener(n=>this.update({osColorScheme:n.matches?"dark":"light"})),e=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:e})}update(e){return(e.activeTheme||e.colorScheme||e.osColorScheme)&&this._activateTheme(e),super.update(e)}_activateTheme(e){const n=e.activeTheme||this.activeTheme,i=e.colorScheme||this.colorScheme,o=e.osColorScheme||this.osColorScheme,r=[i==="auto"?o:i,"normal","light"];let s;for(let l=0;l<r.length&&(s=document.getElementById("theme_alt__"+r[l]+"-"+n),!s);l++);bt(document,'link[rel*="style"][title]',l=>{s||(s=l),l.disabled=!0,l.disabled=l.href!==s.href,l.setAttribute("media",l===s?"":"none"),l.setAttribute("rel",l===s?"stylesheet":"alternate stylesheet")})}}var Kr={exports:{}};function Yr(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];typeof n=="object"&&!Object.isFrozen(n)&&Yr(n)}),t}Kr.exports=Yr;Kr.exports.default=Yr;class Oa{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function Ff(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function dn(t,...e){const n=Object.create(null);for(const i in t)n[i]=t[i];return e.forEach(function(i){for(const o in i)n[o]=i[o]}),n}const zv="</span>",Na=t=>!!t.scope||t.sublanguage&&t.language,Hv=(t,{prefix:e})=>{if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((i,o)=>`${i}${"_".repeat(o+1)}`)].join(" ")}return`${e}${t}`};class qv{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=Ff(e)}openNode(e){if(!Na(e))return;let n="";e.sublanguage?n=`language-${e.language}`:n=Hv(e.scope,{prefix:this.classPrefix}),this.span(n)}closeNode(e){Na(e)&&(this.buffer+=zv)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const Ta=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class Vr{constructor(){this.rootNode=Ta(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=Ta({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(i=>this._walk(e,i)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&e.children&&(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{Vr._collapse(n)}))}}class Wv extends Vr{constructor(e){super(),this.options=e}addKeyword(e,n){e!==""&&(this.openNode(n),this.addText(e),this.closeNode())}addText(e){e!==""&&this.add(e)}addSublanguage(e,n){const i=e.root;i.sublanguage=!0,i.language=n,this.add(i)}toHTML(){return new qv(this,this.options).value()}finalize(){return!0}}function Ii(t){return t?typeof t=="string"?t:t.source:null}function jf(t){return Pn("(?=",t,")")}function Gv(t){return Pn("(?:",t,")*")}function Kv(t){return Pn("(?:",t,")?")}function Pn(...t){return t.map(n=>Ii(n)).join("")}function Yv(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function Zr(...t){return"("+(Yv(t).capture?"":"?:")+t.map(i=>Ii(i)).join("|")+")"}function zf(t){return new RegExp(t.toString()+"|").exec("").length-1}function Vv(t,e){const n=t&&t.exec(e);return n&&n.index===0}const Zv=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function Jr(t,{joinWith:e}){let n=0;return t.map(i=>{n+=1;const o=n;let r=Ii(i),s="";for(;r.length>0;){const l=Zv.exec(r);if(!l){s+=r;break}s+=r.substring(0,l.index),r=r.substring(l.index+l[0].length),l[0][0]==="\\"&&l[1]?s+="\\"+String(Number(l[1])+o):(s+=l[0],l[0]==="("&&n++)}return s}).map(i=>`(${i})`).join(e)}const Jv=/\b\B/,Hf="[a-zA-Z]\\w*",Qr="[a-zA-Z_]\\w*",qf="\\b\\d+(\\.\\d+)?",Wf="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Gf="\\b(0b[01]+)",Qv="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",Xv=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=Pn(e,/.*\b/,t.binary,/\b.*/)),dn({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,i)=>{n.index!==0&&i.ignoreMatch()}},t)},Pi={begin:"\\\\[\\s\\S]",relevance:0},xv={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[Pi]},e0={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[Pi]},t0={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Ao=function(t,e,n={}){const i=dn({scope:"comment",begin:t,end:e,contains:[]},n);i.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const o=Zr("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return i.contains.push({begin:Pn(/[ ]+/,"(",o,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),i},n0=Ao("//","$"),i0=Ao("/\\*","\\*/"),o0=Ao("#","$"),r0={scope:"number",begin:qf,relevance:0},s0={scope:"number",begin:Wf,relevance:0},l0={scope:"number",begin:Gf,relevance:0},a0={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[Pi,{begin:/\[/,end:/\]/,relevance:0,contains:[Pi]}]}]},f0={scope:"title",begin:Hf,relevance:0},u0={scope:"title",begin:Qr,relevance:0},c0={begin:"\\.\\s*"+Qr,relevance:0},p0=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var so=Object.freeze({__proto__:null,MATCH_NOTHING_RE:Jv,IDENT_RE:Hf,UNDERSCORE_IDENT_RE:Qr,NUMBER_RE:qf,C_NUMBER_RE:Wf,BINARY_NUMBER_RE:Gf,RE_STARTERS_RE:Qv,SHEBANG:Xv,BACKSLASH_ESCAPE:Pi,APOS_STRING_MODE:xv,QUOTE_STRING_MODE:e0,PHRASAL_WORDS_MODE:t0,COMMENT:Ao,C_LINE_COMMENT_MODE:n0,C_BLOCK_COMMENT_MODE:i0,HASH_COMMENT_MODE:o0,NUMBER_MODE:r0,C_NUMBER_MODE:s0,BINARY_NUMBER_MODE:l0,REGEXP_MODE:a0,TITLE_MODE:f0,UNDERSCORE_TITLE_MODE:u0,METHOD_GUARD:c0,END_SAME_AS_BEGIN:p0});function d0(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function h0(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function _0(t,e){e&&t.beginKeywords&&(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=d0,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function m0(t,e){Array.isArray(t.illegal)&&(t.illegal=Zr(...t.illegal))}function g0(t,e){if(t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function b0(t,e){t.relevance===void 0&&(t.relevance=1)}const v0=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(i=>{delete t[i]}),t.keywords=n.keywords,t.begin=Pn(n.beforeMatch,jf(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},$0=["of","and","for","in","not","or","if","then","parent","list","value"],w0="keyword";function Kf(t,e,n=w0){const i=Object.create(null);return typeof t=="string"?o(n,t.split(" ")):Array.isArray(t)?o(n,t):Object.keys(t).forEach(function(r){Object.assign(i,Kf(t[r],e,r))}),i;function o(r,s){e&&(s=s.map(l=>l.toLowerCase())),s.forEach(function(l){const a=l.split("|");i[a[0]]=[r,k0(a[0],a[1])]})}}function k0(t,e){return e?Number(e):y0(t)?0:1}function y0(t){return $0.includes(t.toLowerCase())}const Ma={},Tn=t=>{console.error(t)},Ra=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Yn=(t,e)=>{Ma[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),Ma[`${t}/${e}`]=!0)},ko=new Error;function Yf(t,e,{key:n}){let i=0;const o=t[n],r={},s={};for(let l=1;l<=e.length;l++)s[l+i]=o[l],r[l+i]=!0,i+=zf(e[l-1]);t[n]=s,t[n]._emit=r,t[n]._multi=!0}function S0(t){if(Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw Tn("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ko;if(typeof t.beginScope!="object"||t.beginScope===null)throw Tn("beginScope must be object"),ko;Yf(t,t.begin,{key:"beginScope"}),t.begin=Jr(t.begin,{joinWith:""})}}function E0(t){if(Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw Tn("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ko;if(typeof t.endScope!="object"||t.endScope===null)throw Tn("endScope must be object"),ko;Yf(t,t.end,{key:"endScope"}),t.end=Jr(t.end,{joinWith:""})}}function C0(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function A0(t){C0(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),S0(t),E0(t)}function O0(t){function e(s,l){return new RegExp(Ii(s),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(l?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(l,a){a.position=this.position++,this.matchIndexes[this.matchAt]=a,this.regexes.push([a,l]),this.matchAt+=zf(l)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const l=this.regexes.map(a=>a[1]);this.matcherRe=e(Jr(l,{joinWith:"|"}),!0),this.lastIndex=0}exec(l){this.matcherRe.lastIndex=this.lastIndex;const a=this.matcherRe.exec(l);if(!a)return null;const f=a.findIndex((d,p)=>p>0&&d!==void 0),u=this.matchIndexes[f];return a.splice(0,f),Object.assign(a,u)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(l){if(this.multiRegexes[l])return this.multiRegexes[l];const a=new n;return this.rules.slice(l).forEach(([f,u])=>a.addRule(f,u)),a.compile(),this.multiRegexes[l]=a,a}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(l,a){this.rules.push([l,a]),a.type==="begin"&&this.count++}exec(l){const a=this.getMatcher(this.regexIndex);a.lastIndex=this.lastIndex;let f=a.exec(l);if(this.resumingScanAtSamePosition()&&!(f&&f.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,f=u.exec(l)}return f&&(this.regexIndex+=f.position+1,this.regexIndex===this.count&&this.considerAll()),f}}function o(s){const l=new i;return s.contains.forEach(a=>l.addRule(a.begin,{rule:a,type:"begin"})),s.terminatorEnd&&l.addRule(s.terminatorEnd,{type:"end"}),s.illegal&&l.addRule(s.illegal,{type:"illegal"}),l}function r(s,l){const a=s;if(s.isCompiled)return a;[h0,g0,A0,v0].forEach(u=>u(s,l)),t.compilerExtensions.forEach(u=>u(s,l)),s.__beforeBegin=null,[_0,m0,b0].forEach(u=>u(s,l)),s.isCompiled=!0;let f=null;return typeof s.keywords=="object"&&s.keywords.$pattern&&(s.keywords=Object.assign({},s.keywords),f=s.keywords.$pattern,delete s.keywords.$pattern),f=f||/\w+/,s.keywords&&(s.keywords=Kf(s.keywords,t.case_insensitive)),a.keywordPatternRe=e(f,!0),l&&(s.begin||(s.begin=/\B|\b/),a.beginRe=e(a.begin),!s.end&&!s.endsWithParent&&(s.end=/\B|\b/),s.end&&(a.endRe=e(a.end)),a.terminatorEnd=Ii(a.end)||"",s.endsWithParent&&l.terminatorEnd&&(a.terminatorEnd+=(s.end?"|":"")+l.terminatorEnd)),s.illegal&&(a.illegalRe=e(s.illegal)),s.contains||(s.contains=[]),s.contains=[].concat(...s.contains.map(function(u){return N0(u==="self"?s:u)})),s.contains.forEach(function(u){r(u,a)}),s.starts&&r(s.starts,l),a.matcher=o(a),a}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=dn(t.classNameAliases||{}),r(t)}function Vf(t){return t?t.endsWithParent||Vf(t.starts):!1}function N0(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return dn(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:Vf(t)?dn(t,{starts:t.starts?dn(t.starts):null}):Object.isFrozen(t)?dn(t):t}var T0="11.6.0";class M0 extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const rr=Ff,La=dn,Ia=Symbol("nomatch"),R0=7,L0=function(t){const e=Object.create(null),n=Object.create(null),i=[];let o=!0;const r="Could not find the language '{}', did you forget to load/include a language module?",s={disableAutodetect:!0,name:"Plain text",contains:[]};let l={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:Wv};function a(N){return l.noHighlightRe.test(N)}function f(N){let P=N.className+" ";P+=N.parentNode?N.parentNode.className:"";const Z=l.languageDetectRe.exec(P);if(Z){const j=B(Z[1]);return j||(Ra(r.replace("{}",Z[1])),Ra("Falling back to no-highlight mode for this block.",N)),j?Z[1]:"no-highlight"}return P.split(/\s+/).find(j=>a(j)||B(j))}function u(N,P,Z){let j="",V="";typeof P=="object"?(j=N,Z=P.ignoreIllegals,V=P.language):(Yn("10.7.0","highlight(lang, code, ...args) has been deprecated."),Yn("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),V=N,j=P),Z===void 0&&(Z=!0);const Y={code:j,language:V};X("before:highlight",Y);const F=Y.result?Y.result:d(Y.language,Y.code,Z);return F.code=Y.code,X("after:highlight",F),F}function d(N,P,Z,j){const V=Object.create(null);function Y(ee,ae){return ee.keywords[ae]}function F(){if(!we.keywords){je.addText(fe);return}let ee=0;we.keywordPatternRe.lastIndex=0;let ae=we.keywordPatternRe.exec(fe),te="";for(;ae;){te+=fe.substring(ee,ae.index);const Q=Pe.case_insensitive?ae[0].toLowerCase():ae[0],ue=Y(we,Q);if(ue){const[ge,Ae]=ue;if(je.addText(te),te="",V[Q]=(V[Q]||0)+1,V[Q]<=R0&&(ie+=Ae),ge.startsWith("_"))te+=ae[0];else{const Xe=Pe.classNameAliases[ge]||ge;je.addKeyword(ae[0],Xe)}}else te+=ae[0];ee=we.keywordPatternRe.lastIndex,ae=we.keywordPatternRe.exec(fe)}te+=fe.substring(ee),je.addText(te)}function oe(){if(fe==="")return;let ee=null;if(typeof we.subLanguage=="string"){if(!e[we.subLanguage]){je.addText(fe);return}ee=d(we.subLanguage,fe,!0,Fe[we.subLanguage]),Fe[we.subLanguage]=ee._top}else ee=h(fe,we.subLanguage.length?we.subLanguage:null);we.relevance>0&&(ie+=ee.relevance),je.addSublanguage(ee._emitter,ee.language)}function re(){we.subLanguage!=null?oe():F(),fe=""}function ne(ee,ae){let te=1;const Q=ae.length-1;for(;te<=Q;){if(!ee._emit[te]){te++;continue}const ue=Pe.classNameAliases[ee[te]]||ee[te],ge=ae[te];ue?je.addKeyword(ge,ue):(fe=ge,F(),fe=""),te++}}function de(ee,ae){return ee.scope&&typeof ee.scope=="string"&&je.openNode(Pe.classNameAliases[ee.scope]||ee.scope),ee.beginScope&&(ee.beginScope._wrap?(je.addKeyword(fe,Pe.classNameAliases[ee.beginScope._wrap]||ee.beginScope._wrap),fe=""):ee.beginScope._multi&&(ne(ee.beginScope,ae),fe="")),we=Object.create(ee,{parent:{value:we}}),we}function Se(ee,ae,te){let Q=Vv(ee.endRe,te);if(Q){if(ee["on:end"]){const ue=new Oa(ee);ee["on:end"](ae,ue),ue.isMatchIgnored&&(Q=!1)}if(Q){for(;ee.endsParent&&ee.parent;)ee=ee.parent;return ee}}if(ee.endsWithParent)return Se(ee.parent,ae,te)}function se(ee){return we.matcher.regexIndex===0?(fe+=ee[0],1):(ce=!0,0)}function he(ee){const ae=ee[0],te=ee.rule,Q=new Oa(te),ue=[te.__beforeBegin,te["on:begin"]];for(const ge of ue)if(ge&&(ge(ee,Q),Q.isMatchIgnored))return se(ae);return te.skip?fe+=ae:(te.excludeBegin&&(fe+=ae),re(),!te.returnBegin&&!te.excludeBegin&&(fe=ae)),de(te,ee),te.returnBegin?0:ae.length}function Ue(ee){const ae=ee[0],te=P.substring(ee.index),Q=Se(we,ee,te);if(!Q)return Ia;const ue=we;we.endScope&&we.endScope._wrap?(re(),je.addKeyword(ae,we.endScope._wrap)):we.endScope&&we.endScope._multi?(re(),ne(we.endScope,ee)):ue.skip?fe+=ae:(ue.returnEnd||ue.excludeEnd||(fe+=ae),re(),ue.excludeEnd&&(fe=ae));do we.scope&&je.closeNode(),!we.skip&&!we.subLanguage&&(ie+=we.relevance),we=we.parent;while(we!==Q.parent);return Q.starts&&de(Q.starts,ee),ue.returnEnd?0:ae.length}function Le(){const ee=[];for(let ae=we;ae!==Pe;ae=ae.parent)ae.scope&&ee.unshift(ae.scope);ee.forEach(ae=>je.openNode(ae))}let _e={};function pe(ee,ae){const te=ae&&ae[0];if(fe+=ee,te==null)return re(),0;if(_e.type==="begin"&&ae.type==="end"&&_e.index===ae.index&&te===""){if(fe+=P.slice(ae.index,ae.index+1),!o){const Q=new Error(`0 width match regex (${N})`);throw Q.languageName=N,Q.badRule=_e.rule,Q}return 1}if(_e=ae,ae.type==="begin")return he(ae);if(ae.type==="illegal"&&!Z){const Q=new Error('Illegal lexeme "'+te+'" for mode "'+(we.scope||"<unnamed>")+'"');throw Q.mode=we,Q}else if(ae.type==="end"){const Q=Ue(ae);if(Q!==Ia)return Q}if(ae.type==="illegal"&&te==="")return 1;if(Ee>1e5&&Ee>ae.index*3)throw new Error("potential infinite loop, way more iterations than matches");return fe+=te,te.length}const Pe=B(N);if(!Pe)throw Tn(r.replace("{}",N)),new Error('Unknown language: "'+N+'"');const x=O0(Pe);let me="",we=j||x;const Fe={},je=new l.__emitter(l);Le();let fe="",ie=0,ve=0,Ee=0,ce=!1;try{for(we.matcher.considerAll();;){Ee++,ce?ce=!1:we.matcher.considerAll(),we.matcher.lastIndex=ve;const ee=we.matcher.exec(P);if(!ee)break;const ae=P.substring(ve,ee.index),te=pe(ae,ee);ve=ee.index+te}return pe(P.substring(ve)),je.closeAllNodes(),je.finalize(),me=je.toHTML(),{language:N,value:me,relevance:ie,illegal:!1,_emitter:je,_top:we}}catch(ee){if(ee.message&&ee.message.includes("Illegal"))return{language:N,value:rr(P),illegal:!0,relevance:0,_illegalBy:{message:ee.message,index:ve,context:P.slice(ve-100,ve+100),mode:ee.mode,resultSoFar:me},_emitter:je};if(o)return{language:N,value:rr(P),illegal:!1,relevance:0,errorRaised:ee,_emitter:je,_top:we};throw ee}}function p(N){const P={value:rr(N),illegal:!1,relevance:0,_top:s,_emitter:new l.__emitter(l)};return P._emitter.addText(N),P}function h(N,P){P=P||l.languages||Object.keys(e);const Z=p(N),j=P.filter(B).filter(G).map(re=>d(re,N,!1));j.unshift(Z);const V=j.sort((re,ne)=>{if(re.relevance!==ne.relevance)return ne.relevance-re.relevance;if(re.language&&ne.language){if(B(re.language).supersetOf===ne.language)return 1;if(B(ne.language).supersetOf===re.language)return-1}return 0}),[Y,F]=V,oe=Y;return oe.secondBest=F,oe}function _(N,P,Z){const j=P&&n[P]||Z;N.classList.add("hljs"),N.classList.add(`language-${j}`)}function g(N){let P=null;const Z=f(N);if(a(Z))return;if(X("before:highlightElement",{el:N,language:Z}),N.children.length>0&&(l.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(N)),l.throwUnescapedHTML))throw new M0("One of your code blocks includes unescaped HTML.",N.innerHTML);P=N;const j=P.textContent,V=Z?u(j,{language:Z,ignoreIllegals:!0}):h(j);N.innerHTML=V.value,_(N,Z,V.language),N.result={language:V.language,re:V.relevance,relevance:V.relevance},V.secondBest&&(N.secondBest={language:V.secondBest.language,relevance:V.secondBest.relevance}),X("after:highlightElement",{el:N,result:V,text:j})}function E(N){l=La(l,N)}const b=()=>{D(),Yn("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function C(){D(),Yn("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let M=!1;function D(){if(document.readyState==="loading"){M=!0;return}document.querySelectorAll(l.cssSelector).forEach(g)}function L(){M&&D()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",L,!1);function A(N,P){let Z=null;try{Z=P(t)}catch(j){if(Tn("Language definition for '{}' could not be registered.".replace("{}",N)),o)Tn(j);else throw j;Z=s}Z.name||(Z.name=N),e[N]=Z,Z.rawDefinition=P.bind(null,t),Z.aliases&&W(Z.aliases,{languageName:N})}function R(N){delete e[N];for(const P of Object.keys(n))n[P]===N&&delete n[P]}function U(){return Object.keys(e)}function B(N){return N=(N||"").toLowerCase(),e[N]||e[n[N]]}function W(N,{languageName:P}){typeof N=="string"&&(N=[N]),N.forEach(Z=>{n[Z.toLowerCase()]=P})}function G(N){const P=B(N);return P&&!P.disableAutodetect}function I(N){N["before:highlightBlock"]&&!N["before:highlightElement"]&&(N["before:highlightElement"]=P=>{N["before:highlightBlock"](Object.assign({block:P.el},P))}),N["after:highlightBlock"]&&!N["after:highlightElement"]&&(N["after:highlightElement"]=P=>{N["after:highlightBlock"](Object.assign({block:P.el},P))})}function K(N){I(N),i.push(N)}function X(N,P){const Z=N;i.forEach(function(j){j[Z]&&j[Z](P)})}function J(N){return Yn("10.7.0","highlightBlock will be removed entirely in v12.0"),Yn("10.7.0","Please use highlightElement now."),g(N)}Object.assign(t,{highlight:u,highlightAuto:h,highlightAll:D,highlightElement:g,highlightBlock:J,configure:E,initHighlighting:b,initHighlightingOnLoad:C,registerLanguage:A,unregisterLanguage:R,listLanguages:U,getLanguage:B,registerAliases:W,autoDetection:G,inherit:La,addPlugin:K}),t.debugMode=function(){o=!1},t.safeMode=function(){o=!0},t.versionString=T0,t.regex={concat:Pn,lookahead:jf,either:Zr,optional:Kv,anyNumberOfTimes:Gv};for(const N in so)typeof so[N]=="object"&&Kr.exports(so[N]);return Object.assign(t,so),t};var Di=L0({}),I0=Di;Di.HighlightJS=Di;Di.default=Di;const _t=I0;function P0(t){t.lineNumbersBlock=function(e,n){t.highlightBlock(e,n),e.innerHTML=H0(e,n)}}var D0="hljs-ln",Pa="hljs-ln-line",Zf="hljs-ln-code",U0="hljs-ln-numbers",B0="hljs-ln-n",fo="data-line-number",Jf=/\r\n|\r|\n/g;function F0(t){for(var e=t;e;){if(e.className&&e.className.indexOf("hljs-ln-code")!==-1)return!0;e=e.parentNode}return!1}function j0(t){for(var e=t;e.nodeName!=="TABLE";)e=e.parentNode;return e}function z0(t){for(var e=t.toString(),n=t.anchorNode;n.nodeName!=="TD";)n=n.parentNode;for(var i=t.focusNode;i.nodeName!=="TD";)i=i.parentNode;var o=parseInt(n.dataset.lineNumber,10),r=parseInt(i.dataset.lineNumber,10);if(o!==r){var s=n.textContent,l=i.textContent;if(o>r){var a=o;o=r,r=a,a=s,s=l,l=a}for(;e.indexOf(s)!==0;)s=s.slice(1);for(;e.lastIndexOf(l)===-1;)l=l.slice(0,-1);for(var f=s,u=j0(n),d=o+1;d<r;++d){var p=`.${Zf}[${fo}="${d}"]`,h=u.querySelector(p);f+=`
`+h.textContent}return f+=`
`+l,f}else return e}document.addEventListener("copy",function(t){var e=window.getSelection();if(F0(e.anchorNode)){var n;window.navigator.userAgent.indexOf("Edge")!==-1?n=z0(e):n=e.toString(),t.clipboardData.setData("text/plain",n),t.preventDefault()}});function H0(t,e){e=e||{singleLine:!1};var n=e.singleLine?0:1;return Qf(t),q0(t.innerHTML,n)}function q0(t,e){var n=Xf(t);if(n[n.length-1].trim()===""&&n.pop(),n.length>e){for(var i="",o=0,r=n.length;o<r;o++){let s=o+1;i+=`<tr><td class="${Pa} ${U0}" ${fo}="${s}"><div class="${B0}" ${fo}="${s}"></div></td><td class="${Pa} ${Zf}" ${fo}="${s}">`+(n[o].length>0?n[o]:" ")+"</td></tr>"}return`<table class="${D0}">${i}</table>`}return t}function Qf(t){var e=t.childNodes;for(var n in e)if(Object.hasOwn(e,n)){var i=e[n];G0(i.textContent)>0&&(i.childNodes.length>0?Qf(i):W0(i.parentNode))}}function W0(t){var e=t.className;if(/hljs-/.test(e)){for(var n=Xf(t.innerHTML),i=0,o="";i<n.length;i++){var r=n[i].length>0?n[i]:" ";o+=`<span class="${e}">${r}</span>
`}t.innerHTML=o.trim()}}function Xf(t){return t.length===0?[]:t.split(Jf)}function G0(t){return(t.trim().match(Jf)||[]).length}function K0(t){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:["from","maintainer","expose","env","arg","user","onbuild","stopsignal"],contains:[t.HASH_COMMENT_MODE,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,t.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}}const Da="[A-Za-z$_][0-9A-Za-z$_]*",Y0=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],V0=["true","false","null","undefined","NaN","Infinity"],xf=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],eu=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],tu=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Z0=["arguments","this","super","console","window","document","localStorage","module","global"],J0=[].concat(tu,xf,eu);function Q0(t){const e=t.regex,n=(P,{after:Z})=>{const j="</"+P[0].slice(1);return P.input.indexOf(j,Z)!==-1},i=Da,o={begin:"<>",end:"</>"},r=/<[A-Za-z0-9\\._:-]+\s*\/>/,s={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(P,Z)=>{const j=P[0].length+P.index,V=P.input[j];if(V==="<"||V===","){Z.ignoreMatch();return}V===">"&&(n(P,{after:j})||Z.ignoreMatch());let Y;if((Y=P.input.substring(j).match(/^\s+extends\s+/))&&Y.index===0){Z.ignoreMatch();return}}},l={$pattern:Da,keyword:Y0,literal:V0,built_in:J0,"variable.language":Z0},a="[0-9](_?[0-9])*",f=`\\.(${a})`,u="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",d={className:"number",variants:[{begin:`(\\b(${u})((${f})|\\.)?|(${f}))[eE][+-]?(${a})\\b`},{begin:`\\b(${u})\\b((${f})\\b|\\.)?|(${f})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},p={className:"subst",begin:"\\$\\{",end:"\\}",keywords:l,contains:[]},h={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"xml"}},_={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[t.BACKSLASH_ESCAPE,p],subLanguage:"css"}},g={className:"string",begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE,p]},b={className:"comment",variants:[t.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:i+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),t.C_BLOCK_COMMENT_MODE,t.C_LINE_COMMENT_MODE]},C=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,_,g,d];p.contains=C.concat({begin:/\{/,end:/\}/,keywords:l,contains:["self"].concat(C)});const M=[].concat(b,p.contains),D=M.concat([{begin:/\(/,end:/\)/,keywords:l,contains:["self"].concat(M)}]),L={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:D},A={variants:[{match:[/class/,/\s+/,i,/\s+/,/extends/,/\s+/,e.concat(i,"(",e.concat(/\./,i),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,i],scope:{1:"keyword",3:"title.class"}}]},R={relevance:0,match:e.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...xf,...eu]}},U={label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},B={variants:[{match:[/function/,/\s+/,i,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[L],illegal:/%/},W={relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"};function G(P){return e.concat("(?!",P.join("|"),")")}const I={match:e.concat(/\b/,G([...tu,"super"]),i,e.lookahead(/\(/)),className:"title.function",relevance:0},K={begin:e.concat(/\./,e.lookahead(e.concat(i,/(?![0-9A-Za-z$_(])/))),end:i,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},X={match:[/get|set/,/\s+/,i,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},L]},J="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+t.UNDERSCORE_IDENT_RE+")\\s*=>",N={match:[/const|var|let/,/\s+/,i,/\s*/,/=\s*/,/(async\s*)?/,e.lookahead(J)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[L]};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:l,exports:{PARAMS_CONTAINS:D,CLASS_REFERENCE:R},illegal:/#(?![$_A-z])/,contains:[t.SHEBANG({label:"shebang",binary:"node",relevance:5}),U,t.APOS_STRING_MODE,t.QUOTE_STRING_MODE,h,_,g,b,d,R,{className:"attr",begin:i+e.lookahead(":"),relevance:0},N,{begin:"("+t.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[b,t.REGEXP_MODE,{className:"function",begin:J,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:D}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:o.begin,end:o.end},{match:r},{begin:s.begin,"on:begin":s.isTrulyOpeningTag,end:s.end}],subLanguage:"xml",contains:[{begin:s.begin,end:s.end,skip:!0,contains:["self"]}]}]},B,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+t.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[L,t.inherit(t.TITLE_MODE,{begin:i,className:"title.function"})]},{match:/\.\.\./,relevance:0},K,{match:"\\$"+i,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[L]},I,W,A,X,{match:/\$[(.]/}]}}function X0(t){const e=t.regex,n={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},i={begin:"^[-\\*]{3,}",end:"$"},o={className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},r={className:"bullet",begin:"^[ 	]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},s={begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]},l=/[A-Za-z][A-Za-z0-9+.-]*/,a={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.concat(/\[.+?\]\(/,l,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},f={className:"strong",contains:[],variants:[{begin:/_{2}/,end:/_{2}/},{begin:/\*{2}/,end:/\*{2}/}]},u={className:"emphasis",contains:[],variants:[{begin:/\*(?!\*)/,end:/\*/},{begin:/_(?!_)/,end:/_/,relevance:0}]},d=t.inherit(f,{contains:[]}),p=t.inherit(u,{contains:[]});f.contains.push(p),u.contains.push(d);let h=[n,a];return[f,u,d,p].forEach(E=>{E.contains=E.contains.concat(h)}),h=h.concat(f,u),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:h},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:h}]}]},n,r,f,u,{className:"quote",begin:"^>\\s+",contains:h,end:"$"},o,i,a,s]}}function x0(t){return{name:"Mojolicious",subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}}function e$(t){const e=t.regex,n=["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"],i=/[dualxmsipngr]{0,12}/,o={$pattern:/[\w.]+/,keyword:n.join(" ")},r={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:o},s={begin:/->\{/,end:/\}/},l={variants:[{begin:/\$\d/},{begin:e.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},a=[t.BACKSLASH_ESCAPE,r,l],f=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],u=(h,_,g="\\1")=>{const E=g==="\\1"?g:e.concat(g,_);return e.concat(e.concat("(?:",h,")"),_,/(?:\\.|[^\\\/])*?/,E,/(?:\\.|[^\\\/])*?/,g,i)},d=(h,_,g)=>e.concat(e.concat("(?:",h,")"),_,/(?:\\.|[^\\\/])*?/,g,i),p=[l,t.HASH_COMMENT_MODE,t.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),s,{className:"string",contains:a,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[t.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[t.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+t.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[t.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:u("s|tr|y",e.either(...f,{capture:!0}))},{begin:u("s|tr|y","\\(","\\)")},{begin:u("s|tr|y","\\[","\\]")},{begin:u("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:d("(?:m|qr)?",/\//,/\//)},{begin:d("m|qr",e.either(...f,{capture:!0}),/\1/)},{begin:d("m|qr",/\(/,/\)/)},{begin:d("m|qr",/\[/,/\]/)},{begin:d("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[t.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return r.contains=p,s.contains=p,{name:"Perl",aliases:["pl","pm"],keywords:o,contains:p}}const t$=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),n$=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],i$=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],o$=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],r$=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],s$=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function l$(t){const e=t$(t),n=r$,i=o$,o="@[a-z-]+",r="and or not only",l={className:"variable",begin:"(\\$"+"[a-zA-Z-][a-zA-Z0-9_-]*"+")\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,e.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},e.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+n$.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},l,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},e.CSS_VARIABLE,{className:"attribute",begin:"\\b("+s$.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[e.BLOCK_COMMENT,l,e.HEXCOLOR,e.CSS_NUMBER_MODE,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.IMPORTANT,e.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:o,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:r,attribute:i$.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},l,t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,e.HEXCOLOR,e.CSS_NUMBER_MODE]},e.FUNCTION_DISPATCH]}}function a$(t){const e=t.regex,n=e.concat(/[\p{L}_]/u,e.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i=/[\p{L}0-9._:-]+/u,o={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},s=t.inherit(r,{begin:/\(/,end:/\)/}),l=t.inherit(t.APOS_STRING_MODE,{className:"string"}),a=t.inherit(t.QUOTE_STRING_MODE,{className:"string"}),f={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:i,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[o]},{begin:/'/,end:/'/,contains:[o]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,a,l,s,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,s,a,l]}]}]},t.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},o,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[a]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[f],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[f],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:e.concat(/</,e.lookahead(e.concat(n,e.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:f}]},{className:"tag",begin:e.concat(/<\//,e.lookahead(e.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}}function f$(t){const r={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:r,illegal:"</",contains:[t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE,{className:"string",variants:[t.QUOTE_STRING_MODE,t.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:t.C_NUMBER_RE+"[i]",relevance:1},t.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[t.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:r,illegal:/["']/}]}]}}function u$(t){const e=t.regex,n={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{\w+\}/},{begin:e.concat(/[$@]/,t.UNDERSCORE_IDENT_RE)}]},o={endsWithParent:!0,keywords:{$pattern:/[a-z_]{2,}|\/dev\/poll/,literal:["on","off","yes","no","true","false","none","blocked","debug","info","notice","warn","error","crit","select","break","last","permanent","redirect","kqueue","rtsig","epoll","poll","/dev/poll"]},relevance:0,illegal:"=>",contains:[t.HASH_COMMENT_MODE,{className:"string",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[n]},{className:"regexp",contains:[t.BACKSLASH_ESCAPE,n],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]?\\b",relevance:0},n]};return{name:"Nginx config",aliases:["nginxconf"],contains:[t.HASH_COMMENT_MODE,{beginKeywords:"upstream location",end:/;|\{/,contains:o.contains,keywords:{section:"upstream location"}},{className:"section",begin:e.concat(t.UNDERSCORE_IDENT_RE+e.lookahead(/\s+\{/)),relevance:0},{begin:e.lookahead(t.UNDERSCORE_IDENT_RE+"\\s"),end:";|\\{",contains:[{className:"attribute",begin:t.UNDERSCORE_IDENT_RE,starts:o}],relevance:0}],illegal:"[^\\s\\}\\{]"}}function c$(t){const e=t.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],l={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},a={className:"meta",begin:/^(>>>|\.\.\.) /},f={className:"subst",begin:/\{/,end:/\}/,keywords:l,illegal:/#/},u={begin:/\{\{/,relevance:0},d={className:"string",contains:[t.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[t.BACKSLASH_ESCAPE,a,u,f]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[t.BACKSLASH_ESCAPE,a,u,f]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[t.BACKSLASH_ESCAPE,u,f]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[t.BACKSLASH_ESCAPE,u,f]},t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},p="[0-9](_?[0-9])*",h=`(\\b(${p}))?\\.(${p})|\\b(${p})\\.`,_=`\\b|${i.join("|")}`,g={className:"number",relevance:0,variants:[{begin:`(\\b(${p})|(${h}))[eE][+-]?(${p})[jJ]?(?=${_})`},{begin:`(${h})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${_})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${_})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${_})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${_})`},{begin:`\\b(${p})[jJ](?=${_})`}]},E={className:"comment",begin:e.lookahead(/# type:/),end:/$/,keywords:l,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},b={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:l,contains:["self",a,g,d,t.HASH_COMMENT_MODE]}]};return f.contains=[d,g,a],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:l,illegal:/(<\/|->|\?)|=>/,contains:[a,g,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},d,E,t.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[b]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[g,b,d]}]}}function p$(t){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}}const d$=t=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:t.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z][A-Za-z0-9_-]*/}}),h$=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],_$=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],m$=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],g$=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],b$=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function v$(t){const e=t.regex,n=d$(t),i={begin:/-(webkit|moz|ms|o)-(?=[a-z])/},o="and or not only",r=/@-?\w[\w]*(-\w+)*/,s="[a-zA-Z-][a-zA-Z0-9_-]*",l=[t.APOS_STRING_MODE,t.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,i,n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\."+s,relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+m$.join("|")+")"},{begin:":(:)?("+g$.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+b$.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...l,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...l,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:e.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:r},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:o,attribute:_$.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...l,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+h$.join("|")+")\\b"}]}}function $$(t){const e=t.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:e.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:e.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}}function w$(t){const e=t.regex,n="HTTP/(2|1\\.[01])",i=/[A-Za-z][A-Za-z0-9-]*/,o={className:"attribute",begin:e.concat("^",i,"(?=\\:\\s)"),starts:{contains:[{className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}},r=[o,{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+n+" \\d{3})",end:/$/,contains:[{className:"meta",begin:n},{className:"number",begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},{begin:"(?=^[A-Z]+ (.*?) "+n+"$)",end:/$/,contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:n},{className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},t.inherit(o,{relevance:0})]}}function k$(t){const e="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ 	]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ 	]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ 	]|$)"}]},o={className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]},r={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[t.BACKSLASH_ESCAPE,o]},s=t.inherit(r,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),l="[0-9]{4}(-[0-9][0-9]){0,2}",a="([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?",f="(\\.[0-9]*)?",u="([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?",d={className:"number",begin:"\\b"+l+a+f+u+"\\b"},p={end:",",endsWithParent:!0,excludeEnd:!0,keywords:e,relevance:0},h={begin:/\{/,end:/\}/,contains:[p],illegal:"\\n",relevance:0},_={begin:"\\[",end:"\\]",contains:[p],illegal:"\\n",relevance:0},g=[i,{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+t.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+t.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},t.HASH_COMMENT_MODE,{beginKeywords:e,keywords:{literal:e}},d,{className:"number",begin:t.C_NUMBER_RE+"\\b",relevance:0},h,_,r],E=[...g];return E.pop(),E.push(s),p.contains=E,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:g}}_t.registerLanguage("css",v$);_t.registerLanguage("diff",$$);_t.registerLanguage("dockerfile",K0);_t.registerLanguage("go",f$);_t.registerLanguage("http",w$);_t.registerLanguage("javascript",Q0);_t.registerLanguage("markdown",X0);_t.registerLanguage("mojolicious",x0);_t.registerLanguage("nginx",u$);_t.registerLanguage("perl",e$);_t.registerLanguage("python",c$);_t.registerLanguage("scss",l$);_t.registerLanguage("shell",p$);_t.registerLanguage("xml",a$);_t.registerLanguage("yaml",k$);P0(_t);var Sr={},y$={get exports(){return Sr},set exports(t){Sr=t}};function Ua(t){let e=document.createElement("div");const n=[[t,e]],i=[];for(;n.length;){const[o,r]=n.shift();let s,l,a=typeof o;if(o===null||a=="undefined"?a="null":Array.isArray(o)&&(a="array"),a=="array")l=f=>f,l.len=o.length,s=document.createElement("div"),s.className="json-array "+(l.len?"has-items":"is-empty");else if(a=="object"){const f=Object.keys(o).sort();l=u=>f[u],l.len=f.length,s=document.createElement("div"),s.className="json-object "+(l.len?"has-items":"is-empty")}else s=document.createElement("span"),s.className="json-"+a,s.textContent=a=="null"?"null":a!="boolean"?o:o?"true":"false";if(l){const f=document.createElement("span");if(f.className="json-type",f.textContent=l.len?a+"["+l.len+"]":"{}",r.appendChild(f),i.indexOf(o)!=-1)e.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(let u=0;u<l.len;u++){const d=l(u),p=document.createElement("div"),h=document.createElement("span");h.className="json-key",h.textContent=d,p.appendChild(h),s.appendChild(p),n.push([o[d],p])}i.push(o)}}r.className="json-item "+s.className.replace(/^json-/,"contains-"),r.appendChild(s)}return e}try{y$.exports={jsonhtmlify:Ua}}catch{window.jsonhtmlify=Ua}function Ba(t,e){const n=e.vars?xe.l(e.message,...e.vars):e.message;return t?xe.raw(n):xe.md(n)}const S$={};let E$=0;class C$ extends Rt{constructor(e){super();let n=e.connection_id;e.conversation_id&&(n+=":"+e.conversation_id),this.prop("ro","length",()=>this.messages.length),this.prop("ro","messages",[]),this.prop("rw","expandUrlToMedia",!0),this.prop("persist","raw",!1,{key:n+":raw"}),this.embedCache=S$}clear(){return this.messages.length=0,this.update({messages:!0})}get(e){return e<0?this.messages.slice(e)[0]:this.messages[e]}push(e){return[].push.apply(this.messages,this._fill(e)),this.update({messages:!0})}render(e=-1){if(e!==-1){const i=this.get(e);return i&&!i.hasBeenSeen&&(i.embeds=this._embeds(i),i.hasBeenSeen=!0,this.update({messages:!0})),this.messages}let n={};return this.messages.map((i,o)=>(i.index=o,i.embeds||(i.dayChanged=this._dayChanged(i,n),i.className=this._className(i,n),i.embeds=[],i.html=Ba(this.raw,i)),n=i))}toArray(){return this.messages}update(e){if(this._changed(e,"expandUrlToMedia")||this._changed(e,"raw")){const n=Object.hasOwn(e,"raw")?e.raw:this.raw;for(let i of this.messages)i.hasBeenSeen&&(i.embeds=this._embeds(i)),i.html=Ba(n,i);this.update({messages:!0})}return super.update(e)}unshift(e){return[].unshift.apply(this.messages,this._fill(e)),this.update({messages:!0})}_changed(e,n){return Object.hasOwn(e,n)&&e[n]!==this[n]}_className(e,n){const i=["message"];e.type&&i.push("is-type-"+e.type),e.highlight&&i.push("is-highlighted");const o=e.from===n.from&&e.conversation_id===n.conversation_id&&e.connection_id===n.connection_id;return i.push(!e.dayChanged&&o?"has-same-from":"has-not-same-from"),i.join(" ")}_dayChanged(e,n){return!!(n.ts&&e.ts.getDate()!==n.ts.getDate())}_embeds(e){const n=[];return this._msgDetails(e)&&n.push(Promise.resolve({className:"le-details",details:!0,nodes:[Sr.jsonhtmlify(e.details).lastChild]})),!this.expandUrlToMedia||this.raw||e.type==="notice"?this._embedsPromises(n):((e.message.match(/https?:\/\/(\S+)/g)||[]).forEach(i=>{i=i.replace(/(\W)?$/,""),this.embedCache[i]||(this.embedCache[i]=this._loadEmbed(e,i)),n.push(this.embedCache[i])}),this._embedsPromises(n))}_embedsPromises(e){return e.map(n=>(n.finally(()=>this.update({messages:!0})),n.catch(i=>console.error("[Messages:embed]",i))))}_fill(e){for(let n=0;n<e.length;n++){const i=e[n];i.from||([i.internal,i.from]=[!0,"Convos"]),i.type||(i.type="notice"),i.color=i.from==="Convos"?"inherit":po(i.from.toLowerCase()),i.ts=new vt(i.ts),i.id=++E$}return e}_isProbablyConvosVideoLink(e){return!!e.match(/\/video\/[^/]+\/[^/]+($|\?)/)}async _loadEmbed(e,n){const o=(await et.op("embed",{url:n}).perform()).res.body;if(o.nodes=[],o.provider=(o.provider_name||"").toLowerCase(),!o.html)return o;let r=document.createRange().createContextualFragment(o.html).firstChild;return r&&(r=this._renderVideoChat(e,o,r)||this._renderPaste(e,o,r)||r,bt(r,"img",["error",s=>s.target.style.display="none"]),bt(r,".le-goto-link",s=>s.parentNode.children.length===1&&s.parentNode.remove()),delete o.html,o.className=r.className,o.nodes=r.tagName.toLowerCase()==="iframe"?[r]:[].slice.call(r.childNodes,0)),o}_msgDetails(e){if(Object.hasOwn(e,"details"))return e.details;if(e.type!=="error"&&e.type!=="notice")return e.details=null;const n={...e.sent||e};return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","hasBeenSeen","embeds","event","fresh","highlight","html","id","index","internal","method","silent","stopPropagation","ts"].forEach(i=>delete n[i]),Object.keys(n).sort().join(":")==="from:message:type"?e.details=null:e.details=n}_renderPaste(e,n,i){const o=i.querySelector("pre");if(!o)return;const r=i.querySelector(".le-meta");return r&&r.appendChild(ff("a",{className:"prevent-default",href:"#action:expand:"+e.index,innerHTML:'<i class="fas fa-angle-down"/>'})),_t.lineNumbersBlock(o),i}_renderVideoChat(e,n,i){const o=new URL(n.url).pathname.replace(/\/+$/,"").split("/");if(!(o.length&&(i.classList.contains("le-video-chat")||this._isProbablyConvosVideoLink(n.url))))return;const l=decodeURIComponent(o.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(f,u,d)=>u+" "+d.toUpperCase()).replace(/((?:^|[ ])\w)/g,f=>f.toUpperCase()),a=xe.l('Do you want to join the %1 video chat with "%2"?',n.provider_name,l);return i=document.createElement("div"),i.className="le-card le-rich le-join-request le-provider-"+n.provider,i.innerHTML='<a class="le-thumbnail" href="'+n.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+a+'</h3><p class="le-description"><a href="'+n.url+'" target="convos_video">'+xe.l("Yes, I want to join.")+"</a></p>",e.fresh&&this.emit("notify",{...e,message:a}),i}}class A$ extends Rt{constructor(){super(),this.prop("ro","length",()=>this._map.size),this.prop("ro","_map",new Map)}clear(){const e=this.me();return this._map.clear(),this.add(e),this}delete(e){return this._map.delete(this._id(e)),this.update({})}get(e){return this._map.get(this._id(e))}has(e){return this._map.has(this._id(e))}me(){return Array.from(this._map.values()).filter(e=>e.me)[0]||this._defaultParticipant()}nicks(){return Array.from(this._map.values()).map(e=>e.nick)}rename(e,n){const i=this.get(e)||{};return delete i.id,i.nick=n,this.delete(e),this.add(i)}add(e){if(Array.isArray(e))return e.forEach(i=>this.add(i)),this;e.id=this._id(e.nick),e.color=po(e.id),e.group=po(e.id),Be.string(e.mode)?(e.modes=hr(ch,e.mode),e.group=e.modes.founder?7:e.modes.admin?6:e.modes.operator?5:e.modes.half_operator?4:e.modes.voice?3:e.modes.bot?2:e.modes.service_bot?1:0):(e.modes={},e.group=0);const n=this._map.get(e.id);return n&&Object.keys(n).forEach(i=>e[i]||(e[i]=n[i])),e.nick||(e.nick=e.name),this._map.set(e.id,e),this.update({length:!0})}toArray(){return Array.from(this._map.values()).sort((e,n)=>n.group-e.group||e.nick.localeCompare(n.nick))}_defaultParticipant(){return{color:"#000000",id:"",modes:{},nick:""}}_id(e){return e.toLowerCase()}}const Vn=ui("socket"),ai=t=>ai.singletons[t]||(ai.singletons[t]=new O$);ai.singletons={};const ji=[];ji[WebSocket.CONNECTING]="connecting";ji[WebSocket.OPEN]="open";ji[WebSocket.CLOSING]="closing";ji[WebSocket.CLOSED]="closed";class O$ extends Rt{constructor(){super(),this.prop("ro","readyState",()=>this.ws.readyState),this.prop("ro","readyStateHuman",()=>ji[this.ws.readyState]),this.prop("ro","waiting",new Map),this.prop("rw","closed",0),this.prop("rw","error",""),this.prop("rw","keepaliveInterval",1e4),this.prop("rw","url",""),this.id=0,this.queue=[],this.keepClosed=!0,this._resetWebSocket()}close(e,n){return typeof e!="number"&&([e,n]=[1e3,e]),this.ws.close&&this.ws.close(e,n),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}deflateMessage(e){return JSON.stringify(e)}deleteWaitingMessage(e){this.waiting.delete(e),this.update({waiting:!0})}getWaitingMessages(e){return arguments.length===0?Array.from(this.waiting.values()):e.map(n=>this.waiting.get(n))}inflateMessage(e){return JSON.parse(e)}is(e){return this.ws.readyState===WebSocket[e.toUpperCase()]}open(){if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=e=>this._onClose(e),this.ws.onerror=e=>this._onError(e),this.ws.onmessage=e=>this._onMessage(e),this.ws.onopen=e=>this._onOpen(e),this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(e){this._onError(e.message?e:{message:String(e)})}return this}reconnectIn(e){return e.code===1008||e.code===1011?!1:this.closed<=1?1e3:this.closed>5?1e4:1e3*(this.closed*2)}send(e,n){const i=e.id||String(++this.id);return this.queue.push({...e,id:i}),this.open(),this._dequeue(),n&&this.on("message_"+i,n),this}_dequeue(){const e=this.queue;for(e.length&&this.update({waiting:!0});e.length;){if(this.ws.readyState!==WebSocket.OPEN)return;const n=e.shift();Vn.trace("<<<",n),this.ws.send(this.deflateMessage(n)),n.waitingForResponse=!0,n.ts||(n.ts=new vt),this.waiting.set(n.id,n)}}_keepAliveStart(){this._keepAliveStop(),this.keepaliveTid=setInterval(()=>this.ws.readyState===WebSocket.OPEN&&this.ws.send("{}"),this.keepaliveInterval)}_keepAliveStop(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}_onClose(e){Vn.debug("close",e);for(let[n,i]of this.waiting)Object.keys(i).length<=1&&this.waiting.delete(n),i.waitingForResponse=!1;this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(e))}_onError(e){let n=String(e.message||e);(!n||n.indexOf("[")===0)&&(n="Could not connect."),Vn.error("error",n,e),this.update({error:n})}_onMessage(e){const n=this.inflateMessage(e.data);if(Vn.trace(">>>",n),n.bubbles=!0,n.stopPropagation=()=>{n.bubbles=!1},n.id&&(this.emit("message_"+n.id,n),this.waiting.delete(n.id)),n.bubbles&&this.emit("message",n),this.update({waiting:!0}),!(!n.errors||n.id)){for(let i of this.waiting.keys())this.emit("message_"+i,n);this.waiting.clear()}}_onOpen(e){Vn.info("open",e),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}_reconnectStart(e){if(this._reconnectStop(),Vn.info("reconnect in",e),e===!0)return this.open();if(typeof e!="number")return this.keepClosed=!0;this.reconnectTid=setTimeout(()=>this.open(),e)}_reconnectStop(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}_resetWebSocket(){this.ws={readyState:WebSocket.CLOSED}}}const N$=new RegExp("^[#&]");class Ui extends Rt{constructor(e){super();const n=[e.connection_id,e.conversation_id,""].filter(Be.defined).join(":");this.prop("persist","userInput","",{key:n+"userInput"}),this.prop("ro","color",po(e.conversation_id||e.connection_id||"")),this.prop("ro","connection_id",e.connection_id||""),this.prop("ro","messages",new C$(e)),this.prop("ro","participants",new A$),this.prop("ro","path",De.conversationPath(e)),this.prop("rw","historyStartAt",null),this.prop("rw","historyStopAt",null),this.prop("rw","info",e.info||{}),this.prop("rw","modes",{}),this.prop("rw","name",e.name||e.conversation_id||e.connection_id||"ERR"),this.prop("rw","notifications",e.notifications||0),this.prop("rw","status","pending"),this.prop("rw","topic",e.topic||""),this.prop("rw","unread",e.unread||0),Object.hasOwn(e,"conversation_id")?(this.prop("ro","conversation_id",e.conversation_id),this.prop("ro","title",()=>[this.name,this.connection_id.replace(/^\w+-/,"")].join(" - ")),this.prop("rw","frozen",e.frozen||"")):(this.prop("ro","frozen",()=>this._calculateFrozen()),this.prop("ro","title",()=>this.name)),e.conversation_id&&this.prop("persist","wantNotifications",this.is("private"),{key:e.conversation_id+":wantNotifications"}),this.socket=e.socket||ai("/events"),this.messages.on("notify",i=>this.notify(i)),this._addOperations()}addMessages(e,n){if(!Array.isArray(e)){if(this._maybeIncreaseUnread(e),this._maybeNotify(e),!this.historyStopAt&&["action","private"].indexOf(e.type)!==-1)return;e.fresh=!0,e=[e]}return this.messages[n||"push"](e),this}is(e){return e==="connection"?!this.conversation_id:e==="conversation"?this.conversation_id&&!this.is("notifications"):e==="frozen"?this.frozen&&!0:e==="locked"?this.frozen==="Invalid password.":e==="not_found"?this.frozen==="Not found.":e==="notifications"?!1:e==="pending"?this.frozen.match(/pending invitation/i):e==="private"?this.conversation_id&&!N$.test(this.conversation_id)||!1:e==="search"?!1:e==="unread"?this.unread&&!0:this.status===e}async load(e={}){if(this._skipLoad(e))return this;this.update({status:"loading"}),e.limit||(e.limit=40);const n={...e,connection_id:this.connection_id,conversation_id:this.conversation_id};await this.messagesOp.perform(n),this.update({status:this.messagesOp.status});const i=this.messagesOp.res.body;i.messages||(i.messages=[]);const o=[];return(e.around||!e.after&&!e.before)&&(o.push.apply(o,this.messages.toArray().filter(r=>r.internal)),this.messages.clear()),this.addMessages(i.messages,e.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(e,i),this}notify(e){if(gt.appHasFocus)return;const n=e.from===this.name?e.from:xe.l("%1 in %2",e.from,this.name);this.lastNotification=gt.show(e.message,{path:this.path,title:n})}send(e,n){return Be.string(e)&&(e={message:e}),this.socket.send({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||"",...e},n)}async markAsRead(){if(this.markAsReadOp)return this.update({notifications:0}),await this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id}),this}update(e){return this._loadInformation(),super.update(e),(Object.hasOwn(e,"notifications")||Object.hasOwn(e,"unread"))&&this.emit("unread",e),this}wsEventMode(e){const n=["banlist","exceptlist","invitelist","quietlist"].filter(i=>e[i])[0];if(n){const i=e[n].length,o=i===1?"entry":"entries";this.addMessages({...e,message:"%1 has %2 "+o+" in %3.",vars:[this.name,i,xe.l(n)]})}else e.nick?(this.participants.add({nick:e.nick,mode:e.mode}),this.addMessages({...e,message:"%1 got mode %2 from %3.",vars:[e.nick,e.mode,e.from]})):e.mode_changed?(this.addMessages({...e,message:"%1 received mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,hr(Xn,e.mode))})):(this.addMessages({...e,message:"%1 got mode %2.",vars:[this.name,e.mode]}),this.update({modes:Object.assign({},this.modes,hr(Xn,e.mode))}))}wsEventNickChange(e){if(!this.participants.has(e.old_nick)||e.old_nick===e.new_nick)return;this.participants.rename(e.old_nick,e.new_nick);const n=e.type==="me"?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:n,vars:[e.old_nick,e.new_nick]})}wsEventPart(e){const n=this.participants.get(e.nick);!n||n.me||(this.participants.delete(e.nick),this.update({participants:!0}),e.silent||this.addMessages(this._partMessage(e)))}wsEventSentClear(e){e.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}wsEventSentNames(e){this.participants.add(e.participants);const n={...e,message:"Participants (%1): %2",vars:[]},i=this.participants.nicks();i.length>1&&(n.message+=" and %3.",n.vars[2]=i.pop()),n.vars[0]=i.length,n.vars[1]=i.join(", "),this.addMessages(n)}wsEventSentTopic(e){const n=e.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:n,vars:[this.name,e.topic]}),this.update({topic:e.topic})}_addOperations(){this.prop("ro","messagesOp",et.op("conversationMessages")),this.prop("ro","markAsReadOp",et.op("markConversationAsRead"))}_calculateFrozen(){return""}_loadInformation(){if(!(this.participantsLoaded||!this.conversation_id||!this.messagesOp)&&!(this.is("frozen")||!this.messagesOp.is("success")))if(this.participantsLoaded=!0,this.is("private")){if(this.info.ts&&this.info.ts>new vt().toEpoch()-300)return;this.send("/whois "+this.conversation_id,e=>{e.stopPropagation(),this.update({frozen:e.errors&&e.errors.length?e.errors[0].message:""})})}else this.send("/names "+this.conversation_id,e=>{e.stopPropagation(),this.participants.clear(),e.participants&&this.participants.add(e.participants)})}_maybeIncreaseUnread(e){if(!e.from||e.yourself)return this;if(["action","error","private"].indexOf(e.type)===-1)return this;this.update({unread:this.unread+1})}_maybeNotify(e){!e.from||e.yourself||["action","error","private"].indexOf(e.type)!==-1&&(!e.highlight&&!this.wantNotifications||this.notify(e))}_noop(){}_partMessage(e){const n={message:"%1 parted.",vars:[e.nick]};return e.kicker?(n.message="%1 was kicked by %2"+(e.message?": %3":""),n.vars.push(e.kicker),n.vars.push(e.message)):e.message&&(n.message+=" Reason: %2",n.vars.push(e.message)),n}_setEndOfStream(e,n){if(!e.before&&!n.after){const i=n.messages.slice(-1)[0];this.update({historyStopAt:new vt(i&&i.ts)})}if(!e.after&&!n.before){const i=n.messages[0];this.update({historyStartAt:new vt(i&&i.ts)})}n.after&&this.update({historyStopAt:null}),n.before&&this.update({historyStartAt:null}),n.messages&&n.messages.length<=1&&this.update({historyStartAt:new vt,historyStopAt:new vt})}_skipLoad(e){return!this.messagesOp||this.is("loading")?!0:this.messages.length?e.around?!!this.messages.toArray().find(n=>n.ts.toISOString()===e.around):!!(e.before&&this.historyStartAt||e.after&&this.historyStopAt):this.is("success")}}const T$=(t,e)=>t.name.localeCompare(e.name);class nu extends Map{constructor(e=[],n={}){super(e),this.sorter=n.sorter||T$,this._sort()}filter(e){return Array.from(this.values()).filter(e)}set(e,n){super.set.call(this,e,n),this._sort()}toArray(){return Array.from(this.values())}_sort(){const e=Array.from(this.entries()),n=this.sorter;return this.clear(),e.sort((i,o)=>n(i[1],o[1])).forEach(([i,o])=>super.set.call(this,i,o)),e}}const M$=(t,e)=>t.is("private")-e.is("private")||t.name.localeCompare(e.name);class Fa extends Ui{constructor(e){super(e),this.prop("rw","certificate",{}),this.prop("ro","conversations",new nu([],{sorter:M$})),this.prop("rw","on_connect_commands",e.on_connect_commands||[]),this.prop("rw","state",e.state||"disconnected"),this.prop("rw","wanted_state",e.wanted_state||"connected"),this.prop("rw","url",Be.string(e.url)?new hn(e.url):e.url||new hn("irc://localhost"));const n=this.url.searchParams.get("nick")||"guest";this.prop("rw","nick",n),this.prop("rw","real_host",this.url.hostname),this.prop("rw","server_op",!1),e.info&&this.wsEventInfo(e.info)}ensureConversation(e){let n=this.conversations.get(e.conversation_id);return n?n.update(e):(!e.frozen&&this.frozen&&(e.frozen=this.frozen),n=new Ui({...e,connection_id:this.connection_id}),n.on("message",i=>this.emit("message",i)),n.on("update",()=>this.update({conversations:!0})),n.on("unread",()=>this.emit("unread")),e.frozen||this._addDefaultParticipants(n),this.conversations.set(n.conversation_id,n),this.update({conversations:!0}),this.emit("conversationadd",n),n)}findConversation(e){return this.conversations.get(e.conversation_id)||null}is(e){return this.state===e||super.is(e)}removeConversation(e){const n=this.findConversation(e)||e;return this.conversations.delete(n.conversation_id),this.emit("conversationremove",n),this.update({conversations:!0})}send(e){Be.string(e)&&(e={message:e});const n=new RegExp("^"+this.participants.toArray().map(i=>ci(i.id)).join("|")+":","i");return e.message.indexOf("/")!==0&&!e.message.match(n)&&(e.message="/quote "+e.message),super.send(e)}update(e){return e.url&&Be.string(e.url)&&(e.url=new hn(e.url)),super.update(e)}wsEventSentAway(e){(this.findConversation(e)||this).addMessages({message:e.reason,sent:e,type:"notice"})}wsEventConnection(e){this.update({state:e.state})}wsEventFrozen(e){const n=this.findConversation(e),i=n&&n.frozen,o=this.ensureConversation(e);!e.frozen&&i&&n.addMessages({message:"Connected.",vars:[]}),e.frozen||o.participants.add({nick:this.nick,me:!0}),e.frozen&&o.is("pending")&&gt.show(e.frozen,{title:e.name})}wsEventInfo(e){e.nick&&this.wsEventNickChange(e),e.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),e.real_host&&this.participants.add({nick:e.real_host}),this.update(e)}wsEventMessage(e){return e.yourself=e.from===this.nick,e.conversation_id?this.ensureConversation(e).addMessages(e):this.addMessages(e)}wsEventNickChange(e){const n={old_nick:e.old_nick||this.nick,new_nick:e.new_nick||e.nick,type:e.type};e.old_nick===this.nick&&(n.me=!0),super.wsEventNickChange(n),this.conversations.forEach(i=>i.wsEventNickChange(n))}wsEventError(e){const n={message:Rr(e)||e.frozen||"Unknown error from %1.",sent:e,type:"error",vars:e.command||[e.message]},i=(e.message||"").match(/^\/j(oin)? (\S+)/);if(i)return this.ensureConversation({...e,conversation_id:i[2]});const o=e.conversation_id&&e.frozen?this.ensureConversation(e):this.findConversation(e)||this;console.error(o.conversation_id,n),o.addMessages(n)}wsEventJoin(e){const n=this.ensureConversation({connection_id:e.connection_id,conversation_id:e.conversation_id}),i=e.nick||this.nick;i!==this.nick&&!e.silent&&n.addMessages({message:"%1 joined.",vars:[i]}),n.participants.add({nick:i})}wsEventPart(e){if(e.nick===this.nick)return this.removeConversation(e);e.conversation_id||this.conversations.forEach(n=>n.wsEventPart(e))}wsEventQuit(e){this.wsEventPart(e)}wsEventSentJoin(e){this.wsEventJoin(e)}wsEventSentList(e){const n=e.args||"/*/";this.addMessages(e.done?{message:"Found %1 of %2 conversations from %3.",vars:[e.conversations.length,e.n_conversations,n]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[e.conversations.length,e.n_conversations,n]})}wsEventSentMode(e){const n=this.findConversation(e);return n?n.wsEventMode(e):this.addMessages({message:"%1 received mode %2.",vars:[e.target,e.mode]})}wsEventSentQuery(e){this.ensureConversation(e)}wsEventSentWhois(e){const[n,...i]=Li(e);(this.findConversation(e)||this).addMessages({message:n,vars:i,sent:e})}wsEventSentNames(){}_addDefaultParticipants(e){const n=[{nick:this.nick,me:!0}];e.is("private")&&n.push({nick:e.name}),e.participants.add(n)}_addOperations(){this.prop("ro","markAsReadOp",et.op("markConnectionAsRead")),this.prop("ro","messagesOp",et.op("connectionMessages"))}_calculateFrozen(){switch(this.state){case"connected":return"";case"connecting":return"Connecting...";case"disconnected":return"Disconnected.";case"disconnecting":return"Disconnecting...";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}class R$ extends Rt{constructor(e){super(e),this.prop("ro","op",et.op("listConnectionProfiles")),this.prop("rw","profiles",[]),this.prop("rw","status","pending")}find(e){return this.search(n=>n.id===e)[0]}defaultProfile(){return{max_bulk_message_size:3,max_message_length:512,url:new hn("irc://0.0.0.0")}}is(e){return this.status===e}async load(e={}){return this.is("loading")?this:!e.force&&this.profiles.length?this:(this.update({status:"loading"}),await this.op.perform(),this.update({status:this.op.status}),this.is("success")&&this.update({profiles:this.op.res.body.profiles.map(n=>this._expand(n))}),this)}search(e=()=>!0){return this.profiles.filter(e)}_expand(e){e.url=new hn(e.url),e.service_accounts=e.service_accounts.join(", "),e.url.toFields(e);const n=this.defaultProfile();return Object.keys(n).forEach(i=>Object.hasOwn(e,i)||(e[i]=n[i])),e}}class L$ extends Ui{constructor(e){super({...e,connection_id:"",conversation_id:"notifications",name:"Notifications"})}addMessages(e){return Array.isArray(e)||(e=[e]),this.messages.push(e),this}async markAsRead(){return await super.markAsRead(),this.emit("cleared"),this}is(e){return e==="notifications"?!0:super.is(e)}send(e={}){return Promise.resolve(e)}_addOperations(){this.prop("ro","markAsReadOp",et.op("markNotificationsAsRead")),this.prop("ro","messagesOp",et.op("notificationMessages"))}_skipLoad(){return!1}}class I$ extends Ui{constructor(e){super({...e,connection_id:"",conversation_id:"search",name:"Search"}),this.prop("rw","query",""),this.update({status:"success"})}is(e){return e==="conversation"?!1:e==="search"?!0:super.is(e)}async load(e={}){if(this.is("loading"))return this;const n={...e};if(n.match=e.match||e.message,!(n.match||"").match(/\S/))return this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[e.message]}]);this.update({query:n.match,status:"loading"}),this.messages.clear(),await this.messagesOp.perform(n);const i=this.messagesOp.res.body;return this.messages[n.before?"unshift":"push"](i.messages||[]),this.update({status:this.messagesOp.status})}send(e){return Be.string(e)&&(e={message:e}),this.emit("send",e),Promise.resolve(e)}_addOperations(){this.prop("ro","messagesOp",et.op("searchMessages")),this.prop("ro","markAsReadOp",null)}_loadInformation(){}}function P$(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),n=n>o?o:n,n<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var r=Array(o);++i<o;)r[i]=t[i+e];return r}var D$=P$,U$=D$;function B$(t,e,n){var i=t.length;return n=n===void 0?i:n,!e&&n>=i?t:U$(t,e,n)}var F$=B$,j$="\\ud800-\\udfff",z$="\\u0300-\\u036f",H$="\\ufe20-\\ufe2f",q$="\\u20d0-\\u20ff",W$=z$+H$+q$,G$="\\ufe0e\\ufe0f",K$="\\u200d",Y$=RegExp("["+K$+j$+W$+G$+"]");function V$(t){return Y$.test(t)}var iu=V$;function Z$(t){return t.split("")}var J$=Z$,ou="\\ud800-\\udfff",Q$="\\u0300-\\u036f",X$="\\ufe20-\\ufe2f",x$="\\u20d0-\\u20ff",ew=Q$+X$+x$,tw="\\ufe0e\\ufe0f",nw="["+ou+"]",Er="["+ew+"]",Cr="\\ud83c[\\udffb-\\udfff]",iw="(?:"+Er+"|"+Cr+")",ru="[^"+ou+"]",su="(?:\\ud83c[\\udde6-\\uddff]){2}",lu="[\\ud800-\\udbff][\\udc00-\\udfff]",ow="\\u200d",au=iw+"?",fu="["+tw+"]?",rw="(?:"+ow+"(?:"+[ru,su,lu].join("|")+")"+fu+au+")*",sw=fu+au+rw,lw="(?:"+[ru+Er+"?",Er,su,lu,nw].join("|")+")",aw=RegExp(Cr+"(?="+Cr+")|"+lw+sw,"g");function fw(t){return t.match(aw)||[]}var uw=fw,cw=J$,pw=iu,dw=uw;function hw(t){return pw(t)?dw(t):cw(t)}var _w=hw,mw=F$,gw=iu,bw=_w,vw=Bi;function $w(t){return function(e){e=vw(e);var n=gw(e)?bw(e):void 0,i=n?n[0]:e.charAt(0),o=n?mw(n,1).join(""):e.slice(1);return i[t]()+o}}var ww=$w,kw=ww,yw=kw("toUpperCase"),Sw=yw,Ew=Bi,Cw=Sw;function Aw(t){return Cw(Ew(t).toLowerCase())}var Ow=Aw;function Nw(t,e,n,i){var o=-1,r=t==null?0:t.length;for(i&&r&&(n=t[++o]);++o<r;)n=e(n,t[o],o,t);return n}var Tw=Nw;function Mw(t){return function(e){return t==null?void 0:t[e]}}var Rw=Mw,Lw=Rw,Iw={Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã:"A",Ã :"a",Ã¡:"a",Ã¢:"a",Ã£:"a",Ã¤:"a",Ã¥:"a",Ã:"C",Ã§:"c",Ã:"D",Ã°:"d",Ã:"E",Ã:"E",Ã:"E",Ã:"E",Ã¨:"e",Ã©:"e",Ãª:"e",Ã«:"e",Ã:"I",Ã:"I",Ã:"I",Ã:"I",Ã¬:"i",Ã­:"i",Ã®:"i",Ã¯:"i",Ã:"N",Ã±:"n",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã:"O",Ã²:"o",Ã³:"o",Ã´:"o",Ãµ:"o",Ã¶:"o",Ã¸:"o",Ã:"U",Ã:"U",Ã:"U",Ã:"U",Ã¹:"u",Ãº:"u",Ã»:"u",Ã¼:"u",Ã:"Y",Ã½:"y",Ã¿:"y",Ã:"Ae",Ã¦:"ae",Ã:"Th",Ã¾:"th",Ã:"ss",Ä:"A",Ä:"A",Ä:"A",Ä:"a",Ä:"a",Ä:"a",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"D",Ä:"D",Ä:"d",Ä:"d",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"E",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"e",Ä:"G",Ä:"G",Ä :"G",Ä¢:"G",Ä:"g",Ä:"g",Ä¡:"g",Ä£:"g",Ä¤:"H",Ä¦:"H",Ä¥:"h",Ä§:"h",Ä¨:"I",Äª:"I",Ä¬:"I",Ä®:"I",Ä°:"I",Ä©:"i",Ä«:"i",Ä­:"i",Ä¯:"i",Ä±:"i",Ä´:"J",Äµ:"j",Ä¶:"K",Ä·:"k",Ä¸:"k",Ä¹:"L",Ä»:"L",Ä½:"L",Ä¿:"L",Å:"L",Äº:"l",Ä¼:"l",Ä¾:"l",Å:"l",Å:"l",Å:"N",Å:"N",Å:"N",Å:"N",Å:"n",Å:"n",Å:"n",Å:"n",Å:"O",Å:"O",Å:"O",Å:"o",Å:"o",Å:"o",Å:"R",Å:"R",Å:"R",Å:"r",Å:"r",Å:"r",Å:"S",Å:"S",Å:"S",Å :"S",Å:"s",Å:"s",Å:"s",Å¡:"s",Å¢:"T",Å¤:"T",Å¦:"T",Å£:"t",Å¥:"t",Å§:"t",Å¨:"U",Åª:"U",Å¬:"U",Å®:"U",Å°:"U",Å²:"U",Å©:"u",Å«:"u",Å­:"u",Å¯:"u",Å±:"u",Å³:"u",Å´:"W",Åµ:"w",Å¶:"Y",Å·:"y",Å¸:"Y",Å¹:"Z",Å»:"Z",Å½:"Z",Åº:"z",Å¼:"z",Å¾:"z",Ä²:"IJ",Ä³:"ij",Å:"Oe",Å:"oe",Å:"'n",Å¿:"s"},Pw=Lw(Iw),Dw=Pw,Uw=Dw,Bw=Bi,Fw=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jw="\\u0300-\\u036f",zw="\\ufe20-\\ufe2f",Hw="\\u20d0-\\u20ff",qw=jw+zw+Hw,Ww="["+qw+"]",Gw=RegExp(Ww,"g");function Kw(t){return t=Bw(t),t&&t.replace(Fw,Uw).replace(Gw,"")}var Yw=Kw,Vw=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Zw(t){return t.match(Vw)||[]}var Jw=Zw,Qw=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Xw(t){return Qw.test(t)}var xw=Xw,uu="\\ud800-\\udfff",e2="\\u0300-\\u036f",t2="\\ufe20-\\ufe2f",n2="\\u20d0-\\u20ff",i2=e2+t2+n2,cu="\\u2700-\\u27bf",pu="a-z\\xdf-\\xf6\\xf8-\\xff",o2="\\xac\\xb1\\xd7\\xf7",r2="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",s2="\\u2000-\\u206f",l2=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",du="A-Z\\xc0-\\xd6\\xd8-\\xde",a2="\\ufe0e\\ufe0f",hu=o2+r2+s2+l2,_u="['â]",ja="["+hu+"]",f2="["+i2+"]",mu="\\d+",u2="["+cu+"]",gu="["+pu+"]",bu="[^"+uu+hu+mu+cu+pu+du+"]",c2="\\ud83c[\\udffb-\\udfff]",p2="(?:"+f2+"|"+c2+")",d2="[^"+uu+"]",vu="(?:\\ud83c[\\udde6-\\uddff]){2}",$u="[\\ud800-\\udbff][\\udc00-\\udfff]",Jn="["+du+"]",h2="\\u200d",za="(?:"+gu+"|"+bu+")",_2="(?:"+Jn+"|"+bu+")",Ha="(?:"+_u+"(?:d|ll|m|re|s|t|ve))?",qa="(?:"+_u+"(?:D|LL|M|RE|S|T|VE))?",wu=p2+"?",ku="["+a2+"]?",m2="(?:"+h2+"(?:"+[d2,vu,$u].join("|")+")"+ku+wu+")*",g2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",b2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",v2=ku+wu+m2,$2="(?:"+[u2,vu,$u].join("|")+")"+v2,w2=RegExp([Jn+"?"+gu+"+"+Ha+"(?="+[ja,Jn,"$"].join("|")+")",_2+"+"+qa+"(?="+[ja,Jn+za,"$"].join("|")+")",Jn+"?"+za+"+"+Ha,Jn+"+"+qa,b2,g2,mu,$2].join("|"),"g");function k2(t){return t.match(w2)||[]}var y2=k2,S2=Jw,E2=xw,C2=Bi,A2=y2;function O2(t,e,n){return t=C2(t),e=n?void 0:e,e===void 0?E2(t)?A2(t):S2(t):t.match(e)||[]}var N2=O2,T2=Tw,M2=Yw,R2=N2,L2="['â]",I2=RegExp(L2,"g");function P2(t){return function(e){return T2(R2(M2(e).replace(I2,"")),t,"")}}var D2=P2,U2=Ow,B2=D2,F2=B2(function(t,e,n){return e=e.toLowerCase(),t+(n?U2(e):e)}),j2=F2;class z2 extends Rt{constructor(e){super(),this.prop("ro","connections",new nu),this.prop("ro","connectionProfiles",new R$),this.prop("ro","notifications",new L$({})),this.prop("ro","search",new I$({})),this.prop("ro","roles",new Set),this.prop("persist","expandUrlToMedia",!0),this.prop("persist","ignoreStatuses",!1),this.prop("persist","lastUrl",""),this.prop("rw","activeConversation",this.notifications),this.prop("rw","email",""),this.prop("rw","forced_connection",!1),this.prop("rw","default_connection","irc://irc.libera.chat:6697/%23convos"),this.prop("rw","highlightKeywords",[]),this.prop("rw","id",""),this.prop("rw","status","pending"),this.prop("rw","unreadIncludePrivateMessages",!1),this.socket=e.socket||ai("/events"),this.socket.on("message",n=>this._dispatchMessage(n)),this.socket.on("update",n=>this._onConnectionChange(n)),this.notifications.on("cleared",()=>this._calculateUnread("clear")),this._calculateUnreadDebounced=Wr(this._calculateUnread,25)}conversations(e){const n=[];return this.connections.toArray().forEach(i=>{i.conversations.toArray().forEach(o=>{(!e||e(o))&&n.push(o)})}),n}ensureConversation(e,n){if(e.conversation_id){const o=this.ensureConversation({connection_id:e.connection_id},!0);return this._maybeUpgradeActiveConversation(o.ensureConversation(e))}let i=this.findConversation(e);return i?i.update(e):(i=new Fa({...e}),i.on("conversationadd",o=>this._maybeUpgradeActiveConversation(o)),i.on("conversationremove",o=>o===this.activeConversation&&this.setActiveConversation(o)),i.on("update",()=>this.update({connections:!0})),i.on("unread",()=>this._calculateUnreadDebounced()),this.connections.set(i.connection_id,i),this.update({connections:!0}),n?i:this._maybeUpgradeActiveConversation(i))}findConversation(e){const n=this.connections.get(e.connection_id);return e.conversation_id?n&&n.findConversation(e)||null:n}is(e){return Array.isArray(e)?!!e.filter(n=>this.is(n)).length:this.roles.has(e)?!0:this.status===e}async load(){if(this.is("loading"))return this;this.roles.clear(),this.update({status:"loading"});const n=await new Promise(o=>this.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},o));if(n.errors)return this.update({email:"",roles:!0,status:n.errors?"error":"success"});const i=n.user||{};return this.connections.clear(),(i.connections||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(i.conversations||[]).forEach(o=>this.ensureConversation({...o,status:"pending"})),(i.roles||[]).forEach(o=>this.roles.add(o)),this.notifications.update({unread:i.unread||0}),bo.fromString(i.video_service||""),this.update({email:i.email||"",default_connection:i.default_connection||"",forced_connection:i.forced_connection||!1,highlightKeywords:i.highlight_keywords||[],roles:!0,status:n.errors?"error":"success",id:i.uid||""})}removeConversation(e){const n=this.findConversation({connection_id:e.connection_id});if(e.conversation_id)return n&&n.removeConversation(e);this.connections.delete(e.connection_id),n===this.activeConversation&&this.setActiveConversation(n),this.update({connections:!0})}setActiveConversation(e){let n=!e.connection_id&&!e.conversation_id&&this.notifications;if(n)return this.update({activeConversation:n});if(n=this.findConversation(e),n)return this.update({activeConversation:n});const i={...e,connection_id:e.connection_id||"",frozen:"Not found."};return["conversation_id","name"].forEach(o=>Object.hasOwn(e,o)&&(i[o]=e[o])),this.update({activeConversation:i.conversation_id?new Ui(i):new Fa(i)})}update(e){return super.update(e),Object.hasOwn(e,"unreadIncludePrivateMessages")&&this._calculateUnreadDebounced(),this}_calculateUnread(e){let[n,i]=[0,0];for(const o of this.connections.toArray())for(const r of o.conversations.toArray())e&&r.update({notifications:0}),n+=r.is("private")?this.unreadIncludePrivateMessages?r.unread:0:r.notifications,i+=r.is("private")?0:r.notifications;e||(this.notifications.update({notifications:n,unread:i}),this.update({notifications:!0}))}_dispatchMessage(e){e.dispatchTo=j2("wsEvent_"+this._getEventNameFromMessage(e)),e.silent=this.ignoreStatuses,this.emit(e.dispatchTo,e);const n=this.findConversation({connection_id:e.connection_id});if(!n||(n[e.dispatchTo]&&n[e.dispatchTo](e),!e.bubbles))return;const i=n.findConversation(e);i&&i[e.dispatchTo]&&i[e.dispatchTo](e),e.highlight&&!i.is("private")&&(this.notifications.addMessages(e),i===this.activeConversation&&gt.appHasFocus?i.markAsRead():i.update({notifications:i.notifications+1}))}_getEventNameFromMessage(e){return e.errors?"error":e.event==="state"?e.type:e.event==="sent"&&e.message.match(/\/\S+/)?(e.command=e.message.split(/\s+/).filter(n=>n.length),e.command[0]=e.command[0].substring(1),"sent_"+e.command[0].toLowerCase()):e.event}_maybeUpgradeActiveConversation(e){const n=this.activeConversation;return!e.conversation_id||e.connection_id&&e.connection_id!==n.connection_id||e.conversation_id&&e.conversation_id!==n.conversation_id||this.update({activeConversation:e}),e}_onConnectionChange(e){if(e.is("open")&&this.is("pending"))return this.load();e.is("closed")&&(this.connections.forEach(n=>n.update({state:"unreachable"})),this.is(["error","loading"])||this.update({status:"pending"}))}}const{window:Ar}=qu;function H2(t){let e,n,i;function o(s){t[27](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Bf({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function q2(t){let e,n,i,o,r,s,l,a,f,u,d=(t[5]==="nav"||!t[2].isSingleColumn)&&Wa(t);const p=[ok,ik,nk,tk,ek,x2,X2,Q2,J2,Z2,V2,Y2,K2,G2],h=[];function _(E,b){return b[0]&16&&(n=null),b[0]&16&&(i=null),b[0]&16&&(o=null),b[0]&16&&(r=null),n==null&&(n=!!E[4].path.match(/\/chat\/./)),n?0:(i==null&&(i=E[4].path.indexOf("/chat")===0),i?1:E[4].path==="/help"?2:E[4].path==="/search"?3:E[4].path==="/settings"?4:E[4].path==="/settings/account"?5:E[4].path==="/settings/connections"?6:E[4].path==="/settings/files"?7:(o==null&&(o=E[4].path.indexOf("/settings/connection/")===0),o?8:(r==null&&(r=E[4].path.indexOf("/settings/connection-profile/")===0),r?9:E[4].path==="/settings/conversation"?10:E[4].path==="/settings/users"?11:E[4].path==="/login"||E[4].path==="/register"?12:13)))}s=_(t,[-1,-1]),l=h[s]=p[s](t);let g=t[5]&&t[2].haSingleColumn&&Ga(t);return{c(){d&&d.c(),e=S(),l.c(),a=S(),g&&g.c(),f=ct()},m(E,b){d&&d.m(E,b),w(E,e,b),h[s].m(E,b),w(E,a,b),g&&g.m(E,b),w(E,f,b),u=!0},p(E,b){E[5]==="nav"||!E[2].isSingleColumn?d?(d.p(E,b),b[0]&36&&v(d,1)):(d=Wa(E),d.c(),v(d,1),d.m(e.parentNode,e)):d&&(Oe(),y(d,1,1,()=>{d=null}),Ne());let C=s;s=_(E,b),s===C?h[s].p(E,b):(Oe(),y(h[C],1,1,()=>{h[C]=null}),Ne(),l=h[s],l?l.p(E,b):(l=h[s]=p[s](E),l.c()),v(l,1),l.m(a.parentNode,a)),E[5]&&E[2].haSingleColumn?g?(g.p(E,b),b[0]&36&&v(g,1)):(g=Ga(E),g.c(),v(g,1),g.m(f.parentNode,f)):g&&(Oe(),y(g,1,1,()=>{g=null}),Ne())},i(E){u||(v(d),v(l),v(g),u=!0)},o(E){y(d),y(l),y(g),u=!1},d(E){d&&d.d(E),E&&$(e),h[s].d(E),E&&$(a),g&&g.d(E),E&&$(f)}}}function W2(t){let e,n;return e=new Uf({}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p:Re,i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function Wa(t){let e,n;return e=new Fv({props:{transition:{duration:t[2].isSingleColumn?250:0,x:t[0]}}}),{c(){q(e.$$.fragment)},m(i,o){z(e,i,o),n=!0},p(i,o){const r={};o[0]&5&&(r.transition={duration:i[2].isSingleColumn?250:0,x:i[0]}),e.$set(r)},i(i){n||(v(e.$$.fragment,i),n=!0)},o(i){y(e.$$.fragment,i),n=!1},d(i){H(e,i)}}}function G2(t){let e,n,i;function o(s){t[25](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Uf({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function K2(t){let e,n,i;function o(s){t[24](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Bf({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function Y2(t){let e,n,i;function o(s){t[23](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new sv({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function V2(t){let e,n,i;function o(s){t[22](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new n1({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function Z2(t){let e,n,i;function o(s){t[21](s)}let r={profile_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new zg({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.profile_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function J2(t){let e,n,i;function o(s){t[20](s)}let r={connection_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new Kg({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.connection_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function Q2(t){let e,n,i;function o(s){t[19](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new bv({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function X2(t){let e,n,i;function o(s){t[18](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new _g({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function x2(t){let e,n,i;function o(s){t[17](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Cb({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function ek(t){let e,n,i;function o(s){t[16](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Wb({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function tk(t){let e,n,i;function o(s){t[15](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new rb({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function nk(t){let e,n,i;function o(s){t[14](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new w1({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function ik(t){let e,n,i;function o(s){t[13](s)}let r={};return t[1]!==void 0&&(r.title=t[1]),e=new Z1({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function ok(t){let e,n,i;function o(s){t[12](s)}let r={connection_id:t[4].pathParts[1],conversation_id:t[4].pathParts[2]};return t[1]!==void 0&&(r.title=t[1]),e=new ng({props:r}),be.push(()=>ye(e,"title",o,t[1])),{c(){q(e.$$.fragment)},m(s,l){z(e,s,l),i=!0},p(s,l){const a={};l[0]&16&&(a.connection_id=s[4].pathParts[1]),l[0]&16&&(a.conversation_id=s[4].pathParts[2]),!n&&l[0]&2&&(n=!0,a.title=s[1],ke(()=>n=!1)),e.$set(a)},i(s){i||(v(e.$$.fragment,s),i=!0)},o(s){y(e.$$.fragment,s),i=!1},d(s){H(e,s)}}}function Ga(t){let e,n,i,o,r;return{c(){e=m("div"),e.textContent="Â ",k(e,"class","overlay")},m(s,l){w(s,e,l),i=!0,o||(r=Te(e,"click",t[26]),o=!0)},p:Re,i(s){i||(at(()=>{n||(n=tt(e,Dt,{duration:200},!0)),n.run(1)}),i=!0)},o(s){n||(n=tt(e,Dt,{duration:200},!1)),n.run(0),i=!1},d(s){s&&$(e),s&&n&&n.end(),o=!1,r()}}}function rk(t){let e,n,i,o,r,s,l;at(t[11]);const a=[W2,q2,H2],f=[];function u(d,p){return p[0]&8&&(e=null),e==null&&(e=!!d[3].is(["loading","pending"])),e?0:d[3].email?1:2}return n=u(t,[-1,-1]),i=f[n]=a[n](t),{c(){i.c(),o=ct()},m(d,p){f[n].m(d,p),w(d,o,p),r=!0,s||(l=[Te(Ar,"focus",t[10]),Te(Ar,"resize",t[11])],s=!0)},p(d,p){let h=n;n=u(d,p),n===h?f[n].p(d,p):(Oe(),y(f[h],1,1,()=>{f[h]=null}),Ne(),i=f[n],i?i.p(d,p):(i=f[n]=a[n](d),i.c()),v(i,1),i.m(o.parentNode,o))},i(d){r||(v(i),r=!0)},o(d){y(i),r=!1},d(d){f[n].d(d),d&&$(o),s=!1,ut(l)}}}function sk(t,e,n){let i,o,r,s,l;Ce(t,$t,Y=>n(5,i=Y)),Ce(t,Mn,Y=>n(2,o=Y)),Ce(t,De,Y=>n(4,s=Y));const a=ai("/events"),f=new jv().start();Ce(t,f,Y=>n(9,l=Y));const u=new z2({});Ce(t,u,Y=>n(3,r=Y));let d=De.path,p=0,h={closed:!0},_=xe.l("Chat");a.update({debug:"WebSocket"}),window.convosWebSockeet=a,et.url(De.urlFor("/api")),De.update({baseUrl:Ge("base_url"),enabled:!0}),a.update({url:De.wsUrlFor("/events")}),u.on("wsEventSentJoin",Y=>De.go(De.conversationPath(Y))),E().catch(Y=>console.error("[serviceWorker]",Y)),qo("socket",a),qo("themeManager",f),qo("user",u),gt.on("click",Y=>Y.path&&De.go(Y.path)),a.on("update",C),xe.load().then(()=>u.load());function g(Y,F){if(!document)return;const oe=Ge("organization_name"),re=F.notifications.notifications?"("+F.notifications.notifications+") ":"";document.title=oe==="Convos"?xe.l("%1 - Convos",re+xe.l(Y)):xe.l("%1 - Convos for %2",re+xe.l(Y),oe)}async function E(){if(!navigator.serviceWorker)return{};const Y=await navigator.serviceWorker.register(De.urlFor("/sw.js")),F=await fetch(De.urlFor("/sw/info")),oe=F.status==200&&await F.json()||{mode:"",version:"0.00"};if(oe.version==Ge("version"))return{};console.info("[serviceWorker.update]",Ge("version"),oe),Y.update()}async function b(Y,F){F.email&&xe.emojis.load(),ei[F.email?"add":"remove"]("notify"),await Ri();const oe=F.is(["loading","pending"])||document.querySelector(".cms-main")?"cms":"app";if(document.body.className=document.body.className.replace(/for-\w+/,"for-"+oe),d!==Y.path&&(d=Y.path,Ti($t,i="",i)),Y.pathParts.length===0){const re=F.email?F.lastUrl||"/chat":"/login";Y.go(re,{replace:!0})}else F.email&&F.update({lastUrl:location.href})}function C(Y){if(Y.is("open"))return h.close&&h.close();const F=navigator.onLine===!1?xe.l("You seem to be offline."):Y.error?xe.l(Y.error):Y.is("connecting")?xe.l("Connecting to Convos..."):xe.l("Connection to Convos is %1.",xe.l(Y.readyStateHuman));h.body!==F&&(h.close&&h.close(),h=gt.showInApp(F,{closeAfter:-1,title:xe.l("Status")}))}const M=()=>u.email&&a.open();function D(){n(0,p=Ar.innerWidth)}function L(Y){_=Y,n(1,_)}function A(Y){_=Y,n(1,_)}function R(Y){_=Y,n(1,_)}function U(Y){_=Y,n(1,_)}function B(Y){_=Y,n(1,_)}function W(Y){_=Y,n(1,_)}function G(Y){_=Y,n(1,_)}function I(Y){_=Y,n(1,_)}function K(Y){_=Y,n(1,_)}function X(Y){_=Y,n(1,_)}function J(Y){_=Y,n(1,_)}function N(Y){_=Y,n(1,_)}function P(Y){_=Y,n(1,_)}function Z(Y){_=Y,n(1,_)}const j=()=>{Ti($t,i="",i)};function V(Y){_=Y,n(1,_)}return t.$$.update=()=>{t.$$.dirty[0]&512&&ei[l.compactDisplay?"add":"remove"]("compact-display"),t.$$.dirty[0]&24&&b(s,r),t.$$.dirty[0]&10&&g(_,r),t.$$.dirty[0]&1&&Mn.setWidth(p),t.$$.dirty[0]&4&&u.update({unreadIncludePrivateMessages:o.isSingleColumn})},[p,_,o,r,s,i,a,f,u,l,M,D,L,A,R,U,B,W,G,I,K,X,J,N,P,Z,j,V]}class lk extends Je{constructor(e){super(),Ze(this,e,sk,rk,Ye,{},null,[-1,-1])}}class ak extends Rt{constructor(e){super(),this.prop("ro","domain",e.domain||"meet.jit.si"),this.prop("ro","email",e.email||""),this.prop("rw","nick",e.nick||""),this.prop("rw","roomName",e.roomName||"convos-default"),this.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),this.prop("persist","disableH264",!0,{key:"video:disableH264"}),this.prop("persist","resolution",720,{key:"video:resolution"})}async render(e){try{const n=[].slice.call(e.children,0);this.targetEl=e,this.jitsi=await this._load(),n.forEach(i=>i.remove()),e.className=e.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width")}catch(n){console.error("[Jitsi]",{err:n});const i=document.querySelector(".video-error");i.querySelector("span").textContent=String(n).substring(0,350),i.classList.remove("hidden"),bt(document,".cms-main .fa-spin",o=>o.parentNode.classList.add("hidden"))}return this.jitsi?(document.addEventListener("keydown",n=>{n.code==="KeyC"&&this.jitsi.executeCommand("toggleChat"),n.code==="KeyD"&&this.jitsi.executeCommand("toggleShareScreen"),n.code==="KeyF"&&this.jitsi.executeCommand("toggleFilmStrip"),n.code==="KeyM"&&this.jitsi.executeCommand("toggleAudio"),n.code==="KeyR"&&this.jitsi.executeCommand("toggleRaiseHand"),n.code==="KeyV"&&this.jitsi.executeCommand("toggleVideo"),n.code==="KeyW"&&this.jitsi.executeCommand("toggleTileView"),n.code==="Space"&&this.jitsi.isAudioMuted().then(i=>i&&this.jitsi.executeCommand("toggleAudio"))}),document.addEventListener("keyup",n=>{n.code==="Space"&&this.jitsi.isAudioMuted().then(i=>i||this.jitsi.executeCommand("toggleAudio"))}),this):this}_configOverwrite(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}_interfaceConfigOverwrite(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}async _load(){return await sc("https://"+this.domain+"/external_api.js"),new JitsiMeetExternalAPI(this.domain,this._options())}_options(){const e={};return this.email&&(e.email=this.email),this.nick&&(e.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:e,height:"100%",width:"100%"}}}bt(document,"#hamburger_checkbox_toggle",t=>{t.checked=!1});bt(document,".js-close-window",t=>{t.addEventListener("click",e=>{window.opener&&(e.preventDefault(),setTimeout(()=>window.close(),1),window.opener.focus())})});if(document.querySelector('meta[name="convos:start_app"][content="chat"]'))document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove(),new lk({target:document.body});else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();const t=document.querySelector(".cms-main");new ak(t.dataset).render(t)}else document.addEventListener("DOMContentLoaded",function(){bt(document,"pre",t=>_t.lineNumbersBlock(t))});document.addEventListener("keydown",function(t){t.keyCode==27&&(bt(document,".fullscreen",e=>e.click()),Ka()),t.keyCode==13&&t.shiftKey&&(t.preventDefault(),Ka("toggle"))});function Ka(t){if("ontouchstart"in window)return;const e=r=>{for(let s=0;s<r.length;s++){const l=document.querySelector(r[s]);if(l&&l.tabIndex!==-1)return l}return null},n=t&&e(["input.is-primary-menu-item","a.is-primary-menu-item"]),i=document.activeElement;if(Ir(i,["a","input","textarea"])&&n&&i!==n)return n.focus();const o=e([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);if(o)return o.focus();if(n)return n.focus()}
