!function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function r(){return Object.create(null)}function o(e){e.forEach(n)}function a(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(e,t){const n=e.subscribe(t);return n.unsubscribe?()=>n.unsubscribe():n}function c(e){let t;return s(e,e=>t=e)(),t}function u(e,t,n){e.$$.on_destroy.push(s(t,n))}function d(e,t,n,r){if(e){const o=l(e,t,n,r);return e[0](o)}}function l(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function f(e,t,n,r){if(e[2]&&r){const o=e[2](r(n));if("object"==typeof t.dirty){const e=[],n=Math.max(t.dirty.length,o.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|o[r];return e}return t.dirty|o}return t.dirty}function p(e,t,n=t){return e.set(n),t}const m="undefined"!=typeof window;let g=m?()=>window.performance.now():()=>Date.now(),h=m?e=>requestAnimationFrame(e):e;const $=new Set;function b(e){$.forEach(t=>{t.c(e)||($.delete(t),t.f())}),0!==$.size&&h(b)}function v(e,t){e.appendChild(t)}function y(e,t,n){e.insertBefore(t,n||null)}function w(e){e.parentNode.removeChild(e)}function _(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function x(e){return document.createElement(e)}function k(e){return document.createTextNode(e)}function E(){return k(" ")}function C(){return k("")}function O(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function N(e){return function(t){return t.preventDefault(),e.call(this,t)}}function S(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function M(e,t){t=""+t,e.data!==t&&(e.data=t)}function D(e,t){(null!=t||e.value)&&(e.value=t)}function R(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function A(e,t,n){e.classList[n?"add":"remove"](t)}class P{constructor(e,t=null){this.e=x("div"),this.a=t,this.u(e)}m(e,t=null){for(let n=0;n<this.n.length;n+=1)y(e,this.n[n],t);this.t=e}u(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}p(e){this.d(),this.u(e),this.m(this.t,this.a)}d(){this.n.forEach(w)}}let T,L,j=0,I={};function U(e,t,n,r,o,a,i,s=0){const c=16.666/r;let u="{\n";for(let e=0;e<=1;e+=c){const r=t+(n-t)*a(e);u+=100*e+`%{${i(r,1-r)}}\n`}const d=u+`100% {${i(n,1-n)}}\n}`,l=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(d)}_${s}`;if(!I[l]){if(!T){const e=x("style");document.head.appendChild(e),T=e.sheet}I[l]=!0,T.insertRule(`@keyframes ${l} ${d}`,T.cssRules.length)}const f=e.style.animation||"";return e.style.animation=`${f?`${f}, `:""}${l} ${r}ms linear ${o}ms 1 both`,j+=1,l}function z(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--j&&h(()=>{if(j)return;let e=T.cssRules.length;for(;e--;)T.deleteRule(e);I={}})}function B(e){L=e}function H(){if(!L)throw new Error("Function called outside component initialization");return L}function q(e){H().$$.on_mount.push(e)}function G(e,t){H().$$.context.set(e,t)}function K(e){return H().$$.context.get(e)}function F(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(e=>e(t))}const W=[],V=[],Z=[],Y=[],Q=Promise.resolve();let J,X=!1;function ee(){X||(X=!0,Q.then(re))}function te(e){Z.push(e)}function ne(e){Y.push(e)}function re(){const e=new Set;do{for(;W.length;){const e=W.shift();B(e),oe(e.$$)}for(;V.length;)V.pop()();for(let t=0;t<Z.length;t+=1){const n=Z[t];e.has(n)||(n(),e.add(n))}Z.length=0}while(W.length);for(;Y.length;)Y.pop()();X=!1}function oe(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(te)}}function ae(e,t,n){e.dispatchEvent(function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(`${t?"intro":"outro"}${n}`))}const ie=new Set;let se;function ce(){se={r:0,c:[],p:se}}function ue(){se.r||o(se.c),se=se.p}function de(e,t){e&&e.i&&(ie.delete(e),e.i(t))}function le(e,t,n,r){if(e&&e.o){if(ie.has(e))return;ie.add(e),se.c.push(()=>{ie.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const fe={duration:0};function pe(n,r,i,s){let c=r(n,i),u=s?0:1,d=null,l=null,f=null;function p(){f&&z(n,f)}function m(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function v(r){const{delay:a=0,duration:i=300,easing:s=t,tick:v=e,css:y}=c||fe,w={start:g()+a,b:r};r||(w.group=se,se.r+=1),d?l=w:(y&&(p(),f=U(n,u,r,i,a,s,y)),r&&v(0,1),d=m(w,i),te(()=>ae(n,r,"start")),function(e){let t;0===$.size&&h(b),new Promise(n=>{$.add(t={c:e,f:n})})}(e=>{if(l&&e>l.start&&(d=m(l,i),l=null,ae(n,d.b,"start"),y&&(p(),f=U(n,u,d.b,d.duration,0,s,c.css))),d)if(e>=d.end)v(u=d.b,1-u),ae(n,d.b,"end"),l||(d.b?p():--d.group.r||o(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*s(t/d.duration),v(u,1-u)}return!(!d&&!l)}))}return{run(e){a(c)?(J||(J=Promise.resolve(),J.then(()=>{J=null})),J).then(()=>{c=c(),v(e)}):v(e)},end(){p(),d=l=null}}}const me="undefined"!=typeof window?window:global;function ge(e,t,n){const r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function he(e){e&&e.c()}function $e(e,t,r){const{fragment:i,on_mount:s,on_destroy:c,after_update:u}=e.$$;i&&i.m(t,r),te(()=>{const t=s.map(n).filter(a);c?c.push(...t):o(t),e.$$.on_mount=[]}),u.forEach(te)}function be(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ve(t,n,a,i,s,c,u=[-1]){const d=L;B(t);const l=n.props||{},f=t.$$={fragment:null,ctx:null,props:c,update:e,not_equal:s,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:r(),dirty:u};let p=!1;f.ctx=a?a(t,l,(e,n,r=n)=>(f.ctx&&s(f.ctx[e],f.ctx[e]=r)&&(f.bound[e]&&f.bound[e](r),p&&function(e,t){-1===e.$$.dirty[0]&&(W.push(e),ee(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n)):[],f.update(),p=!0,o(f.before_update),f.fragment=!!i&&i(f.ctx),n.target&&(n.hydrate?f.fragment&&f.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):f.fragment&&f.fragment.c(),n.intro&&de(t.$$.fragment),$e(t,n.target,n.anchor),re()),B(d)}class ye{$destroy(){be(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function we(e,t){return e(t={exports:{}},t.exports),t.exports}var _e=we((function(e){function t(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=t=function(e){return typeof e}:e.exports=t=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(n)}e.exports=t})),xe=we((function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n,r){var o=t&&t.prototype instanceof g?t:g,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r=d;return function(o,a){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw a;return S()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=k(i,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?p:l,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",l="suspendedYield",f="executing",p="completed",m={};function g(){}function h(){}function $(){}var b={};b[a]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(N([])));y&&y!==n&&r.call(y,a)&&(b=y);var w=$.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function x(e){var t;this._invoke=function(n,o){function a(){return new Promise((function(t,a){!function t(n,o,a,i){var s=u(e[n],e,o);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&r.call(d,"__await")?Promise.resolve(d.__await).then((function(e){t("next",e,a,i)}),(function(e){t("throw",e,a,i)})):Promise.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return t("throw",e,a,i)}))}i(s.arg)}(n,o,t,a)}))}return t=t?t.then(a,a):a()}}function k(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,k(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function N(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:S}}function S(){return{value:t,done:!0}}return h.prototype=w.constructor=$,$.constructor=h,$[s]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,$):(e.__proto__=$,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(x.prototype),x.prototype[i]=function(){return this},e.AsyncIterator=x,e.async=function(t,n,r,o){var a=new x(c(t,n,r,o));return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(w),w[s]="Generator",w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=N,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:N(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}));function ke(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}var Ee=function(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ke(a,r,o,i,s,"next",e)}function s(e){ke(a,r,o,i,s,"throw",e)}i(void 0)}))}};var Ce=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ne=function(e,t,n){return t&&Oe(e.prototype,t),n&&Oe(e,n),e};var Se=function(e){if(Array.isArray(e))return e};var Me=function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}};var De=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var Re=function(e,t){return Se(e)||Me(e,t)||De()};var Ae=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e};var Pe=function(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?Ae(e):t},Te=we((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t(n)}e.exports=t})),Le=we((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},t(n,r)}e.exports=t}));var je=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)},Ie=function(){function e(){Ce(this,e),this._on={},this._props={},this._reactiveProp={}}return Ne(e,[{key:"emit",value:function(e,t){var n=this._on[e];if(!n)return this;for(var r=0;r<n.length;r++)n[r][0](t);return this}},{key:"on",value:function(e,t){var n=t?null:new Promise((function(e){t=e})),r=this._on[e]||(this._on[e]=[]),o=[t];r.push(o);var a=function(){var e=r.indexOf(o);-1!=e&&r.splice(e,1)};return n?n.finally(a):a}},{key:"prop",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(this._props[t]=r,e){case"persist":return this._localStorageProp(t,n);case"ro":return this._readOnlyProp(t,n);case"rw":return this._updateableProp(t,n)}throw'Unknown prop type "'+e+'" for prop "'+t+'".'}},{key:"subscribe",value:function(e){return e(this),this.on("update",e)}},{key:"update",value:function(e){for(var t=this,n=Object.keys(e),r=n.length,o=0;o<n.length;o++){var a=n[o],i=this._props[a];if(i){var s=!1;this._reactiveProp.hasOwnProperty(a)&&(this._reactiveProp[a]!==e[a]&&(s=!0),this._reactiveProp[a]=e[a]),i.localStorage&&s&&this._localStorage(a,this._reactiveProp[a]),s||r--}}return r&&!this._updatedTid&&(this._updatedTid=setTimeout((function(){delete t._updatedTid,t.emit("update",t)}),1)),this}},{key:"_localStorage",value:function(e,t){var n="convos:"+(this._props[e].key||e);return 2==arguments.length?localStorage.setItem(n,JSON.stringify(t)):localStorage.hasOwnProperty(n)?JSON.parse(localStorage.getItem(n)):void 0}},{key:"_localStorageProp",value:function(e,t){var n=this._localStorage(e);this._updateableProp(e,void 0===n?t:n),this._props[e].localStorage=!0,void 0!==n||this._props[e].lazy||this._localStorage(e,t)}},{key:"_readOnlyProp",value:function(e,t){if(void 0===t)throw'Read-only attribute "'+e+'" cannot be undefined for '+this.constructor.name;var n="function"==typeof t?{get:t}:{value:t,writable:!1};Object.defineProperty(this,e,n)}},{key:"_updateableProp",value:function(e,t){var n=this;this._reactiveProp[e]=t,Object.defineProperty(this,e,{get:function(){return n._reactiveProp[e]}})}}]),e}(),Ue=.618033988749;function ze(e,t){for(;e;){if(t.tagName?e==t:e.matches&&e.matches(t))return e;e=e.parentNode}return null}function Be(e,t){var n;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=this;n&&clearTimeout(n),n=setTimeout((function(){e.apply(i,o)}),t)}}function He(e,t,n){var r=e&&e.querySelector("."+t.split(" ").join("."));return r||((r=document.createElement("div")).className=t,e&&e.appendChild(r),n&&n(r),r)}function qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",n=e.errors||e;return n&&n[0]?n[0][t]||"Unknown error.":""}function Ge(e){var t=document,n=e.replace(/\W/g,"_");if(!t.getElementById(n)){var r=t.createElement("script"),o=[n,e];r.id=o[0],r.src=o[1],t.getElementsByTagName("head")[0].appendChild(r)}}function Ke(e){return Object.keys(e).filter((function(t){return e[t]})).map((function(e){return"has-mode-"+e})).join(" ")}function Fe(e,t,n){var r=e.querySelectorAll(t);if(!n)return[].slice.call(r,0);for(var o=[],a=0;a<r.length;a++)o.push(n(r[a],a));return o}function We(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function Ve(e,t,n){var r=document.querySelector(e);r.className=r.className.replace(t,(function(e,t){return t+n}))}function Ze(e){var t=document.querySelector(".main")||document.querySelector("body");if(!t)return setTimeout((function(){return Ze(e)}),10);if("number"==typeof e)return t.scrollTop=e;if("string"==typeof e){var n=document.querySelector(e);return n?Ze(n):setTimeout((function(){return Ze(e)}),100)}if(e.href&&-1!=e.href.indexOf("#"))return location.hash=e.href.replace(/.*#/,"#"),Ze(location.hash);if(e.tagName)return Ze(e.offsetTop-30);if(e.preventDefault&&e.preventDefault(),e.target&&e.target.tagName)return Ze(e.target.closest("[href]"));throw"Cannot scroll to "+e}function Ye(e,t){return"is-visible"===t?!e.hasAttribute("hidden"):("toggle"===t&&(t=e.hasAttribute("hidden")),t?e.removeAttribute("hidden"):e.setAttribute("hidden",""))}function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==e.length)return"#000";for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n),n&=n;return"#"+function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*e),o=6*e-r,a=n*(1-t),i=n*(1-o*t),s=n*(1-(1-o)*t),c=255,u=255,d=255;switch(r){case 0:c=n,u=s,d=a;break;case 1:c=i,u=n,d=a;break;case 2:c=a,u=n,d=s;break;case 3:c=a,u=i,d=n;break;case 4:c=s,u=a,d=n;break;case 5:c=n,u=a,d=i}return[Math.floor(255*c),Math.floor(255*u),Math.floor(255*d)]}(((n=Math.abs(n%t/t))+Ue)%1,.4,.7).map((function(e){return e.toString(16)})).join("")}function Je(e,t){return e&&e.tagName&&e.tagName.toLowerCase()===t}function Xe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}var et=function(e){function t(e){var n;return Ce(this,t),(n=Pe(this,Te(t).call(this))).prop("ro","api",e.api),n.prop("ro","defaultParams",e.defaultParams||{}),n.prop("ro","id",e.id),n.prop("ro","req",{body:null,headers:{}}),n.prop("ro","res",{body:{},headers:{}}),n.prop("rw","err",null),n.prop("rw","status","pending"),n}return je(t,e),Ne(t,[{key:"error",value:function(e,t){if(e)return this.update({err:Array.isArray(e)?e:[{message:e,source:t}],status:"error"});if(!this.err||!this.err.length)return"";var n=this.err[0],r=n.path&&n.path.match(/\w$/)&&n.path.split("/").pop();return r?r+": "+n.message:n.message}},{key:"perform",value:function(e){var t=this;return this._promise||(this._promise=new Promise((function(n){t.api.spec(t.id).then((function(r){if(!r)return n(t.error('Invalid operationId "'+t.id+'".',"spec"));t.update({status:"loading"});var o=t._paramsToRequest(r,e||t.defaultParams),a=Re(o,2),i=a[0],s=a[1];return t.emit("start",s),"object"==_e(s.body)&&"function"!=typeof s.body.has&&(s.body=JSON.stringify(s.body)),fetch(i,s)})).then((function(e){return Promise.all([e,e.json()])})).then((function(e){var r=Re(e,2),o=r[0],a=r[1];delete t._promise,n(t.parse(o,a))})).catch((function(e){delete t._promise,n(t.error('Failed fetching operationId "'+t.id+'": '+e,"fetch"))}))})))}},{key:"is",value:function(e){return this.status==e}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.body;this.res.body=t||e,this.res.status=e.status||"201",e.headers&&(this.res.headers=e.headers);var n=null;return String(this.res.status).match(/^[23]/)||(n=t&&t.errors?t.errors:[{message:e.statusText||"Unknown error."}]),this.update({err:n,status:n?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(e,t){if(t.schema&&"form"==(e.tagName||"").toLowerCase())return Object.keys(t.schema.properties).reduce((function(t,n){var r=e[n];return r&&("checkbox"!=r.type||r.checked)?(t[n]=r.value,t):t}),{});if(e[t.name]&&e[t.name].tagName)return e[t.name].value;if(t.schema){var n={};return Object.keys(t.schema.properties).forEach((function(t){n[t]=e[t]})),n}return e[t.name]}},{key:"_hasProperty",value:function(e,t){return"body"==t.in||("formData"==t.in?e.formData.has(t.name):"form"==(e.tagName||"").toLowerCase()?!!e[t.name]:e.hasOwnProperty(t.name))}},{key:"_paramsToRequest",value:function(e,t){var n=this,r={headers:this.req.headers,method:e.method},o=new URL(e.url);return(e.parameters||[]).forEach((function(e){if(n._hasProperty(t,e)||e.required)if("path"==e.in){var a=new RegExp("(%7B|\\{)"+We(e.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(a,encodeURIComponent(n._extractValue(t,e)))}else if("query"==e.in)o.searchParams.set(e.name,n._extractValue(t,e));else if("formData"==e.in)delete r.headers["Content-Type"],r.body=t.formData;else if("body"==e.in)r.body=n._extractValue(t,e);else{if("header"!=e.in)throw"[Api] Parameter in:"+e.in+" is not supported.";r.header[e.name]=n._extractValue(t,e.name)}})),[o,r]}}]),t}(Ie),tt=function(){function e(t){Ce(this,e),this.protocol=location.protocol,this.url=t}var t;return Ne(e,[{key:"operation",value:function(e,t){var n=new et({api:this,id:e,defaultParams:t});return n.req.headers={"Content-Type":"application/json"},n}},{key:"spec",value:(t=Ee(xe.mark((function e(t){var n,r,o=this;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ops||!t){e.next=2;break}return e.abrupt("return",this._ops[t]);case 2:if(!this._spec){e.next=4;break}return e.abrupt("return",this._spec);case 4:return e.next=6,fetch(this.url);case 6:return n=e.sent,e.next=9,n.json();case 9:if(r=e.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(e){Object.keys(r.paths[e]).forEach((function(t){var n=r.paths[e][t],a=n.operationId;a&&(n.method=t.toUpperCase(),n.url=o.protocol+"//"+r.host+r.basePath+e+".json",n.parameters=(n.parameters||[]).map((function(e){return o._resolveRef(e)})),o._ops[a]=n)}))})),!this._ops||!t){e.next=15;break}return e.abrupt("return",this._ops[t]);case 15:if(!this._spec){e.next=17;break}return e.abrupt("return",this._spec);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"_resolveRef",value:function(e){var t=this,n=e;if(e.$ref){var r=e.$ref.replace(/^#\//,"").split("/");for(n=this._spec;r.length;)n=n[r.shift()]}return"object"==_e(n)&&Object.keys(n).forEach((function(e){n[e]=t._resolveRef(n[e])})),n}}]),e}(),nt=we((function(e,t){var n,r;n=function(e){var t=[],n=Object.keys,r={},o={},a=!0,i=/^(no-?highlight|plain|text)$/i,s=/\blang(?:uage)?-([\w-]+)\b/i,c=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,u="</span>",d="Could not find the language '{}', did you forget to load/include a language module?",l={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},f="of and for in not or if then".split(" ");function p(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function m(e){return e.nodeName.toLowerCase()}function g(e){return i.test(e)}function h(e){var t,n={},r=Array.prototype.slice.call(arguments,1);for(t in e)n[t]=e[t];return r.forEach((function(e){for(t in e)n[t]=e[t]})),n}function $(e){var t=[];return function e(n,r){for(var o=n.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(t.push({event:"start",offset:r,node:o}),r=e(o,r),m(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:o}));return r}(e,0),t}function b(e){return e.variants&&!e.cached_variants&&(e.cached_variants=e.variants.map((function(t){return h(e,{variants:null},t)}))),e.cached_variants?e.cached_variants:function e(t){return!!t&&(t.endsWithParent||e(t.starts))}(e)?[h(e,{starts:e.starts?h(e.starts):null})]:Object.isFrozen(e)?[h(e)]:[e]}function v(e,t){return t?Number(t):(n=e,-1!=f.indexOf(n.toLowerCase())?0:1);var n}function y(e){function t(e){return e&&e.source||e}function r(n,r){return new RegExp(t(n),"m"+(e.case_insensitive?"i":"")+(r?"g":""))}function o(e){var n,o,a={},i=[],s={},c=1;function u(e,t){a[c]=e,i.push([e,t]),c+=function(e){return new RegExp(e.toString()+"|").exec("").length-1}(t)+1}for(var d=0;d<e.contains.length;d++)u(o=e.contains[d],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);e.terminator_end&&u("end",e.terminator_end),e.illegal&&u("illegal",e.illegal);var l=i.map((function(e){return e[1]}));return n=r(function(e,n){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,a="",i=0;i<e.length;i++){var s=o+=1,c=t(e[i]);for(i>0&&(a+=n),a+="(";c.length>0;){var u=r.exec(c);if(null==u){a+=c;break}a+=c.substring(0,u.index),c=c.substring(u.index+u[0].length),"\\"==u[0][0]&&u[1]?a+="\\"+String(Number(u[1])+s):(a+=u[0],"("==u[0]&&o++)}a+=")"}return a}(l,"|"),!0),s.lastIndex=0,s.exec=function(t){var r;if(0===i.length)return null;n.lastIndex=s.lastIndex;var o=n.exec(t);if(!o)return null;for(var c=0;c<o.length;c++)if(null!=o[c]&&null!=a[""+c]){r=a[""+c];break}return"string"==typeof r?(o.type=r,o.extra=[e.illegal,e.terminator_end]):(o.type="begin",o.rule=r),o},s}if(e.contains&&-1!=e.contains.indexOf("self")){if(!a)throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");e.contains=e.contains.filter((function(e){return"self"!=e}))}!function a(i,s){i.compiled||(i.compiled=!0,i.keywords=i.keywords||i.beginKeywords,i.keywords&&(i.keywords=function(e,t){var r={};return"string"==typeof e?o("keyword",e):n(e).forEach((function(t){o(t,e[t])})),r;function o(e,n){t&&(n=n.toLowerCase()),n.split(" ").forEach((function(t){var n=t.split("|");r[n[0]]=[e,v(n[0],n[1])]}))}}(i.keywords,e.case_insensitive)),i.lexemesRe=r(i.lexemes||/\w+/,!0),s&&(i.beginKeywords&&(i.begin="\\b("+i.beginKeywords.split(" ").join("|")+")\\b"),i.begin||(i.begin=/\B|\b/),i.beginRe=r(i.begin),i.endSameAsBegin&&(i.end=i.begin),i.end||i.endsWithParent||(i.end=/\B|\b/),i.end&&(i.endRe=r(i.end)),i.terminator_end=t(i.end)||"",i.endsWithParent&&s.terminator_end&&(i.terminator_end+=(i.end?"|":"")+s.terminator_end)),i.illegal&&(i.illegalRe=r(i.illegal)),null==i.relevance&&(i.relevance=1),i.contains||(i.contains=[]),i.contains=Array.prototype.concat.apply([],i.contains.map((function(e){return b("self"===e?i:e)}))),i.contains.forEach((function(e){a(e,i)})),i.starts&&a(i.starts,s),i.terminators=o(i))}(e)}function w(e,t,n,o){function i(e,t){var n=b.case_insensitive?t[0].toLowerCase():t[0];return e.keywords.hasOwnProperty(n)&&e.keywords[n]}function s(e,t,n,r){if(!n&&""===t)return"";if(!e)return t;var o='<span class="'+(r?"":l.classPrefix);return(o+=e+'">')+t+(n?"":u)}function c(){E+=null!=x.subLanguage?function(){var e="string"==typeof x.subLanguage;if(e&&!r[x.subLanguage])return p(C);var t=e?w(x.subLanguage,C,!0,k[x.subLanguage]):_(C,x.subLanguage.length?x.subLanguage:void 0);return x.relevance>0&&(N+=t.relevance),e&&(k[x.subLanguage]=t.top),s(t.language,t.value,!1,!0)}():function(){var e,t,n,r;if(!x.keywords)return p(C);for(r="",t=0,x.lexemesRe.lastIndex=0,n=x.lexemesRe.exec(C);n;)r+=p(C.substring(t,n.index)),(e=i(x,n))?(N+=e[1],r+=s(e[0],p(n[0]))):r+=p(n[0]),t=x.lexemesRe.lastIndex,n=x.lexemesRe.exec(C);return r+p(C.substr(t))}(),C=""}function f(e){E+=e.className?s(e.className,"",!0):"",x=Object.create(e,{parent:{value:x}})}function m(e){var t=e[0],n=e.rule;return n&&n.endSameAsBegin&&(n.endRe=function(e){return new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}(t)),n.skip?C+=t:(n.excludeBegin&&(C+=t),c(),n.returnBegin||n.excludeBegin||(C=t)),f(n),n.returnBegin?0:t.length}function g(e){var n=e[0],r=t.substr(e.index),o=function e(t,n){if(function(e,t){var n=e&&e.exec(t);return n&&0===n.index}(t.endRe,n)){for(;t.endsParent&&t.parent;)t=t.parent;return t}if(t.endsWithParent)return e(t.parent,n)}(x,r);if(o){var a=x;a.skip?C+=n:(a.returnEnd||a.excludeEnd||(C+=n),c(),a.excludeEnd&&(C=n));do{x.className&&(E+=u),x.skip||x.subLanguage||(N+=x.relevance),x=x.parent}while(x!==o.parent);return o.starts&&(o.endSameAsBegin&&(o.starts.endRe=o.endRe),f(o.starts)),a.returnEnd?0:n.length}}var h={};function $(e,r){var o=r&&r[0];if(C+=e,null==o)return c(),0;if("begin"==h.type&&"end"==r.type&&h.index==r.index&&""===o)return C+=t.slice(r.index,r.index+1),1;if(h=r,"begin"===r.type)return m(r);if("illegal"===r.type&&!n)throw new Error('Illegal lexeme "'+o+'" for mode "'+(x.className||"<unnamed>")+'"');if("end"===r.type){var a=g(r);if(null!=a)return a}return C+=o,o.length}var b=O(e);if(!b)throw console.error(d.replace("{}",e)),new Error('Unknown language: "'+e+'"');y(b);var v,x=o||b,k={},E="";for(v=x;v!==b;v=v.parent)v.className&&(E=s(v.className,"",!0)+E);var C="",N=0;try{for(var S,M,D=0;x.terminators.lastIndex=D,S=x.terminators.exec(t);)M=$(t.substring(D,S.index),S),D=S.index+M;for($(t.substr(D)),v=x;v.parent;v=v.parent)v.className&&(E+=u);return{relevance:N,value:E,illegal:!1,language:e,top:x}}catch(n){if(n.message&&-1!==n.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:p(t)};if(a)return{relevance:0,value:p(t),language:e,top:x,errorRaised:n};throw n}}function _(e,t){t=t||l.languages||n(r);var o={relevance:0,value:p(e)},a=o;return t.filter(O).filter(N).forEach((function(t){var n=w(t,e,!1);n.language=t,n.relevance>a.relevance&&(a=n),n.relevance>o.relevance&&(a=o,o=n)})),a.language&&(o.second_best=a),o}function x(e){return l.tabReplace||l.useBR?e.replace(c,(function(e,t){return l.useBR&&"\n"===e?"<br>":l.tabReplace?t.replace(/\t/g,l.tabReplace):""})):e}function k(e){var n,r,a,i,c,u=function(e){var t,n,r,o,a=e.className+" ";if(a+=e.parentNode?e.parentNode.className:"",n=s.exec(a)){var i=O(n[1]);return i||(console.warn(d.replace("{}",n[1])),console.warn("Falling back to no-highlight mode for this block.",e)),i?n[1]:"no-highlight"}for(t=0,r=(a=a.split(/\s+/)).length;t<r;t++)if(g(o=a[t])||O(o))return o}(e);g(u)||(l.useBR?(n=document.createElement("div")).innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):n=e,c=n.textContent,a=u?w(u,c,!0):_(c),(r=$(n)).length&&((i=document.createElement("div")).innerHTML=a.value,a.value=function(e,n,r){var o=0,a="",i=[];function s(){return e.length&&n.length?e[0].offset!==n[0].offset?e[0].offset<n[0].offset?e:n:"start"===n[0].event?e:n:e.length?e:n}function c(e){a+="<"+m(e)+t.map.call(e.attributes,(function(e){return" "+e.nodeName+'="'+p(e.value).replace(/"/g,"&quot;")+'"'})).join("")+">"}function u(e){a+="</"+m(e)+">"}function d(e){("start"===e.event?c:u)(e.node)}for(;e.length||n.length;){var l=s();if(a+=p(r.substring(o,l[0].offset)),o=l[0].offset,l===e){i.reverse().forEach(u);do{d(l.splice(0,1)[0]),l=s()}while(l===e&&l.length&&l[0].offset===o);i.reverse().forEach(c)}else"start"===l[0].event?i.push(l[0].node):i.pop(),d(l.splice(0,1)[0])}return a+p(r.substr(o))}(r,$(i),c)),a.value=x(a.value),e.innerHTML=a.value,e.className=function(e,t,n){var r=t?o[t]:n,a=[e.trim()];return e.match(/\bhljs\b/)||a.push("hljs"),-1===e.indexOf(r)&&a.push(r),a.join(" ").trim()}(e.className,u,a.language),e.result={language:a.language,re:a.relevance},a.second_best&&(e.second_best={language:a.second_best.language,re:a.second_best.relevance}))}function E(){if(!E.called){E.called=!0;var e=document.querySelectorAll("pre code");t.forEach.call(e,k)}}var C={disableAutodetect:!0};function O(e){return e=(e||"").toLowerCase(),r[e]||r[o[e]]}function N(e){var t=O(e);return t&&!t.disableAutodetect}return e.highlight=w,e.highlightAuto=_,e.fixMarkup=x,e.highlightBlock=k,e.configure=function(e){l=h(l,e)},e.initHighlighting=E,e.initHighlightingOnLoad=function(){window.addEventListener("DOMContentLoaded",E,!1),window.addEventListener("load",E,!1)},e.registerLanguage=function(t,n){var i;try{i=n(e)}catch(e){if(console.error("Language definition for '{}' could not be registered.".replace("{}",t)),!a)throw e;console.error(e),i=C}r[t]=i,i.rawDefinition=n.bind(null,e),i.aliases&&i.aliases.forEach((function(e){o[e]=t}))},e.listLanguages=function(){return n(r)},e.getLanguage=O,e.requireLanguage=function(e){var t=O(e);if(t)return t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",e))},e.autoDetection=N,e.inherit=h,e.debugMode=function(){a=!1},e.IDENT_RE="[a-zA-Z]\\w*",e.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",e.NUMBER_RE="\\b\\d+(\\.\\d+)?",e.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BINARY_NUMBER_RE="\\b(0b[01]+)",e.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},e.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},e.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},e.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},e.COMMENT=function(t,n,r){var o=e.inherit({className:"comment",begin:t,end:n,contains:[]},r||{});return o.contains.push(e.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},e.C_LINE_COMMENT_MODE=e.COMMENT("//","$"),e.C_BLOCK_COMMENT_MODE=e.COMMENT("/\\*","\\*/"),e.HASH_COMMENT_MODE=e.COMMENT("#","$"),e.NUMBER_MODE={className:"number",begin:e.NUMBER_RE,relevance:0},e.C_NUMBER_MODE={className:"number",begin:e.C_NUMBER_RE,relevance:0},e.BINARY_NUMBER_MODE={className:"number",begin:e.BINARY_NUMBER_RE,relevance:0},e.CSS_NUMBER_MODE={className:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},e.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}]},e.TITLE_MODE={className:"title",begin:e.IDENT_RE,relevance:0},e.UNDERSCORE_TITLE_MODE={className:"title",begin:e.UNDERSCORE_IDENT_RE,relevance:0},e.METHOD_GUARD={begin:"\\.\\s*"+e.UNDERSCORE_IDENT_RE,relevance:0},[e.BACKSLASH_ESCAPE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.PHRASAL_WORDS_MODE,e.COMMENT,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.HASH_COMMENT_MODE,e.NUMBER_MODE,e.C_NUMBER_MODE,e.BINARY_NUMBER_MODE,e.CSS_NUMBER_MODE,e.REGEXP_MODE,e.TITLE_MODE,e.UNDERSCORE_TITLE_MODE,e.METHOD_GUARD].forEach((function(e){!function e(t){Object.freeze(t);var n="function"==typeof t;return Object.getOwnPropertyNames(t).forEach((function(r){!t.hasOwnProperty(r)||null===t[r]||"object"!=typeof t[r]&&"function"!=typeof t[r]||n&&("caller"===r||"callee"===r||"arguments"===r)||Object.isFrozen(t[r])||e(t[r])})),t}(e)})),e},r="object"==typeof window&&window||"object"==typeof self&&self,t.nodeType?r&&(r.hljs=n({})):n(t)}));function rt(t){let n,r,o,a,i;return{c(){n=x("i"),S(n,"class",r=t[3](t[2],t[1])),S(n,"style",o=t[4](t[2],t[1],t[0])),n.hidden=a=!t[2],i=O(n,"click",t[11])},m(e,t){y(e,n,t)},p(e,[t]){6&t&&r!==(r=e[3](e[2],e[1]))&&S(n,"class",r),7&t&&o!==(o=e[4](e[2],e[1],e[0]))&&S(n,"style",o),4&t&&a!==(a=!e[2])&&(n.hidden=a)},i:e,o:e,d(e){e&&w(n),i()}}}function ot(e,t,n){const r={regular:"far",solid:"fas"},o={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},a=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"];let{class:i=""}=t,{animation:s=""}=t,{color:c=""}=t,{family:u=""}=t,{name:d}=t;function l(e){if(e.match(/^\d+$/)&&console.log(a[e]),e.match(/^\d+$/))return a[e];let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t),t&=t;return t=Math.abs(t),a[t%a.length]}return e.$set=e=>{"class"in e&&n(5,i=e.class),"animation"in e&&n(6,s=e.animation),"color"in e&&n(0,c=e.color),"family"in e&&n(1,u=e.family),"name"in e&&n(2,d=e.name)},[c,u,d,function(e,t){const n=[],a=e.match(/^pick:(.+)$/);if(a){if(o[a[1]])return"fas fa-contributor";n.push(l(a[1]))}else n.push(r[t]||"fas"),n.push("fa-"+e);return s&&n.push(s.split(" ").map(e=>"fa-"+e)),i&&n.push(i.split(" ")),n.join(" ")},function(e,t,n){const r=[];let a="color:";const i=e.match(/^pick:(.+)$/);return i&&o[i[1]]&&(a="background-color:",r.push('background-image:url("'+o[i[1]]+'")')),n&&r.push(a+n),r.join(";")},i,s,r,o,a,l,function(t){F(e,t)}]}nt.registerLanguage("css",(function(e){var t={begin:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{endsWithParent:!0,excludeEnd:!0,contains:[{begin:/[\w-]+\(/,returnBegin:!0,contains:[{className:"built_in",begin:/[\w-]+/},{begin:/\(/,end:/\)/,contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.CSS_NUMBER_MODE]}]},e.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,e.C_BLOCK_COMMENT_MODE,{className:"number",begin:"#[0-9A-Fa-f]+"},{className:"meta",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[e.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/},{className:"selector-class",begin:/\.[A-Za-z0-9_-]+/},{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},{className:"selector-pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",illegal:/:/,returnBegin:!0,contains:[{className:"keyword",begin:/@\-?\w[\w]*(\-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:"and or not only",contains:[{begin:/[a-z-]+:/,className:"attribute"},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{begin:"{",end:"}",illegal:/\S/,contains:[e.C_BLOCK_COMMENT_MODE,t]}]}})),nt.registerLanguage("diff",(function(e){return{aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^\-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"addition",begin:"^\\!",end:"$"}]}})),nt.registerLanguage("dockerfile",(function(e){return{aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[e.HASH_COMMENT_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),nt.registerLanguage("go",(function(e){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:t,illegal:/["']/}]}]}})),nt.registerLanguage("http",(function(e){var t="HTTP/[0-9\\.]+";return{aliases:["https"],illegal:"\\S",contains:[{begin:"^"+t,end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"}]},{begin:"^[A-Z]+ (.*?) "+t+"$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{begin:t},{className:"keyword",begin:"[A-Z]+"}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{end:"$",relevance:0}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}})),nt.registerLanguage("javascript",(function(e){var t="[A-Za-z$_][0-9A-Za-z$_]*",n={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},r={className:"number",variants:[{begin:"\\b(0[bB][01]+)n?"},{begin:"\\b(0[oO][0-7]+)n?"},{begin:e.C_NUMBER_RE+"n?"}],relevance:0},o={className:"subst",begin:"\\$\\{",end:"\\}",keywords:n,contains:[]},a={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,o],subLanguage:"xml"}},i={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,o],subLanguage:"css"}},s={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,o]};o.contains=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,a,i,s,r,e.REGEXP_MODE];var c=o.contains.concat([e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx","mjs","cjs"],keywords:n,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,a,i,s,e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:t+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,r,{begin:/[{,\n]\s*/,relevance:0,contains:[{begin:t+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:t,relevance:0}]}]},{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+t+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:t},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:n,contains:c}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{begin:/</,end:/(\/[A-Za-z0-9\\._:-]+|[A-Za-z0-9\\._:-]+\/)>/,subLanguage:"xml",contains:[{begin:/<[A-Za-z0-9\\._:-]+\s*\/>/,skip:!0},{begin:/<[A-Za-z0-9\\._:-]+/,end:/(\/[A-Za-z0-9\\._:-]+|[A-Za-z0-9\\._:-]+\/)>/,skip:!0,contains:[{begin:/<[A-Za-z0-9\\._:-]+\s*\/>/,skip:!0},"self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[e.inherit(e.TITLE_MODE,{begin:t}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:c}],illegal:/\[|%/},{begin:/\$[(.]/},e.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}})),nt.registerLanguage("markdown",(function(e){return{aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^\\s*([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"quote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"^```\\w*\\s*$",end:"^```[ ]*$"},{begin:"`.+?`"},{begin:"^( {4}|\\t)",end:"$",relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),nt.registerLanguage("mojolicious",(function(e){return{subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),nt.registerLanguage("nginx",(function(e){var t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+e.UNDERSCORE_IDENT_RE}]},n={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",contains:[e.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},t]};return{aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{begin:e.UNDERSCORE_IDENT_RE+"\\s+{",returnBegin:!0,end:"{",contains:[{className:"section",begin:e.UNDERSCORE_IDENT_RE}],relevance:0},{begin:e.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"attribute",begin:e.UNDERSCORE_IDENT_RE,starts:n}],relevance:0}],illegal:"[^\\s\\}]"}})),nt.registerLanguage("perl",(function(e){var t="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",n={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:t},r={begin:"->{",end:"}"},o={variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},a=[e.BACKSLASH_ESCAPE,n,o],i=[o,e.HASH_COMMENT_MODE,e.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),r,{className:"string",contains:a,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[e.BACKSLASH_ESCAPE],relevance:0}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return n.contains=i,r.contains=i,{aliases:["pl","pm"],lexemes:/[\w\.]+/,keywords:t,contains:i}})),nt.registerLanguage("python",(function(e){var t={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},n={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:t,illegal:/#/},o={begin:/\{\{/,relevance:0},a={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,n],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,n],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,n,o,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,n,o,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,o,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,o,r]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},i={className:"number",relevance:0,variants:[{begin:e.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:e.C_NUMBER_RE+"[lLjJ]?"}]},s={className:"params",begin:/\(/,end:/\)/,contains:["self",n,i,a,e.HASH_COMMENT_MODE]};return r.contains=[a,i,n],{aliases:["py","gyp","ipython"],keywords:t,illegal:/(<\/|->|\?)|=>/,contains:[n,i,{beginKeywords:"if",relevance:0},a,e.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[e.UNDERSCORE_TITLE_MODE,s,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}})),nt.registerLanguage("scss",(function(e){var t={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},n={className:"number",begin:"#[0-9A-Fa-f]+"};e.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,e.C_BLOCK_COMMENT_MODE;return{case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"\\#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},{className:"selector-attr",begin:"\\[",end:"\\]",illegal:"$"},{className:"selector-tag",begin:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{className:"selector-pseudo",begin:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{className:"selector-pseudo",begin:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},t,{className:"attribute",begin:"\\b(src|z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",illegal:"[^\\s]"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[t,n,e.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"meta",begin:"!important"}]},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:"and or not only",contains:[{begin:"@[a-z-]+",className:"keyword"},t,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,n,e.CSS_NUMBER_MODE]}]}})),nt.registerLanguage("shell",(function(e){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}})),nt.registerLanguage("xml",(function(e){var t={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},n={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},r=e.inherit(n,{begin:"\\(",end:"\\)"}),o=e.inherit(e.APOS_STRING_MODE,{className:"meta-string"}),a=e.inherit(e.QUOTE_STRING_MODE,{className:"meta-string"}),i={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[t]},{begin:/'/,end:/'/,contains:[t]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[n,a,o,r,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[n,r,a,o]}]}]},e.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},t,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]},{className:"tag",begin:"<style(?=\\s|>)",end:">",keywords:{name:"style"},contains:[i],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>)",end:">",keywords:{name:"script"},contains:[i],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["actionscript","javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},i]}]}})),nt.registerLanguage("yaml",(function(e){var t={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:"{{",end:"}}"},{begin:"%{",end:"}"}]}]};return{case_insensitive:!0,aliases:["yml","YAML","yaml"],contains:[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---s*$",relevance:10},{className:"string",begin:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!"+e.UNDERSCORE_IDENT_RE},{className:"type",begin:"!!"+e.UNDERSCORE_IDENT_RE},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"\\-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:"true false yes no null",keywords:{literal:"true false yes no null"}},{className:"number",begin:e.C_NUMBER_RE+"\\b"},t]}}));class at extends ye{constructor(e){super(),ve(this,e,ot,rt,i,{class:5,animation:6,color:0,family:1,name:2})}}const it=[];function st(t,n=e){let r;const o=[];function a(e){if(i(t,e)&&(t=e,r)){const e=!it.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),it.push(n,t)}if(e){for(let e=0;e<it.length;e+=2)it[e][0](it[e+1]);it.length=0}}}return{set:a,update:function(e){a(e(t))},subscribe:function(i,s=e){const c=[i,s];return o.push(c),1===o.length&&(r=n(a)||e),i(t),()=>{const e=o.indexOf(c);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}var ct=location.href.replace(/\/+$/,""),ut="",dt=st(""),lt=st({wideScreen:!1,width:0}),ft=st($t(location.href)),pt=st(document.title),mt=st(null);function gt(e,t){var n=e.indexOf(t);return-1==n?null:n}function ht(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!==e){var n=$t(e);if(!n)return location.href=e;t.event&&t.event.preventDefault(),history[t.replace?"replaceState":"pushState"]({},document.title,n.toString()),setTimeout((function(){return ft.set(n)}),0)}}function $t(e){if(-1==(e="/"==e.slice(0,1)?ct+e:e).indexOf(ct))return!1;var t=new URL(e),n=e.substring(ct.length,gt(e,"?")||gt(e,"#")||e.length);Object.defineProperty(t,"path",{value:n,writable:!1});var r=n.split("/").filter((function(e){return e.length})).map(decodeURIComponent);return Object.defineProperty(t,"pathParts",{value:r,writable:!1}),t}function bt(e){var t=c(mt);if(e&&e!=t){if(!t)for(var n=document.querySelectorAll(".js-remove"),r=0;r<n.length;r++)n[r].remove();mt.set(e)}}function vt(e){return ft.base+e}function yt(e){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:c(ft)).searchParams.forEach((function(t,n){var r=e[n];r&&r.tagName&&("checkbox"==r.type?r.checked=!!t:r.value=t,r.syncValue&&r.syncValue())}))}var wt=ft.set;function _t(e){let t,n,r;const o=e[13].default,a=d(o,e,e[12],null);return{c(){t=x("a"),a&&a.c(),S(t,"href",e[3]),S(t,"class",e[0]),S(t,"style",e[1]),A(t,"has-path",e[4]),r=O(t,"click",e[5])},m(r,o){y(r,t,o),a&&a.m(t,null),e[14](t),n=!0},p(e,[r]){a&&a.p&&4096&r&&a.p(l(o,e,e[12],null),f(o,e[12],r,null)),(!n||8&r)&&S(t,"href",e[3]),(!n||1&r)&&S(t,"class",e[0]),(!n||2&r)&&S(t,"style",e[1]),17&r&&A(t,"has-path",e[4])},i(e){n||(de(a,e),n=!0)},o(e){le(a,e),n=!1},d(n){n&&w(t),a&&a.d(n),e[14](null),r()}}}function xt(e,t,n){let r;u(e,ft,e=>n(10,r=e));let o,{class:a=""}=t,{href:i="/"}=t,{native:s=!1}=t,{replace:c=!1}=t,{style:d=""}=t;let l,f,{$$slots:p={},$$scope:m}=t;return e.$set=e=>{"class"in e&&n(0,a=e.class),"href"in e&&n(6,i=e.href),"native"in e&&n(7,s=e.native),"replace"in e&&n(8,c=e.replace),"style"in e&&n(1,d=e.style),"$$scope"in e&&n(12,m=e.$$scope)},e.$$.update=()=>{64&e.$$.dirty&&n(3,l="/"==i.slice(0,1)?ft.base+i:i),1032&e.$$.dirty&&n(4,f=r==l.replace(/(#|\?).*/,""))},[a,d,o,l,f,function(e){const t=e.target.closest("a").href;return s?location.href=t:ht(t,{event:e,replace:c})},i,s,c,()=>o.focus(),r,[],m,p,function(e){V[e?"unshift":"push"](()=>{n(2,o=e)})}]}ft.set=function(e,t){if(c(this).toString()!=e.toString()||t)return dt.set(""),wt.call(this,e)},Object.defineProperty(ft,"base",{get:function(){return ct},set:function(e){ct=e.replace(/\/+$/,""),ft.set($t(c(ft).toString()),!0)}});class kt extends ye{constructor(e){super(),ve(this,e,xt,_t,i,{class:0,href:6,native:7,replace:8,style:1,focus:9})}get focus(){return this.$$.ctx[9]}}const Et=e=>({}),Ct=e=>({}),Ot=e=>({}),Nt=e=>({});function St(e){let t,n,r,a,i,s,c,u;const p=e[11].label,m=d(p,e,e[10],Nt),g=e[11].help,h=d(g,e,e[10],Ct);return{c(){t=x("div"),n=x("label"),m||(r=k("Label")),m&&m.c(),a=E(),i=x("input"),s=E(),h&&h.c(),S(n,"for",e[4]),S(i,"type",e[7]),S(i,"name",e[3]),S(i,"id",e[4]),S(i,"autocomplete",e[1]),S(i,"placeholder",e[5]),i.readOnly=e[6],i.value=e[0],S(t,"class","text-field"),t.hidden=e[2],A(t,"has-password","password"==e[7]),u=[O(i,"input",e[9]),O(i,"keyup",e[12])]},m(o,u){y(o,t,u),v(t,n),m||v(n,r),m&&m.m(n,null),v(t,a),v(t,i),e[13](i),v(t,s),h&&h.m(t,null),c=!0},p(e,[r]){m&&m.p&&1024&r&&m.p(l(p,e,e[10],Nt),f(p,e[10],r,Ot)),(!c||16&r)&&S(n,"for",e[4]),(!c||128&r)&&S(i,"type",e[7]),(!c||8&r)&&S(i,"name",e[3]),(!c||16&r)&&S(i,"id",e[4]),(!c||2&r)&&S(i,"autocomplete",e[1]),(!c||32&r)&&S(i,"placeholder",e[5]),(!c||64&r)&&(i.readOnly=e[6]),(!c||1&r)&&(i.value=e[0]),h&&h.p&&1024&r&&h.p(l(g,e,e[10],Ct),f(g,e[10],r,Et)),(!c||4&r)&&(t.hidden=e[2]),128&r&&A(t,"has-password","password"==e[7])},i(e){c||(de(m,e),de(h,e),c=!0)},o(e){le(m,e),le(h,e),c=!1},d(n){n&&w(t),m&&m.d(n),e[13](null),h&&h.d(n),o(u)}}}function Mt(e,t,n){let r,{autocomplete:o=null}=t,{hidden:a=!1}=t,{name:i=""}=t,{id:s=(i?"form_"+i:Xe())}=t,{placeholder:c=""}=t,{readonly:u=!1}=t,{type:d="text"}=t,{value:l=""}=t,{$$slots:f={},$$scope:p}=t;return e.$set=e=>{"autocomplete"in e&&n(1,o=e.autocomplete),"hidden"in e&&n(2,a=e.hidden),"name"in e&&n(3,i=e.name),"id"in e&&n(4,s=e.id),"placeholder"in e&&n(5,c=e.placeholder),"readonly"in e&&n(6,u=e.readonly),"type"in e&&n(7,d=e.type),"value"in e&&n(0,l=e.value),"$$scope"in e&&n(10,p=e.$$scope)},e.$$.update=()=>{256&e.$$.dirty&&r&&!r.syncValue&&(n(8,r.syncValue=function(){n(0,l=this.value)},r),r.syncValue())},[l,o,a,i,s,c,u,d,r,e=>{n(0,l=d.match(/^(number|range)$/)?parseInt(e.target.value,10):e.target.value)},p,f,function(t){F(e,t)},function(e){V[e?"unshift":"push"](()=>{n(8,r=e)})}]}class Dt extends ye{constructor(e){super(),ve(this,e,Mt,St,i,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0})}}function Rt(e){const t=e-1;return t*t*t+1}function At(e,{delay:n=0,duration:r=400,easing:o=t}){const a=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:o,css:e=>`opacity: ${e*a}`}}function Pt(e,{delay:t=0,duration:n=400,easing:r=Rt,x:o=0,y:a=0,opacity:i=0}){const s=getComputedStyle(e),c=+s.opacity,u="none"===s.transform?"":s.transform,d=c*(1-i);return{delay:t,duration:n,easing:r,css:(e,t)=>`\n\t\t\ttransform: ${u} translate(${(1-e)*o}px, ${(1-e)*a}px);\n\t\t\topacity: ${c-d*t}`}}
/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var Tt=function(){var e={base:"https://twemoji.maxcdn.com/v/12.1.4/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(e){var t="string"==typeof e?parseInt(e,16):e;if(t<65536)return s(t);return s(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:h},onerror:function(){this.parentNode&&this.parentNode.replaceChild(c(this.alt,!1),this)},parse:function(t,n){n&&"function"!=typeof n||(n={callback:n});return("string"==typeof t?f:l)(t,{callback:n.callback||u,attributes:"function"==typeof n.attributes?n.attributes:m,base:"string"==typeof n.base?n.base:e.base,ext:n.ext||e.ext,size:n.folder||(r=n.size||e.size,"number"==typeof r?r+"x"+r:r),className:n.className||e.className,onerror:n.onerror||e.onerror});var r},replace:g,test:function(e){n.lastIndex=0;var t=n.test(e);return n.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69])(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),a=/[&<>'"]/g,i=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,s=String.fromCharCode;return e;function c(e,t){return document.createTextNode(t?e.replace(r,""):e)}function u(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function d(e){return h(e.indexOf(o)<0?e.replace(r,""):e)}function l(e,t){for(var r,o,a,s,u,l,f,p,m,g,h,$,b,v=function e(t,n){for(var r,o,a=t.childNodes,s=a.length;s--;)3===(o=(r=a[s]).nodeType)?n.push(r):1!==o||"ownerSVGElement"in r||i.test(r.nodeName.toLowerCase())||e(r,n);return n}(e,[]),y=v.length;y--;){for(a=!1,s=document.createDocumentFragment(),l=(u=v[y]).nodeValue,p=0;f=n.exec(l);){if((m=f.index)!==p&&s.appendChild(c(l.slice(p,m),!0)),$=d(h=f[0]),p=m+h.length,b=t.callback($,t),$&&b){for(o in(g=new Image).onerror=t.onerror,g.setAttribute("draggable","false"),r=t.attributes(h,$))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!g.hasAttribute(o)&&g.setAttribute(o,r[o]);g.className=t.className,g.alt=h,g.src=b,a=!0,s.appendChild(g)}g||s.appendChild(c(h,!1)),g=null}a&&(p<l.length&&s.appendChild(c(l.slice(p),!0)),u.parentNode.replaceChild(s,u))}return e}function f(e,t){return g(e,(function(e){var n,r,o=e,i=d(e),s=t.callback(i,t);if(i&&s){for(r in o="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',e,'"',' src="',s,'"'),n=t.attributes(e,i))n.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',n[r].replace(a,p),'"'));o=o.concat("/>")}return o}))}function p(e){return t[e]}function m(){return null}function g(e,t){return String(e).replace(n,t)}function h(e,t){for(var n=[],r=0,o=0,a=0;a<e.length;)r=e.charCodeAt(a++),o?(n.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:n.push(r.toString(16));return n.join(t||"-")}}(),Lt=new RegExp("(\\\\?)`([^`]+)`","g"),jt={},It={},Ut=new RegExp("\\b[a-z]{2,5}://\\S+","g"),zt=new RegExp("\\[([^\\]]+)\\]\\(([^)]+)\\)","g"),Bt=new RegExp("(^|\\s)(\\\\?)(\\*+)(\\w[^<]*?)\\3","g"),Ht={":confused:":":/",":disappointed:":":(",":grin:":";D",":heart:":"&lt;3",":slight_smile:":":)",":smiley:":":D",":stuck_out_tongue:":":P",":wink:":";)"},qt=new RegExp("(^|\\s)(:\\w+:|"+Object.keys(Ht).map((function(e){return We(Ht[e])})).join("|")+")(?=\\W|$)","gi"),Gt={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};function Kt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";return window.__emojiList&&(window.__emojiList.forEach((function(e){if(":"==(e.shortname||"")[0]){if(Ht[e.shortname]&&(It[Ht[e.shortname]]=e),It[e.shortname]=e,e.category){var t=":"+e.category;jt[t]||(jt[t]=[]),jt[t].push(e)}e.shortname.match(/(_|:)\w/g).forEach((function(t){jt[t]||(jt[t]=[]),jt[t].push(e)})),delete e.category,delete e.html,delete e.order,delete e.unicode}})),delete window.__emojiList),"group"==t?jt[e]||[]:It[e]||{}}function Ft(e){e=e.replace(/[&<>"']/g,(function(e){return Gt[e]}));var t=0;return e=e.replace(/^&gt;\s(.*)/,(function(e,t){return"<blockquote>"+t+"</blockquote>"})).replace(Bt,(function(e,t,n,r,o){return 1==r.length?n?e.replace(/^\\/,""):t+"<em>"+o+"</em>":2==r.length?n?e.replace(/^\\/,""):t+"<strong>"+o+"</strong>":3==r.length?n?e.replace(/^\\/,""):t+"<em><strong>"+o+"</strong></em>":e})).replace(zt,(function(e,n,r){t++;var o=r.substring(0,1),a=-1!=["/","#"].indexOf(o)?"_self":"_blank";return"_self"==a&&"#"!=o&&(r=vt(r)),'<a href="'+r+'" target="'+a+'">'+n+"</a>"})).replace(Lt,(function(e,t,n){return t?e.replace(/^\\/,""):"<code>"+n+"</code>"})),t||(e=e.replace(Ut,(function(e){var t=e.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+t[1]+'" target="_blank">'+t[1].replace(/^https:\/\//,"")+"</a>"+(t[2]||"")})).replace(/mailto:(\S+)/,(function(e,t){return-1!=e.indexOf('">')?e:'<a href="'+e+'" target="_blank">'+t+"</a>"}))),e=Tt.parse(e.replace(qt,(function(e,t,n){return t+(Kt(n).emoji||n)})))}var Wt={en:{}},Vt="en";function Zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return String(Wt[e]&&Wt[e][Vt]||e).replace(/(%?)%(\d+)/g,(function(e,t,r){return"%"==t?t+r:n[r-1]}))}function Yt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ft(Zt.apply(void 0,[e].concat(n)))}function Qt(e,t){return e.frozen?Zt(e.frozen):e==t?Zt("Connection messages."):(t.frozen?Zt(t.frozen):t.topic)||t.is_private&&Zt("Private conversation.")||Zt("No topic is set.")}function Jt(e,t,n){const r=e.slice();return r[21]=t[n],r}function Xt(e,t,n){const r=e.slice();return r[18]=t[n],r}function en(e){let t,n,r,o,a,i,s,c,u=(e[18].name||e[18].connection_id)+"",d=gn(e[18])+"";const l=new at({props:{name:"network-wired"}});return{c(){he(l.$$.fragment),t=E(),n=x("span"),r=k(u),o=E(),a=x("b"),i=k(d),S(a,"class","unread"),a.hidden=s=!e[18].unread},m(e,s){$e(l,e,s),y(e,t,s),y(e,n,s),v(n,r),y(e,o,s),y(e,a,s),v(a,i),c=!0},p(e,t){(!c||16&t)&&u!==(u=(e[18].name||e[18].connection_id)+"")&&M(r,u),(!c||16&t)&&d!==(d=gn(e[18])+"")&&M(i,d),(!c||16&t&&s!==(s=!e[18].unread))&&(a.hidden=s)},i(e){c||(de(l.$$.fragment,e),c=!0)},o(e){le(l.$$.fragment,e),c=!1},d(e){be(l,e),e&&w(t),e&&w(n),e&&w(o),e&&w(a)}}}function tn(e){let t,n,r,o,a,i,s,c,u=e[21].name+"",d=gn(e[21])+"";const l=new at({props:{name:e[21].is_private?"user":"user-friends"}});return{c(){he(l.$$.fragment),t=E(),n=x("span"),r=k(u),o=E(),a=x("b"),i=k(d),S(a,"class","unread"),a.hidden=s=!e[21].unread},m(e,s){$e(l,e,s),y(e,t,s),y(e,n,s),v(n,r),y(e,o,s),y(e,a,s),v(a,i),c=!0},p(e,t){const n={};16&t&&(n.name=e[21].is_private?"user":"user-friends"),l.$set(n),(!c||16&t)&&u!==(u=e[21].name+"")&&M(r,u),(!c||16&t)&&d!==(d=gn(e[21])+"")&&M(i,d),(!c||16&t&&s!==(s=!e[21].unread))&&(a.hidden=s)},i(e){c||(de(l.$$.fragment,e),c=!0)},o(e){le(l.$$.fragment,e),c=!1},d(e){be(l,e),e&&w(t),e&&w(n),e&&w(o),e&&w(a)}}}function nn(e){let t;const n=new kt({props:{href:e[21].path,class:mn(e[18],e[21]),$$slots:{default:[tn]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};16&t&&(r.href=e[21].path),16&t&&(r.class=mn(e[18],e[21])),16777232&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function rn(e){let t,n,r;const o=new kt({props:{href:e[18].path,class:mn(e[18],e[18]),$$slots:{default:[en]},$$scope:{ctx:e}}});let a=e[18].dialogs.toArray(),i=[];for(let t=0;t<a.length;t+=1)i[t]=nn(Jt(e,a,t));const s=e=>le(i[e],1,1,()=>{i[e]=null});return{c(){he(o.$$.fragment),t=E();for(let e=0;e<i.length;e+=1)i[e].c();n=C()},m(e,a){$e(o,e,a),y(e,t,a);for(let t=0;t<i.length;t+=1)i[t].m(e,a);y(e,n,a),r=!0},p(e,t){const r={};if(16&t&&(r.href=e[18].path),16&t&&(r.class=mn(e[18],e[18])),16777232&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r),16&t){let r;for(a=e[18].dialogs.toArray(),r=0;r<a.length;r+=1){const o=Jt(e,a,r);i[r]?(i[r].p(o,t),de(i[r],1)):(i[r]=nn(o),i[r].c(),de(i[r],1),i[r].m(n.parentNode,n))}for(ce(),r=a.length;r<i.length;r+=1)s(r);ue()}},i(e){if(!r){de(o.$$.fragment,e);for(let e=0;e<a.length;e+=1)de(i[e]);r=!0}},o(e){le(o.$$.fragment,e),i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)le(i[e]);r=!1},d(e){be(o,e),e&&w(t),_(i,e),e&&w(n)}}}function on(e){let t,n,r,o,a,i,s,c=gn(e[5])+"";const u=new at({props:{name:e[5].unread?"bell":"bell-slash"}});return{c(){he(u.$$.fragment),t=E(),n=x("span"),n.textContent=`${Zt("Notifications")}`,r=E(),o=x("b"),a=k(c),S(o,"class","unread"),o.hidden=i=!e[5].unread},m(e,i){$e(u,e,i),y(e,t,i),y(e,n,i),y(e,r,i),y(e,o,i),v(o,a),s=!0},p(e,t){const n={};32&t&&(n.name=e[5].unread?"bell":"bell-slash"),u.$set(n),(!s||32&t)&&c!==(c=gn(e[5])+"")&&M(a,c),(!s||32&t&&i!==(i=!e[5].unread))&&(o.hidden=i)},i(e){s||(de(u.$$.fragment,e),s=!0)},o(e){le(u.$$.fragment,e),s=!1},d(e){be(u,e),e&&w(t),e&&w(n),e&&w(r),e&&w(o)}}}function an(t){let n,r,o;const a=new at({props:{name:"comment"}});return{c(){he(a.$$.fragment),n=E(),r=x("span"),r.textContent=`${Zt("Add conversation")}`},m(e,t){$e(a,e,t),y(e,n,t),y(e,r,t),o=!0},p:e,i(e){o||(de(a.$$.fragment,e),o=!0)},o(e){le(a.$$.fragment,e),o=!1},d(e){be(a,e),e&&w(n),e&&w(r)}}}function sn(t){let n,r,o;const a=new at({props:{name:"network-wired"}});return{c(){he(a.$$.fragment),n=E(),r=x("span"),r.textContent=`${Zt("Add connection")}`},m(e,t){$e(a,e,t),y(e,n,t),y(e,r,t),o=!0},p:e,i(e){o||(de(a.$$.fragment,e),o=!0)},o(e){le(a.$$.fragment,e),o=!1},d(e){be(a,e),e&&w(n),e&&w(r)}}}function cn(t){let n,r,o;const a=new at({props:{name:"user-cog"}});return{c(){he(a.$$.fragment),n=E(),r=x("span"),r.textContent=`${Zt("Account")}`},m(e,t){$e(a,e,t),y(e,n,t),y(e,r,t),o=!0},p:e,i(e){o||(de(a.$$.fragment,e),o=!0)},o(e){le(a.$$.fragment,e),o=!1},d(e){be(a,e),e&&w(n),e&&w(r)}}}function un(t){let n,r,o;const a=new at({props:{name:"question-circle"}});return{c(){he(a.$$.fragment),n=E(),r=x("span"),r.textContent=`${Zt("Help")}`},m(e,t){$e(a,e,t),y(e,n,t),y(e,r,t),o=!0},p:e,i(e){o||(de(a.$$.fragment,e),o=!0)},o(e){le(a.$$.fragment,e),o=!1},d(e){be(a,e),e&&w(n),e&&w(r)}}}function dn(e){let t;const n=new kt({props:{href:"/settings",$$slots:{default:[ln]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};16777216&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function ln(t){let n,r,o;const a=new at({props:{name:"tools"}});return{c(){he(a.$$.fragment),n=E(),r=x("span"),r.textContent=`${Zt("Settings")}`},m(e,t){$e(a,e,t),y(e,n,t),y(e,r,t),o=!0},p:e,i(e){o||(de(a.$$.fragment,e),o=!0)},o(e){le(a.$$.fragment,e),o=!1},d(e){be(a,e),e&&w(n),e&&w(r)}}}function fn(t){let n,r,o;const a=new at({props:{name:"power-off"}});return{c(){he(a.$$.fragment),n=E(),r=x("span"),r.textContent=`${Zt("Log out")}`},m(e,t){$e(a,e,t),y(e,n,t),y(e,r,t),o=!0},p:e,i(e){o||(de(a.$$.fragment,e),o=!0)},o(e){le(a.$$.fragment,e),o=!1},d(e){be(a,e),e&&w(n),e&&w(r)}}}function pn(e){let t,n,r,a,i,s,c,u,d,l,f,p,m,g,h,$,b,C,N,R,P,T,L,j=(e[4].email||Zt("Account"))+"",I=e[4].roles.has("admin");const U=new at({props:{name:"search"}});let z=e[4].connections.toArray(),B=[];for(let t=0;t<z.length;t+=1)B[t]=rn(Xt(e,z,t));const H=e=>le(B[e],1,1,()=>{B[e]=null}),q=new kt({props:{href:"/chat",$$slots:{default:[on]},$$scope:{ctx:e}}}),G=new kt({props:{href:"/settings/conversation",$$slots:{default:[an]},$$scope:{ctx:e}}}),K=new kt({props:{href:"/settings/connection",$$slots:{default:[sn]},$$scope:{ctx:e}}}),F=new kt({props:{href:"/settings/account",$$slots:{default:[cn]},$$scope:{ctx:e}}}),W=new kt({props:{href:"/help",$$slots:{default:[un]},$$scope:{ctx:e}}});let V=I&&dn(e);const Z=new kt({props:{href:"/api/user/logout.html",native:!0,$$slots:{default:[fn]},$$scope:{ctx:e}}});return{c(){t=x("div"),n=x("form"),r=x("input"),i=E(),s=x("label"),he(U.$$.fragment),c=E(),u=x("nav"),d=x("h3"),d.textContent=`${Zt("Conversations")}`,l=E();for(let e=0;e<B.length;e+=1)B[e].c();f=E(),p=x("h3"),m=k(j),g=E(),he(q.$$.fragment),h=E(),he(G.$$.fragment),$=E(),he(K.$$.fragment),b=E(),he(F.$$.fragment),C=E(),he(W.$$.fragment),N=E(),V&&V.c(),R=E(),he(Z.$$.fragment),S(r,"type","text"),S(r,"id","search_input"),S(r,"placeholder",a=e[3]?Zt("Search..."):Zt("Convos")),S(s,"for","search_input"),S(n,"class","sidebar__header"),S(u,"class","sidebar-left__nav"),A(u,"is-filtering",e[1].length>0),S(t,"class","sidebar-left"),L=[O(r,"input",e[16]),O(r,"blur",e[8]),O(r,"focus",e[9]),O(r,"keydown",e[11]),O(n,"submit",hn),O(u,"click",e[10])]},m(o,a){y(o,t,a),v(t,n),v(n,r),D(r,e[1]),v(n,i),v(n,s),$e(U,s,null),v(t,c),v(t,u),v(u,d),v(u,l);for(let e=0;e<B.length;e+=1)B[e].m(u,null);v(u,f),v(u,p),v(p,m),v(u,g),$e(q,u,null),v(u,h),$e(G,u,null),v(u,$),$e(K,u,null),v(u,b),$e(F,u,null),v(u,C),$e(W,u,null),v(u,N),V&&V.m(u,null),v(u,R),$e(Z,u,null),e[17](u),T=!0},p(e,[t]){if((!T||8&t&&a!==(a=e[3]?Zt("Search..."):Zt("Convos")))&&S(r,"placeholder",a),2&t&&r.value!==e[1]&&D(r,e[1]),16&t){let n;for(z=e[4].connections.toArray(),n=0;n<z.length;n+=1){const r=Xt(e,z,n);B[n]?(B[n].p(r,t),de(B[n],1)):(B[n]=rn(r),B[n].c(),de(B[n],1),B[n].m(u,f))}for(ce(),n=z.length;n<B.length;n+=1)H(n);ue()}(!T||16&t)&&j!==(j=(e[4].email||Zt("Account"))+"")&&M(m,j);const n={};16777248&t&&(n.$$scope={dirty:t,ctx:e}),q.$set(n);const o={};16777216&t&&(o.$$scope={dirty:t,ctx:e}),G.$set(o);const i={};16777216&t&&(i.$$scope={dirty:t,ctx:e}),K.$set(i);const s={};16777216&t&&(s.$$scope={dirty:t,ctx:e}),F.$set(s);const c={};16777216&t&&(c.$$scope={dirty:t,ctx:e}),W.$set(c),16&t&&(I=e[4].roles.has("admin")),I?V?(V.p(e,t),de(V,1)):(V=dn(e),V.c(),de(V,1),V.m(u,R)):V&&(ce(),le(V,1,1,()=>{V=null}),ue());const d={};16777216&t&&(d.$$scope={dirty:t,ctx:e}),Z.$set(d),2&t&&A(u,"is-filtering",e[1].length>0)},i(n){if(!T){de(U.$$.fragment,n);for(let e=0;e<z.length;e+=1)de(B[e]);de(q.$$.fragment,n),de(G.$$.fragment,n),de(K.$$.fragment,n),de(F.$$.fragment,n),de(W.$$.fragment,n),de(V),de(Z.$$.fragment,n),te(()=>{P||(P=pe(t,Pt,e[0],!0)),P.run(1)}),T=!0}},o(n){le(U.$$.fragment,n),B=B.filter(Boolean);for(let e=0;e<B.length;e+=1)le(B[e]);le(q.$$.fragment,n),le(G.$$.fragment,n),le(K.$$.fragment,n),le(F.$$.fragment,n),le(W.$$.fragment,n),le(V),le(Z.$$.fragment,n),P||(P=pe(t,Pt,e[0],!1)),P.run(0),T=!1},d(n){n&&w(t),be(U),_(B,n),be(q),be(G),be(K),be(F),be(W),V&&V.d(),be(Z),e[17](null),n&&P&&P.end(),o(L)}}}function mn(e,t){const n=[t.dialog_id?"for-dialog":"for-connection"];return(t.frozen||"connected"!=e.state)&&n.push("is-frozen"),t.errors&&n.push("has-errors"),n.join(" ")}function gn(e){return e.unread>60?"60+":e.unread||0}const hn=e=>e.preventDefault();function $n(e,t,n){let r,o,a,i;u(e,ft,e=>n(14,o=e)),u(e,dt,e=>n(15,a=e));let{transition:s}=t;const c=K("user");u(e,c,e=>n(4,r=e));const d=r.notifications;u(e,d,e=>n(5,i=e));let l,f=0,m="",g=!1,h=[];function $(){n(3,g=!1),Fe(l,"a",e=>e.classList.remove("has-focus")),setTimeout(()=>{n(1,m="");const e=document.activeElement;e&&ze(e,l)&&Fe(l,"a.has-path",e=>e.focus())},100)}function b(){if(!l)return;const e=m.match(/^\W+/)?"":"\\b\\W*",t=new RegExp(e+We(m),"i"),r={};n(12,f=0),n(3,g=!0),n(13,h=[]),Fe(l,"a",(e,o)=>{const a=e.classList;!m.length&&a.contains("has-path")&&n(12,f=o),a.remove("has-focus");const i=!m.length||!r[e.href]&&e.textContent.match(t);i&&h.push(e),Ye(e,i),r[e.href]=!0}),Fe(l,".for-connection",e=>{let t=e;for(;(t=t.nextElementSibling)&&t.classList.contains("for-dialog");)if(Ye(t,"is-visible"))return Ye(e,!0)}),Fe(l,"h3",e=>{let t=e;for(;(t=t.nextElementSibling)&&!Je(t,"h3");)if(Ye(t,"is-visible"))return Ye(e,!0);Ye(e,!1)})}return e.$set=e=>{"transition"in e&&n(0,s=e.transition)},e.$$.update=()=>{2&e.$$.dirty&&b(),16388&e.$$.dirty&&l&&$(),12288&e.$$.dirty&&h[f]&&h[f].classList.add("has-focus")},[s,m,l,g,r,i,c,d,$,b,function(e){(e.target.className||"").match(/network|user/)&&setTimeout(()=>{p(dt,a="settings")},50)},function(e){if(13==e.keyCode)return e.preventDefault(),$(),void(h[f]&&ht(h[f].href));const t=38==e.keyCode?-1:40==e.keyCode?1:0;t&&(e.preventDefault(),h[f]&&h[f].classList.remove("has-focus"),n(12,f+=e.ctrlKey?4*t:t)),f<0&&n(12,f=h.length-1),f>=h.length&&n(12,f=0)},f,h,o,a,function(){m=this.value,n(1,m)},function(e){V[e?"unshift":"push"](()=>{n(2,l=e)})}]}class bn extends ye{constructor(e){super(),ve(this,e,$n,pn,i,{transition:0})}}var vn=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e};var yn=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Te(e)););return e},wn=we((function(e){function t(n,r,o){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=t=Reflect.get:e.exports=t=function(e,t,n){var r=yn(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},t(n,r,o||n)}e.exports=t})),_n=function(){function e(t){var n=this;Ce(this,e),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return n._url.href.replace(/^http:/,n.protocol)},set:function(e){n._url.href=e.replace(/^\w+:/,"http:"),n.protocol=e.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(e){Object.defineProperty(n,e,{get:function(){return n._url[e]},set:function(t){n._url[e]=t}})})),this.href=t}return Ne(e,[{key:"fromForm",value:function(e){var t=e.server.value;return e.nick.value.length&&this.searchParams.append("nick",e.nick.value),this.searchParams.append("tls",e.tls.checked?"1":"0"),this.searchParams.append("tls_verify",e.tls_verify&&e.tls_verify.checked?"1":"0"),this.host=t.match(/:\d+$/)?t:t+":6667",this.password=e.password.value,this.username=e.username.value,this}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.connProtocol)}}]),e}();var xn=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}};var kn=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)};var En=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var Cn=function(e){return xn(e)||kn(e)||En()};var On=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},Nn=we((function(e){function t(n,r,o){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?e.exports=t=function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Le(o,n.prototype),o}:e.exports=t=Reflect.construct,t.apply(null,arguments)}e.exports=t})),Sn=we((function(e){function t(n){var r="function"==typeof Map?new Map:void 0;return e.exports=t=function(e){if(null===e||!On(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return Nn(e,arguments,Te(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Le(t,e)},t(n)}e.exports=t})),Mn=function(e,t){return e.name.localeCompare(t.name)},Dn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ce(this,t),(e=Pe(this,Te(t).call(this,n))).sorter=r.sorter||Mn,e._sort(),e}return je(t,e),Ne(t,[{key:"filter",value:function(e){return Array.from(this.values()).filter(e)}},{key:"set",value:function(e,n){wn(Te(t.prototype),"set",this).call(this,e,n),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var e=this,n=Array.from(this.entries()),r=this.sorter;return this.clear(),n.sort((function(e,t){return r(e[1],t[1])})).forEach((function(n){var r=Re(n,2),o=r[0],a=r[1];return wn(Te(t.prototype),"set",e).call(e,o,a)})),n}}]),t}(Sn(Map)),Rn={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},An=function(e){function t(e){return Ce(this,t),"string"!=typeof e||e.match(/Z$/)||(e+="Z"),Pe(this,Te(t).call(this,e||new Date))}return je(t,e),Ne(t,[{key:"getHumanDate",value:function(){var e=this.getMonthAbbr()+" "+this.getDate(),n=new t;return this.getYear()==n.getYear()||(e+=", "+this.getFullYear()),e}},{key:"getHM",value:function(){return[this.getHours(),this.getMinutes()].map((function(e){return e<10?"0"+e:e})).join(":")}},{key:"getMonthAbbr",value:function(){return Rn[this.getMonth()]||""}},{key:"toEpoch",value:function(){return this.getTime()/1e3}}]),t}(Sn(Date)),Pn={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",s:"secret",S:"secure_connection_only",t:"ops_topic"},Tn={o:"@",v:"+"},Ln={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function In(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Un=new RegExp("^[#&]"),zn=function(e,t){return t.modes.operator||!1-e.modes.operator||t.modes.voice||!1-e.modes.voice||e.name.localeCompare(t.name)},Bn=0,Hn=function(e){function t(e){var n;Ce(this,t),n=Pe(this,Te(t).call(this));var r=["","chat"];return e.connection_id&&r.push(e.connection_id),e.dialog_id&&r.push(e.dialog_id),e.connection_id&&!e.name&&console.trace("[Convos] Invalid params was passed on to new Dialog(",e,")"),n.prop("ro","_participants",new Dn([],{sorter:zn})),n.prop("ro","api",e.api),n.prop("ro","color",Qe(e.dialog_id||e.connection_id||"")),n.prop("ro","connection_id",e.connection_id||""),n.prop("ro","events",e.events),n.prop("ro","is_private",(function(){return n.dialog_id&&!Un.test(n.name)})),n.prop("ro","path",r.map((function(e){return encodeURIComponent(e)})).join("/")),n.prop("rw","errors",0),n.prop("rw","last_active",new An(e.last_active)),n.prop("rw","last_read",new An(e.last_read)),n.prop("rw","messages",[]),n.prop("rw","modes",{}),n.prop("rw","name",e.name||e.dialog_id||"#unknown"),n.prop("rw","status","pending"),n.prop("rw","topic",e.topic||""),n.prop("rw","unread",e.unread||0),e.hasOwnProperty("dialog_id")?(n.prop("ro","dialog_id",e.dialog_id),n.prop("rw","frozen",e.frozen||"")):n.prop("ro","frozen",(function(){return n._calculateFrozen()})),e.dialog_id&&n.prop("persist","wantNotifications",!1,{key:e.dialog_id+":wantNotifications",lazy:!0}),n._addOperations(),n}var n,r;return je(t,e),Ne(t,[{key:"addMessage",value:function(e){if(e.from&&-1!=["action","error","private"].indexOf(e.type)){if(e.highlight||this.is_private||this.wantNotifications){var t=e.from==this.name?e.from:Zt("%1 in %2",e.from,this.name);this.events.notifyUser(t,e.message)}this.update({unread:this.unread+1})}return this.addMessages("push",[e])}},{key:"addMessages",value:function(e,t){var n=0,r=t.length;switch(e){case"push":n=this.messages.length,r=(t=this.messages.concat(t)).length;break;case"unshift":t=t.concat(this.messages)}for(var o=n;o<r;o++){var a=t[o];a.hasOwnProperty("markdown")||(a.from||(a.from=this.connection_id||"Convos"),a.type||(a.type="notice"),a.vars&&(a.message=Zt.apply(void 0,[a.message].concat(Cn(a.vars)))),a.id="msg_"+ ++Bn,a.color=Qe(a.from.toLowerCase()),a.ts=new An(a.ts),a.dayChanged=0!=o&&a.ts.getDate()!=t[o-1].ts.getDate(),a.embeds=(a.message.match(/https?:\/\/(\S+)/g)||[]).map((function(e){return e.replace(/(\W)?$/,"")})),a.fromId=a.from.toLowerCase(),a.isSameSender=0!=o&&t[o].from==t[o-1].from,a.markdown=Ft(a.message))}return this.update({messages:t}),this}},{key:"is",value:function(e){return"frozen"==e?this.frozen&&!0:"private"==e?this.is_private:"unread"==e?this.unread&&!0:this.status==e}},{key:"load",value:(r=Ee(xe.mark((function e(t){var n,r,o,a;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.before,r=t.maybe,this.messagesOp&&!this.is("loading")){e.next=3;break}return e.abrupt("return",this);case 3:if(!r||"success"!=this.messagesOp.status){e.next=5;break}return e.abrupt("return",this);case 5:if(o={connection_id:this.connection_id,dialog_id:this.dialog_id},!n||!n.endOfHistory){e.next=8;break}return e.abrupt("return");case 8:return n&&n.ts&&(n=n.ts.toISOString()),n&&(o.before=n),this.update({status:"loading"}),e.next=13,this.messagesOp.perform(o);case 13:return a=this.messagesOp.res.body,this.addMessages("unshift",a.messages||[]),this.update({status:this.messagesOp.status}),a.end&&this.messages.length&&(this.messages[0].endOfHistory=!0),e.abrupt("return",this);case 18:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"findParticipant",value:function(e){return this._participants.get(this._participantId(void 0===e?"":e))}},{key:"participants",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.forEach((function(t){t.nick||(t.nick=t.name);var n=e._participantId(t.nick),r=e._participants.get(n);r&&(Object.keys(t).forEach((function(e){r[e]=t[e]})),t=r),t.modes||(t.modes={}),e._calculateModes(Ln,t.mode,t.modes),e._participants.set(n,In({name:t.nick},t,{color:Qe(n),id:n,ts:new An}))})),t.length&&this.update({force:!0}),this._participants.toArray()}},{key:"send",value:function(e,t){this.events.send({connection_id:this.connection_id,dialog_id:this.dialog_id||"",message:e},t?this[t].bind(this):null)}},{key:"setLastRead",value:(n=Ee(xe.mark((function e(){return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setLastReadOp){e.next=2;break}return e.abrupt("return");case 2:return this.update({errors:0,unread:0}),e.next=5,this.setLastReadOp.perform({connection_id:this.connection_id,dialog_id:this.dialog_id});case 5:this.update(this.setLastReadOp.res.body||{});case 6:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"update",value:function(e){return this._loadParticipants(),wn(Te(t.prototype),"update",this).call(this,e)}},{key:"wsEventMode",value:function(e){e.nick?(this.participants([{nick:e.nick,mode:e.mode}]),this.addMessage({message:"%1 got mode %2 from %3.",vars:[e.nick,e.mode,e.from]})):this.update({modes:this._calculateModes(Pn,e.mode,this.modes)})}},{key:"wsEventNickChange",value:function(e){var t=this._participantId(e.old_nick);if(this._participants.has(t)&&e.old_nick!=e.new_nick){this._participants.delete(t);var n="me"==e.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessage({message:n,vars:[e.old_nick,e.new_nick]})}}},{key:"wsEventPart",value:function(e){var t=this.findParticipant(e.nick);t&&!t.me&&(this._participants.delete(this._participantId(e.nick)),this.update({force:!0}),this.addMessage(this._partMessage(e)))}},{key:"wsEventSentNames",value:function(e){this._updateParticipants(e);var t={message:"Participants (%1): %2",vars:[]},n=this._participants.toArray().map((function(e){return(Tn[e.mode]||e.mode||"")+e.name}));n.length>1&&(t.message+=" and %3.",t.vars[2]=n.pop()),t.vars[0]=n.length,t.vars[1]=n.join(", "),this.addMessage(t)}},{key:"wsEventSentTopic",value:function(e){var t=e.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessage({message:t,vars:[this.name,e.topic]}),this.update({topic:e.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("dialogMessages")),this.prop("ro","setLastReadOp",this.api.operation("setDialogLastRead"))}},{key:"_calculateModes",value:function(e,t,n){var r=(t||"").match(/^(\+|-)?(.*)/)||["","+",""],o=Re(r,3),a=(o[0],o[1]);o[2].split("").forEach((function(t){n[e[t]||t]="-"!=a}))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadParticipants",value:function(){if(!this.participantsLoaded&&this.dialog_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success"))return this.participantsLoaded=!0,this.is_private?this.send("/ison","_noop"):this.send("/names","_updateParticipants")}},{key:"_noop",value:function(){}},{key:"_participantId",value:function(e){return e.toLowerCase()}},{key:"_partMessage",value:function(e){var t={message:"%1 parted.",vars:[e.nick]};return e.kicker?(t.message="%1 was kicked by %2"+(e.message?": %3":""),t.vars.push(e.kicker),t.vars.push(e.message)):e.message&&(t.message+=" Reason: %2",t.vars.push(e.message)),t}},{key:"_updateParticipants",value:function(e){this._participants.clear(),this.participants(e.participants),e.stopPropagation()}}]),t}(Ie);function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Gn=function(e,t){return(e.is_private||0)-(t.is_private||0)||e.name.localeCompare(t.name)},Kn=function(e){function t(e){var n;return Ce(this,t),(n=Pe(this,Te(t).call(this,e))).prop("ro","dialogs",new Dn([],{sorter:Gn})),n.prop("rw","on_connect_commands",e.on_connect_commands||""),n.prop("rw","state",e.state||"queued"),n.prop("rw","wanted_state",e.wanted_state||"connected"),n.prop("rw","url","string"==typeof e.url?new _n(e.url):e.url),n.prop("rw","nick",e.nick||n.url.searchParams.get("nick")||""),n.participants([{nick:n.nick}]),n}return je(t,e),Ne(t,[{key:"addDialog",value:function(e){var t=e.match(/^[a-z]/i);this.send(t?"/query ".concat(e):"/join ".concat(e))}},{key:"ensureDialog",value:function(e){var t=this,n=this.dialogs.get(e.dialog_id);return n?n.update(e):((n=new Hn(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{connection_id:this.connection_id,api:this.api,events:this.events}))).on("message",(function(e){return t.emit("message",e)})),n.on("update",(function(){return t.update({force:!0})})),this._addDefaultParticipants(n),this.dialogs.set(n.dialog_id,n),this.update({force:!0}),n)}},{key:"findDialog",value:function(e){return this.dialogs.get(e.dialog_id)}},{key:"is",value:function(e){return this.state==e||wn(Te(t.prototype),"is",this).call(this,e)}},{key:"removeDialog",value:function(e){return this.dialogs.delete(e.dialog_id),this.update({force:!0})}},{key:"update",value:function(e){return e.url&&"string"==typeof e.url&&(e.url=new _n(e.url)),wn(Te(t.prototype),"update",this).call(this,e)}},{key:"wsEventConnection",value:function(e){this.update({state:e.state}),this.addMessage(e.message?{message:"Connection state changed to %1: %2",vars:[e.state,e.message]}:{message:"Connection state changed to %1.",vars:[e.state]})}},{key:"wsEventFrozen",value:function(e){var t=this.findDialog(e),n=t&&t.frozen;this.ensureDialog(e).participants([{nick:this.nick,me:!0}]),e.frozen&&(t||this).addMessage({message:e.frozen,vars:[]}),n&&!e.frozen&&t.addMessage({message:"Connected.",vars:[]})}},{key:"wsEventMessage",value:function(e){return e.dialog_id?this.ensureDialog(e).addMessage(e):this.addMessage(e)}},{key:"wsEventNickChange",value:function(e){var n={old_nick:e.old_nick||this.nick,new_nick:e.new_nick||e.nick,type:e.type};wn(Te(t.prototype),"wsEventNickChange",this).call(this,n),this.dialogs.forEach((function(e){return e.wsEventNickChange(n)}))}},{key:"wsEventError",value:function(e){var t=e.dialog_id&&e.frozen?this.ensureDialog(e):this.findDialog(e)||this;t.update({errors:this.errors+1});var n=qe(e)||e.frozen||"Unknown error from %1.";"Password protected."==n&&(n="Invalid password."),t.addMessage({message:n,type:"error",sent:e,vars:e.command||[e.message]})}},{key:"wsEventJoin",value:function(e){var t=this.ensureDialog(e),n=e.nick||this.nick;n!=this.nick&&t.addMessage({message:"%1 joined.",vars:[n]}),t.participants([{nick:n}])}},{key:"wsEventPart",value:function(e){if(e.nick==this.nick)return this.removeDialog(e);e.dialog_id||(this.dialogs.forEach((function(t){return t.wsEventPart(e)})),e.stopPropagation())}},{key:"wsEventQuit",value:function(e){this.wsEventPart(e)}},{key:"wsEventSentJoin",value:function(e){this.wsEventJoin(e)}},{key:"wsEventSentList",value:function(e){var t=e.args||"/*/";this.addMessage(e.done?{message:"Found %1 of %2 dialogs from %3.",vars:[e.dialogs.length,e.n_dialogs,t]}:{message:"Found %1 of %2 dialogs from %3, but dialogs are still loading.",vars:[e.dialogs.length,e.n_dialogs,t]})}},{key:"wsEventSentMode",value:function(e){var t=this.findDialog(e)||this,n=(e.command[1]||"").match(/(\W*)(\w)$/);if(!n)return console.log("[wsEventSentMode] Unable to handle message:",e);switch(n.shift(),n[1]){case"":return t.addMessage({message:"%s has mode %s",vars:[e.dialog_id,e.mode]});case"k":return t.addMessage({message:"+"==n[0]?"Key was set.":"Key was unset."});case"b":return this._wsEventSentModeB(e,n)}}},{key:"_wsEventSentModeB",value:function(e,t){var n=this.findDialog(e)||this;if(e.banlist)e.banlist.length||n.addMessage({message:"Ban list is empty."}),e.banlist.forEach((function(e){n.addMessage({message:"Ban mask %1 set by %2 at %3.",vars:[e.mask,e.by,new Date(1e3*e.ts).toLocaleString()]})}));else{var r="+"==t[0]?"set":"removed";n.addMessage({message:"Ban mask %1 ".concat(r,"."),vars:[e.command[2]]})}}},{key:"wsEventSentQuery",value:function(e){this.ensureDialog(e)}},{key:"wsEventSentWhois",value:function(e){var t="%1 (%2)",n=[e.nick,e.host],r=Object.keys(e.channels).sort().map((function(t){return(Tn[e.channels[t].mode]||"")+t}));e.channels=r,e.idle_for&&r.length?(t+=" has been idle for %3 in %4.",n.push(e.idle_for),n.push(r.join(", "))):e.idle_for&&!r.length?(t+="has been idle for %3, and is not in any channels.",n.push(e.idle_for)):r.length?(t+=" is active in %3.",n.push(r.join(", "))):t+=" is not in any channels.",(this.findDialog(e)||this).addMessage({message:t,vars:n,sent:e})}},{key:"_addDefaultParticipants",value:function(e){var t=[{nick:this.nick,me:!0}];e.is_private&&t.push({nick:e.name}),e.participants(t)}},{key:"_addOperations",value:function(){this.prop("ro","setLastReadOp",this.api.operation("setConnectionLastRead")),this.prop("ro","messagesOp",this.api.operation("connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),t}(Hn),Fn=we((function(e){function t(e){let t=document.createElement("div");const n=[[e,t]],r=[];for(;n.length;){const[e,o]=n.shift();let a,i,s=typeof e;if(null===e||"undefined"==s?s="null":Array.isArray(e)&&(s="array"),"array"==s)i=e=>e,i.len=e.length,a=document.createElement("div"),a.className="json-array "+(i.len?"has-items":"is-empty");else if("object"==s){const t=Object.keys(e).sort();i=e=>t[e],i.len=t.length,a=document.createElement("div"),a.className="json-object "+(i.len?"has-items":"is-empty")}else a=document.createElement("span"),a.className="json-"+s,a.textContent="null"==s?"null":"boolean"!=s?e:e?"true":"false";if(i){const c=document.createElement("span");if(c.className="json-type",c.textContent=i.len?s+"["+i.len+"]":"{}",o.appendChild(c),-1!=r.indexOf(e))t.classList.add("has-recursive-items"),a.classList.add("is-seen");else{for(let t=0;t<i.len;t++){const r=i(t),o=document.createElement("div"),s=document.createElement("span");s.className="json-key",s.textContent=r,o.appendChild(s),a.appendChild(o),n.push([e[r],o])}r.push(e)}}o.className="json-item "+a.className.replace(/^json-/,"contains-"),o.appendChild(a)}return t}try{e.exports={jsonhtmlify:t}}catch(e){window.jsonhtmlify=t}})).jsonhtmlify;function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Vn=function(e){function t(e){var n;return Ce(this,t),(n=Pe(this,Te(t).call(this))).name="EmbedMaker",n.prop("persist","disableInstagram",!1),n.prop("persist","disableTwitter",!1),n.prop("persist","expandUrlToMedia",!0),n.prop("ro","api",e.api),n.prop("ro","embeds",{}),n}return je(t,e),Ne(t,[{key:"render",value:function(e,t){var n=this;if(this.expandUrlToMedia){var r={};Fe(e,".message__embed",(function(e){r[e.dataset.url]=e})),t.forEach((function(t){n.embeds[t]||n._loadAndRender(t),r[t]||e.appendChild(n._ensureEmbedEl(t)),delete r[t]})),Object.keys(r).forEach((function(e){return r[e].remove()}))}}},{key:"renderInstagram",value:function(e){if(!this.disableInstagram)return window.instgrm?window.instgrm.Embeds.process():void Ge("//platform.instagram.com/en_US/embeds.js")}},{key:"renderPasteEl",value:function(e){nt.highlightBlock(e.querySelector("pre")),Fe(e,".le-meta",(function(e){e.addEventListener("click",(function(){return e.parentNode.classList.toggle("is-expanded")}))}))}},{key:"renderPhoto",value:function(e){var t=this;Fe(e,"img",(function(e){return e.addEventListener("click",(function(n){n.preventDefault(),t.showMedia(e)}))}))}},{key:"renderTwitter",value:function(e){this.disableTwitter||(window.twttr&&window.twttr.widgets.load(),Ge("//platform.twitter.com/widgets.js"))}},{key:"showMedia",value:function(e){var t=He(document.querySelector("body"),"fullscreen-media-wrapper",(function(e){e.addEventListener("click",(function(t){return Ye(e,t.target!=e)}))}));!function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(t),t.appendChild(e.cloneNode()),Ye(t,!0)}},{key:"toggleDetails",value:function(e,t){var n=e.querySelector(".has-message-details");if(n)return Ye(n,"toggle");var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.sent||t);["bubbles","color","command","dayChanged","dispatchTo","embeds","event","fromId","id","isSameSender","markdown","method","stopPropagation"].forEach((function(e){return delete r[e]})),r.ts=t.ts.toLocaleString(),(n=Fn(r.sent||r)).className=["message__embed","has-message-details",n.className].join(" "),e.appendChild(n)}},{key:"_bufAsBase64",value:function(e){var t=new Uint8Array(e).reduce((function(e,t){return e+String.fromCharCode(t)}),"");return window.btoa(t)}},{key:"_ensureEmbedEl",value:function(e){return this.embeds[e].el||(this.embeds[e].el=He(null,"message__embed",(function(t){t.dataset.url=e})))}},{key:"_loadAndRender",value:function(e){var t=this;return this.embeds[e]={},this.api.operation("embed",{url:e}).perform().then((function(n){var r=n.res.body;if(r.html){var o=t._ensureEmbedEl(e);o.innerHTML=r.html,Fe(o,"a",(function(e){e.target="_blank"})),Fe(o,"img",(function(e){return t._processImage(e)}));var a=(r.provider_name||"").toLowerCase();if("instagram"==a)return t.renderInstagram(o);if("twitter"==a)return t.renderTwitter(o);if(-1!=(o.firstChild.className||"").split(/\s+/).indexOf("le-paste"))return t.renderPasteEl(o);Fe(o,".le-photo, .le-thumbnail",(function(e){return t.renderPhoto(o)}))}}))}},{key:"_processImage",value:function(e){var t=this;if(!$t(e.src))return e.addEventListener("error",(function(){return e.style.display="none"}));e.originalSource=e.src,e.src="",e.style.visibility="hidden",fetch(e.originalSource).then((function(n){var r=n.headers.get("Content-Type");return r?n.arrayBuffer().then((function(n){return t._renderImage(e,n,{contentType:r})})):t._renderImage(e,new ArrayBuffer(0),{})}))}},{key:"_renderImage",value:function(e,t,n){var r=n.contentType,o={1:0,3:180,6:90,8:270},a=new DataView(t);if(!r||t.length<2||65496!=a.getUint16(0))return e.src=e.originalSource,void(e.style.visibility="visible");for(var i=a.byteLength,s=2;s<i-2&&!e.orientation;){var c=a.getUint16(s);switch(s+=2,c){case 65505:i=a.getUint16(s)+s,s+=2;break;case 274:e.orientation=o[a.getUint16(s+6,!1)]}}void 0!==e.orientation&&(e.style.transform="rotate("+e.orientation+"deg)"),e.src="data:"+r+";base64,"+this._bufAsBase64(t),e.style.visibility="visible"}}]),t}(Ie);function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qn=window.Notification||{permission:"denied"},Jn=0,Xn=function(e){function t(e){var n;return Ce(this,t),(n=Pe(this,Te(t).call(this))).keepaliveTid=setInterval((function(){return n._send({method:"ping"})}),1e4),n.notificationIcon="",n.queue=[],n.waiting={},n.prop("persist","debugEvents",-1!=navigator.userAgent.indexOf("Mozilla")?1:0),n.prop("persist","notificationCloseDelay",5e3),n.prop("persist","wantNotifications",null),n.prop("ro","browserNotifyPermission",(function(){return Qn.permission})),n.prop("ro","wsUrl",e.wsUrl),n.prop("rw","ready",!1),n}return je(t,e),Ne(t,[{key:"dispatch",value:function(e){var t=("wsEvent_"+this._getEventNameFromParam(e)).replace(/_(\w)/g,(function(e,t){return t.toUpperCase()}));this.debugEvents&&this._debug(t,e),e.bubbles=!0,e.stopPropagation=function(){e.bubbles=!1};var n=this.waiting[e.id];n&&n(e),e.bubbles&&this.emit("message",Yn({},e,{dispatchTo:t}))}},{key:"listenToGlobalEvents",value:function(){var e=this;window.addEventListener("error",(function(t){var n=t.colno,r=t.error,o=t.filename,a=t.lineno,i=t.message,s=t.type,c=t.timeStamp;e.send({method:"debug",type:s,colno:n,error:r,filename:o,lineno:a,message:i,timeStamp:c})})),window.addEventListener("unhandledrejection",(function(t){var n=t.type,r=t.reason,o=t.returnValue,a=t.timeStamp;e.send({method:"debug",type:n,reason:r,returnValue:o,timeStamp:a})}))}},{key:"notifyUser",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.wantNotifications?"granted"!=Qn.permission?Qn.permission:!n.force&&document.hasFocus()?"document.hasFocus":"":"wantNotifications == false";if(r)return console.log("[Events:notifyUser] Rejected: "+r,[e,t,n]),this;var o=new Qn(e,Yn({icon:this.notificationIcon},n,{body:t}));return o.onclick=function(e){window.focus(),o.close()},setTimeout((function(){return o.close()}),this.notificationCloseDelay),this}},{key:"rejectNotifications",value:function(){return this.update({wantNotifications:!1})}},{key:"requestPermissionToNotify",value:function(e){var t=this;return"granted"!=Qn.permission&&Qn.requestPermission?(Qn.requestPermission((function(n){t.update({wantNotifications:"granted"==n}),e&&e(n)})),this):(this.update({wantNotifications:"granted"==Qn.permission}),e&&e(Qn.permission),this)}},{key:"send",value:function(e,t){e.id||"ping"==e.method||(e.id=++Jn),!e.method&&e.message&&(e.method="send"),e.dialog&&["connection_id","dialog_id"].forEach((function(t){e[t]=e.dialog[t]||""})),delete e.dialog,this.debugEvents&&this._debug("send",e),t&&(this.waiting[e.id]=t),this.queue.push(e),this._ws("dequeue")}},{key:"update",value:function(e){return wn(Te(t.prototype),"update",this).call(this,e),e.wantNotifications&&!this.wantNotifications&&this.notifyUser("Convos",Zt("You have enabled notifications!"),{force:!0}),this}},{key:"_debug",value:function(e,t){1==this.debugEvents&&"wsEventPong"!=e&&"ping"!=t.method?console.log("[Events:"+(e||"data")+"]",t):this.debugEvents>=2&&console.log("[Events:"+(e||"data")+"]",t)}},{key:"_getEventNameFromParam",value:function(e){return e.errors?"error":"state"==e.event?e.type:"sent"==e.event&&e.message.match(/\/\S+/)?(e.command=e.message.split(/\s+/).filter((function(e){return e.length})),e.command[0]=e.command[0].substring(1),"sent_"+e.command[0]):e.event}},{key:"_send",value:function(e){var t=this.ws&&1==this.ws.readyState&&this.ws;return t&&t.send(JSON.stringify(e)),!!t}},{key:"_ws",value:function(e){var t=this;"dequeue"==e&&this._wsReconnectTid&&(clearTimeout(this._wsReconnectTid),delete this._wsReconnectTid),"start"==e&&this.update({ready:!0}),"stop"==e?(this._wsReconnectTid||(this._wsReconnectTid=setTimeout((function(){return t._ws("dequeue")}),3e3)),this.update({ready:!1}),delete this.ws):this.ws?this.queue=this.queue.filter((function(e){return!t._send(e)})):(this.ws=new WebSocket(this.wsUrl),this.ws.onopen=function(){return t._ws("start")},this.ws.onclose=function(){return t._ws("stop")},this.ws.onerror=function(){return t._ws("stop")},this.ws.onmessage=function(e){return t.dispatch(JSON.parse(e.data))})}}]),t}(Ie);function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var tr=function(e){function t(e){return Ce(this,t),Pe(this,Te(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{connection_id:"",dialog_id:"notifications",is_private:!0,name:"Notifications"})))}var n;return je(t,e),Ne(t,[{key:"load",value:(n=Ee(xe.mark((function e(){var n,r=arguments;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=r.length>0&&void 0!==r[0]?r[0]:{}).maybe&&(this.messagesOp.update({status:"pending"}),this.update({messages:[]})),e.next=4,wn(Te(t.prototype),"load",this).call(this,n);case 4:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"send",value:function(){}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("notificationMessages")),this.prop("ro","setLastReadOp",this.api.operation("readNotifications"))}}]),t}(Hn);function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var rr=function(e){function t(e){var n;Ce(this,t),n=Pe(this,Te(t).call(this));var r=e.api;return n.prop("ro","api",(function(){return r})),n.prop("ro","connections",new Dn),n.prop("ro","email",(function(){return n.getUserOp.res.body.email||""})),n.prop("ro","embedMaker",new Vn({api:r})),n.prop("ro","events",n._createEvents(e)),n.prop("ro","getUserOp",r.operation("getUser",{connections:!0,dialogs:!0})),n.prop("ro","notifications",new tr({api:r,events:n.events})),n.prop("ro","roles",new Set),n.prop("ro","unread",(function(){return n._calculateUnread()})),n.prop("rw","highlight_keywords",[]),n.prop("rw","status","pending"),n.prop("persist","lastUrl",""),n.prop("persist","showGrid",!1),n.prop("persist","theme","auto"),n.prop("persist","version","0"),n}var n;return je(t,e),Ne(t,[{key:"calculateLastUrl",value:function(){if(this.is("error"))return vt("/login");if(!this.is("success"))return null;if(this.lastUrl)return this.lastUrl;var e=this.connections.toArray()[0];if(!e)return vt("/settings/connection");var t=e.dialogs.toArray()[0];return vt(t?t.path:e.path)}},{key:"dialogs",value:function(e){var t=[];return this.connections.toArray().forEach((function(n){n.dialogs.toArray().forEach((function(n){e&&!e(n)||t.push(n)}))})),t}},{key:"ensureConnected",value:function(){this.email&&this.send({method:"ping"})}},{key:"ensureDialog",value:function(e){var t=this;if(e.dialog_id)return this.ensureDialog({connection_id:e.connection_id}).ensureDialog(e);var n=this.findDialog(e);return n?n.update(e):((n=new Kn(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){vn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{api:this.api,events:this.events}))).on("update",(function(){return t.update({force:!0})})),this.connections.set(n.connection_id,n),this.update({force:!0}),n)}},{key:"findDialog",value:function(e){var t=this.connections.get(e.connection_id);return e.dialog_id?t&&t.findDialog(e):t}},{key:"is",value:function(e){var t=this;return Array.isArray(e)?!!e.filter((function(e){return t.is(e)})).length:"loggedIn"==e?this.email&&!0:"offline"==e?"fetch"==qe(this.getUserOp.err||[],"source"):this.status==e}},{key:"load",value:(n=Ee(xe.mark((function e(){var t,n=this;return xe.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is("loading")){e.next=2;break}return e.abrupt("return",this);case 2:return this.update({status:"loading"}),e.next=5,this.getUserOp.perform();case 5:return t=this.getUserOp.res.body,this.connections.clear(),this.notifications.update({unread:t.unread||0}),this.roles.clear(),(t.connections||[]).forEach((function(e){return n.ensureDialog(e)})),(t.dialogs||[]).forEach((function(e){return n.ensureDialog(e)})),(t.roles||[]).forEach((function(e){return n.roles.add(e)})),this.update({highlight_keywords:t.highlight_keywords||[],status:this.getUserOp.status}),this.ensureConnected(),e.abrupt("return",this);case 15:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"removeDialog",value:function(e){if(e.dialog_id){var t=this.findDialog({connection_id:e.connection_id});t&&t.removeDialog(e)}else this.connections.delete(e.connection_id),this.update({force:!0})}},{key:"send",value:function(e,t){return this.events.send(e,t)}},{key:"wsEventMe",value:function(e){var t=this.ensureDialog({connection_id:e.connection_id});t.wsEventNickChange(e),t.update(e)}},{key:"wsEventPong",value:function(e){this.wsPongTimestamp=e.ts}},{key:"_calculateUnread",value:function(){return this.notifications.unread+this.dialogs((function(e){return e.is_private})).reduce((function(e,t){return e+t.unread}),0)}},{key:"_createEvents",value:function(e){var t=this,n=new Xn(e);return n.on("message",(function(e){t._dispatchMessageToDialog(e),t.emit(e.dispatchTo,e),t[e.dispatchTo]&&t[e.dispatchTo](e)})),n.on("update",(function(e){if(e.ready)return!!t.is("pending")&&t.load();t.update({status:"pending"}),t.connections.forEach((function(e){return e.update({state:"unreachable"})}))})),n}},{key:"_dispatchMessageToDialog",value:function(e){var t=this.findDialog({connection_id:e.connection_id});if(t&&(t[e.dispatchTo]&&t[e.dispatchTo](e),e.bubbles)){var n=t.findDialog(e);n&&n[e.dispatchTo]&&n[e.dispatchTo](e)}}}]),t}(Ie),or=[["auto","Auto"],["dark","Dark"],["light","Light"],["nord","Nord"]],ar="dark",ir=window.matchMedia("(prefers-color-scheme: dark)");function sr(e){let t,n,r,o,a,i,s,c,u;const p=e[5].default,m=d(p,e,e[4],null),g=new at({props:{name:e[1]?"times-circle":"bars"}});return{c(){t=x("header"),m&&m.c(),n=E(),r=x("a"),he(g.$$.fragment),o=E(),a=x("small"),i=k(e[0]),S(a,"class","chat-header__unread"),a.hidden=s=!e[0],S(r,"href",c="#activeMenu:"+(e[1]?"":"nav")),S(r,"class","chat-header__hamburger"),S(t,"class","chat-header")},m(e,s){y(e,t,s),m&&m.m(t,null),v(t,n),v(t,r),$e(g,r,null),v(r,o),v(r,a),v(a,i),u=!0},p(e,[t]){m&&m.p&&16&t&&m.p(l(p,e,e[4],null),f(p,e[4],t,null));const n={};2&t&&(n.name=e[1]?"times-circle":"bars"),g.$set(n),(!u||1&t)&&M(i,e[0]),(!u||1&t&&s!==(s=!e[0]))&&(a.hidden=s),(!u||2&t&&c!==(c="#activeMenu:"+(e[1]?"":"nav")))&&S(r,"href",c)},i(e){u||(de(m,e),de(g.$$.fragment,e),u=!0)},o(e){le(m,e),le(g.$$.fragment,e),u=!1},d(e){e&&w(t),m&&m.d(e),be(g)}}}function cr(e,t,n){let r,o;u(e,dt,e=>n(1,o=e));const a=K("user");u(e,a,e=>n(3,r=e));let i,{$$slots:s={},$$scope:c}=t;return e.$set=e=>{"$$scope"in e&&n(4,c=e.$$scope)},e.$$.update=()=>{8&e.$$.dirty&&n(0,i=r.unread)},[i,o,a,r,c,s]}ir.matches&&(ar="dark"),ir.addListener((function(e){ar=e.matches?"dark":"light"}));class ur extends ye{constructor(e){super(),ve(this,e,cr,sr,i,{})}}var dr=[];function lr(e,t){return lr[e]?lr[e](t):[]}function fr(e,t,n){const r=e.slice();return r[27]=t[n],r[29]=n,r}function pr(e){let t,n,r,o=(e[27].text||e[27].val)+"";return{c(){t=x("a"),S(t,"href",n="#index:"+e[29]),S(t,"tabindex","-1"),A(t,"has-focus",e[29]==e[0]),r=O(t,"click",N(e[8]))},m(e,n){y(e,t,n),t.innerHTML=o},p(e,n){32&n&&o!==(o=(e[27].text||e[27].val)+"")&&(t.innerHTML=o),1&n&&A(t,"has-focus",e[29]==e[0])},d(e){e&&w(t),r()}}}function mr(e){let t,n,r,a,i,s,c,u,d,l,f,p,m,g,h,$;const b=new at({props:{name:"paper-plane"}});let k=e[5],C=[];for(let t=0;t<k.length;t+=1)C[t]=pr(fr(e,k,t));return{c(){t=x("form"),n=x("textarea"),a=E(),i=x("div"),s=x("span"),c=E(),u=x("input"),d=E(),l=x("a"),he(b.$$.fragment),f=E(),p=x("div");for(let e=0;e<C.length;e+=1)C[e].c();S(n,"id","chat_input"),S(n,"placeholder",r=Zt("What is on your mind %1?",e[7].nick)),S(u,"type","file"),S(i,"class","chat-input__upload-wrapper"),S(l,"href","#send"),S(l,"class","chat-input__send"),S(p,"class",m="chat-input_autocomplete chat-input_autocomplete_"+e[1]),p.hidden=g=!e[5].length,S(t,"class","chat-input"),$=[O(n,"change",(function(){e[23].apply(this,arguments)})),O(n,"keydown",e[24]),O(n,"keyup",e[25]),O(u,"change",e[10]),O(l,"click",N(e[9])),O(t,"submit",N(e[21]))]},m(r,o){y(r,t,o),v(t,n),e[22](n),v(t,a),v(t,i),v(i,s),v(i,c),v(i,u),e[26](u),v(t,d),v(t,l),$e(b,l,null),v(t,f),v(t,p);for(let e=0;e<C.length;e+=1)C[e].m(p,null);h=!0},p(t,[o]){if(e=t,(!h||128&o&&r!==(r=Zt("What is on your mind %1?",e[7].nick)))&&S(n,"placeholder",r),289&o){let t;for(k=e[5],t=0;t<k.length;t+=1){const n=fr(e,k,t);C[t]?C[t].p(n,o):(C[t]=pr(n),C[t].c(),C[t].m(p,null))}for(;t<C.length;t+=1)C[t].d(1);C.length=k.length}(!h||2&o&&m!==(m="chat-input_autocomplete chat-input_autocomplete_"+e[1]))&&S(p,"class",m),(!h||32&o&&g!==(g=!e[5].length))&&(p.hidden=g)},i(e){h||(de(b.$$.fragment,e),h=!0)},o(e){le(b.$$.fragment,e),h=!1},d(n){n&&w(t),e[22](null),e[26](null),be(b),_(C,n),o($)}}}function gr(t,n,r){let o,a=e;t.$$.on_destroy.push(()=>a());let{dialog:i={}}=n;let c,u,d=0,l="none",f=0;const p=K("user");function m(e,t={}){const n=t.space||"";r(2,c.value=k[0]+e+n+k[3],c),r(2,c.selectionStart=r(2,c.selectionEnd=(k[0]+e+n).length,c),c),n.length&&r(3,f=c.selectionStart)}function g([e,t,n,o]){r(1,l=":"==t&&n.length?"emojis":"/"!=t||e.length?"@"==t&&n.length?"nicks":"#"==t||"&"==t?"dialogs":"none":"commands"),r(0,d=0);const a=lr(l,{dialog:i,query:t+n,user:p});return a.length&&a.unshift({val:t+n}),a}function h(e){if(!c)return["","","",""];let t="",n="";return[c.value.substring(0,e).replace(/(\S)(\S*)$/,(e,r,o)=>(t=r,n=o,"")),t,n,c.value.substring(e)]}function $(e){const t=_[d];t&&m(t.val,e)}function b(e,t){_.length&&(e.preventDefault(),r(0,d+=t),d<0&&r(0,d=_.length-1),d>=_.length&&r(0,d=0),$({space:""}))}function v(){const e={message:c.value,method:"send",dialog:i};e.message=e.message.replace(/^\/close/i,"/part"),e.message=e.message.replace(/^\/j\b/i,"/join");(e.message.match(/^\/(\w+)\s*(\S*)/)||["","message",""]).slice(1);e.message.length&&p.send(e,e=>{e.errors&&i&&(e.stopPropagation(),e.vars=[e.message,qe(e.errors)],e.message='Could not send message "%1": %2',i.addMessage(e))}),r(2,c.value="",c),r(3,f=0)}function y(e){const t=e.target&&e.target.files||e.dataTransfer&&e.dataTransfer.files;if(!t||!t.length)return;if(t.length>1)return console.log("Cannot upload more than one file.");const n=new FormData;n.append("file",t[0]),p.api.operation("uploadFile").perform({formData:n}).then(e=>{const t=e.res.body;if(t.files&&t.files.length)return m(t.files[0].url);t.errors&&i.addMessage({message:"Could not upload file: %1",vars:[Zt(qe(t.errors))],type:"error"})})}q(()=>{r(4,u.uploader=y,u)});const w={ArrowDown:e=>b(e,e.shiftKey?4:1),ArrowUp:e=>b(e,e.shiftKey?-4:-1),Tab:e=>b(e,e.shiftKey?-1:1),Enter(e){_[d]?(e.preventDefault(),$({space:" "})):e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),v())},Fallback(e){},Release(e){1!=e.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(e.key)||r(3,f=c.selectionStart)}};let _,x,k;return t.$set=e=>{"dialog"in e&&r(12,i=e.dialog)},t.$$.update=()=>{8&t.$$.dirty&&r(15,k=h(f)),32768&t.$$.dirty&&r(5,_=g(k)||[]),4096&t.$$.dirty&&(r(6,x=p.findDialog({connection_id:i.connection_id})),a(),a=s(x,e=>r(7,o=e)))},[d,l,c,f,u,_,x,o,function(e){r(0,d=parseInt(e.target.closest("a").href.replace(/.*index:/,""),10)),$({space:" "}),c.focus()},v,y,w,i,function(){return u},m,k,p,g,h,$,b,function(e){F(t,e)},function(e){V[e?"unshift":"push"](()=>{r(2,c=e)})},e=>{r(3,f=c.selectionStart)},e=>(w[e.key]||w.Fallback)(e),e=>w.Release(e),function(e){V[e?"unshift":"push"](()=>{r(4,u=e)})}]}lr.commands=function(e){for(var t=e.query,n=[],r=0;r<dr.length;r++)if(0==dr[r].cmd.indexOf(t)){var o=dr[r].alias||dr[r].cmd,a=dr[r].example.replace(/</g,"&lt;");n.push({text:a,val:o})}return n},lr.dialogs=function(e){for(var t=e.dialog,n=e.query,r=e.user.findDialog({connection_id:t.connection_id}).dialogs.toArray(),o=[],a=0;a<r.length&&!(-1!=r[a].name.toLowerCase().indexOf(n)&&(o.push({text:r[a].name,val:r[a].dialog_id}),o.length>=20));a++);return o},lr.emojis=function(e){var t=e.query,n=[];return[":","_"].map((function(e){return e+t.slice(1,2)})).forEach((function(e){for(var r=Kt(e,"group"),o=0;o<r.length&&(r[o].shortname.indexOf(t)>=0&&n.push({val:r[o].emoji,text:Ft(r[o].emoji)}),!(n.length>=20));o++);})),n},lr.nicks=function(e){var t=e.dialog,n=e.query,r=t.participants(),o=new RegExp("^"+We(n.slice(1)),"i"),a=[],i=!0,s=!1,c=void 0;try{for(var u,d=r[Symbol.iterator]();!(i=(u=d.next()).done);i=!0){var l=u.value;if(a.length>=20)break;l.nick.match(o)&&a.push({val:l.nick})}}catch(e){s=!0,c=e}finally{try{i||null==d.return||d.return()}finally{if(s)throw c}}return a},dr.push({cmd:"/me",example:"/me <msg>",description:"Send message as an action."}),dr.push({cmd:"/say",example:"/say <msg>",description:NaN}),dr.push({cmd:"/topic",example:"/topic or /topic <new topic>",description:"Show current topic, or set a new one."}),dr.push({cmd:"/whois",example:"/whois <nick>",description:"Show information about a user."}),dr.push({cmd:"/query",example:"/query <nick>",description:"Open up a new chat window with nick."}),dr.push({cmd:"/msg",example:"/msg <nick> <msg>",description:"Send a direct message to nick."}),dr.push({cmd:"/names",example:"/names",description:"Show participants in the channel."}),dr.push({cmd:"/join",example:"/join <#channel>",description:"Join channel and open up a chat window."}),dr.push({cmd:"/nick",example:"/nick <nick>",description:"Change your wanted nick."}),dr.push({cmd:"/part",example:"/part",description:"Leave channel, and close window."}),dr.push({cmd:"/close",example:"/close <nick>",description:"Close conversation with nick, defaults to current active."}),dr.push({cmd:"/kick",example:"/kick <nick>",description:"Kick a user from the current channel."}),dr.push({cmd:"/mode",example:"/mode [+|-][b|o|v] <user>",description:"Change mode of yourself or a user"}),dr.push({cmd:"/reconnect",example:"/reconnect",description:"Restart the current connection."}),dr.push({cmd:"/raw",example:"/raw <msg>",description:'Allow you to send any RFC 2812 message".'});class hr extends ye{constructor(e){super(),ve(this,e,gr,mr,i,{dialog:12,getUploadEl:13,add:14})}get getUploadEl(){return this.$$.ctx[13]}get add(){return this.$$.ctx[14]}}function $r(e){let t,n,r,o,a;const i=new at({props:{name:e[1],animation:e[2]}}),s=e[4].default,c=d(s,e,e[3],null);return{c(){t=x("div"),n=x("span"),he(i.$$.fragment),r=E(),c&&c.c(),S(t,"class",o="message-status-line "+e[0])},m(e,o){y(e,t,o),v(t,n),$e(i,n,null),v(n,r),c&&c.m(n,null),a=!0},p(e,[n]){const r={};2&n&&(r.name=e[1]),4&n&&(r.animation=e[2]),i.$set(r),c&&c.p&&8&n&&c.p(l(s,e,e[3],null),f(s,e[3],n,null)),(!a||1&n&&o!==(o="message-status-line "+e[0]))&&S(t,"class",o)},i(e){a||(de(i.$$.fragment,e),de(c,e),a=!0)},o(e){le(i.$$.fragment,e),le(c,e),a=!1},d(e){e&&w(t),be(i),c&&c.d(e)}}}function br(e,t,n){let{class:r=""}=t,{icon:o=""}=t,{animation:a=""}=t,{$$slots:i={},$$scope:s}=t;return e.$set=e=>{"class"in e&&n(0,r=e.class),"icon"in e&&n(1,o=e.icon),"animation"in e&&n(2,a=e.animation),"$$scope"in e&&n(3,s=e.$$scope)},[r,o,a,s,i]}class vr extends ye{constructor(e){super(),ve(this,e,br,$r,i,{class:0,icon:1,animation:2})}}function yr(e,t,n){const r=e.slice();return r[14]=t[n],r[16]=n,r}function wr(e){let t,n,r=Zt("notifications"==e[1].dialog_id?"No notifications.":"No messages.")+"";return{c(){t=x("h2"),n=k(r)},m(e,r){y(e,t,r),v(t,n)},p(e,t){2&t&&r!==(r=Zt("notifications"==e[1].dialog_id?"No notifications.":"No messages.")+"")&&M(n,r)},d(e){e&&w(t)}}}function _r(e){let t;const n=new vr({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[xr]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};131072&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function xr(t){let n,r=Zt("Loading...")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function kr(e){let t;const n=new vr({props:{class:"for-last-read",icon:"comments",$$slots:{default:[Er]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};131072&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function Er(t){let n,r=Zt("New messages")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Cr(e){let t;const n=new vr({props:{class:"for-day-changed",icon:"calendar-alt",$$slots:{default:[Nr]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};131080&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function Or(e){let t;const n=new vr({props:{class:"for-start-of-history",icon:"calendar-alt",$$slots:{default:[Sr]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};131080&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function Nr(e){let t,n=e[14].ts.getHumanDate()+"";return{c(){t=k(n)},m(e,n){y(e,t,n)},p(e,r){8&r&&n!==(n=e[14].ts.getHumanDate()+"")&&M(t,n)},d(e){e&&w(t)}}}function Sr(e){let t,n=Zt("Started chatting on %1",e[14].ts.getHumanDate())+"";return{c(){t=k(n)},m(e,n){y(e,t,n)},p(e,r){8&r&&n!==(n=Zt("Started chatting on %1",e[14].ts.getHumanDate())+"")&&M(t,n)},d(e){e&&w(t)}}}function Mr(e){let t,n,r,o=Zt("%1 in %2",e[14].from,e[14].dialog_id)+"";return{c(){t=x("a"),n=k(o),S(t,"href",r=jr(e[14])),S(t,"class","message__from"),R(t,"color",e[14].color)},m(e,r){y(e,t,r),v(t,n)},p(e,a){8&a&&o!==(o=Zt("%1 in %2",e[14].from,e[14].dialog_id)+"")&&M(n,o),8&a&&r!==(r=jr(e[14]))&&S(t,"href",r),8&a&&R(t,"color",e[14].color)},d(e){e&&w(t)}}}function Dr(e){let t,n,r,o,a=e[14].from+"";function i(...t){return e[13](e[14],...t)}return{c(){t=x("a"),n=k(a),S(t,"href",r="#input:"+e[14].from),S(t,"class","message__from"),R(t,"color",e[14].color),S(t,"tabindex","-1"),o=O(t,"click",N(i))},m(e,r){y(e,t,r),v(t,n)},p(o,i){e=o,8&i&&a!==(a=e[14].from+"")&&M(n,a),8&i&&r!==(r="#input:"+e[14].from)&&S(t,"href",r),8&i&&R(t,"color",e[14].color)},d(e){e&&w(t),o()}}}function Rr(e){let t;const n=new at({props:{name:"error"==e[14].type?"exclamation-circle":"info-circle"}});return n.$on("click",e[8]),{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};8&t&&(r.name="error"==e[14].type?"exclamation-circle":"info-circle"),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function Ar(e){let t,n,r,o,a,i,s,c,u,d,l,f,p,m,g,h,$,b,_,C,N,D,R=e[14].ts.getHM()+"",T=e[14].ts.toLocaleString()+"",L=e[14].markdown+"",j=e[16]&&e[16]==e[3].length-e[4]&&kr(e);const I=[Or,Cr],U=[];function z(e,t){return e[14].endOfHistory?0:e[14].dayChanged?1:-1}~(n=z(e))&&(r=U[n]=I[n](e));const B=new at({props:{name:"pick:"+e[14].from,color:e[14].color}});function H(e,t){return e[1].connection_id?Dr:Mr}let q=H(e),G=q(e),K=("error"==e[14].type||"notice"==e[14].type)&&Rr(e);return{c(){j&&j.c(),t=E(),r&&r.c(),o=E(),a=x("div"),he(B.$$.fragment),i=E(),s=x("b"),c=k(R),d=E(),l=x("div"),f=k(T),m=E(),G.c(),g=E(),h=x("div"),K&&K.c(),$=E(),S(s,"class","message__ts"),S(s,"aria-labelledby",u=e[14].id+"_ts"),S(l,"role","tooltip"),S(l,"id",p=e[14].id+"_ts"),b=new P(L,null),S(h,"class","message__text"),S(a,"class",_="message is-type-"+e[14].type),S(a,"data-index",C=e[16]),A(a,"is-not-present",!e[7](e[14])),A(a,"is-sent-by-you",e[14].from==e[0].nick),A(a,"is-highlighted",e[14].highlight),A(a,"has-not-same-from",!e[14].isSameSender&&!e[14].dayChanged),A(a,"has-same-from",e[14].isSameSender&&!e[14].dayChanged),D=O(a,"click",e[6])},m(e,r){j&&j.m(e,r),y(e,t,r),~n&&U[n].m(e,r),y(e,o,r),y(e,a,r),$e(B,a,null),v(a,i),v(a,s),v(s,c),v(a,d),v(a,l),v(l,f),v(a,m),G.m(a,null),v(a,g),v(a,h),K&&K.m(h,null),v(h,$),b.m(h),N=!0},p(e,i){e[16]&&e[16]==e[3].length-e[4]?j?(j.p(e,i),de(j,1)):(j=kr(e),j.c(),de(j,1),j.m(t.parentNode,t)):j&&(ce(),le(j,1,1,()=>{j=null}),ue());let d=n;n=z(e),n===d?~n&&U[n].p(e,i):(r&&(ce(),le(U[d],1,1,()=>{U[d]=null}),ue()),~n?(r=U[n],r||(r=U[n]=I[n](e),r.c()),de(r,1),r.m(o.parentNode,o)):r=null);const m={};8&i&&(m.name="pick:"+e[14].from),8&i&&(m.color=e[14].color),B.$set(m),(!N||8&i)&&R!==(R=e[14].ts.getHM()+"")&&M(c,R),(!N||8&i&&u!==(u=e[14].id+"_ts"))&&S(s,"aria-labelledby",u),(!N||8&i)&&T!==(T=e[14].ts.toLocaleString()+"")&&M(f,T),(!N||8&i&&p!==(p=e[14].id+"_ts"))&&S(l,"id",p),q===(q=H(e))&&G?G.p(e,i):(G.d(1),G=q(e),G&&(G.c(),G.m(a,g))),"error"==e[14].type||"notice"==e[14].type?K?(K.p(e,i),de(K,1)):(K=Rr(e),K.c(),de(K,1),K.m(h,$)):K&&(ce(),le(K,1,1,()=>{K=null}),ue()),(!N||8&i)&&L!==(L=e[14].markdown+"")&&b.p(L),(!N||8&i&&_!==(_="message is-type-"+e[14].type))&&S(a,"class",_),136&i&&A(a,"is-not-present",!e[7](e[14])),9&i&&A(a,"is-sent-by-you",e[14].from==e[0].nick),8&i&&A(a,"is-highlighted",e[14].highlight),8&i&&A(a,"has-not-same-from",!e[14].isSameSender&&!e[14].dayChanged),8&i&&A(a,"has-same-from",e[14].isSameSender&&!e[14].dayChanged)},i(e){N||(de(j),de(r),de(B.$$.fragment,e),de(K),N=!0)},o(e){le(j),le(r),le(B.$$.fragment,e),le(K),N=!1},d(e){j&&j.d(e),e&&w(t),~n&&U[n].d(e),e&&w(o),e&&w(a),be(B),G.d(),K&&K.d(),D()}}}function Pr(e){let t;const n=new vr({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[Tr]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};131072&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function Tr(t){let n,r=Zt("Loading...")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Lr(e){let t,n,r,o,a,i=e[3].length>40&&e[1].is("loading"),s=e[1].is("loading"),c=0==e[3].length&&wr(e),u=i&&_r(e),d=e[3],l=[];for(let t=0;t<d.length;t+=1)l[t]=Ar(yr(e,d,t));const f=e=>le(l[e],1,1,()=>{l[e]=null});let p=s&&Pr(e);return{c(){c&&c.c(),t=E(),u&&u.c(),n=E();for(let e=0;e<l.length;e+=1)l[e].c();r=E(),p&&p.c(),o=C()},m(e,i){c&&c.m(e,i),y(e,t,i),u&&u.m(e,i),y(e,n,i);for(let t=0;t<l.length;t+=1)l[t].m(e,i);y(e,r,i),p&&p.m(e,i),y(e,o,i),a=!0},p(e,[a]){if(0==e[3].length?c?c.p(e,a):(c=wr(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),10&a&&(i=e[3].length>40&&e[1].is("loading")),i?u?(u.p(e,a),de(u,1)):(u=_r(e),u.c(),de(u,1),u.m(n.parentNode,n)):u&&(ce(),le(u,1,1,()=>{u=null}),ue()),479&a){let t;for(d=e[3],t=0;t<d.length;t+=1){const n=yr(e,d,t);l[t]?(l[t].p(n,a),de(l[t],1)):(l[t]=Ar(n),l[t].c(),de(l[t],1),l[t].m(r.parentNode,r))}for(ce(),t=d.length;t<l.length;t+=1)f(t);ue()}2&a&&(s=e[1].is("loading")),s?p?(p.p(e,a),de(p,1)):(p=Pr(e),p.c(),de(p,1),p.m(o.parentNode,o)):p&&(ce(),le(p,1,1,()=>{p=null}),ue())},i(e){if(!a){de(u);for(let e=0;e<d.length;e+=1)de(l[e]);de(p),a=!0}},o(e){le(u),l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)le(l[e]);le(p),a=!1},d(e){c&&c.d(e),e&&w(t),u&&u.d(e),e&&w(n),_(l,e),e&&w(r),p&&p.d(e),e&&w(o)}}}function jr(e){return["","chat",e.connection_id,e.dialog_id].map(encodeURIComponent).join("/")+"#"+e.ts.toISOString()}function Ir(e,t,n){let r,{connection:o}=t,{dialog:a}=t,{input:i}=t;const s=K("user"),c=s.events;u(e,c,e=>n(9,r=e));let d=[],l=0;function f(e,t){const r=[];if("Password protected."==e.frozen)r.push(p({message:"Conversation is password protected. Go to [settings](%1) to enter the password.",vars:["#activeMenu:settings"]}));else if(o.frozen){const e=o.is("unreachable");r.push(p({message:e?"Trying to [reconnect](%1)...":"Disconnected. Your connection %1 can be edited in [settings](%2).",vars:e?["#call:user:ensureConnected"]:[o.name,vt("/chat/"+o.connection_id+"#activeMenu:settings")]}))}else e.frozen&&r.push(p({message:Qt(o,e).replace(/\.$/,""),vars:[]}));null===t.wantNotifications&&r.push(p({message:"Do you want notifications when someone sends you a private message? [Yes](%1) / [No](%2)",vars:["#call:events:requestPermissionToNotify","#call:events:rejectNotifications"]})),n(3,d=r.length?e.messages.concat(r):e.messages),n(4,l=e.unread+r.length)}function p(e){return{color:o.color,from:"Convos",markdown:Yt(e.message,...e.vars),ts:new An,type:"error",...e}}return e.$set=e=>{"connection"in e&&n(0,o=e.connection),"dialog"in e&&n(1,a=e.dialog),"input"in e&&n(2,i=e.input)},e.$$.update=()=>{514&e.$$.dirty&&f(a,r)},[o,a,i,d,l,c,function(e){if(a.connection_id)return;const t=e.target.closest(".message"),n=d[t.dataset.index];n&&(e.preventDefault(),ht(jr(n)))},function(e){return!a.dialog_id||e.fromId==a.connection_id||a.findParticipant(e.fromId)},function(e){const t=e.target.closest(".message");s.embedMaker.toggleDetails(t,d[t.dataset.index])},r,s,f,p,e=>i.add(e.from)]}class Ur extends ye{constructor(e){super(),ve(this,e,Ir,Lr,i,{connection:0,dialog:1,input:2})}}function zr(e){let t,n,r,o,a;const i=new at({props:{animation:e[3],name:e[0]}}),s=e[12].default,c=d(s,e,e[11],null);return{c(){t=x("button"),he(i.$$.fragment),n=E(),c&&c.c(),S(t,"class",r=e[4].join(" ")),t.disabled=e[5],S(t,"type",e[2]),a=O(t,"click",e[13])},m(e,r){y(e,t,r),$e(i,t,null),v(t,n),c&&c.m(t,null),o=!0},p(e,[n]){const a={};8&n&&(a.animation=e[3]),1&n&&(a.name=e[0]),i.$set(a),c&&c.p&&2048&n&&c.p(l(s,e,e[11],null),f(s,e[11],n,null)),(!o||16&n&&r!==(r=e[4].join(" ")))&&S(t,"class",r),(!o||32&n)&&(t.disabled=e[5]),(!o||4&n)&&S(t,"type",e[2])},i(e){o||(de(i.$$.fragment,e),de(c,e),o=!0)},o(e){le(i.$$.fragment,e),le(c,e),o=!1},d(e){e&&w(t),be(i),c&&c.d(e),a()}}}const Br=700;function Hr(t,n,r){let o,a=e,i=()=>(a(),a=s(m,e=>r(9,o=e)),m);t.$$.on_destroy.push(()=>a());let c="",u=[],d=!1,l=0,{disabled:f=!1}=n,{icon:p=""}=n,{op:m=new et({api:!1,id:""})}=n;i();let{type:g=""}=n;function h(e){e&&r(8,l=(new An).toEpoch()),r(3,c=e?"spin":""),r(7,d=e)}let $,{$$slots:b={},$$scope:v}=n;return t.$set=e=>{"disabled"in e&&r(6,f=e.disabled),"icon"in e&&r(0,p=e.icon),"op"in e&&i(r(1,m=e.op)),"type"in e&&r(2,g=e.type),"$$scope"in e&&r(11,v=e.$$scope)},t.$$.update=()=>{512&t.$$.dirty&&o.is("loading")&&h(!0),768&t.$$.dirty&&(o.is("loading")||setTimeout(()=>h(!1),Br-((new An).toEpoch()-l))),1&t.$$.dirty&&r(4,u=["btn","for-"+(p||"default")]),192&t.$$.dirty&&r(5,$=f||d)},[p,m,g,c,u,$,f,d,l,o,h,v,b,function(e){F(t,e)}]}class qr extends ye{constructor(e){super(),ve(this,e,Hr,zr,i,{disabled:6,icon:0,op:1,type:2})}}const Gr=e=>({}),Kr=e=>({});function Fr(e){let t,n,r,a,i,s,c,u;const p=new at({props:{family:"regular",name:e[7]}});p.$on("click",e[14]);const m=e[9].label,g=d(m,e,e[8],Kr);return{c(){t=x("div"),n=x("input"),r=E(),he(p.$$.fragment),a=E(),i=x("label"),g||(s=k("Label")),g&&g.c(),S(n,"type","checkbox"),S(n,"id",e[4]),S(n,"name",e[3]),n.__value=e[1],n.value=n.__value,n.disabled=e[2],S(i,"for",e[4]),S(t,"class","checkbox"),A(t,"has-focus",e[6]),A(t,"is-disabled",e[2]),u=[O(n,"change",e[10]),O(n,"blur",e[12]),O(n,"focus",e[13])]},m(o,u){y(o,t,u),v(t,n),n.checked=e[0],e[11](n),v(t,r),$e(p,t,null),v(t,a),v(t,i),g||v(i,s),g&&g.m(i,null),c=!0},p(e,[r]){(!c||16&r)&&S(n,"id",e[4]),(!c||8&r)&&S(n,"name",e[3]),(!c||2&r)&&(n.__value=e[1]),n.value=n.__value,(!c||4&r)&&(n.disabled=e[2]),1&r&&(n.checked=e[0]);const o={};128&r&&(o.name=e[7]),p.$set(o),g&&g.p&&256&r&&g.p(l(m,e,e[8],Kr),f(m,e[8],r,Gr)),(!c||16&r)&&S(i,"for",e[4]),64&r&&A(t,"has-focus",e[6]),4&r&&A(t,"is-disabled",e[2])},i(e){c||(de(p.$$.fragment,e),de(g,e),c=!0)},o(e){le(p.$$.fragment,e),le(g,e),c=!1},d(n){n&&w(t),e[11](null),be(p),g&&g.d(n),o(u)}}}function Wr(e,t,n){let r,{checked:o=!1}=t,{disabled:a=!1}=t,{name:i=""}=t,{id:s=(i?"form_"+i:Xe())}=t,{value:c=1}=t,u=!1,{$$slots:d={},$$scope:l}=t;let f;return e.$set=e=>{"checked"in e&&n(0,o=e.checked),"disabled"in e&&n(2,a=e.disabled),"name"in e&&n(3,i=e.name),"id"in e&&n(4,s=e.id),"value"in e&&n(1,c=e.value),"$$scope"in e&&n(8,l=e.$$scope)},e.$$.update=()=>{32&e.$$.dirty&&r&&!r.syncValue&&(n(5,r.syncValue=function(){n(0,[o,c]=[this.checked,this.value],o,(n(1,c),n(5,r)))},r),r.syncValue()),1&e.$$.dirty&&n(7,f=o?"check-square":"square")},[o,c,a,i,s,r,u,f,l,d,function(){o=this.checked,n(0,o),n(5,r)},function(e){V[e?"unshift":"push"](()=>{n(5,r=e)})},()=>{n(6,u=!1)},()=>{n(6,u=!0)},()=>{a||n(0,o=!o)}]}class Vr extends ye{constructor(e){super(),ve(this,e,Wr,Fr,i,{checked:0,disabled:2,name:3,id:4,value:1})}}function Zr(e){let t,n,r=Zt(e[1].error())+"";return{c(){t=x("div"),n=k(r),S(t,"class","error")},m(e,r){y(e,t,r),v(t,n)},p(e,t){2&t&&r!==(r=Zt(e[1].error())+"")&&M(n,r)},d(e){e&&w(t)}}}function Yr(t){let n,r=t[1].is("error"),o=r&&Zr(t);return{c(){o&&o.c(),n=C()},m(e,t){o&&o.m(e,t),y(e,n,t)},p(e,[t]){2&t&&(r=e[1].is("error")),r?o?o.p(e,t):(o=Zr(e),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null)},i:e,o:e,d(e){o&&o.d(e),e&&w(n)}}}function Qr(t,n,r){let o,a=e,i=()=>(a(),a=s(c,e=>r(1,o=e)),c);t.$$.on_destroy.push(()=>a());let{op:c=new et({})}=n;return i(),t.$set=e=>{"op"in e&&i(r(0,c=e.op))},[c,o]}class Jr extends ye{constructor(e){super(),ve(this,e,Qr,Yr,i,{op:0})}}function Xr(e){let t,n,r,o,a=Zt(e[0].dialog_id?"Conversation":"Connection")+"";const i=new at({props:{name:"times-circle"}});return{c(){t=x("h2"),n=k(a),r=E(),he(i.$$.fragment)},m(e,a){y(e,t,a),v(t,n),y(e,r,a),$e(i,e,a),o=!0},p(e,t){(!o||1&t)&&a!==(a=Zt(e[0].dialog_id?"Conversation":"Connection")+"")&&M(n,a)},i(e){o||(de(i.$$.fragment,e),o=!0)},o(e){le(i.$$.fragment,e),o=!1},d(e){e&&w(t),e&&w(r),be(i,e)}}}function eo(e){let t,n={href:e[0].path,class:"sidebar__header for-settings",$$slots:{default:[Xr]},$$scope:{ctx:e}};const r=new kt({props:n});return e[2](r),{c(){he(r.$$.fragment)},m(e,n){$e(r,e,n),t=!0},p(e,[t]){const n={};1&t&&(n.href=e[0].path),9&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n)},i(e){t||(de(r.$$.fragment,e),t=!0)},o(e){le(r.$$.fragment,e),t=!1},d(t){e[2](null),be(r,t)}}}function to(e,t,n){let r,{dialog:o={}}=t;return e.$set=e=>{"dialog"in e&&n(0,o=e.dialog)},e.$$.update=()=>{2&e.$$.dirty&&r&&r.focus()},[o,r,function(e){V[e?"unshift":"push"](()=>{n(1,r=e)})}]}class no extends ye{constructor(e){super(),ve(this,e,to,eo,i,{dialog:0})}}const ro=e=>({}),oo=e=>({});function ao(e){let t,n,r,o,a,i,s;const c=e[8].label,u=d(c,e,e[7],oo);return{c(){t=x("div"),n=x("label"),u||(r=k("Label")),u&&u.c(),o=E(),a=x("textarea"),S(n,"for",e[3]),S(a,"name",e[2]),S(a,"placeholder",e[4]),S(a,"id",e[3]),a.readOnly=e[5],S(t,"class","text-area"),t.hidden=e[1],s=O(a,"input",e[9])},m(s,c){y(s,t,c),v(t,n),u||v(n,r),u&&u.m(n,null),v(t,o),v(t,a),D(a,e[0]),e[10](a),i=!0},p(e,[r]){u&&u.p&&128&r&&u.p(l(c,e,e[7],oo),f(c,e[7],r,ro)),(!i||8&r)&&S(n,"for",e[3]),(!i||4&r)&&S(a,"name",e[2]),(!i||16&r)&&S(a,"placeholder",e[4]),(!i||8&r)&&S(a,"id",e[3]),(!i||32&r)&&(a.readOnly=e[5]),1&r&&D(a,e[0]),(!i||2&r)&&(t.hidden=e[1])},i(e){i||(de(u,e),i=!0)},o(e){le(u,e),i=!1},d(n){n&&w(t),u&&u.d(n),e[10](null),s()}}}function io(e,t,n){let r,{hidden:o=!1}=t,{name:a=""}=t,{id:i=(a?"form_"+a:Xe())}=t,{placeholder:s=""}=t,{readonly:c=!1}=t,{value:u=""}=t,{$$slots:d={},$$scope:l}=t;return e.$set=e=>{"hidden"in e&&n(1,o=e.hidden),"name"in e&&n(2,a=e.name),"id"in e&&n(3,i=e.id),"placeholder"in e&&n(4,s=e.placeholder),"readonly"in e&&n(5,c=e.readonly),"value"in e&&n(0,u=e.value),"$$scope"in e&&n(7,l=e.$$scope)},e.$$.update=()=>{64&e.$$.dirty&&r&&!r.syncValue&&(n(6,r.syncValue=function(){n(0,u=this.value)},r),r.syncValue())},[u,o,a,i,s,c,r,l,d,function(){u=this.value,n(0,u),n(6,r)},function(e){V[e?"unshift":"push"](()=>{n(6,r=e)})}]}class so extends ye{constructor(e){super(),ve(this,e,io,ao,i,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0})}}function co(e){let t,n;return{c(){t=x("input"),S(t,"type","hidden"),S(t,"name","connection_id"),t.value=n=e[0].connection_id},m(e,n){y(e,t,n)},p(e,r){1&r&&n!==(n=e[0].connection_id)&&(t.value=n)},d(e){e&&w(t)}}}function uo(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Host and port")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function lo(t){return{c:e,m:e,p:e,d:e}}function fo(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Nickname")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function po(t){return{c:e,m:e,p:e,d:e}}function mo(e){let t;const n=new Dt({props:{name:"dialog",placeholder:Zt("Ex: #convos"),$$slots:{default:[$o],label:[ho]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};2097152&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function go(e){let t,n;function r(t){e[16].call(null,t)}let o={$$slots:{default:[vo],label:[bo]},$$scope:{ctx:e}};void 0!==e[5]&&(o.checked=e[5]);const a=new Vr({props:o});return V.push(()=>ge(a,"checked",r)),{c(){he(a.$$.fragment)},m(e,t){$e(a,e,t),n=!0},p(e,n){const r={};2097152&n&&(r.$$scope={dirty:n,ctx:e}),!t&&32&n&&(t=!0,r.checked=e[5],ne(()=>t=!1)),a.$set(r)},i(e){n||(de(a.$$.fragment,e),n=!0)},o(e){le(a.$$.fragment,e),n=!1},d(e){be(a,e)}}}function ho(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Conversation name")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function $o(t){return{c:e,m:e,p:e,d:e}}function bo(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Want to be connected")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function vo(t){return{c:e,m:e,p:e,d:e}}function yo(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Secure connection (TLS)")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function wo(t){return{c:e,m:e,p:e,d:e}}function _o(e){let t,n;function r(t){e[18].call(null,t)}let o={name:"tls_verify",$$slots:{default:[ko],label:[xo]},$$scope:{ctx:e}};void 0!==e[4]&&(o.checked=e[4]);const a=new Vr({props:o});return V.push(()=>ge(a,"checked",r)),{c(){he(a.$$.fragment)},m(e,t){$e(a,e,t),n=!0},p(e,n){const r={};2097152&n&&(r.$$scope={dirty:n,ctx:e}),!t&&16&n&&(t=!0,r.checked=e[4],ne(()=>t=!1)),a.$set(r)},i(e){n||(de(a.$$.fragment,e),n=!0)},o(e){le(a.$$.fragment,e),n=!1},d(e){be(a,e)}}}function xo(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Verify certificate (TLS)")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ko(t){return{c:e,m:e,p:e,d:e}}function Eo(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Show advanced settings")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Co(t){return{c:e,m:e,p:e,d:e}}function Oo(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Username")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function No(t){return{c:e,m:e,p:e,d:e}}function So(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Password")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Mo(t){return{c:e,m:e,p:e,d:e}}function Do(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("On-connect commands")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ro(t){return{c:e,m:e,p:e,d:e}}function Ao(e){let t;const n=new qr({props:{icon:"save",op:e[7],$$slots:{default:[To]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};2097152&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function Po(e){let t,n;const r=new qr({props:{icon:"save",op:e[9],$$slots:{default:[Lo]},$$scope:{ctx:e}}}),o=new qr({props:{icon:"trash",type:"button",op:e[8],$$slots:{default:[jo]},$$scope:{ctx:e}}});return o.$on("click",e[10]),{c(){he(r.$$.fragment),t=E(),he(o.$$.fragment)},m(e,a){$e(r,e,a),y(e,t,a),$e(o,e,a),n=!0},p(e,t){const n={};2097152&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n);const a={};2097152&t&&(a.$$scope={dirty:t,ctx:e}),o.$set(a)},i(e){n||(de(r.$$.fragment,e),de(o.$$.fragment,e),n=!0)},o(e){le(r.$$.fragment,e),le(o.$$.fragment,e),n=!1},d(e){be(r,e),e&&w(t),be(o,e)}}}function To(t){let n,r=Zt("Create")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Lo(t){let n,r=Zt("Update")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function jo(t){let n,r=Zt("Delete")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Io(t){let n,r,o,a,i,s,c,u,d,l,f,p,m,g,h,$,b,_,k,C,M,D,R,A,P,T,L,j,I=t[0].connection_id&&co(t);const U=new Dt({props:{name:"server",placeholder:Zt("Ex: chat.freenode.net:6697"),readonly:t[6].forced_connection,$$slots:{default:[lo],label:[uo]},$$scope:{ctx:t}}});let z=t[6].forced_connection&&function(t){let n,r=Yt("Connection is locked by %1.",t[6].contact)+"";return{c(){n=x("p")},m(e,t){y(e,n,t),n.innerHTML=r},p:e,d(e){e&&w(n)}}}(t);const B=new Dt({props:{name:"nick",placeholder:Zt("Ex: your-name"),$$slots:{default:[po],label:[fo]},$$scope:{ctx:t}}}),H=[go,mo],q=[];function G(e,t){return e[0].url?0:1}function K(e){t[17].call(null,e)}l=G(t),f=q[l]=H[l](t);let F={name:"tls",$$slots:{default:[wo],label:[yo]},$$scope:{ctx:t}};void 0!==t[3]&&(F.checked=t[3]);const W=new Vr({props:F});V.push(()=>ge(W,"checked",K));let Z=t[3]&&_o(t);function Y(e){t[19].call(null,e)}let Q={$$slots:{default:[Co],label:[Eo]},$$scope:{ctx:t}};void 0!==t[2]&&(Q.checked=t[2]);const J=new Vr({props:Q});V.push(()=>ge(J,"checked",Y));const X=new Dt({props:{name:"username",hidden:!t[2],$$slots:{default:[No],label:[Oo]},$$scope:{ctx:t}}}),ee=new Dt({props:{type:"password",name:"password",hidden:!t[2],$$slots:{default:[Mo],label:[So]},$$scope:{ctx:t}}}),te=new so({props:{name:"on_connect_commands",hidden:!t[2],$$slots:{default:[Ro],label:[Do]},$$scope:{ctx:t}}}),re=[Po,Ao],oe=[];function ae(e,t){return e[0].url?0:1}D=ae(t),R=oe[D]=re[D](t);const ie=new Jr({props:{op:t[7]}}),se=new Jr({props:{op:t[8]}}),fe=new Jr({props:{op:t[9]}});return{c(){n=x("form"),I&&I.c(),r=E(),o=x("input"),a=E(),i=x("input"),s=E(),he(U.$$.fragment),c=E(),z&&z.c(),u=E(),he(B.$$.fragment),d=E(),f.c(),p=E(),he(W.$$.fragment),g=E(),Z&&Z.c(),h=E(),he(J.$$.fragment),b=E(),he(X.$$.fragment),_=E(),he(ee.$$.fragment),k=E(),he(te.$$.fragment),C=E(),M=x("div"),R.c(),A=E(),he(ie.$$.fragment),P=E(),he(se.$$.fragment),T=E(),he(fe.$$.fragment),S(o,"type","hidden"),S(o,"name","url"),S(i,"type","hidden"),S(i,"name","wanted_state"),S(M,"class","form-actions"),S(n,"method","post"),j=O(n,"submit",N(t[11]))},m(e,f){y(e,n,f),I&&I.m(n,null),v(n,r),v(n,o),v(n,a),v(n,i),v(n,s),$e(U,n,null),v(n,c),z&&z.m(n,null),v(n,u),$e(B,n,null),v(n,d),q[l].m(n,null),v(n,p),$e(W,n,null),v(n,g),Z&&Z.m(n,null),v(n,h),$e(J,n,null),v(n,b),$e(X,n,null),v(n,_),$e(ee,n,null),v(n,k),$e(te,n,null),v(n,C),v(n,M),oe[D].m(M,null),v(n,A),$e(ie,n,null),v(n,P),$e(se,n,null),v(n,T),$e(fe,n,null),t[20](n),L=!0},p(e,[t]){e[0].connection_id?I?I.p(e,t):(I=co(e),I.c(),I.m(n,r)):I&&(I.d(1),I=null);const o={};2097152&t&&(o.$$scope={dirty:t,ctx:e}),U.$set(o),e[6].forced_connection&&z.p(e,t);const a={};2097152&t&&(a.$$scope={dirty:t,ctx:e}),B.$set(a);let i=l;l=G(e),l===i?q[l].p(e,t):(ce(),le(q[i],1,1,()=>{q[i]=null}),ue(),f=q[l],f||(f=q[l]=H[l](e),f.c()),de(f,1),f.m(n,p));const s={};2097152&t&&(s.$$scope={dirty:t,ctx:e}),!m&&8&t&&(m=!0,s.checked=e[3],ne(()=>m=!1)),W.$set(s),e[3]?Z?(Z.p(e,t),de(Z,1)):(Z=_o(e),Z.c(),de(Z,1),Z.m(n,h)):Z&&(ce(),le(Z,1,1,()=>{Z=null}),ue());const c={};2097152&t&&(c.$$scope={dirty:t,ctx:e}),!$&&4&t&&($=!0,c.checked=e[2],ne(()=>$=!1)),J.$set(c);const u={};4&t&&(u.hidden=!e[2]),2097152&t&&(u.$$scope={dirty:t,ctx:e}),X.$set(u);const d={};4&t&&(d.hidden=!e[2]),2097152&t&&(d.$$scope={dirty:t,ctx:e}),ee.$set(d);const g={};4&t&&(g.hidden=!e[2]),2097152&t&&(g.$$scope={dirty:t,ctx:e}),te.$set(g);let b=D;D=ae(e),D===b?oe[D].p(e,t):(ce(),le(oe[b],1,1,()=>{oe[b]=null}),ue(),R=oe[D],R||(R=oe[D]=re[D](e),R.c()),de(R,1),R.m(M,null))},i(e){L||(de(U.$$.fragment,e),de(B.$$.fragment,e),de(f),de(W.$$.fragment,e),de(Z),de(J.$$.fragment,e),de(X.$$.fragment,e),de(ee.$$.fragment,e),de(te.$$.fragment,e),de(R),de(ie.$$.fragment,e),de(se.$$.fragment,e),de(fe.$$.fragment,e),L=!0)},o(e){le(U.$$.fragment,e),le(B.$$.fragment,e),le(f),le(W.$$.fragment,e),le(Z),le(J.$$.fragment,e),le(X.$$.fragment,e),le(ee.$$.fragment,e),le(te.$$.fragment,e),le(R),le(ie.$$.fragment,e),le(se.$$.fragment,e),le(fe.$$.fragment,e),L=!1},d(e){e&&w(n),I&&I.d(),be(U),z&&z.d(),be(B),q[l].d(),be(W),Z&&Z.d(),be(J),be(X),be(ee),be(te),oe[D].d(),be(ie),be(se),be(fe),t[20](null),j()}}}function Uo(e,t,n){let{dialog:r={}}=t;const o=K("settings"),a=K("user"),i=a.api.operation("createConnection"),s=a.api.operation("removeConnection"),c=a.api.operation("updateConnection");[i,c].forEach(e=>{e.on("start",e=>{e.body.on_connect_commands=e.body.on_connect_commands.split("\n").map(e=>e.trim())})});let u,d={},l=!1,f=!1,p=!1,m=!1;function g(){o.forced_connection&&n(1,u.server.value=o.default_connection,u),n(1,u.nick.value=a.email.replace(/@.*/,"").replace(/\W/g,"_"),u),n(3,f=!0),n(5,m=!0);const e=new URL(location.href);if(!e.searchParams.get("uri"))return yt(u,e);const t=new _n(e.searchParams.get("uri")),r=t.searchParams;t.host&&n(1,u.server.value=t.host,u),t.password&&n(1,u.password.value=t.password,u),t.username&&n(1,u.username.value=t.username,u),r.get("nick")&&n(1,u.nick.value=r.get("nick"),u),t.pathname&&u.dialog&&n(1,u.dialog.value=decodeURIComponent(t.pathname.split("/").filter(e=>e.length)[0]||""),u),Number(r.get("tls")||0)&&n(3,f=!0),Number(r.get("tls_verify")||0)&&n(4,p=!0)}function h(){d.url&&(n(1,u.server.value=d.url.host,u),n(1,u.nick.value=d.url.searchParams.get("nick")||"",u),n(1,u.on_connect_commands.value=d.on_connect_commands.join("\n"),u),n(1,u.password.value=d.url.password,u),n(1,u.username.value=d.url.username,u),n(1,u.url.value=d.url.toString(),u),n(3,f="1"==d.url.searchParams.get("tls")),n(4,p="1"==d.url.searchParams.get("tls_verify")),n(5,m="connected"==d.wanted_state))}return q(async()=>{if(u)return n(0,d=a.findDialog({connection_id:r.connection_id})||{}),d.url?h():g()}),e.$set=e=>{"dialog"in e&&n(12,r=e.dialog)},e.$$.update=()=>{34&e.$$.dirty&&u&&n(1,u.wanted_state.value=m?"connected":"disconnected",u)},[d,u,l,f,p,m,o,i,s,c,async function(e){await s.perform(d),a.removeDialog(d),ht("/chat")},async function(e){if(u.server.value)if(n(1,u.url.value=new _n("irc://localhost:6667").fromForm(e.target).toString(),u),d.connection_id)await c.perform(e.target),n(0,d=a.ensureDialog(c.res.body)),h();else{await i.perform(e.target),ht(a.ensureDialog(i.res.body).path)}},r,a,g,h,function(e){m=e,n(5,m)},function(e){f=e,n(3,f)},function(e){p=e,n(4,p)},function(e){l=e,n(2,l)},function(e){V[e?"unshift":"push"](()=>{n(1,u=e)})}]}class zo extends ye{constructor(e){super(),ve(this,e,Uo,Io,i,{dialog:12})}}function Bo(e){let t,n,r=Zt("Currently connecting to %1.",e[3])+"";return{c(){t=x("p"),n=k(r)},m(e,r){y(e,t,r),v(t,n)},p(e,t){8&t&&r!==(r=Zt("Currently connecting to %1.",e[3])+"")&&M(n,r)},d(e){e&&w(t)}}}function Ho(e){let t,n,r=Zt("Currently connected to %1.",e[3])+"";return{c(){t=x("p"),n=k(r)},m(e,r){y(e,t,r),v(t,n)},p(e,t){8&t&&r!==(r=Zt("Currently connected to %1.",e[3])+"")&&M(n,r)},d(e){e&&w(t)}}}function qo(e){let t,n,r=Zt("Currently disconnected from %1.",e[3])+"";return{c(){t=x("p"),n=k(r)},m(e,r){y(e,t,r),v(t,n)},p(e,t){8&t&&r!==(r=Zt("Currently disconnected from %1.",e[3])+"")&&M(n,r)},d(e){e&&w(t)}}}function Go(t){let n;return{c(){n=x("p"),n.textContent=`${Zt("Connection not found.")}`},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ko(e){let t,n,r,o,a;const i=new no({props:{dialog:e[0]}});function s(e,t){return e[2].url?"disconnected"==e[2].state?qo:"connected"==e[2].state?Ho:Bo:Go}let c=s(e),u=c(e);const d=new zo({props:{dialog:e[0]}});return{c(){t=x("div"),he(i.$$.fragment),n=E(),u.c(),r=E(),he(d.$$.fragment),S(t,"class","sidebar-left")},m(e,o){y(e,t,o),$e(i,t,null),v(t,n),u.m(t,null),v(t,r),$e(d,t,null),a=!0},p(e,[n]){const o={};1&n&&(o.dialog=e[0]),i.$set(o),c===(c=s(e))&&u?u.p(e,n):(u.d(1),u=c(e),u&&(u.c(),u.m(t,r)));const a={};1&n&&(a.dialog=e[0]),d.$set(a)},i(n){a||(de(i.$$.fragment,n),de(d.$$.fragment,n),te(()=>{o||(o=pe(t,Pt,e[1],!0)),o.run(1)}),a=!0)},o(n){le(i.$$.fragment,n),le(d.$$.fragment,n),o||(o=pe(t,Pt,e[1],!1)),o.run(0),a=!1},d(e){e&&w(t),be(i),u.d(),be(d),e&&o&&o.end()}}}function Fo(e,t,n){let{dialog:r={}}=t,{transition:o}=t;const a=K("user");let i,s={};return q(async()=>{n(2,s=a.findDialog({connection_id:r.connection_id})||{})}),e.$set=e=>{"dialog"in e&&n(0,r=e.dialog),"transition"in e&&n(1,o=e.transition)},e.$$.update=()=>{4&e.$$.dirty&&n(3,i=s.url&&s.url.host)},[r,o,s,i]}class Wo extends ye{constructor(e){super(),ve(this,e,Fo,Ko,i,{dialog:0,transition:1})}}function Vo(e,t,n){const r=e.slice();return r[15]=t[n],r}function Zo(e){let t,n=Zt("You are not a channel operator in %1.",e[0].name)+"";return{c(){t=k(n)},m(e,n){y(e,t,n)},p(e,r){1&r&&n!==(n=Zt("You are not a channel operator in %1.",e[0].name)+"")&&M(t,n)},d(e){e&&w(t)}}}function Yo(e){let t,n=Zt("You are a channel operator in %1.",e[0].name)+"";return{c(){t=k(n)},m(e,n){y(e,t,n)},p(e,r){1&r&&n!==(n=Zt("You are a channel operator in %1.",e[0].name)+"")&&M(t,n)},d(e){e&&w(t)}}}function Qo(e){let t,n=Zt("Private conversation with %1.",e[0].name)+"";return{c(){t=k(n)},m(e,n){y(e,t,n)},p(e,r){1&r&&n!==(n=Zt("Private conversation with %1.",e[0].name)+"")&&M(t,n)},d(e){e&&w(t)}}}function Jo(e){let t,n=Zt("Conversation with %1 is frozen. Reason: %2",e[0].name,Zt(e[0].frozen))+"";return{c(){t=k(n)},m(e,n){y(e,t,n)},p(e,r){1&r&&n!==(n=Zt("Conversation with %1 is frozen. Reason: %2",e[0].name,Zt(e[0].frozen))+"")&&M(t,n)},d(e){e&&w(t)}}}function Xo(e){let t,n,r,o,a,i,s,c,u,d,l,f,p,m=e[0].hasOwnProperty("wantNotifications");const g=[ta,ea],h=[];function $(e,t){return e[6]?0:1}function b(t){e[12].call(null,t)}s=$(e),c=h[s]=g[s](e);let v={type:"password",name:"password",readonly:"Password protected."!=e[0].frozen&&!e[6],$$slots:{default:[aa],label:[oa]},$$scope:{ctx:e}};void 0!==e[2]&&(v.value=e[2]);const _=new Dt({props:v});V.push(()=>ge(_,"value",b));let k=m&&ia(e);return{c(){t=x("input"),r=E(),o=x("input"),i=E(),c.c(),u=E(),he(_.$$.fragment),l=E(),k&&k.c(),f=C(),S(t,"type","hidden"),S(t,"name","connection_id"),t.value=n=e[0].connection_id,S(o,"type","hidden"),S(o,"name","dialog_id"),o.value=a=e[0].dialog_id},m(e,n){y(e,t,n),y(e,r,n),y(e,o,n),y(e,i,n),h[s].m(e,n),y(e,u,n),$e(_,e,n),y(e,l,n),k&&k.m(e,n),y(e,f,n),p=!0},p(e,r){(!p||1&r&&n!==(n=e[0].connection_id))&&(t.value=n),(!p||1&r&&a!==(a=e[0].dialog_id))&&(o.value=a);let i=s;s=$(e),s===i?h[s].p(e,r):(ce(),le(h[i],1,1,()=>{h[i]=null}),ue(),c=h[s],c||(c=h[s]=g[s](e),c.c()),de(c,1),c.m(u.parentNode,u));const l={};65&r&&(l.readonly="Password protected."!=e[0].frozen&&!e[6]),262144&r&&(l.$$scope={dirty:r,ctx:e}),!d&&4&r&&(d=!0,l.value=e[2],ne(()=>d=!1)),_.$set(l),1&r&&(m=e[0].hasOwnProperty("wantNotifications")),m?k?(k.p(e,r),de(k,1)):(k=ia(e),k.c(),de(k,1),k.m(f.parentNode,f)):k&&(ce(),le(k,1,1,()=>{k=null}),ue())},i(e){p||(de(c),de(_.$$.fragment,e),de(k),p=!0)},o(e){le(c),le(_.$$.fragment,e),le(k),p=!1},d(e){e&&w(t),e&&w(r),e&&w(o),e&&w(i),h[s].d(e),e&&w(u),be(_,e),e&&w(l),k&&k.d(e),e&&w(f)}}}function ea(t){let n,r,o,a,i=Yt(t[3]||"No topic is set.")+"";return{c(){n=x("div"),r=x("label"),r.textContent=`${Zt("Topic")}`,o=E(),a=x("div"),S(a,"class","input"),S(n,"class","text-field")},m(e,t){y(e,n,t),v(n,r),v(n,o),v(n,a),a.innerHTML=i},p(e,t){8&t&&i!==(i=Yt(e[3]||"No topic is set.")+"")&&(a.innerHTML=i)},i:e,o:e,d(e){e&&w(n)}}}function ta(e){let t,n;function r(t){e[11].call(null,t)}let o={name:"topic",placeholder:Zt("No topic is set."),$$slots:{default:[ra],label:[na]},$$scope:{ctx:e}};void 0!==e[3]&&(o.value=e[3]);const a=new so({props:o});return V.push(()=>ge(a,"value",r)),{c(){he(a.$$.fragment)},m(e,t){$e(a,e,t),n=!0},p(e,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:e}),!t&&8&n&&(t=!0,r.value=e[3],ne(()=>t=!1)),a.$set(r)},i(e){n||(de(a.$$.fragment,e),n=!0)},o(e){le(a.$$.fragment,e),n=!1},d(e){be(a,e)}}}function na(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Topic")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ra(t){return{c:e,m:e,p:e,d:e}}function oa(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Password")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function aa(t){return{c:e,m:e,p:e,d:e}}function ia(e){let t,n;function r(t){e[13].call(null,t)}let o={$$slots:{default:[ca],label:[sa]},$$scope:{ctx:e}};void 0!==e[5]&&(o.checked=e[5]);const a=new Vr({props:o});return V.push(()=>ge(a,"checked",r)),{c(){he(a.$$.fragment)},m(e,t){$e(a,e,t),n=!0},p(e,n){const r={};262144&n&&(r.$$scope={dirty:n,ctx:e}),!t&&32&n&&(t=!0,r.checked=e[5],ne(()=>t=!1)),a.$set(r)},i(e){n||(de(a.$$.fragment,e),n=!0)},o(e){le(a.$$.fragment,e),n=!1},d(e){be(a,e)}}}function sa(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Send me notifications")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ca(t){return{c:e,m:e,p:e,d:e}}function ua(e){let t;const n=new qr({props:{icon:"save",$$slots:{default:[da]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};262144&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function da(t){let n,r=Zt("Update")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function la(t){let n,r=Zt("Leave")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function fa(e){let t,n,r,o,a,i=Zt("Participants (%1)",e[0].participants().length)+"",s=e[0].participants(),c=[];for(let t=0;t<s.length;t+=1)c[t]=ma(Vo(e,s,t));const u=e=>le(c[e],1,1,()=>{c[e]=null});return{c(){t=x("nav"),n=x("h3"),r=k(i),o=E();for(let e=0;e<c.length;e+=1)c[e].c();S(t,"class","sidebar-left__nav")},m(e,i){y(e,t,i),v(t,n),v(n,r),v(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null);a=!0},p(e,n){if((!a||1&n)&&i!==(i=Zt("Participants (%1)",e[0].participants().length)+"")&&M(r,i),1&n){let r;for(s=e[0].participants(),r=0;r<s.length;r+=1){const o=Vo(e,s,r);c[r]?(c[r].p(o,n),de(c[r],1)):(c[r]=ma(o),c[r].c(),de(c[r],1),c[r].m(t,null))}for(ce(),r=s.length;r<c.length;r+=1)u(r);ue()}},i(e){if(!a){for(let e=0;e<s.length;e+=1)de(c[e]);a=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)le(c[e]);a=!1},d(e){e&&w(t),_(c,e)}}}function pa(e){let t,n,r,o=e[15].nick+"";return{c(){t=x("span"),n=k(o),r=E()},m(e,o){y(e,t,o),v(t,n),y(e,r,o)},p(e,t){1&t&&o!==(o=e[15].nick+"")&&M(n,o)},d(e){e&&w(t),e&&w(r)}}}function ma(e){let t;const n=new kt({props:{href:"/chat/"+e[0].connection_id+"/"+e[15].id,class:"participant "+Ke(e[15].modes),$$slots:{default:[pa]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.href="/chat/"+e[0].connection_id+"/"+e[15].id),1&t&&(r.class="participant "+Ke(e[15].modes)),262145&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function ga(e){let t,n,r,o,a,i,s,c,u,d,l,f,p,m=!e[0].is("private"),g=!e[0].is("private");const h=new no({props:{dialog:e[0]}});function $(e,t){return e[0].frozen?Jo:((null==o||1&t)&&(o=!!e[0].is("private")),o?Qo:e[6]?Yo:Zo)}let b=$(e,-1),_=b(e),k=m&&Xo(e),C=g&&ua(e);const M=new qr({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[la]},$$scope:{ctx:e}}});M.$on("click",e[7]);let D=!e[0].frozen&&fa(e);return{c(){t=x("div"),he(h.$$.fragment),n=E(),r=x("p"),_.c(),a=E(),i=x("form"),k&&k.c(),s=E(),c=x("div"),C&&C.c(),u=E(),he(M.$$.fragment),d=E(),D&&D.c(),S(c,"class","form-actions"),S(i,"method","post"),S(t,"class","sidebar-left"),p=O(i,"submit",N(e[8]))},m(o,l){y(o,t,l),$e(h,t,null),v(t,n),v(t,r),_.m(r,null),v(t,a),v(t,i),k&&k.m(i,null),v(i,s),v(i,c),C&&C.m(c,null),v(c,u),$e(M,c,null),e[14](i),v(t,d),D&&D.m(t,null),f=!0},p(e,[n]){const o={};1&n&&(o.dialog=e[0]),h.$set(o),b===(b=$(e,n))&&_?_.p(e,n):(_.d(1),_=b(e),_&&(_.c(),_.m(r,null))),1&n&&(m=!e[0].is("private")),m?k?(k.p(e,n),de(k,1)):(k=Xo(e),k.c(),de(k,1),k.m(i,s)):k&&(ce(),le(k,1,1,()=>{k=null}),ue()),1&n&&(g=!e[0].is("private")),g?C?(C.p(e,n),de(C,1)):(C=ua(e),C.c(),de(C,1),C.m(c,u)):C&&(ce(),le(C,1,1,()=>{C=null}),ue());const a={};262144&n&&(a.$$scope={dirty:n,ctx:e}),M.$set(a),e[0].frozen?D&&(ce(),le(D,1,1,()=>{D=null}),ue()):D?(D.p(e,n),de(D,1)):(D=fa(e),D.c(),de(D,1),D.m(t,null))},i(n){f||(de(h.$$.fragment,n),de(k),de(C),de(M.$$.fragment,n),de(D),te(()=>{l||(l=pe(t,Pt,e[1],!0)),l.run(1)}),f=!0)},o(n){le(h.$$.fragment,n),le(k),le(C),le(M.$$.fragment,n),le(D),l||(l=pe(t,Pt,e[1],!1)),l.run(0),f=!1},d(n){n&&w(t),be(h),_.d(),k&&k.d(),C&&C.d(),be(M),e[14](null),D&&D.d(),n&&l&&l.end(),p()}}}function ha(e,t,n){let{dialog:r={}}=t,{transition:o}=t;const a=K("user");let i,s,c="",u=r.topic,d=r.wantNotifications;function l(e){const t=a.findDialog({connection_id:e.connection_id}),n=e.findParticipant(t&&t.nick);return n&&n.modes.operator}return e.$set=e=>{"dialog"in e&&n(0,r=e.dialog),"transition"in e&&n(1,o=e.transition)},e.$$.update=()=>{1&e.$$.dirty&&n(6,s=l(r)),33&e.$$.dirty&&r.update({wantNotifications:d}),17&e.$$.dirty&&i&&i.topic&&n(4,i.topic.value=r.topic||"",i)},[r,o,c,u,i,d,s,function(e){a.send({message:"/part",dialog:r})},function(e){if(c){const e=s?"/mode +k "+c:"/join "+r.name+" "+c;a.send({message:e,dialog:r}),n(2,c="")}s&&u!=r.topic&&a.send({message:"/topic "+u,dialog:r})},a,l,function(e){u=e,n(3,u)},function(e){c=e,n(2,c)},function(e){d=e,n(5,d)},function(e){V[e?"unshift":"push"](()=>{n(4,i=e)})}]}class $a extends ye{constructor(e){super(),ve(this,e,ha,ga,i,{dialog:0,transition:1})}}var ba=function(){function e(){var t=this;Ce(this,e),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.removeDragOverDebounced=Be((function(){return t._removeDragOver()}),100)}return Ne(e,[{key:"attach",value:function(e,t,n){var r=this;this.targetEl&&this.detach(),this.dropEl=t,this.uploadEl=n,this.targetEl=e,Object.keys(this.dragAndDropEvents).forEach((function(t){e.addEventListener(t,r.dragAndDropEvents[t])}))}},{key:"detach",value:function(){var e=this;Object.keys(this.dragAndDropEvents).forEach((function(t){e.targetEl.removeEventListener(t,e.dragAndDropEvents[t])}))}},{key:"drop",value:function(e){this.stop(e),this.uploadEl&&this.uploadEl.uploader(e)}},{key:"stop",value:function(e){this._preventDefault(e),this.removeDragOverDebounced()}},{key:"start",value:function(e){this._preventDefault(e),this.dropEl&&this.dropEl.classList.add("is-dragover")}},{key:"_preventDefault",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropEl&&this.dropEl.classList.remove("is-dragover")}}]),e}();function va(e,t,n){const r=e.slice();return r[29]=t[n],r}function ya(e){let t,n;var r=e[2];function o(e){return{props:{dialog:e[6],transition:{duration:250,x:e[9].wideScreen?0:e[9].width}}}}if(r)var a=new r(o(e));return{c(){a&&he(a.$$.fragment),t=C()},m(e,r){a&&$e(a,e,r),y(e,t,r),n=!0},p(e,n){const i={};if(64&n[0]&&(i.dialog=e[6]),512&n[0]&&(i.transition={duration:250,x:e[9].wideScreen?0:e[9].width}),r!==(r=e[2])){if(a){ce();const e=a;le(e.$$.fragment,1,0,()=>{be(e,1)}),ue()}r?(he((a=new r(o(e))).$$.fragment),de(a.$$.fragment,1),$e(a,t.parentNode,t)):a=null}else r&&a.$set(i)},i(e){n||(a&&de(a.$$.fragment,e),n=!0)},o(e){a&&le(a.$$.fragment,e),n=!1},d(e){e&&w(t),a&&be(a,e)}}}function wa(e){let t,n,r,o,a,i,s,c,u,d,l=(e[7][2]||e[7][1]||Zt("Notifications"))+"",f=Qt(e[5],e[6])+"";const p=new at({props:{name:e[6].connection_id?"sliders-h":"bell"}});return{c(){t=x("h1"),n=x("a"),he(p.$$.fragment),r=x("span"),o=k(l),i=E(),s=x("a"),c=k(f),S(n,"href",a="#activeMenu:"+(e[6].connection_id?"settings":"")),S(n,"tabindex","-1"),S(s,"href",u="#activeMenu:"+(e[6].connection_id?"settings":"")),S(s,"class","chat-header__topic")},m(e,a){y(e,t,a),v(t,n),$e(p,n,null),v(n,r),v(r,o),y(e,i,a),y(e,s,a),v(s,c),d=!0},p(e,t){const r={};64&t[0]&&(r.name=e[6].connection_id?"sliders-h":"bell"),p.$set(r),(!d||128&t[0])&&l!==(l=(e[7][2]||e[7][1]||Zt("Notifications"))+"")&&M(o,l),(!d||64&t[0]&&a!==(a="#activeMenu:"+(e[6].connection_id?"settings":"")))&&S(n,"href",a),(!d||96&t[0])&&f!==(f=Qt(e[5],e[6])+"")&&M(c,f),(!d||64&t[0]&&u!==(u="#activeMenu:"+(e[6].connection_id?"settings":"")))&&S(s,"href",u)},i(e){d||(de(p.$$.fragment,e),d=!0)},o(e){le(p.$$.fragment,e),d=!1},d(e){e&&w(t),be(p),e&&w(i),e&&w(s)}}}function _a(e){let t;const n=new Ur({props:{connection:e[5],dialog:e[6],input:e[0]}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};32&t[0]&&(r.connection=e[5]),64&t[0]&&(r.dialog=e[6]),1&t[0]&&(r.input=e[0]),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function xa(e){let t,n,r,o,a,i,s,c,u,d,l,f,p=Zt('Do you want to chat with "%1"?',e[7][2])+"",m=Zt("Yes")+"";const g=new kt({props:{href:"/chat",class:"btn",$$slots:{default:[Ea]},$$scope:{ctx:e}}});return{c(){t=x("h2"),t.textContent=`${Zt("You are not part of this conversation.")}`,n=E(),r=x("p"),o=k(p),a=E(),i=x("p"),s=x("a"),c=k(m),d=E(),he(g.$$.fragment),S(s,"href",u="#add:"+e[7][2]),S(s,"class","btn"),f=O(s,"click",N(e[11]))},m(e,u){y(e,t,u),y(e,n,u),y(e,r,u),v(r,o),y(e,a,u),y(e,i,u),v(i,s),v(s,c),v(i,d),$e(g,i,null),l=!0},p(e,t){(!l||128&t[0])&&p!==(p=Zt('Do you want to chat with "%1"?',e[7][2])+"")&&M(o,p),(!l||128&t[0]&&u!==(u="#add:"+e[7][2]))&&S(s,"href",u);const n={};2&t[1]&&(n.$$scope={dirty:t,ctx:e}),g.$set(n)},i(e){l||(de(g.$$.fragment,e),l=!0)},o(e){le(g.$$.fragment,e),l=!1},d(e){e&&w(t),e&&w(n),e&&w(r),e&&w(a),e&&w(i),be(g),f()}}}function ka(e){let t,n,r,o,a,i,s,c,u=Zt('Do you want to create the connection "%1"?',e[7][1])+"";const d=new kt({props:{href:"/settings/connection?server="+encodeURIComponent(e[7][1])+"&dialog="+encodeURIComponent(e[7][2]),class:"btn",$$slots:{default:[Ca]},$$scope:{ctx:e}}}),l=new kt({props:{href:"/chat",class:"btn",$$slots:{default:[Oa]},$$scope:{ctx:e}}});return{c(){t=x("h2"),t.textContent=`${Zt("Connection does not exist.")}`,n=E(),r=x("p"),o=k(u),a=E(),i=x("p"),he(d.$$.fragment),s=E(),he(l.$$.fragment)},m(e,u){y(e,t,u),y(e,n,u),y(e,r,u),v(r,o),y(e,a,u),y(e,i,u),$e(d,i,null),v(i,s),$e(l,i,null),c=!0},p(e,t){(!c||128&t[0])&&u!==(u=Zt('Do you want to create the connection "%1"?',e[7][1])+"")&&M(o,u);const n={};128&t[0]&&(n.href="/settings/connection?server="+encodeURIComponent(e[7][1])+"&dialog="+encodeURIComponent(e[7][2])),2&t[1]&&(n.$$scope={dirty:t,ctx:e}),d.$set(n);const r={};2&t[1]&&(r.$$scope={dirty:t,ctx:e}),l.$set(r)},i(e){c||(de(d.$$.fragment,e),de(l.$$.fragment,e),c=!0)},o(e){le(d.$$.fragment,e),le(l.$$.fragment,e),c=!1},d(e){e&&w(t),e&&w(n),e&&w(r),e&&w(a),e&&w(i),be(d),be(l)}}}function Ea(t){let n,r=Zt("No")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ca(t){let n,r=Zt("Yes")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Oa(t){let n,r=Zt("No")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Na(e){let t,n={dialog:e[6]};const r=new hr({props:n});return e[28](r),{c(){he(r.$$.fragment)},m(e,n){$e(r,e,n),t=!0},p(e,t){const n={};64&t[0]&&(n.dialog=e[6]),r.$set(n)},i(e){t||(de(r.$$.fragment,e),t=!0)},o(e){le(r.$$.fragment,e),t=!1},d(t){e[28](null),be(r,t)}}}function Sa(e){let t,n,r,o,a,i,s,c,u=Zt("Participants (%1)",e[6].participants().length)+"",d=e[6].participants(),l=[];for(let t=0;t<d.length;t+=1)l[t]=Da(va(e,d,t));const f=e=>le(l[e],1,1,()=>{l[e]=null});return{c(){t=x("div"),n=x("nav"),r=x("h3"),o=k(u),a=E();for(let e=0;e<l.length;e+=1)l[e].c();i=E(),s=x("nav"),S(n,"class","sidebar-right__nav"),S(t,"class","sidebar-right")},m(e,u){y(e,t,u),v(t,n),v(n,r),v(r,o),v(n,a);for(let e=0;e<l.length;e+=1)l[e].m(n,null);v(n,i),v(n,s),c=!0},p(e,t){if((!c||64&t[0])&&u!==(u=Zt("Participants (%1)",e[6].participants().length)+"")&&M(o,u),64&t[0]){let r;for(d=e[6].participants(),r=0;r<d.length;r+=1){const o=va(e,d,r);l[r]?(l[r].p(o,t),de(l[r],1)):(l[r]=Da(o),l[r].c(),de(l[r],1),l[r].m(n,i))}for(ce(),r=d.length;r<l.length;r+=1)f(r);ue()}},i(e){if(!c){for(let e=0;e<d.length;e+=1)de(l[e]);c=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)le(l[e]);c=!1},d(e){e&&w(t),_(l,e)}}}function Ma(e){let t,n,r,o,a=e[29].nick+"";const i=new at({props:{name:"pick:"+e[29].id,family:"solid",color:e[29].color}});return{c(){he(i.$$.fragment),t=E(),n=x("span"),r=k(a)},m(e,a){$e(i,e,a),y(e,t,a),y(e,n,a),v(n,r),o=!0},p(e,t){const n={};64&t[0]&&(n.name="pick:"+e[29].id),64&t[0]&&(n.color=e[29].color),i.$set(n),(!o||64&t[0])&&a!==(a=e[29].nick+"")&&M(r,a)},i(e){o||(de(i.$$.fragment,e),o=!0)},o(e){le(i.$$.fragment,e),o=!1},d(e){be(i,e),e&&w(t),e&&w(n)}}}function Da(e){let t;const n=new kt({props:{href:"/chat/"+e[6].connection_id+"/"+e[29].id,class:"participant "+Ke(e[29].modes),$$slots:{default:[Ma]},$$scope:{ctx:e}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};64&t[0]&&(r.href="/chat/"+e[6].connection_id+"/"+e[29].id),64&t[0]&&(r.class="participant "+Ke(e[29].modes)),64&t[0]|2&t[1]&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function Ra(e){let t,n,r,a,i,s,c,u,d,l,f,p,m=e[6].participants().length;te(e[25]);let g="settings"==e[8]&&ya(e);const h=new ur({props:{$$slots:{default:[wa]},$$scope:{ctx:e}}}),$=[ka,xa,_a],b=[];function _(e,t){return e[7][1]&&!e[5].connection_id?0:e[7][2]&&!e[6].connection_id?1:2}i=_(e),s=b[i]=$[i](e);let k=e[6].connection_id&&Na(e),N=m&&Sa(e);return{c(){g&&g.c(),t=E(),he(h.$$.fragment),n=E(),r=x("main"),a=x("div"),s.c(),u=E(),k&&k.c(),d=E(),N&&N.c(),l=C(),S(a,"class","messages-container"),te(()=>e[26].call(a)),A(a,"has-notifications",1==e[7].length),S(r,"class","main"),p=[O(window,"resize",e[25]),O(r,"scroll",e[12])]},m(o,s){g&&g.m(o,s),y(o,t,s),$e(h,o,s),y(o,n,s),y(o,r,s),v(r,a),b[i].m(a,null),c=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const n=document.createElement("object");let r;return n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.type="text/html",n.tabIndex=-1,n.onload=()=>{r=n.contentDocument.defaultView,r.addEventListener("resize",t)},/Trident/.test(navigator.userAgent)?(e.appendChild(n),n.data="about:blank"):(n.data="about:blank",e.appendChild(n)),{cancel:()=>{r&&r.removeEventListener&&r.removeEventListener("resize",t),e.removeChild(n)}}}(a,e[26].bind(a)),e[27](r),y(o,u,s),k&&k.m(o,s),y(o,d,s),N&&N.m(o,s),y(o,l,s),f=!0},p(e,n){"settings"==e[8]?g?(g.p(e,n),de(g,1)):(g=ya(e),g.c(),de(g,1),g.m(t.parentNode,t)):g&&(ce(),le(g,1,1,()=>{g=null}),ue());const r={};224&n[0]|2&n[1]&&(r.$$scope={dirty:n,ctx:e}),h.$set(r);let o=i;i=_(e),i===o?b[i].p(e,n):(ce(),le(b[o],1,1,()=>{b[o]=null}),ue(),s=b[i],s||(s=b[i]=$[i](e),s.c()),de(s,1),s.m(a,null)),128&n[0]&&A(a,"has-notifications",1==e[7].length),e[6].connection_id?k?(k.p(e,n),de(k,1)):(k=Na(e),k.c(),de(k,1),k.m(d.parentNode,d)):k&&(ce(),le(k,1,1,()=>{k=null}),ue()),64&n[0]&&(m=e[6].participants().length),m?N?(N.p(e,n),de(N,1)):(N=Sa(e),N.c(),de(N,1),N.m(l.parentNode,l)):N&&(ce(),le(N,1,1,()=>{N=null}),ue())},i(e){f||(de(g),de(h.$$.fragment,e),de(s),de(k),de(N),f=!0)},o(e){le(g),le(h.$$.fragment,e),le(s),le(k),le(N),f=!1},d(a){g&&g.d(a),a&&w(t),be(h,a),a&&w(n),a&&w(r),b[i].d(),c.cancel(),e[27](null),a&&w(u),k&&k.d(a),a&&w(d),N&&N.d(a),a&&w(l),o(p)}}}function Aa(e,t,n){let r,o,a,i,s;u(e,ft,e=>n(18,r=e)),u(e,pt,e=>n(20,a=e)),u(e,dt,e=>n(8,i=e)),u(e,lt,e=>n(9,s=e));const c=K("user");let d,l;u(e,c,e=>n(19,o=e));let f,m=null,g=0,h=0,$=0,b="bottom",v={},y=c.notifications,w=new ba,_="",x=r.pathParts,k=[];var E;function C(e,t){n(7,x=t.pathParts);const r=e.findDialog({connection_id:x[1]})||{};r!=v&&function(e){if(!e.url)return;const t=e.url.protocol.replace(/:$/,"");navigator.registerProtocolHandler&&navigator.registerProtocolHandler(t,ft.base+"/register?uri=%s","Convos "+t+" handler")}(n(5,v=r));const o=1==x.length?e.notifications:e.findDialog({connection_id:x[1],dialog_id:x[2]});if(!o)return n(6,y=e.notifications);o==y&&_||(_&&N(),Fe(document,".message__embed",e=>e.remove()),n(6,y=o),$=0,_=t.path,b="bottom",n(2,m=y.connection_id?y.dialog_id?$a:Wo:null),k=[],v.subscribe&&k.push(v.subscribe(e=>{n(5,v=e)})),y.subscribe&&k.push(y.subscribe(e=>{n(6,y=e)})),y.load({before:y.messages[0],maybe:!0}),p(pt,a=v==y?Zt("%1 - Convos",v.name):v.name?Zt("%1/%2 - Convos",v.name,y.name):Zt("%1 - Convos",y.name)))}function O(e,t){e.forEach(e=>{if(!e.isIntersecting)return;const t=y.messages[e.target.dataset.index]||{};t.embeds&&c.embedMaker.render(e.target,t.embeds)})}function N(){y&&y.setLastRead&&y.setLastRead(),w.detach(),k.forEach(e=>e())}E=()=>{f=f||new IntersectionObserver(O,{rootMargin:"0px"}),Fe(document,".message",e=>{e.classList.contains("is-observed")||f.observe(e),e.classList.add("is-observed")}),"bottom"==b?n(1,l.scrollTop=h,l):$&&$<h&&(n(1,l.scrollTop=h-$,l),"top"!=b&&($=0))},H().$$.after_update.push(E),function(e){H().$$.on_destroy.push(e)}(N);const S=Be(e=>{if(!l||!y.connection_id)return;const t=l.offsetHeight,n=l.scrollTop;b=t>h||n+20>h-t?"bottom":n<100?"top":"middle","top"!=b||y.is("loading")||(y.messages.length&&y.load({before:y.messages[0]}),$=h)},20);return e.$$.update=()=>{786432&e.$$.dirty[0]&&C(o,r),3&e.$$.dirty[0]&&w.attach(document,l,d&&d.getUploadEl())},[d,l,m,g,h,v,y,x,i,s,c,function(e){v.connection_id&&v.addDialog(e.target.closest("a").href.replace(/.*#add:/,""))},S,$,f,b,_,k,r,o,a,w,C,O,N,function(){n(3,g=window.innerHeight)},function(){h=this.offsetHeight,n(4,h)},function(e){V[e?"unshift":"push"](()=>{n(1,l=e)})},function(e){V[e?"unshift":"push"](()=>{n(0,d=e)})}]}class Pa extends ye{constructor(e){super(),ve(this,e,Aa,Ra,i,{},[-1,-1])}}function Ta(t){let n;return{c(){n=x("h1"),n.textContent=`${Zt("Add connection")}`},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function La(e){let t,n,r;const o=new ur({props:{$$slots:{default:[Ta]},$$scope:{ctx:e}}}),a=new zo({});return{c(){he(o.$$.fragment),t=E(),n=x("main"),he(a.$$.fragment),S(n,"class","main")},m(e,i){$e(o,e,i),y(e,t,i),y(e,n,i),$e(a,n,null),r=!0},p(e,[t]){const n={};2&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n)},i(e){r||(de(o.$$.fragment,e),de(a.$$.fragment,e),r=!0)},o(e){le(o.$$.fragment,e),le(a.$$.fragment,e),r=!1},d(e){be(o,e),e&&w(t),e&&w(n),be(a)}}}function ja(e,t,n){let r;return u(e,pt,e=>n(0,r=e)),p(pt,r=Zt("%1 - Convos",Zt("Add connection"))),[]}class Ia extends ye{constructor(e){super(),ve(this,e,ja,La,i,{})}}function Ua(e,t,n){const r=e.slice();return r[26]=t[n],r[28]=n,r}const za=e=>({}),Ba=e=>({});function Ha(e){let t,n,r,a,i=(e[26].length>1?e[26][1]:e[26][0])+"";function s(...t){return e[24](e[28],...t)}return{c(){t=x("a"),n=k(i),S(t,"href",r="#"+e[28]+":"+e[26][0]),S(t,"tabindex","-1"),A(t,"is-active",e[28]==e[6]),a=[O(t,"click",e[14]),O(t,"mouseover",s)]},m(e,r){y(e,t,r),v(t,n)},p(o,a){e=o,2048&a&&i!==(i=(e[26].length>1?e[26][1]:e[26][0])+"")&&M(n,i),2048&a&&r!==(r="#"+e[28]+":"+e[26][0])&&S(t,"href",r),64&a&&A(t,"is-active",e[28]==e[6])},d(e){e&&w(t),o(a)}}}function qa(e){let t,n,r,a,i,s,c,u,p,m,g;const h=e[20].label,$=d(h,e,e[19],Ba);let b=e[11],C=[];for(let t=0;t<b.length;t+=1)C[t]=Ha(Ua(e,b,t));return{c(){t=x("div"),n=x("label"),$||(r=k("Label")),$&&$.c(),a=E(),i=x("input"),s=E(),c=x("input"),u=E(),p=x("div");for(let e=0;e<C.length;e+=1)C[e].c();S(n,"for",e[3]),S(i,"type","hidden"),S(i,"name",e[2]),S(c,"type","text"),S(c,"placeholder",e[4]),S(c,"id",e[3]),c.readOnly=e[5],S(c,"autocomplete","off"),S(p,"class","select-field__options"),S(t,"class","select-field text-field"),t.hidden=e[1],A(t,"is-open",e[9]),g=[O(i,"input",e[21]),O(i,"keydown",e[12]),O(c,"keydown",e[12]),O(c,"keyup",e[13]),O(t,"click",N(e[15]))]},m(o,d){y(o,t,d),v(t,n),$||v(n,r),$&&$.m(n,null),v(t,a),v(t,i),D(i,e[0]),e[22](i),v(t,s),v(t,c),e[23](c),v(t,u),v(t,p);for(let e=0;e<C.length;e+=1)C[e].m(p,null);e[25](t),m=!0},p(e,[r]){if($&&$.p&&524288&r&&$.p(l(h,e,e[19],Ba),f(h,e[19],r,za)),(!m||8&r)&&S(n,"for",e[3]),(!m||4&r)&&S(i,"name",e[2]),1&r&&D(i,e[0]),(!m||16&r)&&S(c,"placeholder",e[4]),(!m||8&r)&&S(c,"id",e[3]),(!m||32&r)&&(c.readOnly=e[5]),18496&r){let t;for(b=e[11],t=0;t<b.length;t+=1){const n=Ua(e,b,t);C[t]?C[t].p(n,r):(C[t]=Ha(n),C[t].c(),C[t].m(p,null))}for(;t<C.length;t+=1)C[t].d(1);C.length=b.length}(!m||2&r)&&(t.hidden=e[1]),512&r&&A(t,"is-open",e[9])},i(e){m||(de($,e),m=!0)},o(e){le($,e),m=!1},d(n){n&&w(t),$&&$.d(n),e[22](null),e[23](null),_(C,n),e[25](null),o(g)}}}function Ga(e,t,n){const r=["ArrowDown","ArrowUp","Enter"];let o,a,i,s=0,c=!1,u="",{hidden:d=!1}=t,{name:l=""}=t,{id:f=(l?"form_"+l:Xe())}=t,{options:p=[]}=t,{placeholder:m=""}=t,{readonly:g=!1}=t,{value:h=""}=t;async function $(e){let t;if("keydown"==e.type)t=y.length?y[s]:[];else{const n=e.target.href.replace(/^.*?#\d+:/,"");t=y.filter(e=>e[0]==n)[0]||[]}t.length||(t=[""]),n(0,h=t[0]),n(8,a.value=t.length>1?t[1]:t[0],a),await(ee(),Q),a.setSelectionRange(0,9999),n(9,c=!1)}q(()=>{a.addEventListener("blur",()=>setTimeout(()=>{n(9,c=!1)},100)),n(0,h=o.value)});let{$$slots:b={},$$scope:v}=t;let y;return e.$set=e=>{"hidden"in e&&n(1,d=e.hidden),"name"in e&&n(2,l=e.name),"id"in e&&n(3,f=e.id),"options"in e&&n(16,p=e.options),"placeholder"in e&&n(4,m=e.placeholder),"readonly"in e&&n(5,g=e.readonly),"value"in e&&n(0,h=e.value),"$$scope"in e&&n(19,v=e.$$scope)},e.$$.update=()=>{if(512&e.$$.dirty&&0==c&&n(17,u=""),196608&e.$$.dirty&&n(11,y=function(e,t){let n=new RegExp("(?:^|\\s|-)"+We(t),"i"),r=[];r.length||(r=e.filter(e=>e[0]==t)),r.length||(r=e.filter(e=>e[0].match(n)));for(let t=0;t<e.length;t++){const o=e[t];o.length>1&&-1!=r.indexOf(o)&&o[1].match(n)&&-1==e.map(e=>e[0]).indexOf(o[0])&&e.push(o)}return e}(p,u)),512&e.$$.dirty&&1==c&&n(6,s=0),128&e.$$.dirty&&o&&!o.syncValue&&(n(7,o.syncValue=function(){n(0,h=this.value)},o),o.syncValue()),65920&e.$$.dirty&&a&&!a.value&&a!=document.activeElement){const e=p.find(e=>e[0]==o.value);e&&n(8,a.value=e[1]||e[0],a)}},[h,d,l,f,m,g,s,o,a,c,i,y,function(e){-1!=r.indexOf(e.key)&&e.preventDefault(),"Tab"!=e.key?c?("ArrowDown"==e.key&&n(6,s++,s),"ArrowUp"==e.key&&n(6,s--,s),"Enter"==e.key&&$(e),s>=p.length&&n(6,s=0),s<0&&n(6,s=p.length-1)):n(9,c=!0):c&&$(e)},function(e){1!=e.key.length&&"Backspace"!=e.key||n(17,u=a.value)},$,function(e){e&&e.target&&ze(e.target,".select-field__options")||n(9,c=!c)},p,u,r,v,b,function(){h=this.value,n(0,h),n(7,o)},function(e){V[e?"unshift":"push"](()=>{n(7,o=e)})},function(e){V[e?"unshift":"push"](()=>{n(8,a=e)})},e=>{n(6,s=e)},function(e){V[e?"unshift":"push"](()=>{n(10,i=e)})}]}class Ka extends ye{constructor(e){super(),ve(this,e,Ga,qa,i,{hidden:1,name:2,id:3,options:16,placeholder:4,readonly:5,value:0})}}function Fa(e,t,n){const r=e.slice();return r[15]=t[n],r}function Wa(t){let n;return{c(){n=x("h1"),n.textContent=`${Zt("Add conversation")}`},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Va(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Connection")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Za(t){return{c:e,m:e,p:e,d:e}}function Ya(e){let t,n=Zt(e[0].dialogs.length?"Refresh":"Load")+"";return{c(){t=k(n)},m(e,n){y(e,t,n)},p(e,r){1&r&&n!==(n=Zt(e[0].dialogs.length?"Refresh":"Load")+"")&&M(t,n)},d(e){e&&w(t)}}}function Qa(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Conversation name")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ja(t){return{c:e,m:e,p:e,d:e}}function Xa(t){let n,r=Zt("Add")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ei(e){let t,n,r,o,a=e[0].error+"";return{c(){t=x("p"),n=k(e[1]),r=k(": "),o=k(a),S(t,"class","error")},m(e,a){y(e,t,a),v(t,n),v(t,r),v(t,o)},p(e,t){2&t&&M(n,e[1]),1&t&&a!==(a=e[0].error+"")&&M(o,a)},d(e){e&&w(t)}}}function ti(e){let t,n,r;function o(e,t){return e[0].done?ri:ni}let a=o(e),i=a(e),s=e[0].dialogs,c=[];for(let t=0;t<s.length;t+=1)c[t]=oi(Fa(e,s,t));return{c(){t=x("p"),i.c(),n=E(),r=x("div");for(let e=0;e<c.length;e+=1)c[e].c();S(r,"class","dialog-add-list")},m(e,o){y(e,t,o),i.m(t,null),y(e,n,o),y(e,r,o);for(let e=0;e<c.length;e+=1)c[e].m(r,null)},p(e,n){if(a===(a=o(e))&&i?i.p(e,n):(i.d(1),i=a(e),i&&(i.c(),i.m(t,null))),65&n){let t;for(s=e[0].dialogs,t=0;t<s.length;t+=1){const o=Fa(e,s,t);c[t]?c[t].p(o,n):(c[t]=oi(o),c[t].c(),c[t].m(r,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=s.length}},d(e){e&&w(t),i.d(),e&&w(n),e&&w(r),_(c,e)}}}function ni(e){let t,n=Zt("Showing %1 of %2 conversations, but the list is still loading.",e[0].dialogs.length,e[0].n_dialogs)+"";return{c(){t=k(n)},m(e,n){y(e,t,n)},p(e,r){1&r&&n!==(n=Zt("Showing %1 of %2 conversations, but the list is still loading.",e[0].dialogs.length,e[0].n_dialogs)+"")&&M(t,n)},d(e){e&&w(t)}}}function ri(e){let t,n=Zt("Showing %1 of %2 conversations.",e[0].dialogs.length,e[0].n_dialogs)+"";return{c(){t=k(n)},m(e,n){y(e,t,n)},p(e,r){1&r&&n!==(n=Zt("Showing %1 of %2 conversations.",e[0].dialogs.length,e[0].n_dialogs)+"")&&M(t,n)},d(e){e&&w(t)}}}function oi(e){let t,n,r,o,a,i,s,c,u,d,l,f,p=e[15].n_users+"",m=e[15].name+"",g=(e[15].topic||"No topic.")+"";return{c(){t=x("a"),n=x("span"),r=k(p),o=E(),a=x("b"),i=k(m),s=E(),c=x("i"),u=k(g),d=E(),S(n,"class","dialog-add-list__n-users"),S(a,"class","dialog-add-list__name"),S(c,"class","dialog-add-list__title"),S(t,"href",l="#add:"+e[15].name),f=O(t,"click",N(e[6]))},m(e,l){y(e,t,l),v(t,n),v(n,r),v(t,o),v(t,a),v(a,i),v(t,s),v(t,c),v(c,u),v(t,d)},p(e,n){1&n&&p!==(p=e[15].n_users+"")&&M(r,p),1&n&&m!==(m=e[15].name+"")&&M(i,m),1&n&&g!==(g=(e[15].topic||"No topic.")+"")&&M(u,g),1&n&&l!==(l="#add:"+e[15].name)&&S(t,"href",l)},d(e){e&&w(t),f()}}}function ai(e){let t,n,r,o,a,i,s,c,u,d,l,f,p,m,g,h;const $=new ur({props:{$$slots:{default:[Wa]},$$scope:{ctx:e}}});function b(t){e[12].call(null,t)}let _={name:"connection_id",options:e[4],placeholder:Zt("Select..."),$$slots:{default:[Za],label:[Va]},$$scope:{ctx:e}};void 0!==e[1]&&(_.value=e[1]);const k=new Ka({props:_});V.push(()=>ge(k,"value",b));const C=new qr({props:{type:"button",icon:"sync-alt",disabled:!e[1]||!1===e[0].done,$$slots:{default:[Ya]},$$scope:{ctx:e}}});function M(t){e[13].call(null,t)}C.$on("click",e[7]);let D={name:"dialog_id",placeholder:Zt("#room or nick"),autocomplete:"off",$$slots:{default:[Ja],label:[Qa]},$$scope:{ctx:e}};void 0!==e[2]&&(D.value=e[2]);const R=new Dt({props:D});V.push(()=>ge(R,"value",M)),R.$on("keyup",e[8]);const A=new qr({props:{icon:"comment",disabled:!e[1]||!e[2],$$slots:{default:[Xa]},$$scope:{ctx:e}}});let P=e[0].error&&ei(e),T=null!==e[0].done&&ti(e);return{c(){he($.$$.fragment),t=E(),n=x("main"),r=x("p"),r.textContent=`${Zt("Enter the name of an exising conversation, or create a new conversation.")} \n    ${Zt("It is also possible to load in all existing conversations for a given connection.")}`,o=E(),a=x("form"),i=x("div"),he(k.$$.fragment),c=E(),he(C.$$.fragment),u=E(),d=x("div"),he(R.$$.fragment),f=E(),he(A.$$.fragment),p=E(),P&&P.c(),m=E(),T&&T.c(),S(i,"class","inputs-side-by-side"),S(d,"class","inputs-side-by-side"),S(a,"method","post"),S(n,"class","main"),h=O(a,"submit",N(e[6]))},m(s,l){$e($,s,l),y(s,t,l),y(s,n,l),v(n,r),v(n,o),v(n,a),v(a,i),$e(k,i,null),v(i,c),$e(C,i,null),v(a,u),v(a,d),$e(R,d,null),v(d,f),$e(A,d,null),v(a,p),P&&P.m(a,null),v(a,m),T&&T.m(a,null),e[14](a),g=!0},p(e,[t]){const n={};262144&t&&(n.$$scope={dirty:t,ctx:e}),$.$set(n);const r={};16&t&&(r.options=e[4]),262144&t&&(r.$$scope={dirty:t,ctx:e}),!s&&2&t&&(s=!0,r.value=e[1],ne(()=>s=!1)),k.$set(r);const o={};3&t&&(o.disabled=!e[1]||!1===e[0].done),262145&t&&(o.$$scope={dirty:t,ctx:e}),C.$set(o);const i={};262144&t&&(i.$$scope={dirty:t,ctx:e}),!l&&4&t&&(l=!0,i.value=e[2],ne(()=>l=!1)),R.$set(i);const c={};6&t&&(c.disabled=!e[1]||!e[2]),262144&t&&(c.$$scope={dirty:t,ctx:e}),A.$set(c),e[0].error?P?P.p(e,t):(P=ei(e),P.c(),P.m(a,m)):P&&(P.d(1),P=null),null!==e[0].done?T?T.p(e,t):(T=ti(e),T.c(),T.m(a,null)):T&&(T.d(1),T=null)},i(e){g||(de($.$$.fragment,e),de(k.$$.fragment,e),de(C.$$.fragment,e),de(R.$$.fragment,e),de(A.$$.fragment,e),g=!0)},o(e){le($.$$.fragment,e),le(k.$$.fragment,e),le(C.$$.fragment,e),le(R.$$.fragment,e),le(A.$$.fragment,e),g=!1},d(r){be($,r),r&&w(t),r&&w(n),be(k),be(C),be(R),be(A),P&&P.d(),T&&T.d(),e[14](null),h()}}}function ii(e,t,n){let r,o;u(e,pt,e=>n(10,r=e));const a=K("user");u(e,a,e=>n(11,o=e));let i,s,c={dialogs:[],done:null,n_dialogs:0},d="",l="";function f(e){let t="/list"+(l.length?" /"+l+"/":"");"click"==e.type&&c.done&&(t+=" refresh"),s&&clearTimeout(s),a.send({connection_id:d,message:t},t=>{const r=qe(t);n(0,c=r?{dialogs:[],done:!0,n_dialogs:0,error:r}:t);let o=e.interval?e.interval+500:500;o>2e3&&(o=2e3),r||t.done||(s=setTimeout(()=>f({interval:o}),o))})}p(pt,r=Zt("%1 - Convos",Zt("Add conversation"))),q(()=>yt(i));const m=Be(f,250);let g;return e.$$.update=()=>{2048&e.$$.dirty&&n(4,g=Array.from(o.connections.keys()).map(e=>[e])),18&e.$$.dirty&&(d||n(1,d=g[0]?g[0][0]:""))},[c,d,l,i,g,a,function(e){const t=e&&e.target&&e.target.closest("a");t&&t.href&&n(2,l=t.href.replace(/.*#add:/,"")),d&&l&&a.findDialog({connection_id:d}).addDialog(l)},f,m,s,r,o,function(e){d=e,n(1,d),n(4,g),n(11,o)},function(e){l=e,n(2,l)},function(e){V[e?"unshift":"push"](()=>{n(3,i=e)})}]}class si extends ye{constructor(e){super(),ve(this,e,ii,ai,i,{})}}function ci(e){let t,n,r=Zt("loading"==e[0]?"Convos":e[3][e[0]])+"";return{c(){t=x("span"),n=k(r)},m(e,r){y(e,t,r),v(t,n)},p(e,t){1&t&&r!==(r=Zt("loading"==e[0]?"Convos":e[3][e[0]])+"")&&M(n,r)},d(e){e&&w(t)}}}function ui(e){let t,n,r,o,a=("loading"==e[0]?"":Zt("Convos"))+"",i=Zt("for %1",e[1].organization_name)+"";return{c(){t=x("small"),n=k(a),r=E(),o=k(i),S(t,"class","subtitle")},m(e,a){y(e,t,a),v(t,n),v(t,r),v(t,o)},p(e,t){1&t&&a!==(a=("loading"==e[0]?"":Zt("Convos"))+"")&&M(n,a)},d(e){e&&w(t)}}}function di(e){let t,n,r,o,a=("loading"==e[0]?"":Zt("Convos"))+"",i=Yt("for [%1](%2)",e[1].organization_name,e[1].organization_url)+"";return{c(){t=x("small"),n=k(a),r=E(),o=new P(i,null),S(t,"class","subtitle")},m(e,a){y(e,t,a),v(t,n),v(t,r),o.m(t)},p(e,t){1&t&&a!==(a=("loading"==e[0]?"":Zt("Convos"))+"")&&M(n,a)},d(e){e&&w(t)}}}function li(t){let n,r,o,a,i,s,c,u,d=Zt("This should not happen.")+"";return{c(){n=x("p"),r=k(d),o=k("\n        Please submit "),a=x("a"),a.textContent="an issue",i=k(",\n        if the problem does not go away."),s=E(),c=x("p"),u=x("a"),u.textContent=`${Zt("Go to landing page")}`,S(a,"href","https://github.com/Nordaaker/convos/issues/"),S(u,"href","/"),S(u,"class","btn")},m(e,t){y(e,n,t),v(n,r),v(n,o),v(n,a),v(n,i),y(e,s,t),y(e,c,t),v(c,u)},p:e,d(e){e&&w(n),e&&w(s),e&&w(c)}}}function fi(t){let n,r,o,a;return{c(){n=x("p"),n.textContent=`${Zt("Could not find the page you are looking for. Maybe you entered an invalid URL?")}`,r=E(),o=x("p"),a=x("a"),a.textContent=`${Zt("Go to landing page")}`,S(a,"href","/"),S(a,"class","btn")},m(e,t){y(e,n,t),y(e,r,t),y(e,o,t),v(o,a)},p:e,d(e){e&&w(n),e&&w(r),e&&w(o)}}}function pi(t){let n,r,o,a,i,s,c,u,d,l,f,p,m,g,h,$,b,_,C,O,N,M=Zt("Downloading Convos...")+"",D=Zt("Starting Convos...")+"",R=Zt("Loading user data...")+"",A=Zt("Contact admin")+"";return{c(){n=x("p"),n.textContent=`${Zt("Convos is the simplest way to use IRC, and it keeps you always online.")}`,r=E(),o=x("p"),a=x("i"),i=E(),s=k(M),c=E(),u=x("p"),d=x("i"),l=E(),f=k(D),p=E(),m=x("p"),g=x("i"),h=E(),$=k(R),b=E(),_=x("p"),C=x("a"),O=k(A),S(a,"class","fas fa-download"),S(d,"class","fas fa-rocket"),S(g,"class","fas fa-spinner fa-spin"),S(C,"class","btn"),S(C,"href",N=t[1].contact)},m(e,t){y(e,n,t),y(e,r,t),y(e,o,t),v(o,a),v(o,i),v(o,s),y(e,c,t),y(e,u,t),v(u,d),v(u,l),v(u,f),y(e,p,t),y(e,m,t),v(m,g),v(m,h),v(m,$),y(e,b,t),y(e,_,t),v(_,C),v(C,O)},p:e,d(e){e&&w(n),e&&w(r),e&&w(o),e&&w(c),e&&w(u),e&&w(p),e&&w(m),e&&w(b),e&&w(_)}}}function mi(t){let n,r,o,a,i,s,c,u=Zt("You seem to have lost connection to the internet.")+"";return{c(){n=x("p"),r=x("i"),o=E(),a=k(u),i=E(),s=x("p"),c=x("a"),c.textContent=`${Zt("Reload")}`,S(r,"class","fas fa-exclamation-triangle"),S(c,"href","/"),S(c,"class","btn")},m(e,t){y(e,n,t),v(n,r),v(n,o),v(n,a),y(e,i,t),y(e,s,t),v(s,c)},p:e,d(e){e&&w(n),e&&w(i),e&&w(s)}}}function gi(e){let t;return{c(){t=k("Convos")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function hi(t){let n,r=Zt("Blog")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function $i(t){let n,r=Zt("Documentation")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function bi(t){let n,r=Zt("GitHub")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function vi(e){let t,n,r,o,a,i,s,c,u,d,l;const f=new kt({props:{href:"/",$$slots:{default:[ci]},$$scope:{ctx:e}}});let p="Convos"!=e[1].organization_name&&function(e){let t,n=function(e,t){return"https://convos.by"!=e[1].organization_url?di:ui}(e)(e);return{c(){n.c(),t=C()},m(e,r){n.m(e,r),y(e,t,r)},p(e,t){n.p(e,t)},d(e){n.d(e),e&&w(t)}}}(e);function m(e,t){return"offline"==e[0]?mi:"loading"==e[0]?pi:"not_found"==e[0]?fi:li}let g=m(e),h=g(e);const $=new kt({props:{href:"https://convos.by/",$$slots:{default:[gi]},$$scope:{ctx:e}}}),b=new kt({props:{href:"https://convos.by/blog",$$slots:{default:[hi]},$$scope:{ctx:e}}}),_=new kt({props:{href:"https://convos.by/doc",$$slots:{default:[$i]},$$scope:{ctx:e}}}),O=new kt({props:{href:"https://github.com/Nordaaker/convos",$$slots:{default:[bi]},$$scope:{ctx:e}}});return{c(){t=x("main"),n=x("article"),r=x("h1"),he(f.$$.fragment),o=E(),p&&p.c(),a=E(),h.c(),i=E(),s=x("footer"),he($.$$.fragment),c=k("\n    \n    "),he(b.$$.fragment),u=k("\n    \n    "),he(_.$$.fragment),d=k("\n    \n    "),he(O.$$.fragment),S(n,"class","welcome-screen_fallback"),S(s,"class","welcome-screen__footer"),S(t,"class","welcome-screen")},m(e,m){y(e,t,m),v(t,n),v(n,r),$e(f,r,null),v(r,o),p&&p.m(r,null),v(n,a),h.m(n,null),v(t,i),v(t,s),$e($,s,null),v(s,c),$e(b,s,null),v(s,u),$e(_,s,null),v(s,d),$e(O,s,null),l=!0},p(e,[t]){const r={};513&t&&(r.$$scope={dirty:t,ctx:e}),f.$set(r),"Convos"!=e[1].organization_name&&p.p(e,t),g===(g=m(e))&&h?h.p(e,t):(h.d(1),h=g(e),h&&(h.c(),h.m(n,null)));const o={};512&t&&(o.$$scope={dirty:t,ctx:e}),$.$set(o);const a={};512&t&&(a.$$scope={dirty:t,ctx:e}),b.$set(a);const i={};512&t&&(i.$$scope={dirty:t,ctx:e}),_.$set(i);const s={};512&t&&(s.$$scope={dirty:t,ctx:e}),O.$set(s)},i(e){l||(de(f.$$.fragment,e),de($.$$.fragment,e),de(b.$$.fragment,e),de(_.$$.fragment,e),de(O.$$.fragment,e),l=!0)},o(e){le(f.$$.fragment,e),le($.$$.fragment,e),le(b.$$.fragment,e),le(_.$$.fragment,e),le(O.$$.fragment,e),l=!1},d(e){e&&w(t),be(f),p&&p.d(),h.d(),be($),be(b),be(_),be(O)}}}function yi(e,t,n){let r,o,a;u(e,ft,e=>n(5,o=e)),u(e,pt,e=>n(6,a=e));const i=K("settings"),s=K("user");u(e,s,e=>n(4,r=e));const c=i.load_user?["loading","pending"]:["loading"],d={loading:"Loading",not_found:"Not Found",offline:"You appear to be offline"};let l;return q(()=>{Ve("body",/(is-logged-)\S+/,"out"),Ve("body",/(page-)\S+/,l)}),e.$$.update=()=>{48&e.$$.dirty&&n(0,l=function(e,t){const n=t.pathParts[t.pathParts.length-1]||"",r=d[n]?n:e.is("offline")?"offline":e.is(c)?"loading":"not_found";return p(pt,a=Zt("%1 - Convos",Zt(d[r]))),r}(r,o))},[l,i,s,d]}class wi extends ye{constructor(e){super(),ve(this,e,yi,vi,i,{})}}function _i(e,t,n){const r=e.slice();return r[4]=t[n],r}function xi(t){let n,r;return{c(){n=x("h1"),n.textContent=`${Zt("Help")}`,r=x("small"),r.textContent=`v${t[0].version}`},m(e,t){y(e,n,t),y(e,r,t)},p:e,d(e){e&&w(n),e&&w(r)}}}function ki(t){let n,r,o,a,i=t[4].example+"",s=Zt(t[4].description)+"";return{c(){n=x("dt"),r=k(i),o=x("dd"),a=k(s)},m(e,t){y(e,n,t),v(n,r),y(e,o,t),v(o,a)},p:e,d(e){e&&w(n),e&&w(o)}}}function Ei(t){let n,r,o,a,i,s,c,u,d,l,f,p,m,g,h,$,b,C,N,M,D,R,A,T,L,j,I,U,z,B,H,q,G,K,F,W,V,Z,Y,Q,J,X,ee,te,ne,re,oe,ae,ie,se,ce,ue,fe,pe,me,ge,ve,ye,we,_e,xe,ke,Ee,Ce,Oe,Ne,Se,Me,De,Re,Ae,Pe,Te,Le,je,Ie,Ue,ze,Be,He,qe,Ge,Ke=Zt("Jump to:")+"",Fe=Yt('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"",We=Yt("More information can also be found on https://convos.by.")+"",Ve=Yt('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",Ye=Yt("Using backticks around some text, will format it as a `code fragment`.")+"",Qe=Zt("Contact admin")+"";const Je=new ur({props:{$$slots:{default:[xi]},$$scope:{ctx:t}}});let Xe=dr,et=[];for(let e=0;e<Xe.length;e+=1)et[e]=ki(_i(t,Xe,e));let tt="Convos"!=t[0].organization_name&&"https://convos.by"!=t[0].organization_url&&function(t){let n,r,o,a,i=t[0].organization_name+"";return{c(){n=x("li"),r=x("a"),o=k(i),S(r,"href",a=t[0].organization_url),S(r,"target","_blank")},m(e,t){y(e,n,t),v(n,r),v(r,o)},p:e,d(e){e&&w(n)}}}(t);return{c(){he(Je.$$.fragment),n=E(),r=x("main"),o=x("p"),a=k(Ke),i=E(),s=x("a"),s.textContent=`${Zt("Shortcuts")}`,c=k(",\n    "),u=x("a"),u.textContent=`${Zt("Autocomplete")}`,d=k(",\n    "),l=x("a"),l.textContent=`${Zt("Text formatting")}`,f=k(",\n    "),p=x("a"),p.textContent=`${Zt("Available commands")}`,m=k(",\n    "),g=x("a"),g.textContent=`${Zt("Other resources")}`,h=k("."),$=E(),b=x("p"),N=E(),D=E(),R=x("h2"),R.textContent=`${Zt("Shortcuts")}`,A=E(),T=x("dl"),L=x("dt"),L.textContent=`${Zt("shift+enter")}`,j=x("dd"),j.textContent=`${Zt("Shift focus between chat input and search in sidebar.")}`,I=x("dt"),I.textContent=`${Zt("Open conversation or connection settings")}`,U=x("dd"),U.textContent=`${Zt("Clicking on the icon next to the conversation name will take you to settings.")}`,z=E(),B=x("h2"),B.textContent=`${Zt("Autocomplete")}`,H=E(),q=x("p"),q.textContent=`${Zt("The following rules apply when typing a message:")}`,G=E(),K=x("dl"),F=x("dt"),F.textContent="@nick",W=x("dd"),W.textContent=`${Zt('"@" followed by a character will show matching nicks in the current conversation.')}`,V=x("dt"),V.textContent=":emoji_name",Z=x("dd"),Z.textContent=`${Zt('":" followed by a character will show matching emojis.')}`,Y=x("dt"),Y.textContent="/command",Q=x("dd"),Q.textContent=`${Zt('"/" will show the available commands.')}`,J=x("dt"),J.textContent="#conversation",X=x("dd"),X.textContent=`${Zt('"#" will show the matching conversation names.')}`,ee=E(),te=x("h2"),te.textContent=`${Zt("Text formatting")}`,ne=E(),re=x("p"),re.textContent=`${Zt("Convos supports some special way of formatting text:")}`,oe=E(),ae=x("dl"),ie=x("dt"),ie.textContent=`${Object.keys(Ht).sort().map(t[3]).join(", ")}`,se=x("dd"),se.textContent=`${Zt("Will be automatically converted into emojis.")}`,ce=x("dt"),ce.textContent=`${Zt("> some text")}`,ue=x("dd"),ue.textContent=`${Zt('A line starting with ">" will be converted into a quote.')}`,fe=x("dt"),fe.textContent=`${Zt("*some text*, **some text**, ***some text***")}`,pe=x("dd"),me=x("dt"),me.textContent=`${Zt("`some fragment`")}`,ge=x("dd"),ve=x("dt"),ve.textContent="https://...",ye=x("dd"),ye.textContent=`${Zt("URLs will be converted to links, and might be embedded in the chat.")}`,we=E(),_e=x("h2"),_e.textContent=`${Zt("Available commands")}`,xe=E(),ke=x("dl");for(let e=0;e<et.length;e+=1)et[e].c();Ee=E(),Ce=x("h2"),Ce.textContent=`${Zt("Other resources")}`,Oe=E(),Ne=x("ul"),Se=x("li"),Me=x("a"),Me.textContent=`${Zt("Project homepage")}`,De=E(),Re=x("li"),Ae=x("a"),Ae.textContent=`${Zt("Bug/issue tracker")}`,Pe=E(),Te=x("li"),Le=x("a"),Le.textContent=`${Zt("Source code")}`,je=E(),tt&&tt.c(),Ie=E(),Ue=x("li"),ze=x("a"),Be=k(Qe),S(s,"href","#shortcuts"),S(u,"href","#autocomplete"),S(l,"href","#formatting"),S(p,"href","#commands"),S(g,"href","#resources"),C=new P(Fe,N),M=new P(We,null),S(R,"id","shortcuts"),S(B,"id","autocomplete"),S(te,"id","formatting"),S(_e,"id","commands"),S(Ce,"id","resources"),S(Me,"href","https://convos.by"),S(Me,"target","_blank"),S(Ae,"href","https://github.com/Nordaaker/convos/issues"),S(Ae,"target","_blank"),S(Le,"href","https://github.com/Nordaaker/convos"),S(Le,"target","_blank"),S(ze,"href",He=t[0].contact),S(ze,"target","_blank"),S(r,"class","main"),Ge=O(o,"click",Ze)},m(e,t){$e(Je,e,t),y(e,n,t),y(e,r,t),v(r,o),v(o,a),v(o,i),v(o,s),v(o,c),v(o,u),v(o,d),v(o,l),v(o,f),v(o,p),v(o,m),v(o,g),v(o,h),v(r,$),v(r,b),C.m(b),v(b,N),M.m(b),v(r,D),v(r,R),v(r,A),v(r,T),v(T,L),v(T,j),v(T,I),v(T,U),v(r,z),v(r,B),v(r,H),v(r,q),v(r,G),v(r,K),v(K,F),v(K,W),v(K,V),v(K,Z),v(K,Y),v(K,Q),v(K,J),v(K,X),v(r,ee),v(r,te),v(r,ne),v(r,re),v(r,oe),v(r,ae),v(ae,ie),v(ae,se),v(ae,ce),v(ae,ue),v(ae,fe),v(ae,pe),pe.innerHTML=Ve,v(ae,me),v(ae,ge),ge.innerHTML=Ye,v(ae,ve),v(ae,ye),v(r,we),v(r,_e),v(r,xe),v(r,ke);for(let e=0;e<et.length;e+=1)et[e].m(ke,null);v(r,Ee),v(r,Ce),v(r,Oe),v(r,Ne),v(Ne,Se),v(Se,Me),v(Ne,De),v(Ne,Re),v(Re,Ae),v(Ne,Pe),v(Ne,Te),v(Te,Le),v(Ne,je),tt&&tt.m(Ne,null),v(Ne,Ie),v(Ne,Ue),v(Ue,ze),v(ze,Be),qe=!0},p(e,[t]){const n={};if(128&t&&(n.$$scope={dirty:t,ctx:e}),Je.$set(n),0&t){let n;for(Xe=dr,n=0;n<Xe.length;n+=1){const r=_i(e,Xe,n);et[n]?et[n].p(r,t):(et[n]=ki(r),et[n].c(),et[n].m(ke,null))}for(;n<et.length;n+=1)et[n].d(1);et.length=Xe.length}"Convos"!=e[0].organization_name&&"https://convos.by"!=e[0].organization_url&&tt.p(e,t)},i(e){qe||(de(Je.$$.fragment,e),qe=!0)},o(e){le(Je.$$.fragment,e),qe=!1},d(e){be(Je,e),e&&w(n),e&&w(r),_(et,e),tt&&tt.d(),Ge()}}}function Ci(e,t,n){let r,o;u(e,pt,e=>n(1,r=e)),u(e,ft,e=>n(2,o=e));const a=K("settings");p(pt,r=Zt("%1 - Convos",Zt("Help")));return e.$$.update=()=>{4&e.$$.dirty&&Ze(o.hash||0)},[a,r,o,e=>Ht[e]]}class Oi extends ye{constructor(e){super(),ve(this,e,Ci,Ei,i,{})}}function Ni(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Convos")}`},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Si(t){let n;return{c(){n=x("small"),n.textContent=`${Zt("for %1",t[3].organization_name)}`,S(n,"class","subtitle")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Mi(t){let n,r=Yt("for [%1](%2)",t[3].organization_name,t[3].organization_url)+"";return{c(){n=x("small"),S(n,"class","subtitle")},m(e,t){y(e,n,t),n.innerHTML=r},p:e,d(e){e&&w(n)}}}function Di(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("E-mail")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ri(t){return{c:e,m:e,p:e,d:e}}function Ai(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Password")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Pi(t){return{c:e,m:e,p:e,d:e}}function Ti(t){let n,r=Zt("Sign in")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Li(t){let n,r,a,i,s,c,u,d,l,f,p,m,g,h,$,b=Zt("Contact admin")+"";return{c(){n=x("h2"),n.textContent=`${Zt("Sign up")}`,r=E(),a=x("p"),a.textContent=`${Zt("Convos is not open for public registration.")}`,i=E(),s=x("p"),s.textContent=`${Zt("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")}`,c=E(),u=x("div"),d=x("a"),l=k(b),p=E(),m=x("a"),m.textContent=`${Zt("Sign in")}`,g=E(),h=x("a"),h.textContent=`${Zt("Home")}`,S(d,"class","btn"),S(d,"href",f=t[3].contact),S(m,"class","btn is-hallow"),S(m,"href","#signin"),S(h,"class","btn is-hallow"),S(h,"href","#top"),S(u,"class","form-actions"),$=[O(s,"click",Ze),O(m,"click",Ze),O(h,"click",Ze)]},m(e,t){y(e,n,t),y(e,r,t),y(e,a,t),y(e,i,t),y(e,s,t),y(e,c,t),y(e,u,t),v(u,d),v(d,l),v(u,p),v(u,m),v(u,g),v(u,h)},p:e,i:e,o:e,d(e){e&&w(n),e&&w(r),e&&w(a),e&&w(i),e&&w(s),e&&w(c),e&&w(u),o($)}}}function ji(t){let n,r,o,a,i,s,c,u,d,l,f,p,m,g,h;function $(e){t[14].call(null,e)}let b={type:"email",name:"email",placeholder:Zt("Ex: john@doe.com"),readonly:t[2],$$slots:{default:[qi],help:[Hi],label:[Ui]},$$scope:{ctx:t}};void 0!==t[0].formEmail&&(b.value=t[0].formEmail);const _=new Dt({props:b});V.push(()=>ge(_,"value",$));const k=new Dt({props:{type:"password",name:"password",$$slots:{default:[Fi],help:[Ki],label:[Gi]},$$scope:{ctx:t}}}),C=new qr({props:{icon:"save",op:t[5],$$slots:{default:[Wi]},$$scope:{ctx:t}}});let M=!t[2]&&function(t){let n,r,o=Yt("Go and [sign in](%1) if you already have an account.","#signin")+"";return{c(){n=x("p"),r=O(n,"click",Ze)},m(e,t){y(e,n,t),n.innerHTML=o},p:e,d(e){e&&w(n),r()}}}();const D=new Jr({props:{op:t[5]}});return{c(){n=x("h2"),n.textContent=`${Zt(t[3].existing_user?"Recover account":"Sign up")}`,r=E(),o=x("form"),a=x("input"),i=E(),s=x("input"),c=E(),he(_.$$.fragment),d=E(),he(k.$$.fragment),l=E(),f=x("div"),he(C.$$.fragment),p=E(),M&&M.c(),m=E(),he(D.$$.fragment),S(a,"type","hidden"),S(a,"name","exp"),S(s,"type","hidden"),S(s,"name","token"),S(f,"class","form-actions"),S(o,"method","post"),h=O(o,"submit",N(t[16]))},m(e,u){y(e,n,u),y(e,r,u),y(e,o,u),v(o,a),v(o,i),v(o,s),v(o,c),$e(_,o,null),v(o,d),$e(k,o,null),v(o,l),v(o,f),$e(C,f,null),v(o,p),M&&M.m(o,null),v(o,m),$e(D,o,null),t[15](o),g=!0},p(e,t){const n={};131072&t&&(n.$$scope={dirty:t,ctx:e}),!u&&1&t&&(u=!0,n.value=e[0].formEmail,ne(()=>u=!1)),_.$set(n);const r={};131072&t&&(r.$$scope={dirty:t,ctx:e}),k.$set(r);const o={};131072&t&&(o.$$scope={dirty:t,ctx:e}),C.$set(o),e[2]||M.p(e,t)},i(e){g||(de(_.$$.fragment,e),de(k.$$.fragment,e),de(C.$$.fragment,e),de(D.$$.fragment,e),g=!0)},o(e){le(_.$$.fragment,e),le(k.$$.fragment,e),le(C.$$.fragment,e),le(D.$$.fragment,e),g=!1},d(e){e&&w(n),e&&w(r),e&&w(o),be(_),be(k),be(C),M&&M.d(),be(D),t[15](null),h()}}}function Ii(t){let n,r,a,i,s,c,u,d,l,f,p,m,g,h,$,b=Zt("Contact admin")+"";return{c(){n=x("h2"),n.textContent=`${Zt("Invalid invite/recover URL")}`,r=E(),a=x("p"),a.textContent=`${Zt(410==t[3].status?"The link has expired.":"The link is invalid.")}`,i=E(),s=x("p"),s.textContent=`${Zt("Please ask your Convos admin for a new link.")}`,c=E(),u=x("p"),d=x("a"),l=k(b),p=E(),m=x("a"),m.textContent=`${Zt("Sign in")}`,g=E(),h=x("a"),h.textContent=`${Zt("Home")}`,S(d,"class","btn"),S(d,"href",f=t[3].contact),S(m,"class","btn is-hallow"),S(m,"href","#signin"),S(h,"class","btn is-hallow"),S(h,"href","#top"),$=[O(m,"click",Ze),O(h,"click",Ze)]},m(e,t){y(e,n,t),y(e,r,t),y(e,a,t),y(e,i,t),y(e,s,t),y(e,c,t),y(e,u,t),v(u,d),v(d,l),v(u,p),v(u,m),v(u,g),v(u,h)},p:e,i:e,o:e,d(e){e&&w(n),e&&w(r),e&&w(a),e&&w(i),e&&w(s),e&&w(c),e&&w(u),o($)}}}function Ui(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("E-mail")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function zi(t){let n,r=Zt("Your email will be used if you forget your password.")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Bi(t){let n,r=Zt("Your email is from the invite link.")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Hi(e){let t;let n=function(e,t){return e[2]?Bi:zi}(e)(e);return{c(){t=x("p"),n.c(),S(t,"slot","help")},m(e,r){y(e,t,r),n.m(t,null)},p(e,t){n.p(e,t)},d(e){e&&w(t),n.d()}}}function qi(t){let n;return{c(){n=E()},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Gi(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Password")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ki(t){let n;return{c(){n=x("p"),n.textContent=`${Zt("Hint: Use a phrase from a book.")}`,S(n,"slot","help")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Fi(t){let n;return{c(){n=E()},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Wi(t){let n,r=Zt(t[3].existing_user?"Set new password":"Sign up")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Vi(e){let t;return{c(){t=k("Convos")},m(e,n){y(e,t,n)},d(e){e&&w(t)}}}function Zi(t){let n,r=Zt("Blog")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Yi(t){let n,r=Zt("Documentation")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Qi(t){let n,r=Zt("GitHub")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ji(e){let t,n,r,a,i,s,c,u,d,l,f,p,m,g,h,$,b,_,M,D,R,A,P,T,L,j,I,U,z;const B=new kt({props:{href:"/",$$slots:{default:[Ni]},$$scope:{ctx:e}}});let H="Convos"!=e[3].organization_name&&function(e){let t,n=function(e,t){return"https://convos.by"!=e[3].organization_url?Mi:Si}(e)(e);return{c(){n.c(),t=C()},m(e,r){n.m(e,r),y(e,t,r)},p(e,t){n.p(e,t)},d(e){n.d(e),e&&w(t)}}}(e);function q(t){e[12].call(null,t)}let G={type:"email",name:"email",placeholder:Zt("Ex: john@doe.com"),$$slots:{default:[Ri],label:[Di]},$$scope:{ctx:e}};void 0!==e[0].formEmail&&(G.value=e[0].formEmail);const K=new Dt({props:G});V.push(()=>ge(K,"value",q));const F=new Dt({props:{type:"password",name:"password",autocomplete:"current-password",$$slots:{default:[Pi],label:[Ai]},$$scope:{ctx:e}}}),W=new qr({props:{icon:"sign-in-alt",op:e[4],$$slots:{default:[Ti]},$$scope:{ctx:e}}}),Z=new Jr({props:{op:e[4]}}),Y=[Ii,ji,Li],Q=[];R=function(e,t){return e[3].status>=400?0:e[2]||e[3].open_to_public||e[3].first_user?1:2}(e),A=Q[R]=Y[R](e);const J=new kt({props:{href:"https://convos.by/",$$slots:{default:[Vi]},$$scope:{ctx:e}}}),X=new kt({props:{href:"https://convos.by/blog",$$slots:{default:[Zi]},$$scope:{ctx:e}}}),ee=new kt({props:{href:"https://convos.by/doc",$$slots:{default:[Yi]},$$scope:{ctx:e}}}),te=new kt({props:{href:"https://github.com/Nordaaker/convos",$$slots:{default:[Qi]},$$scope:{ctx:e}}});return{c(){t=x("main"),n=x("article"),r=x("h1"),he(B.$$.fragment),a=E(),H&&H.c(),i=E(),s=x("p"),s.textContent=`${Zt("Convos is the simplest way to use IRC, and it keeps you always online.")}`,c=E(),u=x("section"),d=x("form"),l=x("h2"),l.textContent=`${Zt("Sign in")}`,f=E(),he(K.$$.fragment),m=E(),he(F.$$.fragment),g=E(),h=x("div"),he(W.$$.fragment),$=E(),b=x("a"),b.textContent=`${Zt("Sign up")}`,_=E(),he(Z.$$.fragment),M=E(),D=x("section"),A.c(),P=E(),T=x("footer"),he(J.$$.fragment),L=k("\n    \n    "),he(X.$$.fragment),j=k("\n    \n    "),he(ee.$$.fragment),I=k("\n    \n    "),he(te.$$.fragment),S(n,"class","welcome-screen__about"),S(b,"class","btn is-hallow"),S(b,"href","#signup"),S(h,"class","form-actions"),S(d,"method","post"),S(u,"id","signin"),S(u,"class","welcome-screen__signin fade-in"),S(D,"id","signup"),S(D,"class","welcome-screen__signup fade-in"),S(T,"class","welcome-screen__footer fade-in"),S(t,"id","top"),S(t,"class","welcome-screen"),z=[O(b,"click",Ze),O(d,"submit",N(e[13]))]},m(e,o){y(e,t,o),v(t,n),v(n,r),$e(B,r,null),v(r,a),H&&H.m(r,null),v(n,i),v(n,s),v(t,c),v(t,u),v(u,d),v(d,l),v(d,f),$e(K,d,null),v(d,m),$e(F,d,null),v(d,g),v(d,h),$e(W,h,null),v(h,$),v(h,b),v(d,_),$e(Z,d,null),v(t,M),v(t,D),Q[R].m(D,null),v(t,P),v(t,T),$e(J,T,null),v(T,L),$e(X,T,null),v(T,j),$e(ee,T,null),v(T,I),$e(te,T,null),U=!0},p(e,[t]){const n={};131072&t&&(n.$$scope={dirty:t,ctx:e}),B.$set(n),"Convos"!=e[3].organization_name&&H.p(e,t);const r={};131072&t&&(r.$$scope={dirty:t,ctx:e}),!p&&1&t&&(p=!0,r.value=e[0].formEmail,ne(()=>p=!1)),K.$set(r);const o={};131072&t&&(o.$$scope={dirty:t,ctx:e}),F.$set(o);const a={};131072&t&&(a.$$scope={dirty:t,ctx:e}),W.$set(a),A.p(e,t);const i={};131072&t&&(i.$$scope={dirty:t,ctx:e}),J.$set(i);const s={};131072&t&&(s.$$scope={dirty:t,ctx:e}),X.$set(s);const c={};131072&t&&(c.$$scope={dirty:t,ctx:e}),ee.$set(c);const u={};131072&t&&(u.$$scope={dirty:t,ctx:e}),te.$set(u)},i(e){U||(de(B.$$.fragment,e),de(K.$$.fragment,e),de(F.$$.fragment,e),de(W.$$.fragment,e),de(Z.$$.fragment,e),de(A),de(J.$$.fragment,e),de(X.$$.fragment,e),de(ee.$$.fragment,e),de(te.$$.fragment,e),U=!0)},o(e){le(B.$$.fragment,e),le(K.$$.fragment,e),le(F.$$.fragment,e),le(W.$$.fragment,e),le(Z.$$.fragment,e),le(A),le(J.$$.fragment,e),le(X.$$.fragment,e),le(ee.$$.fragment,e),le(te.$$.fragment,e),U=!1},d(e){e&&w(t),be(B),H&&H.d(),be(K),be(F),be(W),be(Z),Q[R].d(),be(J),be(X),be(ee),be(te),o(z)}}}function Xi(e,t){e.forEach(e=>{const t=e.isIntersecting?"add":"remove";e.target.classList[t]("is-visible")})}function es(e,t,n){let r,o,a;u(e,ft,e=>n(8,r=e));const i=-1!=location.href.indexOf("email="),s=K("settings"),c=K("user"),d=c.api.operation("loginUser");u(e,d,e=>n(9,o=e));const l=c.api.operation("registerUser");let f,p;async function m(e){document.cookie=e.res.headers["Set-Cookie"],e.reset(),await c.load(),ht(c.calculateLastUrl())}u(e,l,e=>n(10,a=e)),q(()=>{p||(p=new IntersectionObserver(Xi,{rootMargin:"-30px 0px 80px 0px",threshold:.8}),Fe(document,".fade-in",e=>p.observe(e))),f&&yt(f)});let g;return e.$$.update=()=>{256&e.$$.dirty&&n(7,g=-1==r.path.indexOf("register")?0:"#signup"),384&e.$$.dirty&&Ze(r.hash||g),512&e.$$.dirty&&o.is("success")&&m(d),1025&e.$$.dirty&&a.is("success")&&(c.update({lastUrl:""}),m(l))},[c,f,i,s,d,l,p,g,r,o,a,m,function(e){c.formEmail=e,n(0,c)},e=>d.perform(e.target),function(e){c.formEmail=e,n(0,c)},function(e){V[e?"unshift":"push"](()=>{n(1,f=e)})},e=>l.perform(e.target)]}class ts extends ye{constructor(e){super(),ve(this,e,es,Ji,i,{})}}function ns(t){let n;return{c(){n=x("h1"),n.textContent=`${Zt("Settings")}`},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function rs(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("User email")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function os(t){return{c:e,m:e,p:e,d:e}}function as(e){let t,n,r,o,a,i,s,c,u,d,l,f,p,m,g=Yt(e[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",h=Yt("The link is valid until **%1**.",new Date(e[1].expires).toLocaleString())+"",$=e[1].url+"";return{c(){t=x("h3"),t.textContent=`${Zt("A link was generated")}`,n=E(),r=x("p"),a=E(),s=E(),c=x("a"),u=k($),l=E(),f=x("p"),p=x("small"),p.textContent=`${Zt("Tip: Clicking on the link will copy it to your clipboard.")}`,o=new P(g,a),i=new P(h,null),S(c,"href",d=e[1].url),m=O(c,"click",N(e[6]))},m(e,d){y(e,t,d),y(e,n,d),y(e,r,d),o.m(r),v(r,a),i.m(r),y(e,s,d),y(e,c,d),v(c,u),y(e,l,d),y(e,f,d),v(f,p)},p(e,t){2&t&&g!==(g=Yt(e[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&o.p(g),2&t&&h!==(h=Yt("The link is valid until **%1**.",new Date(e[1].expires).toLocaleString())+"")&&i.p(h),2&t&&$!==($=e[1].url+"")&&M(u,$),2&t&&d!==(d=e[1].url)&&S(c,"href",d)},d(e){e&&w(t),e&&w(n),e&&w(r),e&&w(s),e&&w(c),e&&w(l),e&&w(f),m()}}}function is(t){let n,r=Zt("Generate link")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ss(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Organization name")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function cs(t){let n;return{c(){n=x("p"),n.textContent=`${Zt("Can be changed if you want to add a touch of your organization.")}`,S(n,"slot","help")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function us(t){let n;return{c(){n=E()},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ds(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Organization URL")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ls(t){let n;return{c(){n=x("p"),n.textContent=`${Zt('Used together with "Organization name" to add a link to your organization on the login screen.')}`,S(n,"slot","help")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function fs(t){let n;return{c(){n=E()},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ps(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Admin email")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ms(t){let n;return{c(){n=x("p"),n.textContent=`${Zt("This email can be used by users to get in touch with the Convos admin.")}`,S(n,"slot","help")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function gs(t){let n;return{c(){n=E()},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function hs(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Default connection URL")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function $s(t){let n;return{c(){n=x("p"),n.textContent=`${Zt("This is the default connection new users will connect to.")} \n        ${Zt('The path part is the default channel to join. "%%23convos" means "#convos".')}`,S(n,"slot","help")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function bs(t){let n;return{c(){n=E()},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function vs(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Registration is open to public")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ys(t){let n;return{c(){n=x("p"),n.textContent=`${Zt("Tick this box if you want users to be able to register without an invite URL.")}`,S(n,"slot","help")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function ws(t){let n;return{c(){n=E()},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function _s(t){let n,r=Zt("Save settings")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function xs(e){let t,n,r,a,i,s,c,u,d,l,f,p,m,g,h,$,b,_,k,C,M,D,R,A,P,T,L,j,I,U,z=Yt("These settings control what users experience when they visit [%1](%1).",e[2].base_url)+"";const B=new ur({props:{$$slots:{default:[ns]},$$scope:{ctx:e}}}),H=new Dt({props:{type:"email",name:"email",placeholder:Zt("user@example.com"),$$slots:{default:[os],label:[rs]},$$scope:{ctx:e}}});let q=e[1].url&&as(e);const G=new qr({props:{icon:"save",op:e[3],$$slots:{default:[is]},$$scope:{ctx:e}}}),K=new Jr({props:{op:e[3]}});function F(t){e[12].call(null,t)}let W={name:"organization_name",placeholder:Zt("Nordaaker"),$$slots:{default:[us],help:[cs],label:[ss]},$$scope:{ctx:e}};void 0!==e[0].organization_name&&(W.value=e[0].organization_name);const Z=new Dt({props:W});function Y(t){e[13].call(null,t)}V.push(()=>ge(Z,"value",F));let Q={name:"organization_url",placeholder:Zt("https://convos.by"),$$slots:{default:[fs],help:[ls],label:[ds]},$$scope:{ctx:e}};void 0!==e[0].organization_url&&(Q.value=e[0].organization_url);const J=new Dt({props:Q});function X(t){e[14].call(null,t)}V.push(()=>ge(J,"value",Y));let ee={name:"contact",placeholder:Zt("Ex: jhthorsen@cpan.org"),$$slots:{default:[gs],help:[ms],label:[ps]},$$scope:{ctx:e}};void 0!==e[0].contact&&(ee.value=e[0].contact);const te=new Dt({props:ee});function re(t){e[15].call(null,t)}V.push(()=>ge(te,"value",X));let oe={name:"default_connection",placeholder:Zt("irc://chat.freenode.net:6697/%%23convos"),$$slots:{default:[bs],help:[$s],label:[hs]},$$scope:{ctx:e}};void 0!==e[0].default_connection&&(oe.value=e[0].default_connection);const ae=new Dt({props:oe});V.push(()=>ge(ae,"value",re));const ie=new Vr({props:{name:"open_to_public",checked:e[0].open_to_public,$$slots:{default:[ws],help:[ys],label:[vs]},$$scope:{ctx:e}}}),se=new qr({props:{icon:"save",op:e[4],$$slots:{default:[_s]},$$scope:{ctx:e}}}),ce=new Jr({props:{op:e[4]}});return{c(){he(B.$$.fragment),t=E(),n=x("main"),r=x("form"),a=x("h2"),a.textContent=`${Zt("Recover or invite")}`,i=E(),s=x("p"),s.textContent=`${Zt("Using this form, you can generate an invite link for new users, or a recover password link for existing users.")}`,c=E(),he(H.$$.fragment),u=E(),q&&q.c(),d=E(),l=x("div"),he(G.$$.fragment),f=E(),he(K.$$.fragment),p=E(),m=x("form"),g=x("h2"),g.textContent=`${Zt("Convos settings")}`,h=E(),$=x("p"),b=E(),he(Z.$$.fragment),k=E(),he(J.$$.fragment),M=E(),he(te.$$.fragment),R=E(),he(ae.$$.fragment),P=E(),he(ie.$$.fragment),T=E(),L=x("div"),he(se.$$.fragment),j=E(),he(ce.$$.fragment),S(l,"class","form-actions"),S(r,"method","post"),S(L,"class","form-actions"),S(m,"method","post"),S(n,"class","main"),U=[O(r,"submit",N(e[5])),O(m,"submit",N(e[7]))]},m(e,o){$e(B,e,o),y(e,t,o),y(e,n,o),v(n,r),v(r,a),v(r,i),v(r,s),v(r,c),$e(H,r,null),v(r,u),q&&q.m(r,null),v(r,d),v(r,l),$e(G,l,null),v(r,f),$e(K,r,null),v(n,p),v(n,m),v(m,g),v(m,h),v(m,$),$.innerHTML=z,v(m,b),$e(Z,m,null),v(m,k),$e(J,m,null),v(m,M),$e(te,m,null),v(m,R),$e(ae,m,null),v(m,P),$e(ie,m,null),v(m,T),v(m,L),$e(se,L,null),v(m,j),$e(ce,m,null),I=!0},p(e,[t]){const n={};65536&t&&(n.$$scope={dirty:t,ctx:e}),B.$set(n);const o={};65536&t&&(o.$$scope={dirty:t,ctx:e}),H.$set(o),e[1].url?q?q.p(e,t):(q=as(e),q.c(),q.m(r,d)):q&&(q.d(1),q=null);const a={};65536&t&&(a.$$scope={dirty:t,ctx:e}),G.$set(a);const i={};65536&t&&(i.$$scope={dirty:t,ctx:e}),!_&&1&t&&(_=!0,i.value=e[0].organization_name,ne(()=>_=!1)),Z.$set(i);const s={};65536&t&&(s.$$scope={dirty:t,ctx:e}),!C&&1&t&&(C=!0,s.value=e[0].organization_url,ne(()=>C=!1)),J.$set(s);const c={};65536&t&&(c.$$scope={dirty:t,ctx:e}),!D&&1&t&&(D=!0,c.value=e[0].contact,ne(()=>D=!1)),te.$set(c);const u={};65536&t&&(u.$$scope={dirty:t,ctx:e}),!A&&1&t&&(A=!0,u.value=e[0].default_connection,ne(()=>A=!1)),ae.$set(u);const l={};1&t&&(l.checked=e[0].open_to_public),65536&t&&(l.$$scope={dirty:t,ctx:e}),ie.$set(l);const f={};65536&t&&(f.$$scope={dirty:t,ctx:e}),se.$set(f)},i(e){I||(de(B.$$.fragment,e),de(H.$$.fragment,e),de(G.$$.fragment,e),de(K.$$.fragment,e),de(Z.$$.fragment,e),de(J.$$.fragment,e),de(te.$$.fragment,e),de(ae.$$.fragment,e),de(ie.$$.fragment,e),de(se.$$.fragment,e),de(ce.$$.fragment,e),I=!0)},o(e){le(B.$$.fragment,e),le(H.$$.fragment,e),le(G.$$.fragment,e),le(K.$$.fragment,e),le(Z.$$.fragment,e),le(J.$$.fragment,e),le(te.$$.fragment,e),le(ae.$$.fragment,e),le(ie.$$.fragment,e),le(se.$$.fragment,e),le(ce.$$.fragment,e),I=!1},d(e){be(B,e),e&&w(t),e&&w(n),be(H),q&&q.d(),be(G),be(K),be(Z),be(J),be(te),be(ae),be(ie),be(se),be(ce),o(U)}}}function ks(e,t,n){let r,o;u(e,pt,e=>n(8,r=e));const a=K("settings"),i=K("user"),s=i.api.operation("getSettings"),c=i.api.operation("inviteUser");u(e,c,e=>n(9,o=e));const d=i.api.operation("updateSettings");let l,f={};return p(pt,r=Zt("%1 - Convos",Zt("Convos settings"))),d.on("start",e=>{e.body.contact&&(e.body.contact="mailto:"+e.body.contact),e.body.open_to_public=!!e.body.open_to_public}),q(async()=>{await s.perform();const e=s.res.body;e.contact=e.contact.replace(/mailto:/,""),n(0,f=e)}),e.$$.update=()=>{512&e.$$.dirty&&n(1,l=o.res.body||{})},[f,l,a,c,d,function(e){c.perform(e.target)},function(e){const t=function(e){var t=document.createElement("textarea");t.value=e.textContent||e.value,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(e){t.value="",console.log("copyToClipboard() failed:",e)}return document.body.removeChild(t),t.value}(e.target);t&&i.events.notifyUser("Invite link copied",t,{force:!0})},function(e){d.perform(e.target)},r,o,i,s,function(e){f.organization_name=e,n(0,f)},function(e){f.organization_url=e,n(0,f)},function(e){f.contact=e,n(0,f)},function(e){f.default_connection=e,n(0,f)}]}class Es extends ye{constructor(e){super(),ve(this,e,ks,xs,i,{})}}function Cs(t){let n;return{c(){n=x("h1"),n.textContent=`${Zt("Account")}`},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Os(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Email")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ns(t){return{c:e,m:e,p:e,d:e}}function Ss(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Notification keywords")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ms(t){return{c:e,m:e,p:e,d:e}}function Ds(e){let t,n;function r(t){e[11].call(null,t)}let o={name:"notifications",$$slots:{default:[As],label:[Rs]},$$scope:{ctx:e}};void 0!==e[4]&&(o.checked=e[4]);const a=new Vr({props:o});return V.push(()=>ge(a,"checked",r)),{c(){he(a.$$.fragment)},m(e,t){$e(a,e,t),n=!0},p(e,n){const r={};32768&n&&(r.$$scope={dirty:n,ctx:e}),!t&&16&n&&(t=!0,r.checked=e[4],ne(()=>t=!1)),a.$set(r)},i(e){n||(de(a.$$.fragment,e),n=!0)},o(e){le(a.$$.fragment,e),n=!1},d(e){be(a,e)}}}function Rs(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Enable notifications")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function As(t){return{c:e,m:e,p:e,d:e}}function Ps(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Expand URL to media")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Ts(t){return{c:e,m:e,p:e,d:e}}function Ls(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Theme")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function js(t){return{c:e,m:e,p:e,d:e}}function Is(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Password")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Us(t){return{c:e,m:e,p:e,d:e}}function zs(t){let n;return{c(){n=x("span"),n.textContent=`${Zt("Repeat password")}`,S(n,"slot","label")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Bs(t){return{c:e,m:e,p:e,d:e}}function Hs(t){let n,r=Zt("Save settings")+"";return{c(){n=k(r)},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function qs(t){let n;return{c(){n=x("p"),n.textContent=`${Zt("You cannot receive notifications, because it is denied by your browser.")}`,S(n,"class","error")},m(e,t){y(e,n,t)},p:e,d(e){e&&w(n)}}}function Gs(e){let t,n,r,o,a,i,s,c,u,d,l,f,p,m,g,h,$,b,_;const k=new ur({props:{$$slots:{default:[Cs]},$$scope:{ctx:e}}}),C=new Dt({props:{type:"email",name:"email",value:e[5].email,readonly:!0,$$slots:{default:[Ns],label:[Os]},$$scope:{ctx:e}}}),M=new Dt({props:{name:"highlight_keywords",placeholder:Zt("whatever, keywords"),value:e[8],$$slots:{default:[Ms],label:[Ss]},$$scope:{ctx:e}}});let D=!e[2]&&Ds(e);function R(t){e[12].call(null,t)}let A={name:"expand_url",$$slots:{default:[Ts],label:[Ps]},$$scope:{ctx:e}};void 0!==e[1]&&(A.checked=e[1]);const P=new Vr({props:A});function T(t){e[13].call(null,t)}V.push(()=>ge(P,"checked",R));let L={name:"theme",options:or,$$slots:{default:[js],label:[Ls]},$$scope:{ctx:e}};void 0!==e[3]&&(L.value=e[3]);const j=new Ka({props:L});V.push(()=>ge(j,"value",T));const I=new Dt({props:{type:"password",name:"password",autocomplete:"new-password",$$slots:{default:[Us],label:[Is]},$$scope:{ctx:e}}}),U=new Dt({props:{type:"password",name:"password_again",autocomplete:"new-password",$$slots:{default:[Bs],label:[zs]},$$scope:{ctx:e}}}),z=new qr({props:{icon:"save",op:e[7],$$slots:{default:[Hs]},$$scope:{ctx:e}}}),B=new Jr({props:{op:e[7]}});let H=e[2]&&qs();return{c(){he(k.$$.fragment),t=E(),n=x("main"),r=x("form"),he(C.$$.fragment),o=E(),he(M.$$.fragment),a=E(),D&&D.c(),i=E(),he(P.$$.fragment),c=E(),he(j.$$.fragment),d=E(),he(I.$$.fragment),l=E(),he(U.$$.fragment),f=E(),p=x("p"),p.textContent=`${Zt("Leave the password fields empty to keep the current password.")}`,m=E(),g=x("div"),he(z.$$.fragment),h=E(),he(B.$$.fragment),$=E(),H&&H.c(),S(g,"class","form-actions"),S(r,"method","post"),S(n,"class","main"),_=O(r,"submit",N(e[9]))},m(s,u){$e(k,s,u),y(s,t,u),y(s,n,u),v(n,r),$e(C,r,null),v(r,o),$e(M,r,null),v(r,a),D&&D.m(r,null),v(r,i),$e(P,r,null),v(r,c),$e(j,r,null),v(r,d),$e(I,r,null),v(r,l),$e(U,r,null),v(r,f),v(r,p),v(r,m),v(r,g),$e(z,g,null),v(r,h),$e(B,r,null),v(r,$),H&&H.m(r,null),e[14](r),b=!0},p(e,[t]){const n={};32768&t&&(n.$$scope={dirty:t,ctx:e}),k.$set(n);const o={};32&t&&(o.value=e[5].email),32768&t&&(o.$$scope={dirty:t,ctx:e}),C.$set(o);const a={};32768&t&&(a.$$scope={dirty:t,ctx:e}),M.$set(a),e[2]?D&&(ce(),le(D,1,1,()=>{D=null}),ue()):D?(D.p(e,t),de(D,1)):(D=Ds(e),D.c(),de(D,1),D.m(r,i));const c={};32768&t&&(c.$$scope={dirty:t,ctx:e}),!s&&2&t&&(s=!0,c.checked=e[1],ne(()=>s=!1)),P.$set(c);const d={};32768&t&&(d.$$scope={dirty:t,ctx:e}),!u&&8&t&&(u=!0,d.value=e[3],ne(()=>u=!1)),j.$set(d);const l={};32768&t&&(l.$$scope={dirty:t,ctx:e}),I.$set(l);const f={};32768&t&&(f.$$scope={dirty:t,ctx:e}),U.$set(f);const p={};32768&t&&(p.$$scope={dirty:t,ctx:e}),z.$set(p),e[2]?H?H.p(e,t):(H=qs(),H.c(),H.m(r,null)):H&&(H.d(1),H=null)},i(e){b||(de(k.$$.fragment,e),de(C.$$.fragment,e),de(M.$$.fragment,e),de(D),de(P.$$.fragment,e),de(j.$$.fragment,e),de(I.$$.fragment,e),de(U.$$.fragment,e),de(z.$$.fragment,e),de(B.$$.fragment,e),b=!0)},o(e){le(k.$$.fragment,e),le(C.$$.fragment,e),le(M.$$.fragment,e),le(D),le(P.$$.fragment,e),le(j.$$.fragment,e),le(I.$$.fragment,e),le(U.$$.fragment,e),le(z.$$.fragment,e),le(B.$$.fragment,e),b=!1},d(r){be(k,r),r&&w(t),r&&w(n),be(C),be(M),D&&D.d(),be(P),be(j),be(I),be(U),be(z),be(B),H&&H.d(),e[14](null),_()}}}function Ks(e,t,n){let r,o;u(e,pt,e=>n(10,r=e));const a=K("user");u(e,a,e=>n(5,o=e));const i=a.api.operation("updateUser");let s,c=a.embedMaker.expandUrlToMedia,d="denied"==a.events.browserNotifyPermission,l=a.theme,f=a.events.wantNotifications,m=a.highlight_keywords.join(", ");return p(pt,r=Zt("%1 - Convos",Zt("Account"))),i.on("start",e=>{e.body.password||delete e.body.password,e.body.highlight_keywords=e.body.highlight_keywords.split(/[.,\s]+/).map(e=>e.trim())}),[s,c,d,l,f,o,a,i,m,function(e){const t=e.target,r=[t.password.value,t.password_again.value];if(f&&a.events.requestPermissionToNotify(e=>{"denied"==e&&(n(4,f=!1),n(2,d=!0))}),r.join("").length&&r[0]!=r[1])return i.error("Passwords does not match.");a.embedMaker.update({expandUrlToMedia:c}),a.update({theme:l}),i.perform(e.target)},r,function(e){f=e,n(4,f)},function(e){c=e,n(1,c)},function(e){l=e,n(3,l)},function(e){V[e?"unshift":"push"](()=>{n(0,s=e)})}]}class Fs extends ye{constructor(e){super(),ve(this,e,Ks,Gs,i,{})}}const{window:Ws}=me;function Vs(e){let t,n,r,o,a=e[1]&&("nav"==e[3]||e[4].wideScreen)&&Zs(e);var i=e[2];if(i)var s=new i({});let c=e[3]&&!e[4].wideScreen&&Ys(e);return{c(){a&&a.c(),t=E(),s&&he(s.$$.fragment),n=E(),c&&c.c(),r=C()},m(e,i){a&&a.m(e,i),y(e,t,i),s&&$e(s,e,i),y(e,n,i),c&&c.m(e,i),y(e,r,i),o=!0},p(e,o){if(e[1]&&("nav"==e[3]||e[4].wideScreen)?a?(a.p(e,o),de(a,1)):(a=Zs(e),a.c(),de(a,1),a.m(t.parentNode,t)):a&&(ce(),le(a,1,1,()=>{a=null}),ue()),i!==(i=e[2])){if(s){ce();const e=s;le(e.$$.fragment,1,0,()=>{be(e,1)}),ue()}i?(he((s=new i({})).$$.fragment),de(s.$$.fragment,1),$e(s,n.parentNode,n)):s=null}e[3]&&!e[4].wideScreen?c?(c.p(e,o),de(c,1)):(c=Ys(e),c.c(),de(c,1),c.m(r.parentNode,r)):c&&(ce(),le(c,1,1,()=>{c=null}),ue())},i(e){o||(de(a),s&&de(s.$$.fragment,e),de(c),o=!0)},o(e){le(a),s&&le(s.$$.fragment,e),le(c),o=!1},d(e){a&&a.d(e),e&&w(t),s&&be(s,e),e&&w(n),c&&c.d(e),e&&w(r)}}}function Zs(e){let t;const n=new bn({props:{transition:{duration:e[4].wideScreen?0:250,x:e[4].width}}});return{c(){he(n.$$.fragment)},m(e,r){$e(n,e,r),t=!0},p(e,t){const r={};16&t&&(r.transition={duration:e[4].wideScreen?0:250,x:e[4].width}),n.$set(r)},i(e){t||(de(n.$$.fragment,e),t=!0)},o(e){le(n.$$.fragment,e),t=!1},d(e){be(n,e)}}}function Ys(t){let n,r,o,a;return{c(){n=x("div"),n.textContent="",S(n,"class","overlay"),a=O(n,"click",t[17])},m(e,t){y(e,n,t),o=!0},p:e,i(e){o||(te(()=>{r||(r=pe(n,At,{duration:200},!0)),r.run(1)}),o=!0)},o(e){r||(r=pe(n,At,{duration:200},!1)),r.run(0),o=!1},d(e){e&&w(n),e&&r&&r.end(),a()}}}function Qs(e){let t,n,r;te(e[16]);let a=e[2]&&Vs(e);return{c(){a&&a.c(),t=C(),r=[O(Ws,"click",e[6]),O(Ws,"focus",e[7]),O(Ws,"keydown",Js),O(Ws,"resize",e[16])]},m(e,r){a&&a.m(e,r),y(e,t,r),n=!0},p(e,[n]){e[2]?a?(a.p(e,n),de(a,1)):(a=Vs(e),a.c(),de(a,1),a.m(t.parentNode,t)):a&&(ce(),le(a,1,1,()=>{a=null}),ue())},i(e){n||(de(a),n=!0)},o(e){le(a),n=!1},d(e){a&&a.d(e),e&&w(t),o(r)}}}function Js(e){if(!e.shiftKey||13!=e.keyCode)return;e.preventDefault();const t=document.getElementById("search_input"),n=document.activeElement;if(n!=t&&!Je(n,"body"))return t.focus();const r=["#chat_input",'.main input[type="text"]',".main a","#search_input"];for(let e=0;e<r.length;e++){const t=document.querySelector(r[e]);if(t)return t.focus()}}function Xs(e,t,n){let r,o,a,i,s,c;u(e,ft,e=>n(9,r=e)),u(e,pt,e=>n(11,a=e)),u(e,mt,e=>n(2,i=e)),u(e,dt,e=>n(3,s=e)),u(e,lt,e=>n(4,c=e));const d=[[new RegExp("^/(file|paste)"),null,{}],[new RegExp("^/docs"),null,{}],[new RegExp("^/$"),ts,{user:"pending"}],[new RegExp(".*"),wi,{user:"offline"}],[new RegExp("^/(login|register)"),ts,{}],[new RegExp("^/settings/connection"),Ia,{user:"loggedIn"}],[new RegExp("^/settings/conversation"),si,{user:"loggedIn"}],[new RegExp("^/settings/account"),Fs,{user:"loggedIn"}],[new RegExp("^/settings"),Es,{user:"loggedIn"}],[new RegExp("^/chat"),Pa,{user:"loggedIn"}],[new RegExp("^/help"),Oi,{user:"loggedIn"}],[new RegExp("^/$"),null,{user:["error","success"],gotoLast:!0}],[new RegExp(".*"),wi,{}]],l=[window.__convos,delete window.__convos][0],f=new tt(l.api_url,{debug:!0}),m=new rr({api:f,wsUrl:l.ws_url});u(e,m,e=>n(10,o=e));const g=m.notifications;let h=0;function $(e){let t=["","chat",e.connection_id];if(p(dt,s=""),"part"==e.command[0]){const e=document.querySelector('.sidebar-left [href$="'+t.map(encodeURIComponent).join("/")+'"]');ht(e?e.href:"/chat")}else e.dialog_id&&t.push(e.dialog_id),ht(t.map(encodeURIComponent).join("/"))}window.hljs=nt,ft.base=l.base_url,m.events.listenToGlobalEvents(),G("settings",l),G("user",m),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(e=>{m.update({latestVersion:l.asset_version}),e.update()}).catch(e=>{console.log("[Convos] ServiceWorker registration failed:",e)}),q(()=>{Ge(ft.base+"/images/emojis.js"),l.load_user&&m.load(),m.showGrid&&document.querySelector("body").classList.add("with-grid");const e=[];return e.push(function(){var e=function(){return ft.set($t(location.href))};return window.addEventListener("popstate",e),function(){return window.removeEventListener("popstate",e)}}()),e.push(m.on("wsEventSentJoin",$)),e.push(m.on("wsEventSentPart",$)),()=>e.forEach(e=>e())});let b;return e.$$.update=()=>{1&e.$$.dirty&&lt.set({wideScreen:h>800,width:h}),1536&e.$$.dirty&&function(e,t,n){var r=e.path,o=[t.status,r].join(":");if(o!=ut){for(var a=0;a<n.length;a++){var i=Re(n[a],3),s=i[0],c=i[1],u=i[2];if(s.test(r)&&(!u.user||t.is(u.user))){if(u.gotoLast)return ht(t.calculateLastUrl());c.routerOptions=u,bt(c),Ve("body",/(is-logged-)\S+/,t.is("loggedIn")?"in":"out"),Ve("body",/(page-)\S+/,u.name||e.pathParts[0]),"loggedIn"==u.user&&t.update({lastUrl:e.toString()});break}}ut=o}}(r,o,d),1024&e.$$.dirty&&function(e){0==or.filter((function(t){return t[0]==e})).length&&(e="auto"),"auto"==e&&(e=ar);var t=document.documentElement;t.className=t.className.replace(/theme-\S+/,(function(){return"theme-"+e}))}(o.theme),3072&e.$$.dirty&&document&&(document.title=o.unread?"("+o.unread+") "+a:a),4&e.$$.dirty&&n(1,b="loggedIn"==i.routerOptions.user)},[h,b,i,s,c,m,function(e){const t=ze(e.target,"a"),n=t&&t.href.match(/#call:(\w+):(\w+)/)||["","",""];if(n[2])switch(e.preventDefault(),n[1]){case"events":return m.events[n[2]]();case"user":return m[n[2]]()}if(t&&"_self"==t.target)return e.preventDefault(),void ht(t.href);const o=t&&t.href.match(/(.*)#(activeMenu):(\w*)/)||["","","",""];0==o[1].indexOf("http")&&r.toString()!=o[1]&&ht(o[1]),ze(e.target,".sidebar-left")&&!t||ze(e.target,".main")&&!o[3]||((o[2]||s)&&e.preventDefault(),p(dt,s=o[3]==s?"":o[3]))},function(){m.ensureConnected()},d,r,o,a,l,f,g,$,function(){n(0,h=Ws.innerWidth)},()=>p(dt,s="")]}var ec=document.querySelector("body");new class extends ye{constructor(e){super(),ve(this,e,Xs,Qs,i,{routingRules:8})}get routingRules(){return this.$$.ctx[8]}}({target:document.body});ec.classList=ec.className.replace(/no-js/,"has-js")}();
//# sourceMappingURL=convos.5e323e25.js.map
