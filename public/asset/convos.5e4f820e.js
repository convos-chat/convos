!function(){"use strict";var n=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")};function e(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}var t=function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n};function r(n,e){return n(e={exports:{}},e.exports),e.exports}var o=r((function(n){function e(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?n.exports=e=function(n){return typeof n}:n.exports=e=function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},e(t)}n.exports=e}));var i=function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n};var a=function(n,e){return!e||"object"!==o(e)&&"function"!=typeof e?i(n):e},c=r((function(n){function e(t){return n.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},e(t)}n.exports=e})),u=r((function(n){function e(t,r){return n.exports=e=Object.setPrototypeOf||function(n,e){return n.__proto__=e,n},e(t,r)}n.exports=e}));var s=function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&u(n,e)};var d=function(n){if(Array.isArray(n))return n};var f=function(n,e){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n)){var t=[],r=!0,o=!1,i=void 0;try{for(var a,c=n[Symbol.iterator]();!(r=(a=c.next()).done)&&(t.push(a.value),!e||t.length!==e);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return t}};var l=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var p=function(n,e){return d(n)||f(n,e)||l()};var g=function(n,e){for(;!Object.prototype.hasOwnProperty.call(n,e)&&null!==(n=c(n)););return n},m=r((function(n){function e(t,r,o){return"undefined"!=typeof Reflect&&Reflect.get?n.exports=e=Reflect.get:n.exports=e=function(n,e,t){var r=g(n,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(t):o.value}},e(t,r,o||t)}n.exports=e}));var h=function(n){return-1!==Function.toString.call(n).indexOf("[native code]")},v=r((function(n){function e(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(n){return!1}}function t(r,o,i){return e()?n.exports=t=Reflect.construct:n.exports=t=function(n,e,t){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(n,r));return t&&u(o,t.prototype),o},t.apply(null,arguments)}n.exports=t})),$=r((function(n){function e(t){var r="function"==typeof Map?new Map:void 0;return n.exports=e=function(n){if(null===n||!h(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(n))return r.get(n);r.set(n,e)}function e(){return v(n,arguments,c(this).constructor)}return e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),u(e,n)},e(t)}n.exports=e}));var b=function(n){if(Array.isArray(n)){for(var e=0,t=new Array(n.length);e<n.length;e++)t[e]=n[e];return t}};var y=function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)};var w=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var _=function(n){return b(n)||y(n)||w()};function x(){}var k=function(n){return n};function E(n){return n()}function O(){return Object.create(null)}function C(n){n.forEach(E)}function N(n){return"function"==typeof n}function S(n,e){return n!=n?e==e:n!==e||n&&"object"===o(n)||"function"==typeof n}function M(n){if(null==n)return x;for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var o=n.subscribe.apply(n,t);return o.unsubscribe?function(){return o.unsubscribe()}:o}function D(n){var e;return M(n,(function(n){return e=n}))(),e}function R(n,e,t){n.$$.on_destroy.push(M(e,t))}function P(n,e,t,r){if(n){var o=A(n,e,t,r);return n[0](o)}}function A(n,e,t,r){return n[1]&&r?function(n,e){for(var t in e)n[t]=e[t];return n}(t.ctx.slice(),n[1](r(e))):t.ctx}function T(n,e,t,r){if(n[2]&&r){var i=n[2](r(t));if("object"===o(e.dirty)){for(var a=[],c=Math.max(e.dirty.length,i.length),u=0;u<c;u+=1)a[u]=e.dirty[u]|i[u];return a}return e.dirty|i}return e.dirty}function L(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return n.set(t),e}var j="undefined"!=typeof window,I=j?function(){return window.performance.now()}:function(){return Date.now()},U=j?function(n){return requestAnimationFrame(n)}:x,z=new Set;function B(n){z.forEach((function(e){e.c(n)||(z.delete(e),e.f())})),0!==z.size&&U(B)}function H(n,e){n.appendChild(e)}function q(n,e,t){n.insertBefore(e,t||null)}function G(n){n.parentNode.removeChild(n)}function K(n,e){for(var t=0;t<n.length;t+=1)n[t]&&n[t].d(e)}function F(n){return document.createElement(n)}function W(n){return document.createTextNode(n)}function V(){return W(" ")}function Y(){return W("")}function Z(n,e,t,r){return n.addEventListener(e,t,r),function(){return n.removeEventListener(e,t,r)}}function J(n){return function(e){return e.preventDefault(),n.call(this,e)}}function Q(n,e,t){null==t?n.removeAttribute(e):n.getAttribute(e)!==t&&n.setAttribute(e,t)}function X(n){return Array.from(n.childNodes)}function nn(n,e){e=""+e,n.data!==e&&(n.data=e)}function en(n,e){(null!=e||n.value)&&(n.value=e)}function tn(n,e,t,r){n.style.setProperty(e,t,r?"important":"")}function rn(n,e,t){n.classList[t?"add":"remove"](e)}var on,an,cn=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n(this,e),this.e=F("div"),this.a=r,this.u(t)}return t(e,[{key:"m",value:function(n){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=0;t<this.n.length;t+=1)q(n,this.n[t],e);this.t=n}},{key:"u",value:function(n){this.e.innerHTML=n,this.n=Array.from(this.e.childNodes)}},{key:"p",value:function(n){this.d(),this.u(n),this.m(this.t,this.a)}},{key:"d",value:function(){this.n.forEach(G)}}]),e}(),un=0,sn={};function dn(n){for(var e=5381,t=n.length;t--;)e=(e<<5)-e^n.charCodeAt(t);return e>>>0}function fn(n,e,t,r,o,i,a){for(var c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=16.666/r,s="{\n",d=0;d<=1;d+=u){var f=e+(t-e)*i(d);s+=100*d+"%{".concat(a(f,1-f),"}\n")}var l=s+"100% {".concat(a(t,1-t),"}\n}"),p="__svelte_".concat(dn(l),"_").concat(c);if(!sn[p]){if(!on){var g=F("style");document.head.appendChild(g),on=g.sheet}sn[p]=!0,on.insertRule("@keyframes ".concat(p," ").concat(l),on.cssRules.length)}var m=n.style.animation||"";return n.style.animation="".concat(m?"".concat(m,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),un+=1,p}function ln(n,e){n.style.animation=(n.style.animation||"").split(", ").filter(e?function(n){return n.indexOf(e)<0}:function(n){return-1===n.indexOf("__svelte")}).join(", "),e&&!--un&&U((function(){if(!un){for(var n=on.cssRules.length;n--;)on.deleteRule(n);sn={}}}))}function pn(n){an=n}function gn(){if(!an)throw new Error("Function called outside component initialization");return an}function mn(n){gn().$$.on_mount.push(n)}function hn(n,e){gn().$$.context.set(n,e)}function vn(n){return gn().$$.context.get(n)}function $n(n,e){var t=n.$$.callbacks[e.type];t&&t.slice().forEach((function(n){return n(e)}))}var bn=[],yn=[],wn=[],_n=[],xn=Promise.resolve(),kn=!1;function En(){kn||(kn=!0,xn.then(Rn))}function On(){return En(),xn}function Cn(n){wn.push(n)}function Nn(n){_n.push(n)}var Sn,Mn=!1,Dn=new Set;function Rn(){if(!Mn){Mn=!0;do{for(var n=0;n<bn.length;n+=1){var e=bn[n];pn(e),Pn(e.$$)}for(bn.length=0;yn.length;)yn.pop()();for(var t=0;t<wn.length;t+=1){var r=wn[t];Dn.has(r)||(Dn.add(r),r())}wn.length=0}while(bn.length);for(;_n.length;)_n.pop()();kn=!1,Mn=!1,Dn.clear()}}function Pn(n){if(null!==n.fragment){n.update(),C(n.before_update);var e=n.dirty;n.dirty=[-1],n.fragment&&n.fragment.p(n.ctx,e),n.after_update.forEach(Cn)}}function An(n,e,t){var r,o,i;n.dispatchEvent((r="".concat(e?"intro":"outro").concat(t),(i=document.createEvent("CustomEvent")).initCustomEvent(r,!1,!1,o),i))}var Tn,Ln=new Set;function jn(){Tn={r:0,c:[],p:Tn}}function In(){Tn.r||C(Tn.c),Tn=Tn.p}function Un(n,e){n&&n.i&&(Ln.delete(n),n.i(e))}function zn(n,e,t,r){if(n&&n.o){if(Ln.has(n))return;Ln.add(n),Tn.c.push((function(){Ln.delete(n),r&&(t&&n.d(1),r())})),n.o(e)}}var Bn={duration:0};function Hn(n,e,t,r){var o=e(n,t),i=r?0:1,a=null,c=null,u=null;function s(){u&&ln(n,u)}function d(n,e){var t=n.b-i;return e*=Math.abs(t),{a:i,b:n.b,d:t,duration:e,start:n.start,end:n.start+e,group:n.group}}function f(e){var t,r=o||Bn,f=r.delay,l=void 0===f?0:f,p=r.duration,g=void 0===p?300:p,m=r.easing,h=void 0===m?k:m,v=r.tick,$=void 0===v?x:v,b=r.css,y={start:I()+l,b:e};e||(y.group=Tn,Tn.r+=1),a?c=y:(b&&(s(),u=fn(n,i,e,g,l,h,b)),e&&$(0,1),a=d(y,g),Cn((function(){return An(n,e,"start")})),t=function(e){if(c&&e>c.start&&(a=d(c,g),c=null,An(n,a.b,"start"),b&&(s(),u=fn(n,i,a.b,a.duration,0,h,o.css))),a)if(e>=a.end)$(i=a.b,1-i),An(n,a.b,"end"),c||(a.b?s():--a.group.r||C(a.group.c)),a=null;else if(e>=a.start){var t=e-a.start;i=a.a+a.d*h(t/a.duration),$(i,1-i)}return!(!a&&!c)},0===z.size&&U(B),new Promise((function(n){z.add({c:t,f:n})})))}return{run:function(n){N(o)?(Sn||(Sn=Promise.resolve()).then((function(){Sn=null})),Sn).then((function(){o=o(),f(n)})):f(n)},end:function(){s(),a=c=null}}}var qn="undefined"!=typeof window?window:global;function Gn(n,e,t){var r=n.$$.props[e];void 0!==r&&(n.$$.bound[r]=t,t(n.$$.ctx[r]))}function Kn(n){n&&n.c()}function Fn(n,e,t){var r=n.$$,o=r.fragment,i=r.on_mount,a=r.on_destroy,c=r.after_update;o&&o.m(e,t),Cn((function(){var e=i.map(E).filter(N);a?a.push.apply(a,_(e)):C(e),n.$$.on_mount=[]})),c.forEach(Cn)}function Wn(n,e){var t=n.$$;null!==t.fragment&&(C(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Vn(n,e){-1===n.$$.dirty[0]&&(bn.push(n),En(),n.$$.dirty.fill(0)),n.$$.dirty[e/31|0]|=1<<e%31}function Yn(n,e,t,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],c=an;pn(n);var u=e.props||{},s=n.$$={fragment:null,ctx:null,props:i,update:x,not_equal:o,bound:O(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(c?c.$$.context:[]),callbacks:O(),dirty:a},d=!1;s.ctx=t?t(n,u,(function(e,t){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:t;return s.ctx&&o(s.ctx[e],s.ctx[e]=r)&&(s.bound[e]&&s.bound[e](r),d&&Vn(n,e)),t})):[],s.update(),d=!0,C(s.before_update),s.fragment=!!r&&r(s.ctx),e.target&&(e.hydrate?s.fragment&&s.fragment.l(X(e.target)):s.fragment&&s.fragment.c(),e.intro&&Un(n.$$.fragment),Fn(n,e.target,e.anchor),Rn()),pn(c)}"function"==typeof HTMLElement&&$(HTMLElement);var Zn=function(){function e(){n(this,e)}return t(e,[{key:"$destroy",value:function(){Wn(this,1),this.$destroy=x}},{key:"$on",value:function(n,e){var t=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}},{key:"$set",value:function(){}}]),e}(),Jn=r((function(n){var e=function(n){var e=Object.prototype,t=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function u(n,e,t,r){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new x(r||[]);return i._invoke=function(n,e,t){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(t.method=o,t.arg=i;;){var a=t.delegate;if(a){var c=y(a,t);if(c){if(c===d)continue;return c}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var u=s(n,e,t);if("normal"===u.type){if(r=t.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:t.done}}"throw"===u.type&&(r="completed",t.method="throw",t.arg=u.arg)}}}(n,t,a),i}function s(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}n.wrap=u;var d={};function f(){}function l(){}function p(){}var g={};g[i]=function(){return this};var m=Object.getPrototypeOf,h=m&&m(m(k([])));h&&h!==e&&t.call(h,i)&&(g=h);var v=p.prototype=f.prototype=Object.create(g);function $(n){["next","throw","return"].forEach((function(e){n[e]=function(n){return this._invoke(e,n)}}))}function b(n){var e;this._invoke=function(r,i){function a(){return new Promise((function(e,a){!function e(r,i,a,c){var u=s(n[r],n,i);if("throw"!==u.type){var d=u.arg,f=d.value;return f&&"object"===o(f)&&t.call(f,"__await")?Promise.resolve(f.__await).then((function(n){e("next",n,a,c)}),(function(n){e("throw",n,a,c)})):Promise.resolve(f).then((function(n){d.value=n,a(d)}),(function(n){return e("throw",n,a,c)}))}c(u.arg)}(r,i,e,a)}))}return e=e?e.then(a,a):a()}}function y(n,e){var t=n.iterator[e.method];if(void 0===t){if(e.delegate=null,"throw"===e.method){if(n.iterator.return&&(e.method="return",e.arg=void 0,y(n,e),"throw"===e.method))return d;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var r=s(t,n.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,d;var o=r.arg;return o?o.done?(e[n.resultName]=o.value,e.next=n.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,d):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,d)}function w(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function _(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function x(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(w,this),this.reset(!0)}function k(n){if(n){var e=n[i];if(e)return e.call(n);if("function"==typeof n.next)return n;if(!isNaN(n.length)){var r=-1,o=function e(){for(;++r<n.length;)if(t.call(n,r))return e.value=n[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return l.prototype=v.constructor=p,p.constructor=l,p[c]=l.displayName="GeneratorFunction",n.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,p):(n.__proto__=p,c in n||(n[c]="GeneratorFunction")),n.prototype=Object.create(v),n},n.awrap=function(n){return{__await:n}},$(b.prototype),b.prototype[a]=function(){return this},n.AsyncIterator=b,n.async=function(e,t,r,o){var i=new b(u(e,t,r,o));return n.isGeneratorFunction(t)?i:i.next().then((function(n){return n.done?n.value:i.next()}))},$(v),v[c]="Generator",v[i]=function(){return this},v.toString=function(){return"[object Generator]"},n.keys=function(n){var e=[];for(var t in n)e.push(t);return e.reverse(),function t(){for(;e.length;){var r=e.pop();if(r in n)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=k,x.prototype={constructor:x,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!n)for(var e in this)"t"===e.charAt(0)&&t.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var e=this;function r(t,r){return a.type="throw",a.arg=n,e.next=t,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=t.call(i,"catchLoc"),u=t.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(n,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&t.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===n||"continue"===n)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=n,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(a)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),d},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),_(t),d}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var r=t.completion;if("throw"===r.type){var o=r.arg;_(t)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(n,e,t){return this.delegate={iterator:k(n),resultName:e,nextLoc:t},"next"===this.method&&(this.arg=void 0),d}},n}(n.exports);try{regeneratorRuntime=e}catch(n){Function("r","regeneratorRuntime = r")(e)}}));function Qn(n,e,t,r,o,i,a){try{var c=n[i](a),u=c.value}catch(n){return void t(n)}c.done?e(u):Promise.resolve(u).then(r,o)}var Xn=function(n){return function(){var e=this,t=arguments;return new Promise((function(r,o){var i=n.apply(e,t);function a(n){Qn(i,r,o,a,c,"next",n)}function c(n){Qn(i,r,o,a,c,"throw",n)}a(void 0)}))}};function ne(n,e){for(;n;){if(e.tagName?n==e:n.matches&&n.matches(e))return n;n=n.parentNode}return null}function ee(n,e){var t;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;t&&clearTimeout(t),t=setTimeout((function(){n.apply(a,o)}),e)}}function te(n,e,t){var r=n&&n.querySelector("."+e.split(" ").join("."));return r||((r=document.createElement("div")).className=e,n&&n.appendChild(r),t&&t(r),r)}function re(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",t=n.errors||n;return t&&t[0]?t[0][e]||"Unknown error.":""}function oe(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*n),o=6*n-r,i=t*(1-e),a=t*(1-o*e),c=t*(1-(1-o)*e),u=255,s=255,d=255;switch(r){case 0:u=t,s=c,d=i;break;case 1:u=a,s=t,d=i;break;case 2:u=i,s=t,d=c;break;case 3:u=i,s=a,d=t;break;case 4:u=c,s=i,d=t;break;case 5:u=t,s=i,d=a}return[Math.floor(255*u),Math.floor(255*s),Math.floor(255*d)]}function ie(n,e){return"array"==e?Array.isArray(n):"object"==e?"object"==o(n)&&null!==n:"undef"==e?null==n:o(n)==e}function ae(n){var e=document,t=n.replace(/\W/g,"_");if(!e.getElementById(t)){var r=e.createElement("script"),o=[t,n];r.id=o[0],r.src=o[1],e.getElementsByTagName("head")[0].appendChild(r)}}function ce(n){return Object.keys(n).filter((function(e){return n[e]})).sort().map((function(n){return"has-mode-"+n})).join(" ")}function ue(n,e,t){var r=n.querySelectorAll(e);if(!t)return[].slice.call(r,0);for(var o=[],i=0;i<r.length;i++)o.push(t(r[i],i));return o}function se(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function de(n,e,t){var r=document.querySelector(n);r.className=r.className.replace(e,(function(n,e){return e+t}))}function fe(n){var e=document.querySelector(".main")||document.querySelector("body");if(!e)return setTimeout((function(){return fe(n)}),10);if("number"==typeof n)return e.scrollTop=n;if("string"==typeof n){var t=document.querySelector(n);return t?fe(t):setTimeout((function(){return fe(n)}),100)}if(n.href&&-1!=n.href.indexOf("#"))return location.hash=n.href.replace(/.*#/,"#"),fe(location.hash);if(n.tagName)return fe(n.offsetTop-30);if(n.preventDefault&&n.preventDefault(),n.target&&n.target.tagName)return fe(n.target.closest("[href]"));throw"Cannot scroll to "+n}function le(n,e){return"is-visible"===e?!n.hasAttribute("hidden"):("toggle"===e&&(e=n.hasAttribute("hidden")),e?n.removeAttribute("hidden"):n.setAttribute("hidden",""))}function pe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==n.length)return"#000";for(var t=0,r=0;r<n.length;r++)t=n.charCodeAt(r)+((t<<5)-t),t&=t;return"#"+oe(((t=Math.abs(t%e/e))+.618033988749)%1,.4,.7).map((function(n){return n.toString(16)})).join("")}function ge(n,e){return n&&n.tagName&&n.tagName.toLowerCase()===e||!1}function me(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(n){var e=16*Math.random()|0;return("x"==n?e:3&e|8).toString(16)}))}var he=function(){function e(){n(this,e),this._on={},this._props={},this._reactiveProp={}}return t(e,[{key:"emit",value:function(n,e){var t=this._on[n];if(!t)return this;for(var r=0;r<t.length;r++)t[r][0](e);return this}},{key:"on",value:function(n,e){var t=e?null:new Promise((function(n){e=n})),r=this._on[n]||(this._on[n]=[]),o=[e];r.push(o);var i=function(){var n=r.indexOf(o);-1!=n&&r.splice(n,1)};return t?t.finally(i):i}},{key:"prop",value:function(n,e,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(this._props[e]=r,n){case"persist":return this._localStorageProp(e,t);case"ro":return this._readOnlyProp(e,t);case"rw":return this._updateableProp(e,t)}throw'Unknown prop type "'+n+'" for prop "'+e+'".'}},{key:"subscribe",value:function(n){return n(this),this.on("update",n)}},{key:"update",value:function(n){for(var e=this,t=Object.keys(n),r=t.length,o=0;o<t.length;o++){var i=t[o],a=this._props[i];if(a){var c=!1;this._reactiveProp.hasOwnProperty(i)&&(this._reactiveProp[i]!==n[i]&&(c=!0),this._reactiveProp[i]=n[i]),a.localStorage&&c&&this._localStorage(i,this._reactiveProp[i]),c||r--}}return r&&!this._updatedTid&&(this._updatedTid=setTimeout((function(){delete e._updatedTid,e.emit("update",e)}),1)),this}},{key:"_localStorage",value:function(n,e){var t="convos:"+(this._props[n].key||n);return 2==arguments.length?localStorage.setItem(t,JSON.stringify(e)):localStorage.hasOwnProperty(t)?JSON.parse(localStorage.getItem(t)):void 0}},{key:"_localStorageProp",value:function(n,e){var t=this._localStorage(n);this._updateableProp(n,ie(t,"undef")?e:t),this._props[n].localStorage=!0,ie(t,"undef")&&!this._props[n].lazy&&this._localStorage(n,e)}},{key:"_readOnlyProp",value:function(n,e){if(void 0===e)throw'Read-only attribute "'+n+'" cannot be undefined for '+this.constructor.name;var t="function"==typeof e?{get:e}:{value:e,writable:!1};Object.defineProperty(this,n,t)}},{key:"_updateableProp",value:function(n,e){var t=this;this._reactiveProp[n]=e,Object.defineProperty(this,n,{get:function(){return t._reactiveProp[n]}})}}]),e}(),ve=function(e){function r(e){var t;return n(this,r),(t=a(this,c(r).call(this))).prop("ro","api",e.api),t.prop("ro","defaultParams",e.defaultParams||{}),t.prop("ro","id",e.id),t.prop("ro","req",{body:null,headers:{}}),t.prop("ro","res",{body:{},headers:{}}),t.prop("rw","err",null),t.prop("rw","status","pending"),t}return s(r,e),t(r,[{key:"error",value:function(n,e){if(n)return this.update({err:Array.isArray(n)?n:[{message:n,source:e}],status:"error"});if(!this.err||!this.err.length)return"";var t=this.err[0],r=t.path&&t.path.match(/\w$/)&&t.path.split("/").pop();return r?r+": "+t.message:t.message}},{key:"perform",value:function(n){var e=this;return this._promise||(this._promise=new Promise((function(t){e.api.spec(e.id).then((function(r){if(!r)return t(e.error('Invalid operationId "'+e.id+'".',"spec"));e.update({status:"loading"});var o=e._paramsToRequest(r,n||e.defaultParams),i=p(o,2),a=i[0],c=i[1];return e.emit("start",c),ie(c.body,"object")&&"function"!=typeof c.body.has&&(c.body=JSON.stringify(c.body)),fetch(a,c)})).then((function(n){return Promise.all([n,n.json()])})).then((function(n){var r=p(n,2),o=r[0],i=r[1];delete e._promise,t(e.parse(o,i))})).catch((function(n){delete e._promise,t(e.error('Failed fetching operationId "'+e.id+'": '+n,"fetch"))}))})))}},{key:"is",value:function(n){return this.status==n}},{key:"parse",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.body;this.res.body=e||n,this.res.status=n.status||"201",n.headers&&(this.res.headers=n.headers);var t=null;return String(this.res.status).match(/^[23]/)||(t=e&&e.errors?e.errors:[{message:n.statusText||"Unknown error."}]),this.update({err:t,status:t?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(n,e){if(e.schema&&"form"==(n.tagName||"").toLowerCase())return Object.keys(e.schema.properties).reduce((function(e,t){var r=n[t];return r&&("checkbox"!=r.type||r.checked)?(e[t]=r.value,e):e}),{});if(n[e.name]&&n[e.name].tagName)return n[e.name].value;if(e.schema){var t={};return Object.keys(e.schema.properties).forEach((function(e){t[e]=n[e]})),t}return n[e.name]}},{key:"_hasProperty",value:function(n,e){return"body"==e.in||("formData"==e.in?n.formData.has(e.name):"form"==(n.tagName||"").toLowerCase()?!!n[e.name]:n.hasOwnProperty(e.name))}},{key:"_paramsToRequest",value:function(n,e){var t=this,r={headers:this.req.headers,method:n.method},o=new URL(n.url);return(n.parameters||[]).forEach((function(n){if(t._hasProperty(e,n)||n.required)if("path"==n.in){var i=new RegExp("(%7B|\\{)"+se(n.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(i,encodeURIComponent(t._extractValue(e,n)))}else if("query"==n.in)o.searchParams.set(n.name,t._extractValue(e,n));else if("formData"==n.in)delete r.headers["Content-Type"],r.body=e.formData;else if("body"==n.in)r.body=t._extractValue(e,n);else{if("header"!=n.in)throw"[Api] Parameter in:"+n.in+" is not supported.";r.header[n.name]=t._extractValue(e,n.name)}})),[o,r]}}]),r}(he),$e=function(){function e(t){n(this,e),this.protocol=location.protocol,this.url=t}var r;return t(e,[{key:"operation",value:function(n,e){var t=new ve({api:this,id:n,defaultParams:e});return t.req.headers={"Content-Type":"application/json"},t}},{key:"spec",value:(r=Xn(Jn.mark((function n(e){var t,r,o=this;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this._ops||!e){n.next=2;break}return n.abrupt("return",this._ops[e]);case 2:if(!this._spec){n.next=4;break}return n.abrupt("return",this._spec);case 4:return n.next=6,fetch(this.url);case 6:return t=n.sent,n.next=9,t.json();case 9:if(r=n.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(n){Object.keys(r.paths[n]).forEach((function(e){var t=r.paths[n][e],i=t.operationId;i&&(t.method=e.toUpperCase(),t.url=o.protocol+"//"+r.host+r.basePath+n+".json",t.parameters=(t.parameters||[]).map((function(n){return o._resolveRef(n)})),o._ops[i]=t)}))})),!this._ops||!e){n.next=15;break}return n.abrupt("return",this._ops[e]);case 15:if(!this._spec){n.next=17;break}return n.abrupt("return",this._spec);case 17:case"end":return n.stop()}}),n,this)}))),function(n){return r.apply(this,arguments)})},{key:"_resolveRef",value:function(n){var e=this,t=n;if(n.$ref){var r=n.$ref.replace(/^#\//,"").split("/");for(t=this._spec;r.length;)t=t[r.shift()]}return ie(t,"object")&&Object.keys(t).forEach((function(n){t[n]=e._resolveRef(t[n])})),t}}]),e}(),be=r((function(n,e){var t,r;t=function(n){var e=[],t=Object.keys,r={},i={},a=!0,c=/^(no-?highlight|plain|text)$/i,u=/\blang(?:uage)?-([\w-]+)\b/i,s=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,d="Could not find the language '{}', did you forget to load/include a language module?",f={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},l="of and for in not or if then".split(" ");function p(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function g(n){return n.nodeName.toLowerCase()}function m(n){return c.test(n)}function h(n){var e,t={},r=Array.prototype.slice.call(arguments,1);for(e in n)t[e]=n[e];return r.forEach((function(n){for(e in n)t[e]=n[e]})),t}function v(n){var e=[];return function n(t,r){for(var o=t.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(e.push({event:"start",offset:r,node:o}),r=n(o,r),g(o).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:o}));return r}(n,0),e}function $(n){return n.variants&&!n.cached_variants&&(n.cached_variants=n.variants.map((function(e){return h(n,{variants:null},e)}))),n.cached_variants?n.cached_variants:function n(e){return!!e&&(e.endsWithParent||n(e.starts))}(n)?[h(n,{starts:n.starts?h(n.starts):null})]:Object.isFrozen(n)?[h(n)]:[n]}function b(n,e){return e?Number(e):(t=n,-1!=l.indexOf(t.toLowerCase())?0:1);var t}function y(n){function e(n){return n&&n.source||n}function r(t,r){return new RegExp(e(t),"m"+(n.case_insensitive?"i":"")+(r?"g":""))}function o(n){var t,o,i={},a=[],c={},u=1;function s(n,e){i[u]=n,a.push([n,e]),u+=function(n){return new RegExp(n.toString()+"|").exec("").length-1}(e)+1}for(var d=0;d<n.contains.length;d++)s(o=n.contains[d],o.beginKeywords?"\\.?(?:"+o.begin+")\\.?":o.begin);n.terminator_end&&s("end",n.terminator_end),n.illegal&&s("illegal",n.illegal);var f=a.map((function(n){return n[1]}));return t=r(function(n,t){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,i="",a=0;a<n.length;a++){var c=o+=1,u=e(n[a]);for(a>0&&(i+=t),i+="(";u.length>0;){var s=r.exec(u);if(null==s){i+=u;break}i+=u.substring(0,s.index),u=u.substring(s.index+s[0].length),"\\"==s[0][0]&&s[1]?i+="\\"+String(Number(s[1])+c):(i+=s[0],"("==s[0]&&o++)}i+=")"}return i}(f,"|"),!0),c.lastIndex=0,c.exec=function(e){var r;if(0===a.length)return null;t.lastIndex=c.lastIndex;var o=t.exec(e);if(!o)return null;for(var u=0;u<o.length;u++)if(null!=o[u]&&null!=i[""+u]){r=i[""+u];break}return"string"==typeof r?(o.type=r,o.extra=[n.illegal,n.terminator_end]):(o.type="begin",o.rule=r),o},c}if(n.contains&&-1!=n.contains.indexOf("self")){if(!a)throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");n.contains=n.contains.filter((function(n){return"self"!=n}))}!function i(a,c){a.compiled||(a.compiled=!0,a.keywords=a.keywords||a.beginKeywords,a.keywords&&(a.keywords=function(n,e){var r={};return"string"==typeof n?o("keyword",n):t(n).forEach((function(e){o(e,n[e])})),r;function o(n,t){e&&(t=t.toLowerCase()),t.split(" ").forEach((function(e){var t=e.split("|");r[t[0]]=[n,b(t[0],t[1])]}))}}(a.keywords,n.case_insensitive)),a.lexemesRe=r(a.lexemes||/\w+/,!0),c&&(a.beginKeywords&&(a.begin="\\b("+a.beginKeywords.split(" ").join("|")+")\\b"),a.begin||(a.begin=/\B|\b/),a.beginRe=r(a.begin),a.endSameAsBegin&&(a.end=a.begin),a.end||a.endsWithParent||(a.end=/\B|\b/),a.end&&(a.endRe=r(a.end)),a.terminator_end=e(a.end)||"",a.endsWithParent&&c.terminator_end&&(a.terminator_end+=(a.end?"|":"")+c.terminator_end)),a.illegal&&(a.illegalRe=r(a.illegal)),null==a.relevance&&(a.relevance=1),a.contains||(a.contains=[]),a.contains=Array.prototype.concat.apply([],a.contains.map((function(n){return $("self"===n?a:n)}))),a.contains.forEach((function(n){i(n,a)})),a.starts&&i(a.starts,c),a.terminators=o(a))}(n)}function w(n,e,t,o){var i=e;function c(n,e){var t=$.case_insensitive?e[0].toLowerCase():e[0];return n.keywords.hasOwnProperty(t)&&n.keywords[t]}function u(n,e,t,r){if(!t&&""===e)return"";if(!n)return e;var o='<span class="'+(r?"":f.classPrefix);return(o+=n+'">')+e+(t?"":"</span>")}function s(){E+=null!=x.subLanguage?function(){var n="string"==typeof x.subLanguage;if(n&&!r[x.subLanguage])return p(O);var e=n?w(x.subLanguage,O,!0,k[x.subLanguage]):_(O,x.subLanguage.length?x.subLanguage:void 0);return x.relevance>0&&(N+=e.relevance),n&&(k[x.subLanguage]=e.top),u(e.language,e.value,!1,!0)}():function(){var n,e,t,r;if(!x.keywords)return p(O);for(r="",e=0,x.lexemesRe.lastIndex=0,t=x.lexemesRe.exec(O);t;)r+=p(O.substring(e,t.index)),(n=c(x,t))?(N+=n[1],r+=u(n[0],p(t[0]))):r+=p(t[0]),e=x.lexemesRe.lastIndex,t=x.lexemesRe.exec(O);return r+p(O.substr(e))}(),O=""}function l(n){E+=n.className?u(n.className,"",!0):"",x=Object.create(n,{parent:{value:x}})}function g(n){var e=n[0],t=n.rule;return t&&t.endSameAsBegin&&(t.endRe=new RegExp(e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),t.skip?O+=e:(t.excludeBegin&&(O+=e),s(),t.returnBegin||t.excludeBegin||(O=e)),l(t),t.returnBegin?0:e.length}function m(n){var e=n[0],t=i.substr(n.index),r=function n(e,t){if(function(n,e){var t=n&&n.exec(e);return t&&0===t.index}(e.endRe,t)){for(;e.endsParent&&e.parent;)e=e.parent;return e}if(e.endsWithParent)return n(e.parent,t)}(x,t);if(r){var o=x;o.skip?O+=e:(o.returnEnd||o.excludeEnd||(O+=e),s(),o.excludeEnd&&(O=e));do{x.className&&(E+="</span>"),x.skip||x.subLanguage||(N+=x.relevance),x=x.parent}while(x!==r.parent);return r.starts&&(r.endSameAsBegin&&(r.starts.endRe=r.endRe),l(r.starts)),o.returnEnd?0:e.length}}var h={};function v(n,e){var r=e&&e[0];if(O+=n,null==r)return s(),0;if("begin"==h.type&&"end"==e.type&&h.index==e.index&&""===r)return O+=i.slice(e.index,e.index+1),1;if(h=e,"begin"===e.type)return g(e);if("illegal"===e.type&&!t)throw new Error('Illegal lexeme "'+r+'" for mode "'+(x.className||"<unnamed>")+'"');if("end"===e.type){var o=m(e);if(null!=o)return o}return O+=r,r.length}var $=C(n);if(!$)throw console.error(d.replace("{}",n)),new Error('Unknown language: "'+n+'"');y($);var b,x=o||$,k={},E="";for(b=x;b!==$;b=b.parent)b.className&&(E=u(b.className,"",!0)+E);var O="",N=0;try{for(var S,M,D=0;x.terminators.lastIndex=D,S=x.terminators.exec(i);)M=v(i.substring(D,S.index),S),D=S.index+M;for(v(i.substr(D)),b=x;b.parent;b=b.parent)b.className&&(E+="</span>");return{relevance:N,value:E,illegal:!1,language:n,top:x}}catch(e){if(e.message&&-1!==e.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:p(i)};if(a)return{relevance:0,value:p(i),language:n,top:x,errorRaised:e};throw e}}function _(n,e){e=e||f.languages||t(r);var o={relevance:0,value:p(n)},i=o;return e.filter(C).filter(N).forEach((function(e){var t=w(e,n,!1);t.language=e,t.relevance>i.relevance&&(i=t),t.relevance>o.relevance&&(i=o,o=t)})),i.language&&(o.second_best=i),o}function x(n){return f.tabReplace||f.useBR?n.replace(s,(function(n,e){return f.useBR&&"\n"===n?"<br>":f.tabReplace?e.replace(/\t/g,f.tabReplace):""})):n}function k(n){var t,r,o,a,c,s=function(n){var e,t,r,o,i=n.className+" ";if(i+=n.parentNode?n.parentNode.className:"",t=u.exec(i)){var a=C(t[1]);return a||(console.warn(d.replace("{}",t[1])),console.warn("Falling back to no-highlight mode for this block.",n)),a?t[1]:"no-highlight"}for(e=0,r=(i=i.split(/\s+/)).length;e<r;e++)if(m(o=i[e])||C(o))return o}(n);m(s)||(f.useBR?(t=document.createElement("div")).innerHTML=n.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n"):t=n,c=t.textContent,o=s?w(s,c,!0):_(c),(r=v(t)).length&&((a=document.createElement("div")).innerHTML=o.value,o.value=function(n,t,r){var o=0,i="",a=[];function c(){return n.length&&t.length?n[0].offset!==t[0].offset?n[0].offset<t[0].offset?n:t:"start"===t[0].event?n:t:n.length?n:t}function u(n){i+="<"+g(n)+e.map.call(n.attributes,(function(n){return" "+n.nodeName+'="'+p(n.value).replace(/"/g,"&quot;")+'"'})).join("")+">"}function s(n){i+="</"+g(n)+">"}function d(n){("start"===n.event?u:s)(n.node)}for(;n.length||t.length;){var f=c();if(i+=p(r.substring(o,f[0].offset)),o=f[0].offset,f===n){a.reverse().forEach(s);do{d(f.splice(0,1)[0]),f=c()}while(f===n&&f.length&&f[0].offset===o);a.reverse().forEach(u)}else"start"===f[0].event?a.push(f[0].node):a.pop(),d(f.splice(0,1)[0])}return i+p(r.substr(o))}(r,v(a),c)),o.value=x(o.value),n.innerHTML=o.value,n.className=function(n,e,t){var r=e?i[e]:t,o=[n.trim()];return n.match(/\bhljs\b/)||o.push("hljs"),-1===n.indexOf(r)&&o.push(r),o.join(" ").trim()}(n.className,s,o.language),n.result={language:o.language,re:o.relevance},o.second_best&&(n.second_best={language:o.second_best.language,re:o.second_best.relevance}))}function E(){if(!E.called){E.called=!0;var n=document.querySelectorAll("pre code");e.forEach.call(n,k)}}var O={disableAutodetect:!0};function C(n){return n=(n||"").toLowerCase(),r[n]||r[i[n]]}function N(n){var e=C(n);return e&&!e.disableAutodetect}return n.highlight=w,n.highlightAuto=_,n.fixMarkup=x,n.highlightBlock=k,n.configure=function(n){f=h(f,n)},n.initHighlighting=E,n.initHighlightingOnLoad=function(){window.addEventListener("DOMContentLoaded",E,!1),window.addEventListener("load",E,!1)},n.registerLanguage=function(e,t){var o;try{o=t(n)}catch(n){if(console.error("Language definition for '{}' could not be registered.".replace("{}",e)),!a)throw n;console.error(n),o=O}r[e]=o,o.rawDefinition=t.bind(null,n),o.aliases&&o.aliases.forEach((function(n){i[n]=e}))},n.listLanguages=function(){return t(r)},n.getLanguage=C,n.requireLanguage=function(n){var e=C(n);if(e)return e;throw new Error("The '{}' language is required, but not loaded.".replace("{}",n))},n.autoDetection=N,n.inherit=h,n.debugMode=function(){a=!1},n.IDENT_RE="[a-zA-Z]\\w*",n.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",n.NUMBER_RE="\\b\\d+(\\.\\d+)?",n.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",n.BINARY_NUMBER_RE="\\b(0b[01]+)",n.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",n.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},n.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[n.BACKSLASH_ESCAPE]},n.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},n.COMMENT=function(e,t,r){var o=n.inherit({className:"comment",begin:e,end:t,contains:[]},r||{});return o.contains.push(n.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},n.C_LINE_COMMENT_MODE=n.COMMENT("//","$"),n.C_BLOCK_COMMENT_MODE=n.COMMENT("/\\*","\\*/"),n.HASH_COMMENT_MODE=n.COMMENT("#","$"),n.NUMBER_MODE={className:"number",begin:n.NUMBER_RE,relevance:0},n.C_NUMBER_MODE={className:"number",begin:n.C_NUMBER_RE,relevance:0},n.BINARY_NUMBER_MODE={className:"number",begin:n.BINARY_NUMBER_RE,relevance:0},n.CSS_NUMBER_MODE={className:"number",begin:n.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},n.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[n.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[n.BACKSLASH_ESCAPE]}]},n.TITLE_MODE={className:"title",begin:n.IDENT_RE,relevance:0},n.UNDERSCORE_TITLE_MODE={className:"title",begin:n.UNDERSCORE_IDENT_RE,relevance:0},n.METHOD_GUARD={begin:"\\.\\s*"+n.UNDERSCORE_IDENT_RE,relevance:0},[n.BACKSLASH_ESCAPE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.PHRASAL_WORDS_MODE,n.COMMENT,n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.HASH_COMMENT_MODE,n.NUMBER_MODE,n.C_NUMBER_MODE,n.BINARY_NUMBER_MODE,n.CSS_NUMBER_MODE,n.REGEXP_MODE,n.TITLE_MODE,n.UNDERSCORE_TITLE_MODE,n.METHOD_GUARD].forEach((function(n){!function n(e){Object.freeze(e);var t="function"==typeof e;return Object.getOwnPropertyNames(e).forEach((function(r){!e.hasOwnProperty(r)||null===e[r]||"object"!==o(e[r])&&"function"!=typeof e[r]||t&&("caller"===r||"callee"===r||"arguments"===r)||Object.isFrozen(e[r])||n(e[r])})),e}(n)})),n},r="object"===("undefined"==typeof window?"undefined":o(window))&&window||"object"===("undefined"==typeof self?"undefined":o(self))&&self,e.nodeType?r&&(r.hljs=t({})):t(e)}));function ye(n){var e,t,r,o,i;return{c:function(){Q(e=F("i"),"class",t=n[3](n[2],n[1])),Q(e,"style",r=n[4](n[2],n[1],n[0])),e.hidden=o=!n[2]},m:function(t,r){q(t,e,r),i=Z(e,"click",n[11])},p:function(n,i){var a=p(i,1)[0];6&a&&t!==(t=n[3](n[2],n[1]))&&Q(e,"class",t),7&a&&r!==(r=n[4](n[2],n[1],n[0]))&&Q(e,"style",r),4&a&&o!==(o=!n[2])&&(e.hidden=o)},i:x,o:x,d:function(n){n&&G(e),i()}}}function we(n,e,t){var r={regular:"far",solid:"fas"},o={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},i=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"],a=e.class,c=void 0===a?"":a,u=e.animation,s=void 0===u?"":u,d=e.color,f=void 0===d?"":d,l=e.family,p=void 0===l?"":l,g=e.name;function m(n){if(n.match(/^\d+$/)&&console.log(i[n]),n.match(/^\d+$/))return i[n];for(var e=0,t=0;t<n.length;t++)e=n.charCodeAt(t)+((e<<5)-e),e&=e;return e=Math.abs(e),i[e%i.length]}return n.$set=function(n){"class"in n&&t(5,c=n.class),"animation"in n&&t(6,s=n.animation),"color"in n&&t(0,f=n.color),"family"in n&&t(1,p=n.family),"name"in n&&t(2,g=n.name)},[f,p,g,function(n,e){var t=[],i=n.match(/^pick:(.+)$/);if(i){if(o[i[1]])return"fas fa-contributor";t.push(m(i[1]))}else t.push(r[e]||"fas"),t.push("fa-"+n);return s&&t.push(s.split(" ").map((function(n){return"fa-"+n}))),c&&t.push(c.split(" ")),t.join(" ")},function(n,e,t){var r=[],i="color:",a=n.match(/^pick:(.+)$/);return a&&o[a[1]]&&(i="background-color:",r.push('background-image:url("'+o[a[1]]+'")')),t&&r.push(i+t),r.join(";")},c,s,r,o,i,m,function(e){$n(n,e)}]}be.registerLanguage("css",(function(n){var e={begin:/(?:[A-Z\_\.\-]+|--[a-zA-Z0-9_-]+)\s*:/,returnBegin:!0,end:";",endsWithParent:!0,contains:[{className:"attribute",begin:/\S/,end:":",excludeEnd:!0,starts:{endsWithParent:!0,excludeEnd:!0,contains:[{begin:/[\w-]+\(/,returnBegin:!0,contains:[{className:"built_in",begin:/[\w-]+/},{begin:/\(/,end:/\)/,contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE,{className:"number",begin:"#[0-9A-Fa-f]+"},{className:"meta",begin:"!important"}]}}]};return{case_insensitive:!0,illegal:/[=\/|'\$]/,contains:[n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/},{className:"selector-class",begin:/\.[A-Za-z0-9_-]+/},{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},{className:"selector-pseudo",begin:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",illegal:/:/,returnBegin:!0,contains:[{className:"keyword",begin:/@\-?\w[\w]*(\-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:"and or not only",contains:[{begin:/[a-z-]+:/,className:"attribute"},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},{begin:"{",end:"}",illegal:/\S/,contains:[n.C_BLOCK_COMMENT_MODE,e]}]}})),be.registerLanguage("diff",(function(n){return{aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +\-\d+,\d+ +\+\d+,\d+ +@@$/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^\-\-\- +\d+,\d+ +\-\-\-\-$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^\-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/}]},{className:"addition",begin:"^\\+",end:"$"},{className:"deletion",begin:"^\\-",end:"$"},{className:"addition",begin:"^\\!",end:"$"}]}})),be.registerLanguage("dockerfile",(function(n){return{aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[n.HASH_COMMENT_MODE,n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,n.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}})),be.registerLanguage("go",(function(n){var e={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{aliases:["golang"],keywords:e,illegal:"</",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"string",variants:[n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:n.C_NUMBER_RE+"[i]",relevance:1},n.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[n.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:e,illegal:/["']/}]}]}})),be.registerLanguage("http",(function(n){var e="HTTP/[0-9\\.]+";return{aliases:["https"],illegal:"\\S",contains:[{begin:"^"+e,end:"$",contains:[{className:"number",begin:"\\b\\d{3}\\b"}]},{begin:"^[A-Z]+ (.*?) "+e+"$",returnBegin:!0,end:"$",contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{begin:e},{className:"keyword",begin:"[A-Z]+"}]},{className:"attribute",begin:"^\\w",end:": ",excludeEnd:!0,illegal:"\\n|\\s|=",starts:{end:"$",relevance:0}},{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}]}})),be.registerLanguage("javascript",(function(n){var e="<>",t="</>",r={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/},o="[A-Za-z$_][0-9A-Za-z$_]*",i={keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},a={className:"number",variants:[{begin:"\\b(0[bB][01]+)n?"},{begin:"\\b(0[oO][0-7]+)n?"},{begin:n.C_NUMBER_RE+"n?"}],relevance:0},c={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},u={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"xml"}},s={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[n.BACKSLASH_ESCAPE,c],subLanguage:"css"}},d={className:"string",begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE,c]};c.contains=[n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,d,a,n.REGEXP_MODE];var f=c.contains.concat([n.C_BLOCK_COMMENT_MODE,n.C_LINE_COMMENT_MODE]);return{aliases:["js","jsx","mjs","cjs"],keywords:i,contains:[{className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},{className:"meta",begin:/^#!/,end:/$/},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE,u,s,d,n.C_LINE_COMMENT_MODE,n.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:o+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),n.C_BLOCK_COMMENT_MODE,a,{begin:/[{,\n]\s*/,relevance:0,contains:[{begin:o+"\\s*:",returnBegin:!0,relevance:0,contains:[{className:"attr",begin:o,relevance:0}]}]},{begin:"("+n.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,n.REGEXP_MODE,{className:"function",begin:"(\\(.*?\\)|"+o+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:o},{begin:/\(\s*\)/},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:f}]}]},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:e,end:t},{begin:r.begin,end:r.end}],subLanguage:"xml",contains:[{begin:r.begin,end:r.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/\{/,excludeEnd:!0,contains:[n.inherit(n.TITLE_MODE,{begin:o}),{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,contains:f}],illegal:/\[|%/},{begin:/\$[(.]/},n.METHOD_GUARD,{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"\[\]]/,contains:[{beginKeywords:"extends"},n.UNDERSCORE_TITLE_MODE]},{beginKeywords:"constructor get set",end:/\{/,excludeEnd:!0}],illegal:/#(?!!)/}})),be.registerLanguage("markdown",(function(n){return{aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$"},{begin:"^.+?\\n[=-]{2,}$"}]},{begin:"<",end:">",subLanguage:"xml",relevance:0},{className:"bullet",begin:"^\\s*([*+-]|(\\d+\\.))\\s+"},{className:"strong",begin:"[*_]{2}.+?[*_]{2}"},{className:"emphasis",variants:[{begin:"\\*.+?\\*"},{begin:"_.+?_",relevance:0}]},{className:"quote",begin:"^>\\s+",end:"$"},{className:"code",variants:[{begin:"^```\\w*\\s*$",end:"^```[ ]*$"},{begin:"`.+?`"},{begin:"^( {4}|\\t)",end:"$",relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},{begin:"\\[.+?\\][\\(\\[].*?[\\)\\]]",returnBegin:!0,contains:[{className:"string",begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0,relevance:0},{className:"link",begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}],relevance:10},{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}})),be.registerLanguage("mojolicious",(function(n){return{subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}})),be.registerLanguage("nginx",(function(n){var e={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/}/},{begin:"[\\$\\@]"+n.UNDERSCORE_IDENT_RE}]},t={endsWithParent:!0,lexemes:"[a-z/_]+",keywords:{literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[n.HASH_COMMENT_MODE,{className:"string",contains:[n.BACKSLASH_ESCAPE,e],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[e]},{className:"regexp",contains:[n.BACKSLASH_ESCAPE,e],variants:[{begin:"\\s\\^",end:"\\s|{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},e]};return{aliases:["nginxconf"],contains:[n.HASH_COMMENT_MODE,{begin:n.UNDERSCORE_IDENT_RE+"\\s+{",returnBegin:!0,end:"{",contains:[{className:"section",begin:n.UNDERSCORE_IDENT_RE}],relevance:0},{begin:n.UNDERSCORE_IDENT_RE+"\\s",end:";|{",returnBegin:!0,contains:[{className:"attribute",begin:n.UNDERSCORE_IDENT_RE,starts:t}],relevance:0}],illegal:"[^\\s\\}]"}})),be.registerLanguage("perl",(function(n){var e="getpwent getservent quotemeta msgrcv scalar kill dbmclose undef lc ma syswrite tr send umask sysopen shmwrite vec qx utime local oct semctl localtime readpipe do return format read sprintf dbmopen pop getpgrp not getpwnam rewinddir qqfileno qw endprotoent wait sethostent bless s|0 opendir continue each sleep endgrent shutdown dump chomp connect getsockname die socketpair close flock exists index shmgetsub for endpwent redo lstat msgctl setpgrp abs exit select print ref gethostbyaddr unshift fcntl syscall goto getnetbyaddr join gmtime symlink semget splice x|0 getpeername recv log setsockopt cos last reverse gethostbyname getgrnam study formline endhostent times chop length gethostent getnetent pack getprotoent getservbyname rand mkdir pos chmod y|0 substr endnetent printf next open msgsnd readdir use unlink getsockopt getpriority rindex wantarray hex system getservbyport endservent int chr untie rmdir prototype tell listen fork shmread ucfirst setprotoent else sysseek link getgrgid shmctl waitpid unpack getnetbyname reset chdir grep split require caller lcfirst until warn while values shift telldir getpwuid my getprotobynumber delete and sort uc defined srand accept package seekdir getprotobyname semop our rename seek if q|0 chroot sysread setpwent no crypt getc chown sqrt write setnetent setpriority foreach tie sin msgget map stat getlogin unless elsif truncate exec keys glob tied closedirioctl socket readlink eval xor readline binmode setservent eof ord bind alarm pipe atan2 getgrent exp time push setgrent gt lt or ne m|0 break given say state when",t={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:e},r={begin:"->{",end:"}"},o={variants:[{begin:/\$\d/},{begin:/[\$%@](\^\w\b|#\w+(::\w+)*|{\w+}|\w+(::\w*)*)/},{begin:/[\$%@][^\s\w{]/,relevance:0}]},i=[n.BACKSLASH_ESCAPE,t,o],a=[o,n.HASH_COMMENT_MODE,n.COMMENT("^\\=\\w","\\=cut",{endsWithParent:!0}),r,{className:"string",contains:i,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*\\<",end:"\\>",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[n.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[n.BACKSLASH_ESCAPE]},{begin:"{\\w+}",contains:[],relevance:0},{begin:"-?\\w+\\s*\\=\\>",contains:[],relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+n.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[n.HASH_COMMENT_MODE,{className:"regexp",begin:"(s|tr|y)/(\\\\.|[^/])*/(\\\\.|[^/])*/[a-z]*",relevance:10},{className:"regexp",begin:"(m|qr)?/",end:"/[a-z]*",contains:[n.BACKSLASH_ESCAPE],relevance:0}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[n.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return t.contains=a,r.contains=a,{aliases:["pl","pm"],lexemes:/[\w\.]+/,keywords:e,contains:a}})),be.registerLanguage("python",(function(n){var e={keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda async await nonlocal|10",built_in:"Ellipsis NotImplemented",literal:"False None True"},t={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:e,illegal:/#/},o={begin:/\{\{/,relevance:0},i={className:"string",contains:[n.BACKSLASH_ESCAPE],variants:[{begin:/(u|b)?r?'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,t],relevance:10},{begin:/(u|b)?r?"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,t],relevance:10},{begin:/(fr|rf|f)'''/,end:/'''/,contains:[n.BACKSLASH_ESCAPE,t,o,r]},{begin:/(fr|rf|f)"""/,end:/"""/,contains:[n.BACKSLASH_ESCAPE,t,o,r]},{begin:/(u|r|ur)'/,end:/'/,relevance:10},{begin:/(u|r|ur)"/,end:/"/,relevance:10},{begin:/(b|br)'/,end:/'/},{begin:/(b|br)"/,end:/"/},{begin:/(fr|rf|f)'/,end:/'/,contains:[n.BACKSLASH_ESCAPE,o,r]},{begin:/(fr|rf|f)"/,end:/"/,contains:[n.BACKSLASH_ESCAPE,o,r]},n.APOS_STRING_MODE,n.QUOTE_STRING_MODE]},a={className:"number",relevance:0,variants:[{begin:n.BINARY_NUMBER_RE+"[lLjJ]?"},{begin:"\\b(0o[0-7]+)[lLjJ]?"},{begin:n.C_NUMBER_RE+"[lLjJ]?"}]},c={className:"params",begin:/\(/,end:/\)/,contains:["self",t,a,i,n.HASH_COMMENT_MODE]};return r.contains=[i,a,t],{aliases:["py","gyp","ipython"],keywords:e,illegal:/(<\/|->|\?)|=>/,contains:[t,a,{beginKeywords:"if",relevance:0},i,n.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[n.UNDERSCORE_TITLE_MODE,c,{begin:/->/,endsWithParent:!0,keywords:"None"}]},{className:"meta",begin:/^[\t ]*@/,end:/$/},{begin:/\b(print|exec)\(/}]}})),be.registerLanguage("scss",(function(n){var e={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"},t={className:"number",begin:"#[0-9A-Fa-f]+"};n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,n.C_BLOCK_COMMENT_MODE;return{case_insensitive:!0,illegal:"[=/|']",contains:[n.C_LINE_COMMENT_MODE,n.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"\\#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},{className:"selector-attr",begin:"\\[",end:"\\]",illegal:"$"},{className:"selector-tag",begin:"\\b(a|abbr|acronym|address|area|article|aside|audio|b|base|big|blockquote|body|br|button|canvas|caption|cite|code|col|colgroup|command|datalist|dd|del|details|dfn|div|dl|dt|em|embed|fieldset|figcaption|figure|footer|form|frame|frameset|(h[1-6])|head|header|hgroup|hr|html|i|iframe|img|input|ins|kbd|keygen|label|legend|li|link|map|mark|meta|meter|nav|noframes|noscript|object|ol|optgroup|option|output|p|param|pre|progress|q|rp|rt|ruby|samp|script|section|select|small|span|strike|strong|style|sub|sup|table|tbody|td|textarea|tfoot|th|thead|time|title|tr|tt|ul|var|video)\\b",relevance:0},{className:"selector-pseudo",begin:":(visited|valid|root|right|required|read-write|read-only|out-range|optional|only-of-type|only-child|nth-of-type|nth-last-of-type|nth-last-child|nth-child|not|link|left|last-of-type|last-child|lang|invalid|indeterminate|in-range|hover|focus|first-of-type|first-line|first-letter|first-child|first|enabled|empty|disabled|default|checked|before|after|active)"},{className:"selector-pseudo",begin:"::(after|before|choices|first-letter|first-line|repeat-index|repeat-item|selection|value)"},e,{className:"attribute",begin:"\\b(src|z-index|word-wrap|word-spacing|word-break|width|widows|white-space|visibility|vertical-align|unicode-bidi|transition-timing-function|transition-property|transition-duration|transition-delay|transition|transform-style|transform-origin|transform|top|text-underline-position|text-transform|text-shadow|text-rendering|text-overflow|text-indent|text-decoration-style|text-decoration-line|text-decoration-color|text-decoration|text-align-last|text-align|tab-size|table-layout|right|resize|quotes|position|pointer-events|perspective-origin|perspective|page-break-inside|page-break-before|page-break-after|padding-top|padding-right|padding-left|padding-bottom|padding|overflow-y|overflow-x|overflow-wrap|overflow|outline-width|outline-style|outline-offset|outline-color|outline|orphans|order|opacity|object-position|object-fit|normal|none|nav-up|nav-right|nav-left|nav-index|nav-down|min-width|min-height|max-width|max-height|mask|marks|margin-top|margin-right|margin-left|margin-bottom|margin|list-style-type|list-style-position|list-style-image|list-style|line-height|letter-spacing|left|justify-content|initial|inherit|ime-mode|image-orientation|image-resolution|image-rendering|icon|hyphens|height|font-weight|font-variant-ligatures|font-variant|font-style|font-stretch|font-size-adjust|font-size|font-language-override|font-kerning|font-feature-settings|font-family|font|float|flex-wrap|flex-shrink|flex-grow|flex-flow|flex-direction|flex-basis|flex|filter|empty-cells|display|direction|cursor|counter-reset|counter-increment|content|column-width|column-span|column-rule-width|column-rule-style|column-rule-color|column-rule|column-gap|column-fill|column-count|columns|color|clip-path|clip|clear|caption-side|break-inside|break-before|break-after|box-sizing|box-shadow|box-decoration-break|bottom|border-width|border-top-width|border-top-style|border-top-right-radius|border-top-left-radius|border-top-color|border-top|border-style|border-spacing|border-right-width|border-right-style|border-right-color|border-right|border-radius|border-left-width|border-left-style|border-left-color|border-left|border-image-width|border-image-source|border-image-slice|border-image-repeat|border-image-outset|border-image|border-color|border-collapse|border-bottom-width|border-bottom-style|border-bottom-right-radius|border-bottom-left-radius|border-bottom-color|border-bottom|border|background-size|background-repeat|background-position|background-origin|background-image|background-color|background-clip|background-attachment|background-blend-mode|background|backface-visibility|auto|animation-timing-function|animation-play-state|animation-name|animation-iteration-count|animation-fill-mode|animation-duration|animation-direction|animation-delay|animation|align-self|align-items|align-content)\\b",illegal:"[^\\s]"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[e,t,n.CSS_NUMBER_MODE,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,{className:"meta",begin:"!important"}]},{begin:"@(page|font-face)",lexemes:"@[a-z-]+",keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:"and or not only",contains:[{begin:"@[a-z-]+",className:"keyword"},e,n.QUOTE_STRING_MODE,n.APOS_STRING_MODE,t,n.CSS_NUMBER_MODE]}]}})),be.registerLanguage("shell",(function(n){return{aliases:["console"],contains:[{className:"meta",begin:"^\\s{0,3}[/\\w\\d\\[\\]()@-]*[>%$#]",starts:{end:"$",subLanguage:"bash"}}]}})),be.registerLanguage("xml",(function(n){var e={className:"symbol",begin:"&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;"},t={begin:"\\s",contains:[{className:"meta-keyword",begin:"#?[a-z_][a-z1-9_-]+",illegal:"\\n"}]},r=n.inherit(t,{begin:"\\(",end:"\\)"}),o=n.inherit(n.APOS_STRING_MODE,{className:"meta-string"}),i=n.inherit(n.QUOTE_STRING_MODE,{className:"meta-string"}),a={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:"[A-Za-z0-9\\._:-]+",relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[e]},{begin:/'/,end:/'/,contains:[e]},{begin:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:"<![a-z]",end:">",relevance:10,contains:[t,i,o,r,{begin:"\\[",end:"\\]",contains:[{className:"meta",begin:"<![a-z]",end:">",contains:[t,r,i,o]}]}]},n.COMMENT("\x3c!--","--\x3e",{relevance:10}),{begin:"<\\!\\[CDATA\\[",end:"\\]\\]>",relevance:10},e,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{begin:/<\?(php)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},n.inherit(n.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),n.inherit(n.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]},{className:"tag",begin:"<style(?=\\s|>)",end:">",keywords:{name:"style"},contains:[a],starts:{end:"</style>",returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:"<script(?=\\s|>)",end:">",keywords:{name:"script"},contains:[a],starts:{end:"<\/script>",returnEnd:!0,subLanguage:["actionscript","javascript","handlebars","xml"]}},{className:"tag",begin:"</?",end:"/?>",contains:[{className:"name",begin:/[^\/><\s]+/,relevance:0},a]}]}})),be.registerLanguage("yaml",(function(n){var e={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[n.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:"{{",end:"}}"},{begin:"%{",end:"}"}]}]};return{case_insensitive:!0,aliases:["yml","YAML","yaml"],contains:[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---s*$",relevance:10},{className:"string",begin:"[\\|>]([0-9]?[+-])?[ ]*\\n( *)[\\S ]+\\n(\\2[\\S ]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!"+n.UNDERSCORE_IDENT_RE},{className:"type",begin:"!!"+n.UNDERSCORE_IDENT_RE},{className:"meta",begin:"&"+n.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+n.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"\\-(?=[ ]|$)",relevance:0},n.HASH_COMMENT_MODE,{beginKeywords:"true false yes no null",keywords:{literal:"true false yes no null"}},{className:"number",begin:n.C_NUMBER_RE+"\\b"},e]}}));var _e=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,we,ye,S,{class:5,animation:6,color:0,family:1,name:2}),r}return s(t,e),t}(Zn),xe=[];function ke(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,r=[];function o(t){if(S(n,t)&&(n=t,e)){for(var o=!xe.length,i=0;i<r.length;i+=1){var a=r[i];a[1](),xe.push(a,n)}if(o){for(var c=0;c<xe.length;c+=2)xe[c][0](xe[c+1]);xe.length=0}}}function i(e){o(e(n))}function a(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x,c=[i,a];return r.push(c),1===r.length&&(e=t(o)||x),i(n),function(){var n=r.indexOf(c);-1!==n&&r.splice(n,1),0===r.length&&(e(),e=null)}}return{set:o,update:i,subscribe:a}}var Ee=location.href.replace(/\/+$/,""),Oe="",Ce=ke(""),Ne=ke({wideScreen:!1,width:0}),Se=ke(Ae(location.href)),Me=ke(document.title),De=ke(null);function Re(n,e){var t=n.indexOf(e);return-1==t?null:t}function Pe(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null!==n){var t=Ae(n);if(!t)return location.href=n;e.event&&e.event.preventDefault(),history[e.replace?"replaceState":"pushState"]({},document.title,t.toString()),setTimeout((function(){return Se.set(t)}),0)}}function Ae(n){if(-1==(n="/"==n.slice(0,1)?Ee+n:n).indexOf(Ee))return!1;var e=new URL(n),t=n.substring(Ee.length,Re(n,"?")||Re(n,"#")||n.length);Object.defineProperty(e,"path",{value:t,writable:!1});var r=t.split("/").filter((function(n){return n.length})).map(decodeURIComponent);return Object.defineProperty(e,"pathParts",{value:r,writable:!1}),e}function Te(n){var e=D(De);if(n&&n!=e){if(!e)for(var t=document.querySelectorAll(".js-remove"),r=0;r<t.length;r++)t[r].remove();De.set(n)}}function Le(n){return Se.base+n}function je(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D(Se);e.searchParams.forEach((function(e,t){var r=n[t];r&&r.tagName&&("checkbox"==r.type?r.checked=!!e:r.value=e,r.syncValue&&r.syncValue())}))}var Ie=Se.set;function Ue(n){var e,t,r,o=n[13].default,i=P(o,n,n[12],null);return{c:function(){e=F("a"),i&&i.c(),Q(e,"href",n[3]),Q(e,"class",n[0]),Q(e,"style",n[1]),rn(e,"has-path",n[4])},m:function(o,a){q(o,e,a),i&&i.m(e,null),n[14](e),t=!0,r=Z(e,"click",n[5])},p:function(n,r){var a=p(r,1)[0];i&&i.p&&4096&a&&i.p(A(o,n,n[12],null),T(o,n[12],a,null)),(!t||8&a)&&Q(e,"href",n[3]),(!t||1&a)&&Q(e,"class",n[0]),(!t||2&a)&&Q(e,"style",n[1]),17&a&&rn(e,"has-path",n[4])},i:function(n){t||(Un(i,n),t=!0)},o:function(n){zn(i,n),t=!1},d:function(t){t&&G(e),i&&i.d(t),n[14](null),r()}}}function ze(n,e,t){var r;R(n,Se,(function(n){return t(10,r=n)}));var o,i=e.class,a=void 0===i?"":i,c=e.href,u=void 0===c?"/":c,s=e.native,d=void 0!==s&&s,f=e.replace,l=void 0!==f&&f,p=e.style,g=void 0===p?"":p;var m,h,v=e.$$slots,$=void 0===v?{}:v,b=e.$$scope;return n.$set=function(n){"class"in n&&t(0,a=n.class),"href"in n&&t(6,u=n.href),"native"in n&&t(7,d=n.native),"replace"in n&&t(8,l=n.replace),"style"in n&&t(1,g=n.style),"$$scope"in n&&t(12,b=n.$$scope)},n.$$.update=function(){64&n.$$.dirty&&t(3,m="/"==u.slice(0,1)?Se.base+u:u),1032&n.$$.dirty&&t(4,h=r==m.replace(/(#|\?).*/,""))},[a,g,o,m,h,function(n){var e=n.target.closest("a").href;return d?location.href=e:Pe(e,{event:n,replace:l})},u,d,l,function(){return o.focus()},r,[],b,$,function(n){yn[n?"unshift":"push"]((function(){t(2,o=n)}))}]}Se.set=function(n,e){if(D(this).toString()!=n.toString()||e)return Ce.set(""),Ie.call(this,n)},Object.defineProperty(Se,"base",{get:function(){return Ee},set:function(n){Ee=n.replace(/\/+$/,""),Se.set(Ae(D(Se).toString()),!0)}});var Be=function(e){function r(e){var t;return n(this,r),t=a(this,c(r).call(this)),Yn(i(t),e,ze,Ue,S,{class:0,href:6,native:7,replace:8,style:1,focus:9}),t}return s(r,e),t(r,[{key:"focus",get:function(){return this.$$.ctx[9]}}]),r}(Zn),He=function(n){return{}},qe=function(n){return{}},Ge=function(n){return{}},Ke=function(n){return{}};function Fe(n){var e,t,r,o,i,a,c,u,s=n[11].label,d=P(s,n,n[10],Ke),f=n[11].help,l=P(f,n,n[10],qe);return{c:function(){e=F("div"),t=F("label"),d||(r=W("Label")),d&&d.c(),o=V(),i=F("input"),a=V(),l&&l.c(),Q(t,"for",n[4]),Q(i,"type",n[7]),Q(i,"name",n[3]),Q(i,"id",n[4]),Q(i,"autocomplete",n[1]),Q(i,"placeholder",n[5]),i.readOnly=n[6],i.value=n[0],Q(e,"class","text-field"),e.hidden=n[2],rn(e,"has-password","password"==n[7])},m:function(s,f){q(s,e,f),H(e,t),d||H(t,r),d&&d.m(t,null),H(e,o),H(e,i),n[13](i),H(e,a),l&&l.m(e,null),c=!0,u=[Z(i,"input",n[9]),Z(i,"keyup",n[12])]},p:function(n,r){var o=p(r,1)[0];d&&d.p&&1024&o&&d.p(A(s,n,n[10],Ke),T(s,n[10],o,Ge)),(!c||16&o)&&Q(t,"for",n[4]),(!c||128&o)&&Q(i,"type",n[7]),(!c||8&o)&&Q(i,"name",n[3]),(!c||16&o)&&Q(i,"id",n[4]),(!c||2&o)&&Q(i,"autocomplete",n[1]),(!c||32&o)&&Q(i,"placeholder",n[5]),(!c||64&o)&&(i.readOnly=n[6]),(!c||1&o&&i.value!==n[0])&&(i.value=n[0]),l&&l.p&&1024&o&&l.p(A(f,n,n[10],qe),T(f,n[10],o,He)),(!c||4&o)&&(e.hidden=n[2]),128&o&&rn(e,"has-password","password"==n[7])},i:function(n){c||(Un(d,n),Un(l,n),c=!0)},o:function(n){zn(d,n),zn(l,n),c=!1},d:function(t){t&&G(e),d&&d.d(t),n[13](null),l&&l.d(t),C(u)}}}function We(n,e,t){var r,o=e.autocomplete,i=void 0===o?null:o,a=e.hidden,c=void 0!==a&&a,u=e.name,s=void 0===u?"":u,d=e.id,f=void 0===d?s?"form_"+s:me():d,l=e.placeholder,p=void 0===l?"":l,g=e.readonly,m=void 0!==g&&g,h=e.type,v=void 0===h?"text":h,$=e.value,b=void 0===$?"":$,y=e.$$slots,w=void 0===y?{}:y,_=e.$$scope;return n.$set=function(n){"autocomplete"in n&&t(1,i=n.autocomplete),"hidden"in n&&t(2,c=n.hidden),"name"in n&&t(3,s=n.name),"id"in n&&t(4,f=n.id),"placeholder"in n&&t(5,p=n.placeholder),"readonly"in n&&t(6,m=n.readonly),"type"in n&&t(7,v=n.type),"value"in n&&t(0,b=n.value),"$$scope"in n&&t(10,_=n.$$scope)},n.$$.update=function(){256&n.$$.dirty&&r&&!r.syncValue&&(t(8,r.syncValue=function(){t(0,b=this.value)},r),r.syncValue())},[b,i,c,s,f,p,m,v,r,function(n){t(0,b=v.match(/^(number|range)$/)?parseInt(n.target.value,10):n.target.value)},_,w,function(e){$n(n,e)},function(n){yn[n?"unshift":"push"]((function(){t(8,r=n)}))}]}var Ve=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,We,Fe,S,{autocomplete:1,hidden:2,name:3,id:4,placeholder:5,readonly:6,type:7,value:0}),r}return s(t,e),t}(Zn);function Ye(n){var e=n-1;return e*e*e+1}function Ze(n,e){var t=e.delay,r=void 0===t?0:t,o=e.duration,i=void 0===o?400:o,a=e.easing,c=void 0===a?k:a,u=+getComputedStyle(n).opacity;return{delay:r,duration:i,easing:c,css:function(n){return"opacity: ".concat(n*u)}}}function Je(n,e){var t=e.delay,r=void 0===t?0:t,o=e.duration,i=void 0===o?400:o,a=e.easing,c=void 0===a?Ye:a,u=e.x,s=void 0===u?0:u,d=e.y,f=void 0===d?0:d,l=e.opacity,p=void 0===l?0:l,g=getComputedStyle(n),m=+g.opacity,h="none"===g.transform?"":g.transform,v=m*(1-p);return{delay:r,duration:i,easing:c,css:function(n,e){return"\n\t\t\ttransform: ".concat(h," translate(").concat((1-n)*s,"px, ").concat((1-n)*f,"px);\n\t\t\topacity: ").concat(m-v*e)}}}
/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */var Qe=function(){var n={base:"https://twemoji.maxcdn.com/v/12.1.5/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(n){var e="string"==typeof n?parseInt(n,16):n;if(e<65536)return c(e);return c(55296+((e-=65536)>>10),56320+(1023&e))},toCodePoint:h},onerror:function(){this.parentNode&&this.parentNode.replaceChild(u(this.alt,!1),this)},parse:function(e,t){t&&"function"!=typeof t||(t={callback:t});return("string"==typeof e?l:f)(e,{callback:t.callback||s,attributes:"function"==typeof t.attributes?t.attributes:g,base:"string"==typeof t.base?t.base:n.base,ext:t.ext||n.ext,size:t.folder||(r=t.size||n.size,"number"==typeof r?r+"x"+r:r),className:t.className||n.className,onerror:t.onerror||n.onerror});var r},replace:m,test:function(n){t.lastIndex=0;var e=t.test(n);return t.lastIndex=0,e}},e={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},t=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,c=String.fromCharCode;return n;function u(n,e){return document.createTextNode(e?n.replace(r,""):n)}function s(n,e){return"".concat(e.base,e.size,"/",n,e.ext)}function d(n){return h(n.indexOf(o)<0?n.replace(r,""):n)}function f(n,e){for(var r,o,i,c,s,f,l,p,g,m,h,v,$,b=function n(e,t){for(var r,o,i=e.childNodes,c=i.length;c--;)3===(o=(r=i[c]).nodeType)?t.push(r):1!==o||"ownerSVGElement"in r||a.test(r.nodeName.toLowerCase())||n(r,t);return t}(n,[]),y=b.length;y--;){for(i=!1,c=document.createDocumentFragment(),f=(s=b[y]).nodeValue,p=0;l=t.exec(f);){if((g=l.index)!==p&&c.appendChild(u(f.slice(p,g),!0)),v=d(h=l[0]),p=g+h.length,$=e.callback(v,e),v&&$){for(o in(m=new Image).onerror=e.onerror,m.setAttribute("draggable","false"),r=e.attributes(h,v))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!m.hasAttribute(o)&&m.setAttribute(o,r[o]);m.className=e.className,m.alt=h,m.src=$,i=!0,c.appendChild(m)}m||c.appendChild(u(h,!1)),m=null}i&&(p<f.length&&c.appendChild(u(f.slice(p),!0)),s.parentNode.replaceChild(c,s))}return n}function l(n,e){return m(n,(function(n){var t,r,o=n,a=d(n),c=e.callback(a,e);if(a&&c){for(r in o="<img ".concat('class="',e.className,'" ','draggable="false" ','alt="',n,'"',' src="',c,'"'),t=e.attributes(n,a))t.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',t[r].replace(i,p),'"'));o=o.concat("/>")}return o}))}function p(n){return e[n]}function g(){return null}function m(n,e){return String(n).replace(t,e)}function h(n,e){for(var t=[],r=0,o=0,i=0;i<n.length;)r=n.charCodeAt(i++),o?(t.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:t.push(r.toString(16));return t.join(e||"-")}}(),Xe=new RegExp("(\\\\?)`([^`]+)`","g"),nt={},et={},tt=new RegExp("\\b[a-z]{2,5}://\\S+","g"),rt=new RegExp("\\[([^\\]]+)\\]\\(([^)]+)\\)","g"),ot=new RegExp("(^|\\s)(\\\\?)(\\*+)(\\w[^<]*?)\\3","g"),it={":confused:":":/",":disappointed:":":(",":grin:":";D",":heart:":"&lt;3",":slight_smile:":":)",":smiley:":":D",":stuck_out_tongue:":":P",":wink:":";)"},at=new RegExp("(^|\\s)(:\\w+:|"+Object.keys(it).map((function(n){return se(it[n])})).join("|")+")(?=\\W|$)","gi"),ct={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"};function ut(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single";return window.__emojiList&&(window.__emojiList.forEach((function(n){if(":"==(n.shortname||"")[0]){if(it[n.shortname]&&(et[it[n.shortname]]=n),et[n.shortname]=n,n.category){var e=":"+n.category;nt[e]||(nt[e]=[]),nt[e].push(n)}n.shortname.match(/(_|:)\w/g).forEach((function(e){nt[e]||(nt[e]=[]),nt[e].push(n)})),delete n.category,delete n.html,delete n.order,delete n.unicode}})),delete window.__emojiList),"group"==e?nt[n]||[]:et[n]||{}}function st(n){n=n.replace(/[&<>"']/g,(function(n){return ct[n]}));var e=0;return n=n.replace(/^&gt;\s(.*)/,(function(n,e){return"<blockquote>"+e+"</blockquote>"})).replace(ot,(function(n,e,t,r,o){return 1==r.length?t?n.replace(/^\\/,""):e+"<em>"+o+"</em>":2==r.length?t?n.replace(/^\\/,""):e+"<strong>"+o+"</strong>":3==r.length?t?n.replace(/^\\/,""):e+"<em><strong>"+o+"</strong></em>":n})).replace(rt,(function(n,t,r){e++;var o=r.substring(0,1),i=-1!=["/","#"].indexOf(o)?"_self":"_blank";return"_self"==i&&"#"!=o&&(r=Le(r)),'<a href="'+r+'" target="'+i+'">'+t+"</a>"})).replace(Xe,(function(n,e,t){return e?n.replace(/^\\/,""):"<code>"+t+"</code>"})),e||(n=n.replace(tt,(function(n){var e=n.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+e[1]+'" target="_blank">'+e[1].replace(/^https:\/\//,"")+"</a>"+(e[2]||"")})).replace(/mailto:(\S+)/,(function(n,e){return-1!=n.indexOf('">')?n:'<a href="'+n+'" target="_blank">'+e+"</a>"}))),n=Qe.parse(n.replace(at,(function(n,e,t){return e+(ut(t).emoji||t)})))}var dt={en:{"Test %1":"Test %1"}};function ft(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];var o=String(dt.en[n]||n);return o.replace(/(%?)%(\d+)/g,(function(n,e,r){return"%"==e?e+r:t[r-1]}))}function lt(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return st(ft.apply(void 0,[n].concat(t)))}function pt(n,e){return n.frozen?ft(n.frozen):n==e?ft("Connection messages."):(e.frozen?ft(e.frozen):e.topic)||e.is_private&&ft("Private conversation.")||ft("No topic is set.")}function gt(n,e,t){var r=n.slice();return r[21]=e[t],r}function mt(n,e,t){var r=n.slice();return r[18]=e[t],r}function ht(n){var e,t,r,o,i,a,c,u,s=(n[18].name||n[18].connection_id)+"",d=Mt(n[18])+"",f=new _e({props:{name:"network-wired"}});return{c:function(){Kn(f.$$.fragment),e=V(),t=F("span"),r=W(s),o=V(),i=F("b"),a=W(d),Q(i,"class","unread"),i.hidden=c=!n[18].unread},m:function(n,c){Fn(f,n,c),q(n,e,c),q(n,t,c),H(t,r),q(n,o,c),q(n,i,c),H(i,a),u=!0},p:function(n,e){(!u||16&e)&&s!==(s=(n[18].name||n[18].connection_id)+"")&&nn(r,s),(!u||16&e)&&d!==(d=Mt(n[18])+"")&&nn(a,d),(!u||16&e&&c!==(c=!n[18].unread))&&(i.hidden=c)},i:function(n){u||(Un(f.$$.fragment,n),u=!0)},o:function(n){zn(f.$$.fragment,n),u=!1},d:function(n){Wn(f,n),n&&G(e),n&&G(t),n&&G(o),n&&G(i)}}}function vt(n){var e,t,r,o,i,a,c,u,s=n[21].name+"",d=Mt(n[21])+"",f=new _e({props:{name:n[21].is_private?"user":"user-friends"}});return{c:function(){Kn(f.$$.fragment),e=V(),t=F("span"),r=W(s),o=V(),i=F("b"),a=W(d),Q(i,"class","unread"),i.hidden=c=!n[21].unread},m:function(n,c){Fn(f,n,c),q(n,e,c),q(n,t,c),H(t,r),q(n,o,c),q(n,i,c),H(i,a),u=!0},p:function(n,e){var t={};16&e&&(t.name=n[21].is_private?"user":"user-friends"),f.$set(t),(!u||16&e)&&s!==(s=n[21].name+"")&&nn(r,s),(!u||16&e)&&d!==(d=Mt(n[21])+"")&&nn(a,d),(!u||16&e&&c!==(c=!n[21].unread))&&(i.hidden=c)},i:function(n){u||(Un(f.$$.fragment,n),u=!0)},o:function(n){zn(f.$$.fragment,n),u=!1},d:function(n){Wn(f,n),n&&G(e),n&&G(t),n&&G(o),n&&G(i)}}}function $t(n){var e,t=new Be({props:{href:n[21].path,class:St(n[18],n[21]),$$slots:{default:[vt]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};16&e&&(r.href=n[21].path),16&e&&(r.class=St(n[18],n[21])),16777232&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function bt(n){for(var e,t,r,o=new Be({props:{href:n[18].path,class:St(n[18],n[18]),$$slots:{default:[ht]},$$scope:{ctx:n}}}),i=n[18].dialogs.toArray(),a=[],c=0;c<i.length;c+=1)a[c]=$t(gt(n,i,c));var u=function(n){return zn(a[n],1,1,(function(){a[n]=null}))};return{c:function(){Kn(o.$$.fragment),e=V();for(var n=0;n<a.length;n+=1)a[n].c();t=Y()},m:function(n,i){Fn(o,n,i),q(n,e,i);for(var c=0;c<a.length;c+=1)a[c].m(n,i);q(n,t,i),r=!0},p:function(n,e){var r={};if(16&e&&(r.href=n[18].path),16&e&&(r.class=St(n[18],n[18])),16777232&e&&(r.$$scope={dirty:e,ctx:n}),o.$set(r),16&e){var c;for(i=n[18].dialogs.toArray(),c=0;c<i.length;c+=1){var s=gt(n,i,c);a[c]?(a[c].p(s,e),Un(a[c],1)):(a[c]=$t(s),a[c].c(),Un(a[c],1),a[c].m(t.parentNode,t))}for(jn(),c=i.length;c<a.length;c+=1)u(c);In()}},i:function(n){if(!r){Un(o.$$.fragment,n);for(var e=0;e<i.length;e+=1)Un(a[e]);r=!0}},o:function(n){zn(o.$$.fragment,n),a=a.filter(Boolean);for(var e=0;e<a.length;e+=1)zn(a[e]);r=!1},d:function(n){Wn(o,n),n&&G(e),K(a,n),n&&G(t)}}}function yt(n){var e,t,r,o,i,a,c,u=Mt(n[5])+"",s=new _e({props:{name:n[5].unread?"bell":"bell-slash"}});return{c:function(){Kn(s.$$.fragment),e=V(),(t=F("span")).textContent="".concat(ft("Notifications")),r=V(),o=F("b"),i=W(u),Q(o,"class","unread"),o.hidden=a=!n[5].unread},m:function(n,a){Fn(s,n,a),q(n,e,a),q(n,t,a),q(n,r,a),q(n,o,a),H(o,i),c=!0},p:function(n,e){var t={};32&e&&(t.name=n[5].unread?"bell":"bell-slash"),s.$set(t),(!c||32&e)&&u!==(u=Mt(n[5])+"")&&nn(i,u),(!c||32&e&&a!==(a=!n[5].unread))&&(o.hidden=a)},i:function(n){c||(Un(s.$$.fragment,n),c=!0)},o:function(n){zn(s.$$.fragment,n),c=!1},d:function(n){Wn(s,n),n&&G(e),n&&G(t),n&&G(r),n&&G(o)}}}function wt(n){var e,t,r,o=new _e({props:{name:"comment"}});return{c:function(){Kn(o.$$.fragment),e=V(),(t=F("span")).textContent="".concat(ft("Add conversation"))},m:function(n,i){Fn(o,n,i),q(n,e,i),q(n,t,i),r=!0},p:x,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Wn(o,n),n&&G(e),n&&G(t)}}}function _t(n){var e,t,r,o=new _e({props:{name:"network-wired"}});return{c:function(){Kn(o.$$.fragment),e=V(),(t=F("span")).textContent="".concat(ft("Add connection"))},m:function(n,i){Fn(o,n,i),q(n,e,i),q(n,t,i),r=!0},p:x,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Wn(o,n),n&&G(e),n&&G(t)}}}function xt(n){var e,t,r,o=new _e({props:{name:"user-cog"}});return{c:function(){Kn(o.$$.fragment),e=V(),(t=F("span")).textContent="".concat(ft("Account"))},m:function(n,i){Fn(o,n,i),q(n,e,i),q(n,t,i),r=!0},p:x,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Wn(o,n),n&&G(e),n&&G(t)}}}function kt(n){var e,t,r,o=new _e({props:{name:"question-circle"}});return{c:function(){Kn(o.$$.fragment),e=V(),(t=F("span")).textContent="".concat(ft("Help"))},m:function(n,i){Fn(o,n,i),q(n,e,i),q(n,t,i),r=!0},p:x,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Wn(o,n),n&&G(e),n&&G(t)}}}function Et(n){var e,t=new Be({props:{href:"/settings",$$slots:{default:[Ot]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};16777216&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function Ot(n){var e,t,r,o=new _e({props:{name:"tools"}});return{c:function(){Kn(o.$$.fragment),e=V(),(t=F("span")).textContent="".concat(ft("Settings"))},m:function(n,i){Fn(o,n,i),q(n,e,i),q(n,t,i),r=!0},p:x,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Wn(o,n),n&&G(e),n&&G(t)}}}function Ct(n){var e,t,r,o=new _e({props:{name:"power-off"}});return{c:function(){Kn(o.$$.fragment),e=V(),(t=F("span")).textContent="".concat(ft("Log out"))},m:function(n,i){Fn(o,n,i),q(n,e,i),q(n,t,i),r=!0},p:x,i:function(n){r||(Un(o.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),r=!1},d:function(n){Wn(o,n),n&&G(e),n&&G(t)}}}function Nt(n){for(var e,t,r,o,i,a,c,u,s,d,f,l,g,m,h,v,$,b,y,w,_,x,k,E=(n[4].email||ft("Account"))+"",O=n[4].roles.has("admin"),N=new _e({props:{name:"search"}}),S=n[4].connections.toArray(),M=[],D=0;D<S.length;D+=1)M[D]=bt(mt(n,S,D));var R=function(n){return zn(M[n],1,1,(function(){M[n]=null}))},P=new Be({props:{href:"/chat",$$slots:{default:[yt]},$$scope:{ctx:n}}}),A=new Be({props:{href:"/settings/conversation",$$slots:{default:[wt]},$$scope:{ctx:n}}}),T=new Be({props:{href:"/settings/connection",$$slots:{default:[_t]},$$scope:{ctx:n}}}),L=new Be({props:{href:"/settings/account",$$slots:{default:[xt]},$$scope:{ctx:n}}}),j=new Be({props:{href:"/help",$$slots:{default:[kt]},$$scope:{ctx:n}}}),I=O&&Et(n),U=new Be({props:{href:"/api/user/logout.html",native:!0,$$slots:{default:[Ct]},$$scope:{ctx:n}}});return{c:function(){e=F("div"),t=F("form"),r=F("input"),i=V(),a=F("label"),Kn(N.$$.fragment),c=V(),u=F("nav"),(s=F("h3")).textContent="".concat(ft("Conversations")),d=V();for(var p=0;p<M.length;p+=1)M[p].c();f=V(),l=F("h3"),g=W(E),m=V(),Kn(P.$$.fragment),h=V(),Kn(A.$$.fragment),v=V(),Kn(T.$$.fragment),$=V(),Kn(L.$$.fragment),b=V(),Kn(j.$$.fragment),y=V(),I&&I.c(),w=V(),Kn(U.$$.fragment),Q(r,"type","text"),Q(r,"id","search_input"),Q(r,"placeholder",o=n[3]?ft("Search..."):ft("Convos")),Q(a,"for","search_input"),Q(t,"class","sidebar__header"),Q(u,"class","sidebar-left__nav"),rn(u,"is-filtering",n[1].length>0),Q(e,"class","sidebar-left")},m:function(o,p){q(o,e,p),H(e,t),H(t,r),en(r,n[1]),H(t,i),H(t,a),Fn(N,a,null),H(e,c),H(e,u),H(u,s),H(u,d);for(var _=0;_<M.length;_+=1)M[_].m(u,null);H(u,f),H(u,l),H(l,g),H(u,m),Fn(P,u,null),H(u,h),Fn(A,u,null),H(u,v),Fn(T,u,null),H(u,$),Fn(L,u,null),H(u,b),Fn(j,u,null),H(u,y),I&&I.m(u,null),H(u,w),Fn(U,u,null),n[17](u),x=!0,k=[Z(r,"input",n[16]),Z(r,"blur",n[8]),Z(r,"focus",n[9]),Z(r,"keydown",n[11]),Z(t,"submit",Dt),Z(u,"click",n[10])]},p:function(n,e){var t=p(e,1)[0];if((!x||8&t&&o!==(o=n[3]?ft("Search..."):ft("Convos")))&&Q(r,"placeholder",o),2&t&&r.value!==n[1]&&en(r,n[1]),16&t){var i;for(S=n[4].connections.toArray(),i=0;i<S.length;i+=1){var a=mt(n,S,i);M[i]?(M[i].p(a,t),Un(M[i],1)):(M[i]=bt(a),M[i].c(),Un(M[i],1),M[i].m(u,f))}for(jn(),i=S.length;i<M.length;i+=1)R(i);In()}(!x||16&t)&&E!==(E=(n[4].email||ft("Account"))+"")&&nn(g,E);var c={};16777248&t&&(c.$$scope={dirty:t,ctx:n}),P.$set(c);var s={};16777216&t&&(s.$$scope={dirty:t,ctx:n}),A.$set(s);var d={};16777216&t&&(d.$$scope={dirty:t,ctx:n}),T.$set(d);var l={};16777216&t&&(l.$$scope={dirty:t,ctx:n}),L.$set(l);var m={};16777216&t&&(m.$$scope={dirty:t,ctx:n}),j.$set(m),16&t&&(O=n[4].roles.has("admin")),O?I?(I.p(n,t),Un(I,1)):((I=Et(n)).c(),Un(I,1),I.m(u,w)):I&&(jn(),zn(I,1,1,(function(){I=null})),In());var h={};16777216&t&&(h.$$scope={dirty:t,ctx:n}),U.$set(h),2&t&&rn(u,"is-filtering",n[1].length>0)},i:function(t){if(!x){Un(N.$$.fragment,t);for(var r=0;r<S.length;r+=1)Un(M[r]);Un(P.$$.fragment,t),Un(A.$$.fragment,t),Un(T.$$.fragment,t),Un(L.$$.fragment,t),Un(j.$$.fragment,t),Un(I),Un(U.$$.fragment,t),Cn((function(){_||(_=Hn(e,Je,n[0],!0)),_.run(1)})),x=!0}},o:function(t){zn(N.$$.fragment,t),M=M.filter(Boolean);for(var r=0;r<M.length;r+=1)zn(M[r]);zn(P.$$.fragment,t),zn(A.$$.fragment,t),zn(T.$$.fragment,t),zn(L.$$.fragment,t),zn(j.$$.fragment,t),zn(I),zn(U.$$.fragment,t),_||(_=Hn(e,Je,n[0],!1)),_.run(0),x=!1},d:function(t){t&&G(e),Wn(N),K(M,t),Wn(P),Wn(A),Wn(T),Wn(L),Wn(j),I&&I.d(),Wn(U),n[17](null),t&&_&&_.end(),C(k)}}}function St(n,e){var t=[e.dialog_id?"for-dialog":"for-connection"];return(e.frozen||"connected"!=n.state)&&t.push("is-frozen"),e.errors&&t.push("has-errors"),t.join(" ")}function Mt(n){return n.unread>60?"60+":n.unread||0}var Dt=function(n){return n.preventDefault()};function Rt(n,e,t){var r,o,i,a;R(n,Se,(function(n){return t(14,o=n)})),R(n,Ce,(function(n){return t(15,i=n)}));var c=e.transition,u=vn("user");R(n,u,(function(n){return t(4,r=n)}));var s=r.notifications;R(n,s,(function(n){return t(5,a=n)}));var d,f=0,l="",p=!1,g=[];function m(){t(3,p=!1),ue(d,"a",(function(n){return n.classList.remove("has-focus")})),setTimeout((function(){t(1,l="");var n=document.activeElement;n&&ne(n,d)&&ue(d,"a.has-path",(function(n){return n.focus()}))}),100)}function h(){if(d){var n=l.match(/^\W+/)?"":"\\b\\W*",e=new RegExp(n+se(l),"i"),r={};t(12,f=0),t(3,p=!0),t(13,g=[]),ue(d,"a",(function(n,o){var i=n.classList;!l.length&&i.contains("has-path")&&t(12,f=o),i.remove("has-focus");var a=!l.length||!r[n.href]&&n.textContent.match(e);a&&g.push(n),le(n,a),r[n.href]=!0})),ue(d,".for-connection",(function(n){for(var e=n;(e=e.nextElementSibling)&&e.classList.contains("for-dialog");)if(le(e,"is-visible"))return le(n,!0)})),ue(d,"h3",(function(n){for(var e=n;(e=e.nextElementSibling)&&!ge(e,"h3");)if(le(e,"is-visible"))return le(n,!0);le(n,!1)}))}}return n.$set=function(n){"transition"in n&&t(0,c=n.transition)},n.$$.update=function(){2&n.$$.dirty&&h(),16388&n.$$.dirty&&d&&m(),12288&n.$$.dirty&&g[f]&&g[f].classList.add("has-focus")},[c,l,d,p,r,a,u,s,m,h,function(n){(n.target.className||"").match(/network|user/)&&setTimeout((function(){L(Ce,i="settings")}),50)},function(n){if(13==n.keyCode)return n.preventDefault(),m(),void(g[f]&&Pe(g[f].href));var e=38==n.keyCode?-1:40==n.keyCode?1:0;e&&(n.preventDefault(),g[f]&&g[f].classList.remove("has-focus"),t(12,f+=n.ctrlKey?4*e:e)),f<0&&t(12,f=g.length-1),f>=g.length&&t(12,f=0)},f,g,o,i,function(){l=this.value,t(1,l)},function(n){yn[n?"unshift":"push"]((function(){t(2,d=n)}))}]}var Pt=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Rt,Nt,S,{transition:0}),r}return s(t,e),t}(Zn);var At=function(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n},Tt=function(){function e(t){var r=this;n(this,e),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return r._url.href.replace(/^http:/,r.protocol)},set:function(n){r._url.href=n.replace(/^\w+:/,"http:"),r.protocol=n.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(n){Object.defineProperty(r,n,{get:function(){return r._url[n]},set:function(e){r._url[n]=e}})})),this.href=t}return t(e,[{key:"fromForm",value:function(n){var e=n.server.value;return n.nick.value.length&&this.searchParams.append("nick",n.nick.value),this.searchParams.append("tls",n.tls.checked?"1":"0"),this.searchParams.append("tls_verify",n.tls_verify&&n.tls_verify.checked?"1":"0"),this.host=e.match(/:\d+$/)?e:e+":6667",this.password=n.password.value,this.username=n.username.value,this}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),e}(),Lt=function(n,e){return n.name.localeCompare(e.name)},jt=function(e){function r(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(this,r),(e=a(this,c(r).call(this,t))).sorter=o.sorter||Lt,e._sort(),e}return s(r,e),t(r,[{key:"filter",value:function(n){return Array.from(this.values()).filter(n)}},{key:"set",value:function(n,e){m(c(r.prototype),"set",this).call(this,n,e),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var n=this,e=Array.from(this.entries()),t=this.sorter;return this.clear(),e.sort((function(n,e){return t(n[1],e[1])})).forEach((function(e){var t=p(e,2),o=t[0],i=t[1];return m(c(r.prototype),"set",n).call(n,o,i)})),e}}]),r}($(Map)),It={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},Ut=function(e){function r(e){return n(this,r),"string"!=typeof e||e.match(/Z$/)||(e+="Z"),a(this,c(r).call(this,e||new Date))}return s(r,e),t(r,[{key:"getHumanDate",value:function(){var n=this.getMonthAbbr()+" "+this.getDate(),e=new r;return this.getYear()==e.getYear()||(n+=", "+this.getFullYear()),n}},{key:"getHM",value:function(){return[this.getHours(),this.getMinutes()].map((function(n){return n<10?"0"+n:n})).join(":")}},{key:"getMonthAbbr",value:function(){return It[this.getMonth()]||""}},{key:"toEpoch",value:function(){return this.getTime()/1e3}}]),r}($(Date)),zt={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",s:"secret",S:"secure_connection_only",t:"ops_topic"},Bt={o:"@",v:"+"},Ht={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function qt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Gt(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?qt(Object(t),!0).forEach((function(e){At(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var Kt=new RegExp("^[#&]"),Ft=function(n,e){return e.modes.operator||!1-n.modes.operator||e.modes.voice||!1-n.modes.voice||n.name.localeCompare(e.name)},Wt=0,Vt=function(e){function r(e){var t;n(this,r),t=a(this,c(r).call(this));var o=["","chat"];return e.connection_id&&o.push(e.connection_id),e.dialog_id&&o.push(e.dialog_id),t.prop("ro","_participants",new jt([],{sorter:Ft})),t.prop("ro","api",e.api),t.prop("ro","color",pe(e.dialog_id||e.connection_id||"")),t.prop("ro","connection_id",e.connection_id||""),t.prop("ro","events",e.events),t.prop("ro","is_private",(function(){return t.dialog_id&&!Kt.test(t.name)})),t.prop("ro","path",o.map((function(n){return encodeURIComponent(n)})).join("/")),t.prop("rw","errors",0),t.prop("rw","last_active",new Ut(e.last_active)),t.prop("rw","last_read",new Ut(e.last_read)),t.prop("rw","messages",[]),t.prop("rw","modes",{}),t.prop("rw","name",e.name||e.dialog_id||e.connection_id||"ERR"),t.prop("rw","status","pending"),t.prop("rw","topic",e.topic||""),t.prop("rw","unread",e.unread||0),e.hasOwnProperty("dialog_id")?(t.prop("ro","dialog_id",e.dialog_id),t.prop("rw","frozen",e.frozen||"")):t.prop("ro","frozen",(function(){return t._calculateFrozen()})),e.dialog_id&&t.prop("persist","wantNotifications",!1,{key:e.dialog_id+":wantNotifications",lazy:!0}),t._addOperations(),t}var o,i;return s(r,e),t(r,[{key:"addMessage",value:function(n){if(n.from&&-1!=["action","error","private"].indexOf(n.type)){if(n.highlight||this.is_private||this.wantNotifications){var e=n.from==this.name?n.from:ft("%1 in %2",n.from,this.name);this.events.notifyUser(e,n.message)}this.update({unread:this.unread+1})}return this.addMessages("push",[n])}},{key:"addMessages",value:function(n,e){var t=0,r=e.length;switch(n){case"push":t=this.messages.length,r=(e=this.messages.concat(e)).length;break;case"unshift":e=e.concat(this.messages)}for(var o=t;o<r;o++){var i=e[o];if(!i.hasOwnProperty("markdown")){if(!i.from){var a=[!0,this.connection_id||"Convos"];i.internal=a[0],i.from=a[1]}i.type||(i.type="notice"),i.vars&&(i.message=ft.apply(void 0,[i.message].concat(_(i.vars)))),i.id="msg_"+ ++Wt,i.color=pe(i.from.toLowerCase()),i.ts=new Ut(i.ts),i.embeds=(i.message.match(/https?:\/\/(\S+)/g)||[]).map((function(n){return n.replace(/(\W)?$/,"")})),i.fromId=i.from.toLowerCase(),i.markdown=st(i.message)}}return this.update({messages:e}),this}},{key:"is",value:function(n){return"frozen"==n?this.frozen&&!0:"private"==n?this.is_private:"unread"==n?this.unread&&!0:this.status==n}},{key:"load",value:(i=Xn(Jn.mark((function n(){var e,t,r,o,i,a=this,c=arguments;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=c.length>0&&void 0!==c[0]?c[0]:{},this.messagesOp&&!this.is("loading")){n.next=3;break}return n.abrupt("return",this);case 3:if(!(t="maybe"==e.after?"after":"maybe"==e.before?"before":"")||!this.is("success")){n.next=6;break}return n.abrupt("return",this);case 6:if("after"==t&&delete this.participantsLoaded,"maybe"!=(r=Gt({},e,{connection_id:this.connection_id,dialog_id:this.dialog_id})).after||r.limit||(r.limit=200),["after","before"].forEach((function(n){if("maybe"==r[n]&&(r[n]=a._realMessage("before"==n?0:-1)),"number"==typeof r[n]&&(r[n]=a._realMessage(r[n])),ie(r[n],"object")&&(r[n]=r[n].ts.toISOString()),ie(r[n],"undef"))return delete r[n]})),!((o=this.messages.length)&&r.before&&this.messages[0].endOfHistory)){n.next=13;break}return n.abrupt("return");case 13:return this.update({status:"loading"}),n.next=16,this.messagesOp.perform(r);case 16:if(i=this.messagesOp.res.body,this.addMessages(r.before?"unshift":"push",i.messages||[]),this.update({status:this.messagesOp.status}),o&&r.before&&i.end&&(this.messages[0].endOfHistory=!0),"after"!=t||i.end){n.next=24;break}return this.update({messages:[]}),n.next=24,this.load({});case 24:return n.abrupt("return",this);case 25:case"end":return n.stop()}}),n,this)}))),function(){return i.apply(this,arguments)})},{key:"findParticipant",value:function(n){return this._participants.get(this._participantId(ie(n,"undef")?"":n))}},{key:"participants",value:function(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.forEach((function(e){e.nick||(e.nick=e.name||"");var t=n._participantId(e.nick),r=n._participants.get(t);r&&(Object.keys(e).forEach((function(n){r[n]=e[n]})),e=r),e.modes||(e.modes={}),n._calculateModes(Ht,e.mode,e.modes),n._participants.set(t,Gt({name:e.nick},e,{color:pe(t),id:t,ts:new Ut}))})),e.length&&this.update({force:!0}),this._participants.toArray()}},{key:"send",value:function(n,e){this.events.send({connection_id:this.connection_id,dialog_id:this.dialog_id||"",message:n},e?this[e].bind(this):null)}},{key:"setLastRead",value:(o=Xn(Jn.mark((function n(){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.setLastReadOp){n.next=2;break}return n.abrupt("return");case 2:return this.update({errors:0,unread:0}),n.next=5,this.setLastReadOp.perform({connection_id:this.connection_id,dialog_id:this.dialog_id});case 5:this.update(this.setLastReadOp.res.body||{});case 6:case"end":return n.stop()}}),n,this)}))),function(){return o.apply(this,arguments)})},{key:"update",value:function(n){return this._loadParticipants(),m(c(r.prototype),"update",this).call(this,n)}},{key:"wsEventMode",value:function(n){n.nick?(this.participants([{nick:n.nick,mode:n.mode}]),this.addMessage({message:"%1 got mode %2 from %3.",vars:[n.nick,n.mode,n.from]})):this.update({modes:this._calculateModes(zt,n.mode,this.modes)})}},{key:"wsEventNickChange",value:function(n){var e=this._participantId(n.old_nick);if(this._participants.has(e)&&n.old_nick!=n.new_nick){this._participants.delete(e),this.participants([{nick:n.new_nick}]);var t="me"==n.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessage({message:t,vars:[n.old_nick,n.new_nick]})}}},{key:"wsEventPart",value:function(n){var e=this.findParticipant(n.nick);e&&!e.me&&(this._participants.delete(this._participantId(n.nick)),this.update({force:!0}),this.addMessage(this._partMessage(n)))}},{key:"wsEventSentNames",value:function(n){this._updateParticipants(n);var e={message:"Participants (%1): %2",vars:[]},t=this._participants.toArray().map((function(n){return(Bt[n.mode]||n.mode||"")+n.name}));t.length>1&&(e.message+=" and %3.",e.vars[2]=t.pop()),e.vars[0]=t.length,e.vars[1]=t.join(", "),this.addMessage(e)}},{key:"wsEventSentTopic",value:function(n){var e=n.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessage({message:e,vars:[this.name,n.topic]}),this.update({topic:n.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("dialogMessages")),this.prop("ro","setLastReadOp",this.api.operation("setDialogLastRead"))}},{key:"_calculateModes",value:function(n,e,t){var r=(e||"").match(/^(\+|-)?(.*)/)||["","+",""],o=p(r,3),i=(o[0],o[1]);o[2].split("").forEach((function(e){t[n[e]||e]="-"!=i}))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadParticipants",value:function(){if(!this.participantsLoaded&&this.dialog_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success"))return this.participantsLoaded=!0,this.is_private?this.send("/ison","_noop"):this.send("/names","_updateParticipants")}},{key:"_noop",value:function(){}},{key:"_participantId",value:function(n){return n.toLowerCase()}},{key:"_partMessage",value:function(n){var e={message:"%1 parted.",vars:[n.nick]};return n.kicker?(e.message="%1 was kicked by %2"+(n.message?": %3":""),e.vars.push(n.kicker),e.vars.push(n.message)):n.message&&(e.message+=" Reason: %2",e.vars.push(n.message)),e}},{key:"_realMessage",value:function(n){for(var e=-1==n?-1:1,t=this.messages,r=-1==n?this.messages.length-1:0;t[r];){if(!t[r].internal)return t[r];r+=e}return null}},{key:"_updateParticipants",value:function(n){this._participants.clear(),this.participants(n.participants),n.stopPropagation()}}]),r}(he);function Yt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}var Zt=function(n,e){return(n.is_private||0)-(e.is_private||0)||n.name.localeCompare(e.name)},Jt=function(e){function r(e){var t;n(this,r),(t=a(this,c(r).call(this,e))).prop("ro","dialogs",new jt([],{sorter:Zt})),t.prop("rw","on_connect_commands",e.on_connect_commands||""),t.prop("rw","state",e.state||"queued"),t.prop("rw","wanted_state",e.wanted_state||"connected"),t.prop("rw","url","string"==typeof e.url?new Tt(e.url):e.url);var o=e.me||{},i=o.nick||t.url.searchParams.get("nick")||"";return t.prop("rw","nick",i),t.prop("rw","real_host",o.real_host||t.url.hostname),t.participants([{nick:i}]),t}return s(r,e),t(r,[{key:"addDialog",value:function(n){var e=n.match(/^[a-z]/i);this.send(e?"/query ".concat(n):"/join ".concat(n))}},{key:"ensureDialog",value:function(n){var e=this,t=this.dialogs.get(n.dialog_id);return t?t.update(n):((t=new Vt(function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(t),!0).forEach((function(e){At(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Yt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},n,{connection_id:this.connection_id,api:this.api,events:this.events}))).on("message",(function(n){return e.emit("message",n)})),t.on("update",(function(){return e.update({force:!0})})),this._addDefaultParticipants(t),this.dialogs.set(t.dialog_id,t),this.update({force:!0}),t)}},{key:"findDialog",value:function(n){return this.dialogs.get(n.dialog_id)}},{key:"is",value:function(n){return this.state==n||m(c(r.prototype),"is",this).call(this,n)}},{key:"removeDialog",value:function(n){return this.dialogs.delete(n.dialog_id),this.update({force:!0})}},{key:"update",value:function(n){return n.url&&"string"==typeof n.url&&(n.url=new Tt(n.url)),m(c(r.prototype),"update",this).call(this,n)}},{key:"wsEventConnection",value:function(n){this.update({state:n.state}),this.addMessage(n.message?{message:"Connection state changed to %1: %2",vars:[n.state,n.message]}:{message:"Connection state changed to %1.",vars:[n.state]})}},{key:"wsEventFrozen",value:function(n){var e=this.findDialog(n),t=e&&e.frozen;this.ensureDialog(n).participants([{nick:this.nick,me:!0}]),n.frozen&&(e||this).addMessage({message:n.frozen,vars:[]}),t&&!n.frozen&&e.addMessage({message:"Connected.",vars:[]})}},{key:"wsEventMe",value:function(n){this.wsEventNickChange(n),this.update(n)}},{key:"wsEventMessage",value:function(n){return n.dialog_id?this.ensureDialog(n).addMessage(n):this.addMessage(n)}},{key:"wsEventNickChange",value:function(n){var e={old_nick:n.old_nick||this.nick,new_nick:n.new_nick||n.nick,type:n.type};n.old_nick==this.nick&&(e.me=!0),m(c(r.prototype),"wsEventNickChange",this).call(this,e),this.dialogs.forEach((function(n){return n.wsEventNickChange(e)}))}},{key:"wsEventError",value:function(n){var e=n.dialog_id&&n.frozen?this.ensureDialog(n):this.findDialog(n)||this;e.update({errors:this.errors+1});var t=re(n)||n.frozen||"Unknown error from %1.";"Password protected."==t&&(t="Invalid password."),e.addMessage({message:t,type:"error",sent:n,vars:n.command||[n.message]})}},{key:"wsEventJoin",value:function(n){var e=this.ensureDialog(n),t=n.nick||this.nick;t!=this.nick&&e.addMessage({message:"%1 joined.",vars:[t]}),e.participants([{nick:t}])}},{key:"wsEventPart",value:function(n){if(n.nick==this.nick)return this.removeDialog(n);n.dialog_id||(this.dialogs.forEach((function(e){return e.wsEventPart(n)})),n.stopPropagation())}},{key:"wsEventQuit",value:function(n){this.wsEventPart(n)}},{key:"wsEventSentJoin",value:function(n){this.wsEventJoin(n)}},{key:"wsEventSentList",value:function(n){var e=n.args||"/*/";this.addMessage(n.done?{message:"Found %1 of %2 dialogs from %3.",vars:[n.dialogs.length,n.n_dialogs,e]}:{message:"Found %1 of %2 dialogs from %3, but dialogs are still loading.",vars:[n.dialogs.length,n.n_dialogs,e]})}},{key:"wsEventSentMode",value:function(n){var e=this.findDialog(n)||this,t=(n.command[1]||"").match(/(\W*)(\w)$/);if(!t)return console.log("[wsEventSentMode] Unable to handle message:",n);switch(t.shift(),t[1]){case"":return e.addMessage({message:"%s has mode %s",vars:[n.dialog_id,n.mode]});case"k":return e.addMessage({message:"+"==t[0]?"Key was set.":"Key was unset."});case"b":return this._wsEventSentModeB(n,t)}}},{key:"_wsEventSentModeB",value:function(n,e){var t=this.findDialog(n)||this;if(n.banlist)n.banlist.length||t.addMessage({message:"Ban list is empty."}),n.banlist.forEach((function(n){t.addMessage({message:"Ban mask %1 set by %2 at %3.",vars:[n.mask,n.by,new Date(1e3*n.ts).toLocaleString()]})}));else{var r="+"==e[0]?"set":"removed";t.addMessage({message:"Ban mask %1 ".concat(r,"."),vars:[n.command[2]]})}}},{key:"wsEventSentQuery",value:function(n){this.ensureDialog(n)}},{key:"wsEventSentWhois",value:function(n){var e="%1 (%2)",t=[n.nick,n.host],r=Object.keys(n.channels).sort().map((function(e){return(Bt[n.channels[e].mode]||"")+e}));n.channels=r,n.idle_for&&r.length?(e+=" has been idle for %3 in %4.",t.push(n.idle_for),t.push(r.join(", "))):n.idle_for&&!r.length?(e+="has been idle for %3, and is not in any channels.",t.push(n.idle_for)):r.length?(e+=" is active in %3.",t.push(r.join(", "))):e+=" is not in any channels.",(this.findDialog(n)||this).addMessage({message:e,vars:t,sent:n})}},{key:"_addDefaultParticipants",value:function(n){var e=[{nick:this.nick,me:!0}];n.is_private&&e.push({nick:n.name}),n.participants(e)}},{key:"_addOperations",value:function(){this.prop("ro","setLastReadOp",this.api.operation("setConnectionLastRead")),this.prop("ro","messagesOp",this.api.operation("connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),r}(Vt),Qt=r((function(n){function e(n){for(var e=document.createElement("div"),t=[[n,e]],r=[];t.length;){var i=t.shift(),a=p(i,2),c=a[0],u=a[1],s=void 0,d=void 0,f=o(c);if(null===c||"undefined"==f?f="null":Array.isArray(c)&&(f="array"),"array"==f?((d=function(n){return n}).len=c.length,(s=document.createElement("div")).className="json-array "+(d.len?"has-items":"is-empty")):"object"==f?function(){var n=Object.keys(c).sort();(d=function(e){return n[e]}).len=n.length,(s=document.createElement("div")).className="json-object "+(d.len?"has-items":"is-empty")}():((s=document.createElement("span")).className="json-"+f,s.textContent="null"==f?"null":"boolean"!=f?c:c?"true":"false"),d){var l=document.createElement("span");if(l.className="json-type",l.textContent=d.len?f+"["+d.len+"]":"{}",u.appendChild(l),-1!=r.indexOf(c))e.classList.add("has-recursive-items"),s.classList.add("is-seen");else{for(var g=0;g<d.len;g++){var m=d(g),h=document.createElement("div"),v=document.createElement("span");v.className="json-key",v.textContent=m,h.appendChild(v),s.appendChild(h),t.push([c[m],h])}r.push(c)}}u.className="json-item "+s.className.replace(/^json-/,"contains-"),u.appendChild(s)}return e}try{n.exports={jsonhtmlify:e}}catch(n){window.jsonhtmlify=e}})).jsonhtmlify;function Xt(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}var nr=function(e){function r(e){var t;return n(this,r),(t=a(this,c(r).call(this))).name="EmbedMaker",t.prop("persist","disableInstagram",!1),t.prop("persist","disableTwitter",!1),t.prop("persist","expandUrlToMedia",!0),t.prop("ro","api",e.api),t.prop("ro","embeds",{}),t}return s(r,e),t(r,[{key:"render",value:function(n,e){var t=this;if(this.expandUrlToMedia){var r={};ue(n,".message__embed",(function(n){r[n.dataset.url]=n})),e.forEach((function(e){t.embeds[e]||t._loadAndRender(e),r[e]||n.appendChild(t._ensureEmbedEl(e)),delete r[e]})),Object.keys(r).forEach((function(n){return r[n].remove()}))}}},{key:"renderInstagram",value:function(n){if(!this.disableInstagram)return window.instgrm?window.instgrm.Embeds.process():void ae("//platform.instagram.com/en_US/embeds.js")}},{key:"renderPasteEl",value:function(n){be.highlightBlock(n.querySelector("pre")),ue(n,".le-meta",(function(n){n.addEventListener("click",(function(){return n.parentNode.classList.toggle("is-expanded")}))}))}},{key:"renderPhoto",value:function(n){var e=this;ue(n,"img",(function(n){return n.addEventListener("click",(function(t){t.preventDefault(),e.showMedia(n)}))}))}},{key:"renderTwitter",value:function(n){this.disableTwitter||(window.twttr&&window.twttr.widgets.load(),ae("//platform.twitter.com/widgets.js"))}},{key:"showMedia",value:function(n){var e=te(document.querySelector("body"),"fullscreen-media-wrapper",(function(n){n.addEventListener("click",(function(e){return le(n,e.target!=n)}))}));!function(n){for(;n.firstChild;)n.removeChild(n.firstChild)}(e),e.appendChild(n.cloneNode()),le(e,!0)}},{key:"toggleDetails",value:function(n,e){var t=n.querySelector(".has-message-details");if(t)return le(t,"toggle");var r=function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Xt(Object(t),!0).forEach((function(e){At(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xt(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},e.sent||e);["bubbles","color","command","dispatchTo","embeds","event","fromId","id","markdown","method","stopPropagation"].forEach((function(n){return delete r[n]})),r.ts=e.ts.toLocaleString(),(t=Qt(r.sent||r)).className=["message__embed","has-message-details",t.className].join(" "),n.appendChild(t)}},{key:"_bufAsBase64",value:function(n){var e=new Uint8Array(n).reduce((function(n,e){return n+String.fromCharCode(e)}),"");return window.btoa(e)}},{key:"_ensureEmbedEl",value:function(n){return this.embeds[n].el||(this.embeds[n].el=te(null,"message__embed",(function(e){e.dataset.url=n})))}},{key:"_loadAndRender",value:function(n){var e=this;return this.embeds[n]={},this.api.operation("embed",{url:n}).perform().then((function(t){var r=t.res.body;if(r.html){var o=e._ensureEmbedEl(n);o.innerHTML=r.html,ue(o,"a",(function(n){n.target="_blank"})),ue(o,"img",(function(n){return e._processImage(n)}));var i=(r.provider_name||"").toLowerCase();if("instagram"==i)return e.renderInstagram(o);if("twitter"==i)return e.renderTwitter(o);if(-1!=(o.firstChild.className||"").split(/\s+/).indexOf("le-paste"))return e.renderPasteEl(o);ue(o,".le-photo, .le-thumbnail",(function(n){return e.renderPhoto(o)}))}}))}},{key:"_processImage",value:function(n){var e=this;if(!Ae(n.src))return n.addEventListener("error",(function(){return n.style.display="none"}));n.originalSource=n.src,n.src="",n.style.visibility="hidden",fetch(n.originalSource).then((function(t){var r=t.headers.get("Content-Type");return r?t.arrayBuffer().then((function(t){return e._renderImage(n,t,{contentType:r})})):e._renderImage(n,new ArrayBuffer(0),{})}))}},{key:"_renderImage",value:function(n,e,t){var r=t.contentType,o={1:0,3:180,6:90,8:270},i=new DataView(e);if(!r||e.length<2||65496!=i.getUint16(0))return n.src=n.originalSource,void(n.style.visibility="visible");for(var a=i.byteLength,c=2;c<a-2&&!n.orientation;){var u=i.getUint16(c);switch(c+=2,u){case 65505:a=i.getUint16(c)+c,c+=2;break;case 274:n.orientation=o[i.getUint16(c+6,!1)]}}void 0!==n.orientation&&(n.style.transform="rotate("+n.orientation+"deg)"),n.src="data:"+r+";base64,"+this._bufAsBase64(e),n.style.visibility="visible"}}]),r}(he);function er(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function tr(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?er(Object(t),!0).forEach((function(e){At(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):er(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var rr=window.Notification||{permission:"denied"},or=0,ir=function(e){function r(e){var t;return n(this,r),(t=a(this,c(r).call(this))).keepaliveTid=setInterval((function(){return t._send({method:"ping"})}),1e4),t.notificationIcon="",t.queue=[],t.waiting={},t.prop("persist","debugEvents",-1!=navigator.userAgent.indexOf("Mozilla")?1:0),t.prop("persist","notificationCloseDelay",5e3),t.prop("persist","wantNotifications",null),t.prop("ro","browserNotifyPermission",(function(){return rr.permission})),t.prop("ro","wsUrl",e.wsUrl),t.prop("rw","ready",!1),t}return s(r,e),t(r,[{key:"dispatch",value:function(n){var e=("wsEvent_"+this._getEventNameFromParam(n)).replace(/_(\w)/g,(function(n,e){return e.toUpperCase()}));this.debugEvents&&this._debug(e,n),n.bubbles=!0,n.stopPropagation=function(){n.bubbles=!1};var t=this.waiting[n.id];t&&t(n),n.bubbles&&this.emit("message",tr({},n,{dispatchTo:e}))}},{key:"listenToGlobalEvents",value:function(){var n=this;window.addEventListener("error",(function(e){var t=e.colno,r=e.error,o=e.filename,i=e.lineno,a=e.message,c=e.type,u=e.timeStamp;n.send({method:"debug",type:c,colno:t,error:r,filename:o,lineno:i,message:a,timeStamp:u})})),window.addEventListener("unhandledrejection",(function(e){var t=e.type,r=e.reason,o=e.returnValue,i=e.timeStamp;n.send({method:"debug",type:t,reason:r,returnValue:o,timeStamp:i})}))}},{key:"notifyUser",value:function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.wantNotifications?"granted"!=rr.permission?rr.permission:!t.force&&document.hasFocus()?"document.hasFocus":"":"wantNotifications == false";if(r)return console.log("[Events:notifyUser] Rejected: "+r,[n,e,t]),this;var o=new rr(n,tr({icon:this.notificationIcon},t,{body:e}));return o.onclick=function(n){window.focus(),o.close()},setTimeout((function(){return o.close()}),this.notificationCloseDelay),this}},{key:"rejectNotifications",value:function(){return this.update({wantNotifications:!1})}},{key:"requestPermissionToNotify",value:function(n){var e=this;return"granted"!=rr.permission&&rr.requestPermission?(rr.requestPermission((function(t){e.update({wantNotifications:"granted"==t}),n&&n(t)})),this):(this.update({wantNotifications:"granted"==rr.permission}),n&&n(rr.permission),this)}},{key:"send",value:function(n,e){n.id||"ping"==n.method||(n.id=++or),!n.method&&n.message&&(n.method="send"),n.dialog&&["connection_id","dialog_id"].forEach((function(e){n[e]=n.dialog[e]||""})),delete n.dialog,this.debugEvents&&this._debug("send",n),e&&(this.waiting[n.id]=e),this.queue.push(n),this._ws("dequeue")}},{key:"update",value:function(n){return m(c(r.prototype),"update",this).call(this,n),n.wantNotifications&&!this.wantNotifications&&this.notifyUser("Convos",ft("You have enabled notifications!"),{force:!0}),this}},{key:"_debug",value:function(n,e){1==this.debugEvents&&"wsEventPong"!=n&&"ping"!=e.method?console.log("[Events:"+(n||"data")+"]",e):this.debugEvents>=2&&console.log("[Events:"+(n||"data")+"]",e)}},{key:"_getEventNameFromParam",value:function(n){return n.errors?"error":"state"==n.event?n.type:"sent"==n.event&&n.message.match(/\/\S+/)?(n.command=n.message.split(/\s+/).filter((function(n){return n.length})),n.command[0]=n.command[0].substring(1),"sent_"+n.command[0]):n.event}},{key:"_send",value:function(n){var e=this.ws&&1==this.ws.readyState&&this.ws;return e&&e.send(JSON.stringify(n)),!!e}},{key:"_ws",value:function(n){var e=this;"dequeue"==n&&this._wsReconnectTid&&(clearTimeout(this._wsReconnectTid),delete this._wsReconnectTid),"start"==n&&(this._wsReconnectDelay=0,this.update({ready:!0})),"stop"==n?(this._wsReconnectDelay=this._wsReconnectDelay>5e3?500:(this._wsReconnectDelay||0)+500,this._wsReconnectTid||(this._wsReconnectTid=setTimeout((function(){return e._ws("dequeue")}),this._wsReconnectDelay)),this.update({ready:!1}),delete this.ws):this.ws?this.queue=this.queue.filter((function(n){return!e._send(n)})):(this.ws=new WebSocket(this.wsUrl),this.ws.onopen=function(){return e._ws("start")},this.ws.onclose=function(){return e._ws("stop")},this.ws.onerror=function(){return e._ws("stop")},this.ws.onmessage=function(n){return e.dispatch(JSON.parse(n.data))})}}]),r}(he);function ar(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}var cr=function(e){function r(e){return n(this,r),a(this,c(r).call(this,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ar(Object(t),!0).forEach((function(e){At(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ar(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({},e,{connection_id:"",dialog_id:"notifications",is_private:!0,name:"Notifications"})))}var o;return s(r,e),t(r,[{key:"load",value:(o=Xn(Jn.mark((function n(){var e,t=arguments;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=t.length>0&&void 0!==t[0]?t[0]:{},this.messagesOp&&!this.is("loading")){n.next=3;break}return n.abrupt("return",this);case 3:if("after"!=("maybe"==e.after?"after":"maybe"==e.before?"before":"")||!this.is("success")){n.next=6;break}return n.abrupt("return",this);case 6:return this.messagesOp.update({status:"pending"}),this.update({messages:[]}),n.next=10,m(c(r.prototype),"load",this).call(this);case 10:case"end":return n.stop()}}),n,this)}))),function(){return o.apply(this,arguments)})},{key:"send",value:function(){}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",this.api.operation("notificationMessages")),this.prop("ro","setLastReadOp",this.api.operation("readNotifications"))}}]),r}(Vt);function ur(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function sr(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?ur(Object(t),!0).forEach((function(e){At(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):ur(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var dr=function(e){function r(e){var t;n(this,r),t=a(this,c(r).call(this));var o=e.api;return t.prop("ro","api",(function(){return o})),t.prop("ro","connections",new jt),t.prop("ro","email",(function(){return t.getUserOp.res.body.email||""})),t.prop("ro","embedMaker",new nr({api:o})),t.prop("ro","events",t._createEvents(e)),t.prop("ro","getUserOp",o.operation("getUser",{connections:!0,dialogs:!0})),t.prop("ro","notifications",new cr({api:o,events:t.events})),t.prop("ro","roles",new Set),t.prop("ro","unread",(function(){return t._calculateUnread()})),t.prop("rw","highlight_keywords",[]),t.prop("rw","status","pending"),t.prop("persist","lastUrl",""),t.prop("persist","showGrid",!1),t.prop("persist","theme","auto"),t.prop("persist","version","0"),t}var o;return s(r,e),t(r,[{key:"calculateLastUrl",value:function(){if(this.is("error"))return Le("/login");if(!this.is("success"))return null;if(this.lastUrl)return this.lastUrl;var n=this.connections.toArray()[0];if(!n)return Le("/settings/connection");var e=n.dialogs.toArray()[0];return Le(e?e.path:n.path)}},{key:"dialogs",value:function(n){var e=[];return this.connections.toArray().forEach((function(t){t.dialogs.toArray().forEach((function(t){n&&!n(t)||e.push(t)}))})),e}},{key:"ensureConnected",value:function(){this.email&&this.send({method:"ping"})}},{key:"ensureDialog",value:function(n){var e=this;if(n.dialog_id)return this.ensureDialog({connection_id:n.connection_id}).ensureDialog(n);var t=this.findDialog(n);return t?t.update(n):((t=new Jt(sr({},n,{api:this.api,events:this.events}))).on("update",(function(){return e.update({force:!0})})),this.connections.set(t.connection_id,t),this.update({force:!0}),t)}},{key:"findDialog",value:function(n){var e=this.connections.get(n.connection_id);return n.dialog_id?e&&e.findDialog(n):e}},{key:"is",value:function(n){var e=this;return Array.isArray(n)?!!n.filter((function(n){return e.is(n)})).length:"loggedIn"==n?this.email&&!0:"offline"==n?"fetch"==re(this.getUserOp.err||[],"source"):this.status==n}},{key:"load",value:(o=Xn(Jn.mark((function n(){var e,t,r=this;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!this.is("loading")){n.next=2;break}return n.abrupt("return",this);case 2:return this.update({status:"loading"}),n.next=5,this.getUserOp.perform();case 5:return e=this.getUserOp.res.body,t={},(e.connections||[]).forEach((function(n){return t[r.ensureDialog(sr({},n,{status:"pending"})).path]=!0})),(e.dialogs||[]).forEach((function(n){return t[r.ensureDialog(sr({},n,{status:"pending"})).path]=!0})),this.connections.forEach((function(n){if(!t[n.path])return r.connections.delete(n.connection_id);n.dialogs.forEach((function(e){t[e.path]||n.dialogs.delete(e.dialog_id)}))})),this.notifications.update({unread:e.unread||0}),this.roles.clear(),(e.roles||[]).forEach((function(n){return r.roles.add(n)})),this.update({highlight_keywords:e.highlight_keywords||[],status:this.getUserOp.status}),this.ensureConnected(),n.abrupt("return",this);case 16:case"end":return n.stop()}}),n,this)}))),function(){return o.apply(this,arguments)})},{key:"removeDialog",value:function(n){if(n.dialog_id){var e=this.findDialog({connection_id:n.connection_id});e&&e.removeDialog(n)}else this.connections.delete(n.connection_id),this.update({force:!0})}},{key:"send",value:function(n,e){return this.events.send(n,e)}},{key:"wsEventPong",value:function(n){this.wsPongTimestamp=n.ts}},{key:"_calculateUnread",value:function(){return this.notifications.unread+this.dialogs((function(n){return n.is_private})).reduce((function(n,e){return n+e.unread}),0)}},{key:"_createEvents",value:function(n){var e=this,t=new ir(n);return t.on("message",(function(n){e._dispatchMessageToDialog(n),e.emit(n.dispatchTo,n),e[n.dispatchTo]&&e[n.dispatchTo](n)})),t.on("update",(function(n){if(n.ready)return e.is("pending")&&e.load();e.update({status:"pending"}),e.connections.forEach((function(n){return n.update({state:"unreachable"})}))})),t}},{key:"_dispatchMessageToDialog",value:function(n){var e=this.findDialog({connection_id:n.connection_id});if(e&&(e[n.dispatchTo]&&e[n.dispatchTo](n),n.bubbles)){var t=e.findDialog(n);t&&t[n.dispatchTo]&&t[n.dispatchTo](n)}}}]),r}(he),fr=[["auto","Auto"],["dark","Dark"],["light","Light"],["nord","Nord"]],lr="dark",pr=window.matchMedia("(prefers-color-scheme: dark)");function gr(n){var e,t,r,o,i,a,c,u,s,d=n[5].default,f=P(d,n,n[4],null),l=new _e({props:{name:n[1]?"times-circle":"bars"}});return{c:function(){e=F("header"),f&&f.c(),t=V(),r=F("a"),Kn(l.$$.fragment),o=V(),i=F("small"),a=W(n[0]),Q(i,"class","chat-header__unread"),i.hidden=c=!n[0],Q(r,"href",u="#activeMenu:"+(n[1]?"":"nav")),Q(r,"class","chat-header__hamburger"),Q(e,"class","chat-header")},m:function(n,c){q(n,e,c),f&&f.m(e,null),H(e,t),H(e,r),Fn(l,r,null),H(r,o),H(r,i),H(i,a),s=!0},p:function(n,e){var t=p(e,1)[0];f&&f.p&&16&t&&f.p(A(d,n,n[4],null),T(d,n[4],t,null));var o={};2&t&&(o.name=n[1]?"times-circle":"bars"),l.$set(o),(!s||1&t)&&nn(a,n[0]),(!s||1&t&&c!==(c=!n[0]))&&(i.hidden=c),(!s||2&t&&u!==(u="#activeMenu:"+(n[1]?"":"nav")))&&Q(r,"href",u)},i:function(n){s||(Un(f,n),Un(l.$$.fragment,n),s=!0)},o:function(n){zn(f,n),zn(l.$$.fragment,n),s=!1},d:function(n){n&&G(e),f&&f.d(n),Wn(l)}}}function mr(n,e,t){var r,o;R(n,Ce,(function(n){return t(1,o=n)}));var i=vn("user");R(n,i,(function(n){return t(3,r=n)}));var a,c=e.$$slots,u=void 0===c?{}:c,s=e.$$scope;return n.$set=function(n){"$$scope"in n&&t(4,s=n.$$scope)},n.$$.update=function(){8&n.$$.dirty&&t(0,a=r.unread)},[a,o,i,r,s,u]}pr.matches&&(lr="dark"),pr.addListener((function(n){lr=n.matches?"dark":"light"}));var hr=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,mr,gr,S,{}),r}return s(t,e),t}(Zn),vr=[];function $r(n,e){return $r[n]?$r[n](e):[]}function br(n,e,t){var r=n.slice();return r[28]=e[t],r[30]=t,r}function yr(n){var e,t,r=(n[28].text||n[28].val)+"";return{c:function(){Q(e=F("a"),"href","#index:"+n[30]),Q(e,"tabindex","-1"),rn(e,"has-focus",n[30]==n[0])},m:function(o,i){q(o,e,i),e.innerHTML=r,t=Z(e,"click",J(n[8]))},p:function(n,t){32&t&&r!==(r=(n[28].text||n[28].val)+"")&&(e.innerHTML=r),1&t&&rn(e,"has-focus",n[30]==n[0])},d:function(n){n&&G(e),t()}}}function wr(n){for(var e,t,r,o,i,a,c,u,s,d,f,l,g,m,h,v=new _e({props:{name:"paper-plane"}}),$=n[5],b=[],y=0;y<$.length;y+=1)b[y]=yr(br(n,$,y));return{c:function(){e=F("form"),t=F("textarea"),r=V(),o=F("div"),i=F("span"),a=V(),c=F("input"),u=V(),s=F("a"),Kn(v.$$.fragment),d=V(),f=F("div");for(var p=0;p<b.length;p+=1)b[p].c();Q(t,"id","chat_input"),Q(t,"placeholder",n[7]),Q(c,"type","file"),Q(o,"class","chat-input__upload-wrapper"),Q(s,"href","#send"),Q(s,"class","chat-input__send"),Q(f,"class",l="chat-input_autocomplete chat-input_autocomplete_"+n[1]),f.hidden=g=!n[5].length,Q(e,"class","chat-input")},m:function(l,p){q(l,e,p),H(e,t),n[23](t),H(e,r),H(e,o),H(o,i),H(o,a),H(o,c),n[27](c),H(e,u),H(e,s),Fn(v,s,null),H(e,d),H(e,f);for(var g=0;g<b.length;g+=1)b[g].m(f,null);m=!0,h=[Z(t,"change",n[24]),Z(t,"keydown",n[25]),Z(t,"keyup",n[26]),Z(c,"change",n[10]),Z(s,"click",J(n[9])),Z(e,"submit",J(n[22]))]},p:function(n,e){var r=p(e,1)[0];if((!m||128&r)&&Q(t,"placeholder",n[7]),289&r){var o;for($=n[5],o=0;o<$.length;o+=1){var i=br(n,$,o);b[o]?b[o].p(i,r):(b[o]=yr(i),b[o].c(),b[o].m(f,null))}for(;o<b.length;o+=1)b[o].d(1);b.length=$.length}(!m||2&r&&l!==(l="chat-input_autocomplete chat-input_autocomplete_"+n[1]))&&Q(f,"class",l),(!m||32&r&&g!==(g=!n[5].length))&&(f.hidden=g)},i:function(n){m||(Un(v.$$.fragment,n),m=!0)},o:function(n){zn(v.$$.fragment,n),m=!1},d:function(t){t&&G(e),n[23](null),n[27](null),Wn(v),K(b,t),C(h)}}}function _r(n,e,t){var r,o=x;n.$$.on_destroy.push((function(){return o()}));var i=e.dialog,a=void 0===i?{}:i;var c,u,s=0,d="none",f=0,l=vn("user");function g(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.space||"";t(2,c.value=E[0]+n+r+E[3],c),t(2,c.selectionStart=t(2,c.selectionEnd=(E[0]+n+r).length,c),c),r.length&&t(3,f=c.selectionStart)}function m(n){var e=p(n,4),r=e[0],o=e[1],i=e[2];e[3];t(1,d=":"==o&&i.length?"emojis":"/"!=o||r.length?"@"==o&&i.length?"nicks":"#"==o||"&"==o?"dialogs":"none":"commands"),t(0,s=0);var c=$r(d,{dialog:a,query:o+i,user:l});return c.length&&c.unshift({val:o+i}),c}function h(n){if(!c)return["","","",""];var e="",t="";return[c.value.substring(0,n).replace(/(\S)(\S*)$/,(function(n,r,o){return e=r,t=o,""})),e,t,c.value.substring(n)]}function v(n){var e=_[s];e&&g(e.val,n)}function $(n,e){_.length&&(n.preventDefault(),t(0,s+=e),s<0&&t(0,s=_.length-1),s>=_.length&&t(0,s=0),v({space:""}))}function b(){var n={message:c.value,method:"send",dialog:a};n.message=n.message.replace(/^\/close/i,"/part"),n.message=n.message.replace(/^\/j\b/i,"/join");(n.message.match(/^\/(\w+)\s*(\S*)/)||["","message",""]).slice(1);n.message.length&&l.send(n,(function(n){n.errors&&a&&(n.stopPropagation(),n.vars=[n.message,re(n.errors)],n.message='Could not send message "%1": %2',a.addMessage(n))})),t(2,c.value="",c),t(3,f=0)}function y(n){var e=n.target&&n.target.files||n.dataTransfer&&n.dataTransfer.files;if(e&&e.length){if(e.length>1)return console.log("Cannot upload more than one file.");var t=new FormData;t.append("file",e[0]),l.api.operation("uploadFile").perform({formData:t}).then((function(n){var e=n.res.body;if(e.files&&e.files.length)return g(e.files[0].url);e.errors&&a.addMessage({message:"Could not upload file: %1",vars:[ft(re(e.errors))],type:"error"})}))}}mn((function(){t(4,u.uploader=y,u)}));var w={ArrowDown:function(n){return $(n,n.shiftKey?4:1)},ArrowUp:function(n){return $(n,n.shiftKey?-4:-1)},Tab:function(n){return $(n,n.shiftKey?-1:1)},Enter:function(n){_[s]?(n.preventDefault(),v({space:" "})):n.altKey||n.ctrlKey||n.metaKey||n.shiftKey||(n.preventDefault(),b())},Fallback:function(n){},Release:function(n){1!=n.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(n.key)||t(3,f=c.selectionStart)}};var _,k,E,O;return n.$set=function(n){"dialog"in n&&t(12,a=n.dialog)},n.$$.update=function(){8&n.$$.dirty&&t(15,E=h(f)),32768&n.$$.dirty&&t(5,_=m(E)||[]),4096&n.$$.dirty&&(t(6,k=l.findDialog({connection_id:a.connection_id})),o(),o=M(k,(function(n){return t(16,r=n)}))),65600&n.$$.dirty&&t(7,O=k.is("unreachable")?ft("Connecting..."):ft("What is on your mind %1?",r.nick))},[s,d,c,f,u,_,k,O,function(n){t(0,s=parseInt(n.target.closest("a").href.replace(/.*index:/,""),10)),v({space:" "}),c.focus()},b,y,w,a,function(){return u},g,E,r,l,m,h,v,$,function(e){$n(n,e)},function(n){yn[n?"unshift":"push"]((function(){t(2,c=n)}))},function(n){t(3,f=c.selectionStart)},function(n){return(w[n.key]||w.Fallback)(n)},function(n){return w.Release(n)},function(n){yn[n?"unshift":"push"]((function(){t(4,u=n)}))}]}$r.commands=function(n){for(var e=n.query,t=[],r=0;r<vr.length;r++)if(0==vr[r].cmd.indexOf(e)){var o=vr[r].alias||vr[r].cmd,i=vr[r].example.replace(/</g,"&lt;");t.push({text:i,val:o})}return t},$r.dialogs=function(n){for(var e=n.dialog,t=n.query,r=n.user.findDialog({connection_id:e.connection_id}).dialogs.toArray(),o=[],i=0;i<r.length&&!(-1!=r[i].name.toLowerCase().indexOf(t)&&(o.push({text:r[i].name,val:r[i].dialog_id}),o.length>=20));i++);return o},$r.emojis=function(n){var e=n.query,t=[];return[":","_"].map((function(n){return n+e.slice(1,2)})).forEach((function(n){for(var r=ut(n,"group"),o=0;o<r.length&&(r[o].shortname.indexOf(e)>=0&&t.push({val:r[o].emoji,text:st(r[o].emoji)}),!(t.length>=20));o++);})),t},$r.nicks=function(n){var e=n.dialog,t=n.query,r=e.participants(),o=new RegExp("^"+se(t.slice(1)),"i"),i=[],a=!0,c=!1,u=void 0;try{for(var s,d=r[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var f=s.value;if(i.length>=20)break;f.nick.match(o)&&i.push({val:f.nick})}}catch(n){c=!0,u=n}finally{try{a||null==d.return||d.return()}finally{if(c)throw u}}return i},vr.push({cmd:"/me",example:"/me <msg>",description:"Send message as an action."}),vr.push({cmd:"/say",example:"/say <msg>",description:NaN}),vr.push({cmd:"/topic",example:"/topic or /topic <new topic>",description:"Show current topic, or set a new one."}),vr.push({cmd:"/whois",example:"/whois <nick>",description:"Show information about a user."}),vr.push({cmd:"/query",example:"/query <nick>",description:"Open up a new chat window with nick."}),vr.push({cmd:"/msg",example:"/msg <nick> <msg>",description:"Send a direct message to nick."}),vr.push({cmd:"/names",example:"/names",description:"Show participants in the channel."}),vr.push({cmd:"/join",example:"/join <#channel>",description:"Join channel and open up a chat window."}),vr.push({cmd:"/nick",example:"/nick <nick>",description:"Change your wanted nick."}),vr.push({cmd:"/part",example:"/part",description:"Leave channel, and close window."}),vr.push({cmd:"/close",example:"/close <nick>",description:"Close conversation with nick, defaults to current active."}),vr.push({cmd:"/kick",example:"/kick <nick>",description:"Kick a user from the current channel."}),vr.push({cmd:"/mode",example:"/mode [+|-][b|o|v] <user>",description:"Change mode of yourself or a user"}),vr.push({cmd:"/reconnect",example:"/reconnect",description:"Restart the current connection."}),vr.push({cmd:"/raw",example:"/raw <msg>",description:'Allow you to send any RFC 2812 message".'});var xr=function(e){function r(e){var t;return n(this,r),t=a(this,c(r).call(this)),Yn(i(t),e,_r,wr,S,{dialog:12,getUploadEl:13,add:14}),t}return s(r,e),t(r,[{key:"getUploadEl",get:function(){return this.$$.ctx[13]}},{key:"add",get:function(){return this.$$.ctx[14]}}]),r}(Zn);function kr(n){var e,t,r,o,i,a=new _e({props:{name:n[1],animation:n[2]}}),c=n[4].default,u=P(c,n,n[3],null);return{c:function(){e=F("div"),t=F("span"),Kn(a.$$.fragment),r=V(),u&&u.c(),Q(e,"class",o="message-status-line "+n[0])},m:function(n,o){q(n,e,o),H(e,t),Fn(a,t,null),H(t,r),u&&u.m(t,null),i=!0},p:function(n,t){var r=p(t,1)[0],s={};2&r&&(s.name=n[1]),4&r&&(s.animation=n[2]),a.$set(s),u&&u.p&&8&r&&u.p(A(c,n,n[3],null),T(c,n[3],r,null)),(!i||1&r&&o!==(o="message-status-line "+n[0]))&&Q(e,"class",o)},i:function(n){i||(Un(a.$$.fragment,n),Un(u,n),i=!0)},o:function(n){zn(a.$$.fragment,n),zn(u,n),i=!1},d:function(n){n&&G(e),Wn(a),u&&u.d(n)}}}function Er(n,e,t){var r=e.class,o=void 0===r?"":r,i=e.icon,a=void 0===i?"":i,c=e.animation,u=void 0===c?"":c,s=e.$$slots,d=void 0===s?{}:s,f=e.$$scope;return n.$set=function(n){"class"in n&&t(0,o=n.class),"icon"in n&&t(1,a=n.icon),"animation"in n&&t(2,u=n.animation),"$$scope"in n&&t(3,f=n.$$scope)},[o,a,u,f,d]}var Or=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Er,kr,S,{class:0,icon:1,animation:2}),r}return s(t,e),t}(Zn);function Cr(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function Nr(n,e,t){var r=n.slice();return r[16]=e[t],r[18]=t,r}function Sr(n){var e,t,r=ft("notifications"==n[1].dialog_id?"No notifications.":"No messages.")+"";return{c:function(){e=F("h2"),t=W(r)},m:function(n,r){q(n,e,r),H(e,t)},p:function(n,e){2&e&&r!==(r=ft("notifications"==n[1].dialog_id?"No notifications.":"No messages.")+"")&&nn(t,r)},d:function(n){n&&G(e)}}}function Mr(n){var e,t=new Or({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[Dr]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};524288&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function Dr(n){var e,t=ft("Loading...")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Rr(n){var e,t=new Or({props:{class:"for-last-read",icon:"comments",$$slots:{default:[Pr]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};524288&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function Pr(n){var e,t=ft("New messages")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ar(n){var e,t=new Or({props:{class:"for-day-changed",icon:"calendar-alt",$$slots:{default:[Lr]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};524296&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function Tr(n){var e,t=new Or({props:{class:"for-start-of-history",icon:"calendar-alt",$$slots:{default:[jr]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};524296&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function Lr(n){var e,t=n[16].ts.getHumanDate()+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:function(n,r){8&r&&t!==(t=n[16].ts.getHumanDate()+"")&&nn(e,t)},d:function(n){n&&G(e)}}}function jr(n){var e,t=ft("Started chatting on %1",n[16].ts.getHumanDate())+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:function(n,r){8&r&&t!==(t=ft("Started chatting on %1",n[16].ts.getHumanDate())+"")&&nn(e,t)},d:function(n){n&&G(e)}}}function Ir(n){var e,t,r,o=ft("%1 in %2",n[16].from,n[16].dialog_id)+"";return{c:function(){e=F("a"),t=W(o),Q(e,"href",r=Kr(n[16])),Q(e,"class","message__from"),tn(e,"color",n[16].color)},m:function(n,r){q(n,e,r),H(e,t)},p:function(n,i){8&i&&o!==(o=ft("%1 in %2",n[16].from,n[16].dialog_id)+"")&&nn(t,o),8&i&&r!==(r=Kr(n[16]))&&Q(e,"href",r),8&i&&tn(e,"color",n[16].color)},d:function(n){n&&G(e)}}}function Ur(n){var e,t,r,o,i=n[16].from+"";function a(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return((e=n)[15].apply(e,[n[16]].concat(r)))}return{c:function(){e=F("a"),t=W(i),Q(e,"href",r="#input:"+n[16].from),Q(e,"class","message__from"),tn(e,"color",n[16].color),Q(e,"tabindex","-1")},m:function(n,r){q(n,e,r),H(e,t),o=Z(e,"click",J(a))},p:function(o,a){n=o,8&a&&i!==(i=n[16].from+"")&&nn(t,i),8&a&&r!==(r="#input:"+n[16].from)&&Q(e,"href",r),8&a&&tn(e,"color",n[16].color)},d:function(n){n&&G(e),o()}}}function zr(n){var e,t=new _e({props:{name:"error"==n[16].type?"exclamation-circle":"info-circle"}});return t.$on("click",n[10]),{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};8&e&&(r.name="error"==n[16].type?"exclamation-circle":"info-circle"),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function Br(n){var e,t,r,o,i,a,c,u,s,d,f,l,p,g,m,h,v,$,b,y,w,_=n[16].ts.getHM()+"",x=n[16].ts.toLocaleString()+"",k=n[16].markdown+"",E=n[18]&&n[18]==n[3].length-n[4]&&Rr(n),O=[Tr,Ar],C=[];function N(n,e){return n[16].endOfHistory?0:-1}~(t=N(n))&&(r=C[t]=O[t](n));var S=new _e({props:{name:"pick:"+n[16].from,color:n[16].color}});function M(n,e){return n[1].connection_id?Ur:Ir}var D=M(n),R=D(n),P=("error"==n[16].type||"notice"==n[16].type)&&zr(n);return{c:function(){E&&E.c(),e=V(),r&&r.c(),o=V(),i=F("div"),Kn(S.$$.fragment),a=V(),c=F("b"),u=W(_),d=V(),f=F("div"),l=W(x),g=V(),R.c(),m=V(),h=F("div"),P&&P.c(),v=V(),Q(c,"class","message__ts"),Q(c,"aria-labelledby",s=n[16].id+"_ts"),Q(f,"role","tooltip"),Q(f,"id",p=n[16].id+"_ts"),$=new cn(k,null),Q(h,"class","message__text"),Q(i,"class",b="message is-type-"+n[16].type),Q(i,"data-index",n[18]),rn(i,"is-not-present",!n[9](n[16])),rn(i,"is-sent-by-you",n[16].from==n[0].nick),rn(i,"is-highlighted",n[16].highlight),rn(i,"has-not-same-from",!n[8](n[18])&&!n[6](n[18])),rn(i,"has-same-from",n[8](n[18])&&!n[6](n[18]))},m:function(r,s){E&&E.m(r,s),q(r,e,s),~t&&C[t].m(r,s),q(r,o,s),q(r,i,s),Fn(S,i,null),H(i,a),H(i,c),H(c,u),H(i,d),H(i,f),H(f,l),H(i,g),R.m(i,null),H(i,m),H(i,h),P&&P.m(h,null),H(h,v),$.m(h),y=!0,w=Z(i,"click",n[7])},p:function(n,a){n[18]&&n[18]==n[3].length-n[4]?E?(E.p(n,a),Un(E,1)):((E=Rr(n)).c(),Un(E,1),E.m(e.parentNode,e)):E&&(jn(),zn(E,1,1,(function(){E=null})),In());var d=t;(t=N(n))===d?~t&&C[t].p(n,a):(r&&(jn(),zn(C[d],1,1,(function(){C[d]=null})),In()),~t?((r=C[t])||(r=C[t]=O[t](n)).c(),Un(r,1),r.m(o.parentNode,o)):r=null);var g={};8&a&&(g.name="pick:"+n[16].from),8&a&&(g.color=n[16].color),S.$set(g),(!y||8&a)&&_!==(_=n[16].ts.getHM()+"")&&nn(u,_),(!y||8&a&&s!==(s=n[16].id+"_ts"))&&Q(c,"aria-labelledby",s),(!y||8&a)&&x!==(x=n[16].ts.toLocaleString()+"")&&nn(l,x),(!y||8&a&&p!==(p=n[16].id+"_ts"))&&Q(f,"id",p),D===(D=M(n))&&R?R.p(n,a):(R.d(1),(R=D(n))&&(R.c(),R.m(i,m))),"error"==n[16].type||"notice"==n[16].type?P?(P.p(n,a),Un(P,1)):((P=zr(n)).c(),Un(P,1),P.m(h,v)):P&&(jn(),zn(P,1,1,(function(){P=null})),In()),(!y||8&a)&&k!==(k=n[16].markdown+"")&&$.p(k),(!y||8&a&&b!==(b="message is-type-"+n[16].type))&&Q(i,"class",b),520&a&&rn(i,"is-not-present",!n[9](n[16])),9&a&&rn(i,"is-sent-by-you",n[16].from==n[0].nick),8&a&&rn(i,"is-highlighted",n[16].highlight),328&a&&rn(i,"has-not-same-from",!n[8](n[18])&&!n[6](n[18])),328&a&&rn(i,"has-same-from",n[8](n[18])&&!n[6](n[18]))},i:function(n){y||(Un(E),Un(r),Un(S.$$.fragment,n),Un(P),y=!0)},o:function(n){zn(E),zn(r),zn(S.$$.fragment,n),zn(P),y=!1},d:function(n){E&&E.d(n),n&&G(e),~t&&C[t].d(n),n&&G(o),n&&G(i),Wn(S),R.d(),P&&P.d(),w()}}}function Hr(n){var e,t=new Or({props:{class:"for-loading",icon:"spinner",animation:"spin",$$slots:{default:[qr]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};524288&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function qr(n){var e,t,r=ft("Loading...")+"";return{c:function(){e=F("a"),t=W(r),Q(e,"href",Le("/"))},m:function(n,r){q(n,e,r),H(e,t)},p:x,d:function(n){n&&G(e)}}}function Gr(n){for(var e,t,r,o,i,a=n[3].length>40&&n[1].is("loading"),c=n[0].is&&n[0].is("unreachable")||!n[1].is("success"),u=0==n[3].length&&Sr(n),s=a&&Mr(n),d=n[3],f=[],l=0;l<d.length;l+=1)f[l]=Br(Nr(n,d,l));var g=function(n){return zn(f[n],1,1,(function(){f[n]=null}))},m=c&&Hr(n);return{c:function(){u&&u.c(),e=V(),s&&s.c(),t=V();for(var n=0;n<f.length;n+=1)f[n].c();r=V(),m&&m.c(),o=Y()},m:function(n,a){u&&u.m(n,a),q(n,e,a),s&&s.m(n,a),q(n,t,a);for(var c=0;c<f.length;c+=1)f[c].m(n,a);q(n,r,a),m&&m.m(n,a),q(n,o,a),i=!0},p:function(n,i){var l=p(i,1)[0];if(0==n[3].length?u?u.p(n,l):((u=Sr(n)).c(),u.m(e.parentNode,e)):u&&(u.d(1),u=null),10&l&&(a=n[3].length>40&&n[1].is("loading")),a?s?(s.p(n,l),Un(s,1)):((s=Mr(n)).c(),Un(s,1),s.m(t.parentNode,t)):s&&(jn(),zn(s,1,1,(function(){s=null})),In()),2015&l){var h;for(d=n[3],h=0;h<d.length;h+=1){var v=Nr(n,d,h);f[h]?(f[h].p(v,l),Un(f[h],1)):(f[h]=Br(v),f[h].c(),Un(f[h],1),f[h].m(r.parentNode,r))}for(jn(),h=d.length;h<f.length;h+=1)g(h);In()}3&l&&(c=n[0].is&&n[0].is("unreachable")||!n[1].is("success")),c?m?(m.p(n,l),Un(m,1)):((m=Hr(n)).c(),Un(m,1),m.m(o.parentNode,o)):m&&(jn(),zn(m,1,1,(function(){m=null})),In())},i:function(n){if(!i){Un(s);for(var e=0;e<d.length;e+=1)Un(f[e]);Un(m),i=!0}},o:function(n){zn(s),f=f.filter(Boolean);for(var e=0;e<f.length;e+=1)zn(f[e]);zn(m),i=!1},d:function(n){u&&u.d(n),n&&G(e),s&&s.d(n),n&&G(t),K(f,n),n&&G(r),m&&m.d(n),n&&G(o)}}}function Kr(n){return["","chat",n.connection_id,n.dialog_id].map(encodeURIComponent).join("/")+"#"+n.ts.toISOString()}function Fr(n,e,t){var r,o=e.connection,i=e.dialog,a=e.input,c=vn("user"),u=c.events;R(n,u,(function(n){return t(11,r=n)}));var s=[],d=0;function f(n,e){var r=[];"Password protected."==n.frozen?r.push(l({message:"Conversation is password protected. Go to [settings](%1) to enter the password.",vars:["#activeMenu:settings"]})):o.frozen?o.is("unreachable")||r.push(l({message:"Disconnected. Your connection %1 can be edited in [settings](%2).",vars:[o.name,Le("/chat/"+o.connection_id+"#activeMenu:settings")]})):n.frozen&&r.push(l({message:pt(o,n).replace(/\.$/,""),vars:[]})),null===e.wantNotifications&&r.push(l({message:"Do you want notifications when someone sends you a private message? [Yes](%1) / [No](%2)",vars:["#call:events:requestPermissionToNotify","#call:events:rejectNotifications"]})),t(3,s=r.length?n.messages.concat(r):n.messages),t(4,d=n.unread+r.length)}function l(n){return function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?Cr(Object(t),!0).forEach((function(e){At(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Cr(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}({color:o.color,from:"Convos",markdown:lt.apply(void 0,[n.message].concat(_(n.vars))),ts:new Ut,type:"error"},n)}return n.$set=function(n){"connection"in n&&t(0,o=n.connection),"dialog"in n&&t(1,i=n.dialog),"input"in n&&t(2,a=n.input)},n.$$.update=function(){2050&n.$$.dirty&&f(i,r)},[o,i,a,s,d,u,function(n){return 0!=n&&s[n].ts.getDate()!=s[n-1].ts.getDate()},function(n){if(!i.connection_id){var e=n.target.closest(".message"),t=s[e.dataset.index];t&&(n.preventDefault(),Pe(Kr(t)))}},function(n){return 0!=n&&s[n].fromId==s[n-1].fromId},function(n){return n.fromId==i.connection_id||!i.dialog_id||i.findParticipant(n.fromId)},function(n){var e=n.target.closest(".message");c.embedMaker.toggleDetails(e,s[e.dataset.index])},r,c,f,l,function(n){return a.add(n.from)}]}var Wr=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Fr,Gr,S,{connection:0,dialog:1,input:2}),r}return s(t,e),t}(Zn);function Vr(n){var e,t,r,o,i,a=new _e({props:{animation:n[3],name:n[0]}}),c=n[12].default,u=P(c,n,n[11],null);return{c:function(){e=F("button"),Kn(a.$$.fragment),t=V(),u&&u.c(),Q(e,"class",r=n[4].join(" ")),e.disabled=n[5],Q(e,"type",n[2])},m:function(r,c){q(r,e,c),Fn(a,e,null),H(e,t),u&&u.m(e,null),o=!0,i=Z(e,"click",n[13])},p:function(n,t){var i=p(t,1)[0],s={};8&i&&(s.animation=n[3]),1&i&&(s.name=n[0]),a.$set(s),u&&u.p&&2048&i&&u.p(A(c,n,n[11],null),T(c,n[11],i,null)),(!o||16&i&&r!==(r=n[4].join(" ")))&&Q(e,"class",r),(!o||32&i)&&(e.disabled=n[5]),(!o||4&i)&&Q(e,"type",n[2])},i:function(n){o||(Un(a.$$.fragment,n),Un(u,n),o=!0)},o:function(n){zn(a.$$.fragment,n),zn(u,n),o=!1},d:function(n){n&&G(e),Wn(a),u&&u.d(n),i()}}}function Yr(n,e,t){var r,o=x,i=function(){return o(),o=M(m,(function(n){return t(9,r=n)})),m};n.$$.on_destroy.push((function(){return o()}));var a="",c=[],u=!1,s=0,d=e.disabled,f=void 0!==d&&d,l=e.icon,p=void 0===l?"":l,g=e.op,m=void 0===g?new ve({api:!1,id:""}):g;i();var h=e.type,v=void 0===h?"":h;function $(n){n&&t(8,s=(new Ut).toEpoch()),t(3,a=n?"spin":""),t(7,u=n)}var b,y=e.$$slots,w=void 0===y?{}:y,_=e.$$scope;return n.$set=function(n){"disabled"in n&&t(6,f=n.disabled),"icon"in n&&t(0,p=n.icon),"op"in n&&i(t(1,m=n.op)),"type"in n&&t(2,v=n.type),"$$scope"in n&&t(11,_=n.$$scope)},n.$$.update=function(){512&n.$$.dirty&&r.is("loading")&&$(!0),768&n.$$.dirty&&(r.is("loading")||setTimeout((function(){return $(!1)}),700-((new Ut).toEpoch()-s))),1&n.$$.dirty&&t(4,c=["btn","for-"+(p||"default")]),192&n.$$.dirty&&t(5,b=f||u)},[p,m,v,a,c,b,f,u,s,r,$,_,w,function(e){$n(n,e)}]}var Zr=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Yr,Vr,S,{disabled:6,icon:0,op:1,type:2}),r}return s(t,e),t}(Zn),Jr=function(n){return{}},Qr=function(n){return{}};function Xr(n){var e,t,r,o,i,a,c,u,s=new _e({props:{family:"regular",name:n[7]}});s.$on("click",n[14]);var d=n[9].label,f=P(d,n,n[8],Qr);return{c:function(){e=F("div"),t=F("input"),r=V(),Kn(s.$$.fragment),o=V(),i=F("label"),f||(a=W("Label")),f&&f.c(),Q(t,"type","checkbox"),Q(t,"id",n[4]),Q(t,"name",n[3]),t.__value=n[1],t.value=t.__value,t.disabled=n[2],Q(i,"for",n[4]),Q(e,"class","checkbox"),rn(e,"has-focus",n[6]),rn(e,"is-disabled",n[2])},m:function(d,l){q(d,e,l),H(e,t),t.checked=n[0],n[11](t),H(e,r),Fn(s,e,null),H(e,o),H(e,i),f||H(i,a),f&&f.m(i,null),c=!0,u=[Z(t,"change",n[10]),Z(t,"blur",n[12]),Z(t,"focus",n[13])]},p:function(n,r){var o=p(r,1)[0];(!c||16&o)&&Q(t,"id",n[4]),(!c||8&o)&&Q(t,"name",n[3]),(!c||2&o)&&(t.__value=n[1]),t.value=t.__value,(!c||4&o)&&(t.disabled=n[2]),1&o&&(t.checked=n[0]);var a={};128&o&&(a.name=n[7]),s.$set(a),f&&f.p&&256&o&&f.p(A(d,n,n[8],Qr),T(d,n[8],o,Jr)),(!c||16&o)&&Q(i,"for",n[4]),64&o&&rn(e,"has-focus",n[6]),4&o&&rn(e,"is-disabled",n[2])},i:function(n){c||(Un(s.$$.fragment,n),Un(f,n),c=!0)},o:function(n){zn(s.$$.fragment,n),zn(f,n),c=!1},d:function(t){t&&G(e),n[11](null),Wn(s),f&&f.d(t),C(u)}}}function no(n,e,t){var r,o=e.checked,i=void 0!==o&&o,a=e.disabled,c=void 0!==a&&a,u=e.name,s=void 0===u?"":u,d=e.id,f=void 0===d?s?"form_"+s:me():d,l=e.value,p=void 0===l?1:l,g=!1,m=e.$$slots,h=void 0===m?{}:m,v=e.$$scope;var $;return n.$set=function(n){"checked"in n&&t(0,i=n.checked),"disabled"in n&&t(2,c=n.disabled),"name"in n&&t(3,s=n.name),"id"in n&&t(4,f=n.id),"value"in n&&t(1,p=n.value),"$$scope"in n&&t(8,v=n.$$scope)},n.$$.update=function(){32&n.$$.dirty&&r&&!r.syncValue&&(t(5,r.syncValue=function(){var n;t(0,(n=[this.checked,this.value],i=n[0],p=n[1],n),i,(t(1,p),t(5,r)))},r),r.syncValue()),1&n.$$.dirty&&t(7,$=i?"check-square":"square")},[i,p,c,s,f,r,g,$,v,h,function(){i=this.checked,t(0,i),t(5,r)},function(n){yn[n?"unshift":"push"]((function(){t(5,r=n)}))},function(){t(6,g=!1)},function(){t(6,g=!0)},function(){c||t(0,i=!i)}]}var eo=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,no,Xr,S,{checked:0,disabled:2,name:3,id:4,value:1}),r}return s(t,e),t}(Zn);function to(n){var e,t,r=ft(n[1].error())+"";return{c:function(){e=F("div"),t=W(r),Q(e,"class","error")},m:function(n,r){q(n,e,r),H(e,t)},p:function(n,e){2&e&&r!==(r=ft(n[1].error())+"")&&nn(t,r)},d:function(n){n&&G(e)}}}function ro(n){var e,t=n[1].is("error"),r=t&&to(n);return{c:function(){r&&r.c(),e=Y()},m:function(n,t){r&&r.m(n,t),q(n,e,t)},p:function(n,o){var i=p(o,1)[0];2&i&&(t=n[1].is("error")),t?r?r.p(n,i):((r=to(n)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:x,o:x,d:function(n){r&&r.d(n),n&&G(e)}}}function oo(n,e,t){var r,o=x,i=function(){return o(),o=M(c,(function(n){return t(1,r=n)})),c};n.$$.on_destroy.push((function(){return o()}));var a=e.op,c=void 0===a?new ve({}):a;return i(),n.$set=function(n){"op"in n&&i(t(0,c=n.op))},[c,r]}var io=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,oo,ro,S,{op:0}),r}return s(t,e),t}(Zn);function ao(n){var e,t,r,o,i=ft(n[0].dialog_id?"Conversation":"Connection")+"",a=new _e({props:{name:"times-circle"}});return{c:function(){e=F("h2"),t=W(i),r=V(),Kn(a.$$.fragment)},m:function(n,i){q(n,e,i),H(e,t),q(n,r,i),Fn(a,n,i),o=!0},p:function(n,e){(!o||1&e)&&i!==(i=ft(n[0].dialog_id?"Conversation":"Connection")+"")&&nn(t,i)},i:function(n){o||(Un(a.$$.fragment,n),o=!0)},o:function(n){zn(a.$$.fragment,n),o=!1},d:function(n){n&&G(e),n&&G(r),Wn(a,n)}}}function co(n){var e,t={href:n[0].path,class:"sidebar__header for-settings",$$slots:{default:[ao]},$$scope:{ctx:n}},r=new Be({props:t});return n[2](r),{c:function(){Kn(r.$$.fragment)},m:function(n,t){Fn(r,n,t),e=!0},p:function(n,e){var t=p(e,1)[0],o={};1&t&&(o.href=n[0].path),9&t&&(o.$$scope={dirty:t,ctx:n}),r.$set(o)},i:function(n){e||(Un(r.$$.fragment,n),e=!0)},o:function(n){zn(r.$$.fragment,n),e=!1},d:function(e){n[2](null),Wn(r,e)}}}function uo(n,e,t){var r,o=e.dialog,i=void 0===o?{}:o;return n.$set=function(n){"dialog"in n&&t(0,i=n.dialog)},n.$$.update=function(){2&n.$$.dirty&&r&&r.focus()},[i,r,function(n){yn[n?"unshift":"push"]((function(){t(1,r=n)}))}]}var so=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,uo,co,S,{dialog:0}),r}return s(t,e),t}(Zn),fo=function(n){return{}},lo=function(n){return{}};function po(n){var e,t,r,o,i,a,c,u=n[8].label,s=P(u,n,n[7],lo);return{c:function(){e=F("div"),t=F("label"),s||(r=W("Label")),s&&s.c(),o=V(),i=F("textarea"),Q(t,"for",n[3]),Q(i,"name",n[2]),Q(i,"placeholder",n[4]),Q(i,"id",n[3]),i.readOnly=n[5],Q(e,"class","text-area"),e.hidden=n[1]},m:function(u,d){q(u,e,d),H(e,t),s||H(t,r),s&&s.m(t,null),H(e,o),H(e,i),n[9](i),en(i,n[0]),a=!0,c=Z(i,"input",n[10])},p:function(n,r){var o=p(r,1)[0];s&&s.p&&128&o&&s.p(A(u,n,n[7],lo),T(u,n[7],o,fo)),(!a||8&o)&&Q(t,"for",n[3]),(!a||4&o)&&Q(i,"name",n[2]),(!a||16&o)&&Q(i,"placeholder",n[4]),(!a||8&o)&&Q(i,"id",n[3]),(!a||32&o)&&(i.readOnly=n[5]),1&o&&en(i,n[0]),(!a||2&o)&&(e.hidden=n[1])},i:function(n){a||(Un(s,n),a=!0)},o:function(n){zn(s,n),a=!1},d:function(t){t&&G(e),s&&s.d(t),n[9](null),c()}}}function go(n,e,t){var r,o=e.hidden,i=void 0!==o&&o,a=e.name,c=void 0===a?"":a,u=e.id,s=void 0===u?c?"form_"+c:me():u,d=e.placeholder,f=void 0===d?"":d,l=e.readonly,p=void 0!==l&&l,g=e.value,m=void 0===g?"":g,h=e.$$slots,v=void 0===h?{}:h,$=e.$$scope;return n.$set=function(n){"hidden"in n&&t(1,i=n.hidden),"name"in n&&t(2,c=n.name),"id"in n&&t(3,s=n.id),"placeholder"in n&&t(4,f=n.placeholder),"readonly"in n&&t(5,p=n.readonly),"value"in n&&t(0,m=n.value),"$$scope"in n&&t(7,$=n.$$scope)},n.$$.update=function(){64&n.$$.dirty&&r&&!r.syncValue&&(t(6,r.syncValue=function(){t(0,m=this.value)},r),r.syncValue())},[m,i,c,s,f,p,r,$,v,function(n){yn[n?"unshift":"push"]((function(){t(6,r=n)}))},function(){m=this.value,t(0,m),t(6,r)}]}var mo=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,go,po,S,{hidden:1,name:2,id:3,placeholder:4,readonly:5,value:0}),r}return s(t,e),t}(Zn);function ho(n){var e,t;return{c:function(){Q(e=F("input"),"type","hidden"),Q(e,"name","connection_id"),e.value=t=n[0].connection_id},m:function(n,t){q(n,e,t)},p:function(n,r){1&r&&t!==(t=n[0].connection_id)&&(e.value=t)},d:function(n){n&&G(e)}}}function vo(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Host and port")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function $o(n){return{c:x,m:x,p:x,d:x}}function bo(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Nickname")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function yo(n){return{c:x,m:x,p:x,d:x}}function wo(n){var e,t=new Ve({props:{name:"dialog",placeholder:ft("Ex: #convos"),$$slots:{default:[ko],label:[xo]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};2097152&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function _o(n){var e,t;function r(e){n[16].call(null,e)}var o={$$slots:{default:[Oo],label:[Eo]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new eo({props:o});return yn.push((function(){return Gn(i,"checked",r)})),{c:function(){Kn(i.$$.fragment)},m:function(n,e){Fn(i,n,e),t=!0},p:function(n,t){var r={};2097152&t&&(r.$$scope={dirty:t,ctx:n}),!e&&32&t&&(e=!0,r.checked=n[5],Nn((function(){return e=!1}))),i.$set(r)},i:function(n){t||(Un(i.$$.fragment,n),t=!0)},o:function(n){zn(i.$$.fragment,n),t=!1},d:function(n){Wn(i,n)}}}function xo(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Conversation name")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function ko(n){return{c:x,m:x,p:x,d:x}}function Eo(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Want to be connected")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Oo(n){return{c:x,m:x,p:x,d:x}}function Co(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Secure connection (TLS)")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function No(n){return{c:x,m:x,p:x,d:x}}function So(n){var e,t;function r(e){n[18].call(null,e)}var o={name:"tls_verify",$$slots:{default:[Do],label:[Mo]},$$scope:{ctx:n}};void 0!==n[4]&&(o.checked=n[4]);var i=new eo({props:o});return yn.push((function(){return Gn(i,"checked",r)})),{c:function(){Kn(i.$$.fragment)},m:function(n,e){Fn(i,n,e),t=!0},p:function(n,t){var r={};2097152&t&&(r.$$scope={dirty:t,ctx:n}),!e&&16&t&&(e=!0,r.checked=n[4],Nn((function(){return e=!1}))),i.$set(r)},i:function(n){t||(Un(i.$$.fragment,n),t=!0)},o:function(n){zn(i.$$.fragment,n),t=!1},d:function(n){Wn(i,n)}}}function Mo(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Verify certificate (TLS)")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Do(n){return{c:x,m:x,p:x,d:x}}function Ro(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Show advanced settings")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Po(n){return{c:x,m:x,p:x,d:x}}function Ao(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Username")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function To(n){return{c:x,m:x,p:x,d:x}}function Lo(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Password")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function jo(n){return{c:x,m:x,p:x,d:x}}function Io(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("On-connect commands")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Uo(n){return{c:x,m:x,p:x,d:x}}function zo(n){var e,t=new Zr({props:{icon:"save",op:n[7],$$slots:{default:[Ho]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};2097152&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function Bo(n){var e,t,r=new Zr({props:{icon:"save",op:n[9],$$slots:{default:[qo]},$$scope:{ctx:n}}}),o=new Zr({props:{icon:"trash",type:"button",op:n[8],$$slots:{default:[Go]},$$scope:{ctx:n}}});return o.$on("click",n[10]),{c:function(){Kn(r.$$.fragment),e=V(),Kn(o.$$.fragment)},m:function(n,i){Fn(r,n,i),q(n,e,i),Fn(o,n,i),t=!0},p:function(n,e){var t={};2097152&e&&(t.$$scope={dirty:e,ctx:n}),r.$set(t);var i={};2097152&e&&(i.$$scope={dirty:e,ctx:n}),o.$set(i)},i:function(n){t||(Un(r.$$.fragment,n),Un(o.$$.fragment,n),t=!0)},o:function(n){zn(r.$$.fragment,n),zn(o.$$.fragment,n),t=!1},d:function(n){Wn(r,n),n&&G(e),Wn(o,n)}}}function Ho(n){var e,t=ft("Create")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function qo(n){var e,t=ft("Update")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Go(n){var e,t=ft("Delete")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ko(n){var e,t,r,o,i,a,c,u,s,d,f,l,g,m,h,v,$,b,y,w,_,k,E,O,C,N,S,M,D=n[0].connection_id&&ho(n),R=new Ve({props:{name:"server",placeholder:ft("Ex: chat.freenode.net:6697"),readonly:n[6].forced_connection,$$slots:{default:[$o],label:[vo]},$$scope:{ctx:n}}}),P=n[6].forced_connection&&function(n){var e,t=lt("Connection is locked by %1.",n[6].contact)+"";return{c:function(){e=F("p")},m:function(n,r){q(n,e,r),e.innerHTML=t},p:x,d:function(n){n&&G(e)}}}(n),A=new Ve({props:{name:"nick",placeholder:ft("Ex: your-name"),$$slots:{default:[yo],label:[bo]},$$scope:{ctx:n}}}),T=[_o,wo],L=[];function j(n,e){return n[0].url?0:1}function I(e){n[17].call(null,e)}d=j(n),f=L[d]=T[d](n);var U={name:"tls",$$slots:{default:[No],label:[Co]},$$scope:{ctx:n}};void 0!==n[3]&&(U.checked=n[3]);var z=new eo({props:U});yn.push((function(){return Gn(z,"checked",I)}));var B=n[3]&&So(n);function K(e){n[19].call(null,e)}var W={$$slots:{default:[Po],label:[Ro]},$$scope:{ctx:n}};void 0!==n[2]&&(W.checked=n[2]);var Y=new eo({props:W});yn.push((function(){return Gn(Y,"checked",K)}));var X=new Ve({props:{name:"username",hidden:!n[2],$$slots:{default:[To],label:[Ao]},$$scope:{ctx:n}}}),nn=new Ve({props:{type:"password",name:"password",hidden:!n[2],$$slots:{default:[jo],label:[Lo]},$$scope:{ctx:n}}}),en=new mo({props:{name:"on_connect_commands",hidden:!n[2],$$slots:{default:[Uo],label:[Io]},$$scope:{ctx:n}}}),tn=[Bo,zo],rn=[];function on(n,e){return n[0].url?0:1}k=on(n),E=rn[k]=tn[k](n);var an=new io({props:{op:n[7]}}),cn=new io({props:{op:n[8]}}),un=new io({props:{op:n[9]}});return{c:function(){e=F("form"),D&&D.c(),t=V(),r=F("input"),o=V(),i=F("input"),a=V(),Kn(R.$$.fragment),c=V(),P&&P.c(),u=V(),Kn(A.$$.fragment),s=V(),f.c(),l=V(),Kn(z.$$.fragment),m=V(),B&&B.c(),h=V(),Kn(Y.$$.fragment),$=V(),Kn(X.$$.fragment),b=V(),Kn(nn.$$.fragment),y=V(),Kn(en.$$.fragment),w=V(),_=F("div"),E.c(),O=V(),Kn(an.$$.fragment),C=V(),Kn(cn.$$.fragment),N=V(),Kn(un.$$.fragment),Q(r,"type","hidden"),Q(r,"name","url"),Q(i,"type","hidden"),Q(i,"name","wanted_state"),Q(_,"class","form-actions"),Q(e,"method","post")},m:function(f,p){q(f,e,p),D&&D.m(e,null),H(e,t),H(e,r),H(e,o),H(e,i),H(e,a),Fn(R,e,null),H(e,c),P&&P.m(e,null),H(e,u),Fn(A,e,null),H(e,s),L[d].m(e,null),H(e,l),Fn(z,e,null),H(e,m),B&&B.m(e,null),H(e,h),Fn(Y,e,null),H(e,$),Fn(X,e,null),H(e,b),Fn(nn,e,null),H(e,y),Fn(en,e,null),H(e,w),H(e,_),rn[k].m(_,null),H(e,O),Fn(an,e,null),H(e,C),Fn(cn,e,null),H(e,N),Fn(un,e,null),n[20](e),S=!0,M=Z(e,"submit",J(n[11]))},p:function(n,r){var o=p(r,1)[0];n[0].connection_id?D?D.p(n,o):((D=ho(n)).c(),D.m(e,t)):D&&(D.d(1),D=null);var i={};2097152&o&&(i.$$scope={dirty:o,ctx:n}),R.$set(i),n[6].forced_connection&&P.p(n,o);var a={};2097152&o&&(a.$$scope={dirty:o,ctx:n}),A.$set(a);var c=d;(d=j(n))===c?L[d].p(n,o):(jn(),zn(L[c],1,1,(function(){L[c]=null})),In(),(f=L[d])||(f=L[d]=T[d](n)).c(),Un(f,1),f.m(e,l));var u={};2097152&o&&(u.$$scope={dirty:o,ctx:n}),!g&&8&o&&(g=!0,u.checked=n[3],Nn((function(){return g=!1}))),z.$set(u),n[3]?B?(B.p(n,o),Un(B,1)):((B=So(n)).c(),Un(B,1),B.m(e,h)):B&&(jn(),zn(B,1,1,(function(){B=null})),In());var s={};2097152&o&&(s.$$scope={dirty:o,ctx:n}),!v&&4&o&&(v=!0,s.checked=n[2],Nn((function(){return v=!1}))),Y.$set(s);var m={};4&o&&(m.hidden=!n[2]),2097152&o&&(m.$$scope={dirty:o,ctx:n}),X.$set(m);var $={};4&o&&($.hidden=!n[2]),2097152&o&&($.$$scope={dirty:o,ctx:n}),nn.$set($);var b={};4&o&&(b.hidden=!n[2]),2097152&o&&(b.$$scope={dirty:o,ctx:n}),en.$set(b);var y=k;(k=on(n))===y?rn[k].p(n,o):(jn(),zn(rn[y],1,1,(function(){rn[y]=null})),In(),(E=rn[k])||(E=rn[k]=tn[k](n)).c(),Un(E,1),E.m(_,null))},i:function(n){S||(Un(R.$$.fragment,n),Un(A.$$.fragment,n),Un(f),Un(z.$$.fragment,n),Un(B),Un(Y.$$.fragment,n),Un(X.$$.fragment,n),Un(nn.$$.fragment,n),Un(en.$$.fragment,n),Un(E),Un(an.$$.fragment,n),Un(cn.$$.fragment,n),Un(un.$$.fragment,n),S=!0)},o:function(n){zn(R.$$.fragment,n),zn(A.$$.fragment,n),zn(f),zn(z.$$.fragment,n),zn(B),zn(Y.$$.fragment,n),zn(X.$$.fragment,n),zn(nn.$$.fragment,n),zn(en.$$.fragment,n),zn(E),zn(an.$$.fragment,n),zn(cn.$$.fragment,n),zn(un.$$.fragment,n),S=!1},d:function(t){t&&G(e),D&&D.d(),Wn(R),P&&P.d(),Wn(A),L[d].d(),Wn(z),B&&B.d(),Wn(Y),Wn(X),Wn(nn),Wn(en),rn[k].d(),Wn(an),Wn(cn),Wn(un),n[20](null),M()}}}function Fo(n,e,t){var r=e.dialog,o=void 0===r?{}:r,i=vn("settings"),a=vn("user"),c=a.api.operation("createConnection"),u=a.api.operation("removeConnection"),s=a.api.operation("updateConnection");[c,s].forEach((function(n){n.on("start",(function(n){n.body.on_connect_commands=n.body.on_connect_commands.split("\n").map((function(n){return n.trim()}))}))}));var d,f={},l=!1,p=!1,g=!1,m=!1;function h(){i.forced_connection&&t(1,d.server.value=i.default_connection,d),t(1,d.nick.value=a.email.replace(/@.*/,"").replace(/\W/g,"_"),d),t(3,p=!0),t(5,m=!0);var n=new URL(location.href);if(!n.searchParams.get("uri"))return je(d,n);var e=new Tt(n.searchParams.get("uri")),r=e.searchParams;e.host&&t(1,d.server.value=e.host,d),e.password&&t(1,d.password.value=e.password,d),e.username&&t(1,d.username.value=e.username,d),r.get("nick")&&t(1,d.nick.value=r.get("nick"),d),e.pathname&&d.dialog&&t(1,d.dialog.value=decodeURIComponent(e.pathname.split("/").filter((function(n){return n.length}))[0]||""),d),Number(r.get("tls")||0)&&t(3,p=!0),Number(r.get("tls_verify")||0)&&t(4,g=!0)}function v(){f.url&&(t(1,d.server.value=f.url.host,d),t(1,d.nick.value=f.url.searchParams.get("nick")||"",d),t(1,d.on_connect_commands.value=f.on_connect_commands.join("\n"),d),t(1,d.password.value=f.url.password,d),t(1,d.username.value=f.url.username,d),t(1,d.url.value=f.url.toString(),d),t(3,p="1"==f.url.searchParams.get("tls")),t(4,g="1"==f.url.searchParams.get("tls_verify")),t(5,m="connected"==f.wanted_state))}function $(){return($=Xn(Jn.mark((function n(e){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u.perform(f);case 2:a.removeDialog(f),Pe("/chat");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function b(){return(b=Xn(Jn.mark((function n(e){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d.server.value){n.next=2;break}return n.abrupt("return");case 2:if(t(1,d.url.value=new Tt("irc://localhost:6667").fromForm(e.target).toString(),d),!f.connection_id){n.next=10;break}return n.next=6,s.perform(e.target);case 6:t(0,f=a.ensureDialog(s.res.body)),v(),n.next=14;break;case 10:return n.next=12,c.perform(e.target);case 12:Pe(a.ensureDialog(c.res.body).path);case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return mn(Xn(Jn.mark((function n(){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d){n.next=2;break}return n.abrupt("return");case 2:return t(0,f=a.findDialog({connection_id:o.connection_id})||{}),n.abrupt("return",f.url?v():h());case 4:case"end":return n.stop()}}),n)})))),n.$set=function(n){"dialog"in n&&t(12,o=n.dialog)},n.$$.update=function(){34&n.$$.dirty&&d&&t(1,d.wanted_state.value=m?"connected":"disconnected",d)},[f,d,l,p,g,m,i,c,u,s,function(n){return $.apply(this,arguments)},function(n){return b.apply(this,arguments)},o,a,h,v,function(n){t(5,m=n)},function(n){t(3,p=n)},function(n){t(4,g=n)},function(n){t(2,l=n)},function(n){yn[n?"unshift":"push"]((function(){t(1,d=n)}))}]}var Wo=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Fo,Ko,S,{dialog:12}),r}return s(t,e),t}(Zn);function Vo(n){var e,t,r=ft("Currently connecting to %1.",n[3])+"";return{c:function(){e=F("p"),t=W(r)},m:function(n,r){q(n,e,r),H(e,t)},p:function(n,e){8&e&&r!==(r=ft("Currently connecting to %1.",n[3])+"")&&nn(t,r)},d:function(n){n&&G(e)}}}function Yo(n){var e,t,r=ft("Currently connected to %1.",n[3])+"";return{c:function(){e=F("p"),t=W(r)},m:function(n,r){q(n,e,r),H(e,t)},p:function(n,e){8&e&&r!==(r=ft("Currently connected to %1.",n[3])+"")&&nn(t,r)},d:function(n){n&&G(e)}}}function Zo(n){var e,t,r=ft("Currently disconnected from %1.",n[3])+"";return{c:function(){e=F("p"),t=W(r)},m:function(n,r){q(n,e,r),H(e,t)},p:function(n,e){8&e&&r!==(r=ft("Currently disconnected from %1.",n[3])+"")&&nn(t,r)},d:function(n){n&&G(e)}}}function Jo(n){var e;return{c:function(){(e=F("p")).textContent="".concat(ft("Connection not found."))},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Qo(n){var e,t,r,o,i,a=new so({props:{dialog:n[0]}});function c(n,e){return n[2].url?"disconnected"==n[2].state?Zo:"connected"==n[2].state?Yo:Vo:Jo}var u=c(n),s=u(n),d=new Wo({props:{dialog:n[0]}});return{c:function(){e=F("div"),Kn(a.$$.fragment),t=V(),s.c(),r=V(),Kn(d.$$.fragment),Q(e,"class","sidebar-left")},m:function(n,o){q(n,e,o),Fn(a,e,null),H(e,t),s.m(e,null),H(e,r),Fn(d,e,null),i=!0},p:function(n,t){var o=p(t,1)[0],i={};1&o&&(i.dialog=n[0]),a.$set(i),u===(u=c(n))&&s?s.p(n,o):(s.d(1),(s=u(n))&&(s.c(),s.m(e,r)));var f={};1&o&&(f.dialog=n[0]),d.$set(f)},i:function(t){i||(Un(a.$$.fragment,t),Un(d.$$.fragment,t),Cn((function(){o||(o=Hn(e,Je,n[1],!0)),o.run(1)})),i=!0)},o:function(t){zn(a.$$.fragment,t),zn(d.$$.fragment,t),o||(o=Hn(e,Je,n[1],!1)),o.run(0),i=!1},d:function(n){n&&G(e),Wn(a),s.d(),Wn(d),n&&o&&o.end()}}}function Xo(n,e,t){var r,o=e.dialog,i=void 0===o?{}:o,a=e.transition,c=vn("user"),u={};return mn(Xn(Jn.mark((function n(){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(2,u=c.findDialog({connection_id:i.connection_id})||{});case 1:case"end":return n.stop()}}),n)})))),n.$set=function(n){"dialog"in n&&t(0,i=n.dialog),"transition"in n&&t(1,a=n.transition)},n.$$.update=function(){4&n.$$.dirty&&t(3,r=u.real_host||u.url&&u.url.host)},[i,a,u,r]}var ni=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Xo,Qo,S,{dialog:0,transition:1}),r}return s(t,e),t}(Zn);function ei(n,e,t){var r=n.slice();return r[15]=e[t],r}function ti(n){var e,t=ft("You are not a channel operator in %1.",n[0].name)+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:function(n,r){1&r&&t!==(t=ft("You are not a channel operator in %1.",n[0].name)+"")&&nn(e,t)},d:function(n){n&&G(e)}}}function ri(n){var e,t=ft("You are a channel operator in %1.",n[0].name)+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:function(n,r){1&r&&t!==(t=ft("You are a channel operator in %1.",n[0].name)+"")&&nn(e,t)},d:function(n){n&&G(e)}}}function oi(n){var e,t=ft("Private conversation with %1.",n[0].name)+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:function(n,r){1&r&&t!==(t=ft("Private conversation with %1.",n[0].name)+"")&&nn(e,t)},d:function(n){n&&G(e)}}}function ii(n){var e,t=ft("Conversation with %1 is frozen. Reason: %2",n[0].name,ft(n[0].frozen))+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:function(n,r){1&r&&t!==(t=ft("Conversation with %1 is frozen. Reason: %2",n[0].name,ft(n[0].frozen))+"")&&nn(e,t)},d:function(n){n&&G(e)}}}function ai(n){var e,t,r,o,i,a,c,u,s,d,f,l,p,g=n[0].hasOwnProperty("wantNotifications"),m=[ui,ci],h=[];function v(n,e){return n[6]?0:1}function $(e){n[12].call(null,e)}c=v(n),u=h[c]=m[c](n);var b={type:"password",name:"password",readonly:"Password protected."!=n[0].frozen&&!n[6],$$slots:{default:[li],label:[fi]},$$scope:{ctx:n}};void 0!==n[2]&&(b.value=n[2]);var y=new Ve({props:b});yn.push((function(){return Gn(y,"value",$)}));var w=g&&pi(n);return{c:function(){e=F("input"),r=V(),o=F("input"),a=V(),u.c(),s=V(),Kn(y.$$.fragment),f=V(),w&&w.c(),l=Y(),Q(e,"type","hidden"),Q(e,"name","connection_id"),e.value=t=n[0].connection_id,Q(o,"type","hidden"),Q(o,"name","dialog_id"),o.value=i=n[0].dialog_id},m:function(n,t){q(n,e,t),q(n,r,t),q(n,o,t),q(n,a,t),h[c].m(n,t),q(n,s,t),Fn(y,n,t),q(n,f,t),w&&w.m(n,t),q(n,l,t),p=!0},p:function(n,r){(!p||1&r&&t!==(t=n[0].connection_id))&&(e.value=t),(!p||1&r&&i!==(i=n[0].dialog_id))&&(o.value=i);var a=c;(c=v(n))===a?h[c].p(n,r):(jn(),zn(h[a],1,1,(function(){h[a]=null})),In(),(u=h[c])||(u=h[c]=m[c](n)).c(),Un(u,1),u.m(s.parentNode,s));var f={};65&r&&(f.readonly="Password protected."!=n[0].frozen&&!n[6]),262144&r&&(f.$$scope={dirty:r,ctx:n}),!d&&4&r&&(d=!0,f.value=n[2],Nn((function(){return d=!1}))),y.$set(f),1&r&&(g=n[0].hasOwnProperty("wantNotifications")),g?w?(w.p(n,r),Un(w,1)):((w=pi(n)).c(),Un(w,1),w.m(l.parentNode,l)):w&&(jn(),zn(w,1,1,(function(){w=null})),In())},i:function(n){p||(Un(u),Un(y.$$.fragment,n),Un(w),p=!0)},o:function(n){zn(u),zn(y.$$.fragment,n),zn(w),p=!1},d:function(n){n&&G(e),n&&G(r),n&&G(o),n&&G(a),h[c].d(n),n&&G(s),Wn(y,n),n&&G(f),w&&w.d(n),n&&G(l)}}}function ci(n){var e,t,r,o,i=lt(n[3]||"No topic is set.")+"";return{c:function(){e=F("div"),(t=F("label")).textContent="".concat(ft("Topic")),r=V(),Q(o=F("div"),"class","input"),Q(e,"class","text-field")},m:function(n,a){q(n,e,a),H(e,t),H(e,r),H(e,o),o.innerHTML=i},p:function(n,e){8&e&&i!==(i=lt(n[3]||"No topic is set.")+"")&&(o.innerHTML=i)},i:x,o:x,d:function(n){n&&G(e)}}}function ui(n){var e,t;function r(e){n[11].call(null,e)}var o={name:"topic",placeholder:ft("No topic is set."),$$slots:{default:[di],label:[si]},$$scope:{ctx:n}};void 0!==n[3]&&(o.value=n[3]);var i=new mo({props:o});return yn.push((function(){return Gn(i,"value",r)})),{c:function(){Kn(i.$$.fragment)},m:function(n,e){Fn(i,n,e),t=!0},p:function(n,t){var r={};262144&t&&(r.$$scope={dirty:t,ctx:n}),!e&&8&t&&(e=!0,r.value=n[3],Nn((function(){return e=!1}))),i.$set(r)},i:function(n){t||(Un(i.$$.fragment,n),t=!0)},o:function(n){zn(i.$$.fragment,n),t=!1},d:function(n){Wn(i,n)}}}function si(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Topic")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function di(n){return{c:x,m:x,p:x,d:x}}function fi(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Password")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function li(n){return{c:x,m:x,p:x,d:x}}function pi(n){var e,t;function r(e){n[13].call(null,e)}var o={$$slots:{default:[mi],label:[gi]},$$scope:{ctx:n}};void 0!==n[5]&&(o.checked=n[5]);var i=new eo({props:o});return yn.push((function(){return Gn(i,"checked",r)})),{c:function(){Kn(i.$$.fragment)},m:function(n,e){Fn(i,n,e),t=!0},p:function(n,t){var r={};262144&t&&(r.$$scope={dirty:t,ctx:n}),!e&&32&t&&(e=!0,r.checked=n[5],Nn((function(){return e=!1}))),i.$set(r)},i:function(n){t||(Un(i.$$.fragment,n),t=!0)},o:function(n){zn(i.$$.fragment,n),t=!1},d:function(n){Wn(i,n)}}}function gi(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Send me notifications")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function mi(n){return{c:x,m:x,p:x,d:x}}function hi(n){var e,t=new Zr({props:{icon:"save",$$slots:{default:[vi]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};262144&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function vi(n){var e,t=ft("Update")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function $i(n){var e,t=ft("Leave")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function bi(n){for(var e,t,r,o,i,a=ft("Participants (%1)",n[0].participants().length)+"",c=n[0].participants(),u=[],s=0;s<c.length;s+=1)u[s]=wi(ei(n,c,s));var d=function(n){return zn(u[n],1,1,(function(){u[n]=null}))};return{c:function(){e=F("nav"),t=F("h3"),r=W(a),o=V();for(var n=0;n<u.length;n+=1)u[n].c();Q(e,"class","sidebar-left__nav")},m:function(n,a){q(n,e,a),H(e,t),H(t,r),H(e,o);for(var c=0;c<u.length;c+=1)u[c].m(e,null);i=!0},p:function(n,t){if((!i||1&t)&&a!==(a=ft("Participants (%1)",n[0].participants().length)+"")&&nn(r,a),1&t){var o;for(c=n[0].participants(),o=0;o<c.length;o+=1){var s=ei(n,c,o);u[o]?(u[o].p(s,t),Un(u[o],1)):(u[o]=wi(s),u[o].c(),Un(u[o],1),u[o].m(e,null))}for(jn(),o=c.length;o<u.length;o+=1)d(o);In()}},i:function(n){if(!i){for(var e=0;e<c.length;e+=1)Un(u[e]);i=!0}},o:function(n){u=u.filter(Boolean);for(var e=0;e<u.length;e+=1)zn(u[e]);i=!1},d:function(n){n&&G(e),K(u,n)}}}function yi(n){var e,t,r,o=n[15].nick+"";return{c:function(){e=F("span"),t=W(o),r=V()},m:function(n,o){q(n,e,o),H(e,t),q(n,r,o)},p:function(n,e){1&e&&o!==(o=n[15].nick+"")&&nn(t,o)},d:function(n){n&&G(e),n&&G(r)}}}function wi(n){var e,t=new Be({props:{href:"/chat/"+n[0].connection_id+"/"+n[15].id,class:"participant "+ce(n[15].modes),$$slots:{default:[yi]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};1&e&&(r.href="/chat/"+n[0].connection_id+"/"+n[15].id),1&e&&(r.class="participant "+ce(n[15].modes)),262145&e&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function _i(n){var e,t,r,o,i,a,c,u,s,d,f,l,g,m=!n[0].is("private"),h=!n[0].is("private"),v=new so({props:{dialog:n[0]}});function $(n,e){return n[0].frozen?ii:((null==o||1&e)&&(o=!!n[0].is("private")),o?oi:n[6]?ri:ti)}var b=$(n,-1),y=b(n),w=m&&ai(n),_=h&&hi(n),x=new Zr({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[$i]},$$scope:{ctx:n}}});x.$on("click",n[7]);var k=!n[0].frozen&&bi(n);return{c:function(){e=F("div"),Kn(v.$$.fragment),t=V(),r=F("p"),y.c(),i=V(),a=F("form"),w&&w.c(),c=V(),u=F("div"),_&&_.c(),s=V(),Kn(x.$$.fragment),d=V(),k&&k.c(),Q(u,"class","form-actions"),Q(a,"method","post"),Q(e,"class","sidebar-left")},m:function(o,f){q(o,e,f),Fn(v,e,null),H(e,t),H(e,r),y.m(r,null),H(e,i),H(e,a),w&&w.m(a,null),H(a,c),H(a,u),_&&_.m(u,null),H(u,s),Fn(x,u,null),n[14](a),H(e,d),k&&k.m(e,null),l=!0,g=Z(a,"submit",J(n[8]))},p:function(n,t){var o=p(t,1)[0],i={};1&o&&(i.dialog=n[0]),v.$set(i),b===(b=$(n,o))&&y?y.p(n,o):(y.d(1),(y=b(n))&&(y.c(),y.m(r,null))),1&o&&(m=!n[0].is("private")),m?w?(w.p(n,o),Un(w,1)):((w=ai(n)).c(),Un(w,1),w.m(a,c)):w&&(jn(),zn(w,1,1,(function(){w=null})),In()),1&o&&(h=!n[0].is("private")),h?_?(_.p(n,o),Un(_,1)):((_=hi(n)).c(),Un(_,1),_.m(u,s)):_&&(jn(),zn(_,1,1,(function(){_=null})),In());var d={};262144&o&&(d.$$scope={dirty:o,ctx:n}),x.$set(d),n[0].frozen?k&&(jn(),zn(k,1,1,(function(){k=null})),In()):k?(k.p(n,o),Un(k,1)):((k=bi(n)).c(),Un(k,1),k.m(e,null))},i:function(t){l||(Un(v.$$.fragment,t),Un(w),Un(_),Un(x.$$.fragment,t),Un(k),Cn((function(){f||(f=Hn(e,Je,n[1],!0)),f.run(1)})),l=!0)},o:function(t){zn(v.$$.fragment,t),zn(w),zn(_),zn(x.$$.fragment,t),zn(k),f||(f=Hn(e,Je,n[1],!1)),f.run(0),l=!1},d:function(t){t&&G(e),Wn(v),y.d(),w&&w.d(),_&&_.d(),Wn(x),n[14](null),k&&k.d(),t&&f&&f.end(),g()}}}function xi(n,e,t){var r,o,i=e.dialog,a=void 0===i?{}:i,c=e.transition,u=vn("user"),s="",d=a.topic,f=a.wantNotifications;function l(n){var e=u.findDialog({connection_id:n.connection_id}),t=n.findParticipant(e&&e.nick);return t&&t.modes.operator}return n.$set=function(n){"dialog"in n&&t(0,a=n.dialog),"transition"in n&&t(1,c=n.transition)},n.$$.update=function(){1&n.$$.dirty&&t(6,o=l(a)),33&n.$$.dirty&&a.update({wantNotifications:f}),17&n.$$.dirty&&r&&r.topic&&t(4,r.topic.value=a.topic||"",r)},[a,c,s,d,r,f,o,function(n){u.send({message:"/part",dialog:a})},function(n){if(s){var e=o?"/mode +k "+s:"/join "+a.name+" "+s;u.send({message:e,dialog:a}),t(2,s="")}o&&d!=a.topic&&u.send({message:"/topic "+d,dialog:a})},u,l,function(n){t(3,d=n)},function(n){t(2,s=n)},function(n){t(5,f=n)},function(n){yn[n?"unshift":"push"]((function(){t(4,r=n)}))}]}var ki=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,xi,_i,S,{dialog:0,transition:1}),r}return s(t,e),t}(Zn),Ei=function(){function e(){var t=this;n(this,e),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.removeDragOverDebounced=ee((function(){return t._removeDragOver()}),100)}return t(e,[{key:"attach",value:function(n,e,t){var r=this;this.targetEl&&this.detach(),this.dropEl=e,this.uploadEl=t,this.targetEl=n,Object.keys(this.dragAndDropEvents).forEach((function(e){n.addEventListener(e,r.dragAndDropEvents[e])}))}},{key:"detach",value:function(){var n=this;Object.keys(this.dragAndDropEvents).forEach((function(e){n.targetEl.removeEventListener(e,n.dragAndDropEvents[e])}))}},{key:"drop",value:function(n){this.stop(n),this.uploadEl&&this.uploadEl.uploader(n)}},{key:"stop",value:function(n){this._preventDefault(n),this.removeDragOverDebounced()}},{key:"start",value:function(n){this._preventDefault(n),this.dropEl&&this.dropEl.classList.add("is-dragover")}},{key:"_preventDefault",value:function(n){n.preventDefault(),n.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropEl&&this.dropEl.classList.remove("is-dragover")}}]),e}();function Oi(n,e,t){var r=n.slice();return r[29]=e[t],r}function Ci(n){var e,t,r=n[2];function o(n){return{props:{dialog:n[6],transition:{duration:250,x:n[9].wideScreen?0:n[9].width}}}}if(r)var i=new r(o(n));return{c:function(){i&&Kn(i.$$.fragment),e=Y()},m:function(n,r){i&&Fn(i,n,r),q(n,e,r),t=!0},p:function(n,t){var a={};if(64&t[0]&&(a.dialog=n[6]),512&t[0]&&(a.transition={duration:250,x:n[9].wideScreen?0:n[9].width}),r!==(r=n[2])){if(i){jn();var c=i;zn(c.$$.fragment,1,0,(function(){Wn(c,1)})),In()}r?(Kn((i=new r(o(n))).$$.fragment),Un(i.$$.fragment,1),Fn(i,e.parentNode,e)):i=null}else r&&i.$set(a)},i:function(n){t||(i&&Un(i.$$.fragment,n),t=!0)},o:function(n){i&&zn(i.$$.fragment,n),t=!1},d:function(n){n&&G(e),i&&Wn(i,n)}}}function Ni(n){var e,t,r,o,i,a,c,u,s,d,f=(n[7][2]||n[7][1]||ft("Notifications"))+"",l=pt(n[5],n[6])+"",p=new _e({props:{name:n[6].connection_id?"sliders-h":"bell"}});return{c:function(){e=F("h1"),t=F("a"),Kn(p.$$.fragment),r=F("span"),o=W(f),a=V(),c=F("a"),u=W(l),Q(t,"href",i="#activeMenu:"+(n[6].connection_id?"settings":"nav")),Q(t,"tabindex","-1"),Q(c,"href",s="#activeMenu:"+(n[6].connection_id?"settings":"nav")),Q(c,"class","chat-header__topic")},m:function(n,i){q(n,e,i),H(e,t),Fn(p,t,null),H(t,r),H(r,o),q(n,a,i),q(n,c,i),H(c,u),d=!0},p:function(n,e){var r={};64&e[0]&&(r.name=n[6].connection_id?"sliders-h":"bell"),p.$set(r),(!d||128&e[0])&&f!==(f=(n[7][2]||n[7][1]||ft("Notifications"))+"")&&nn(o,f),(!d||64&e[0]&&i!==(i="#activeMenu:"+(n[6].connection_id?"settings":"nav")))&&Q(t,"href",i),(!d||96&e[0])&&l!==(l=pt(n[5],n[6])+"")&&nn(u,l),(!d||64&e[0]&&s!==(s="#activeMenu:"+(n[6].connection_id?"settings":"nav")))&&Q(c,"href",s)},i:function(n){d||(Un(p.$$.fragment,n),d=!0)},o:function(n){zn(p.$$.fragment,n),d=!1},d:function(n){n&&G(e),Wn(p),n&&G(a),n&&G(c)}}}function Si(n){var e,t=new Wr({props:{connection:n[5],dialog:n[6],input:n[0]}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};32&e[0]&&(r.connection=n[5]),64&e[0]&&(r.dialog=n[6]),1&e[0]&&(r.input=n[0]),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function Mi(n){var e,t,r,o,i,a,c,u,s,d,f,l,p=ft('Do you want to chat with "%1"?',n[7][2])+"",g=ft("Yes")+"",m=new Be({props:{href:"/chat",class:"btn",$$slots:{default:[Ri]},$$scope:{ctx:n}}});return{c:function(){(e=F("h2")).textContent="".concat(ft("You are not part of this conversation.")),t=V(),r=F("p"),o=W(p),i=V(),a=F("p"),c=F("a"),u=W(g),d=V(),Kn(m.$$.fragment),Q(c,"href",s="#add:"+n[7][2]),Q(c,"class","btn")},m:function(s,p){q(s,e,p),q(s,t,p),q(s,r,p),H(r,o),q(s,i,p),q(s,a,p),H(a,c),H(c,u),H(a,d),Fn(m,a,null),f=!0,l=Z(c,"click",J(n[11]))},p:function(n,e){(!f||128&e[0])&&p!==(p=ft('Do you want to chat with "%1"?',n[7][2])+"")&&nn(o,p),(!f||128&e[0]&&s!==(s="#add:"+n[7][2]))&&Q(c,"href",s);var t={};2&e[1]&&(t.$$scope={dirty:e,ctx:n}),m.$set(t)},i:function(n){f||(Un(m.$$.fragment,n),f=!0)},o:function(n){zn(m.$$.fragment,n),f=!1},d:function(n){n&&G(e),n&&G(t),n&&G(r),n&&G(i),n&&G(a),Wn(m),l()}}}function Di(n){var e,t,r,o,i,a,c,u,s=ft('Do you want to create the connection "%1"?',n[7][1])+"",d=new Be({props:{href:"/settings/connection?server="+encodeURIComponent(n[7][1])+"&dialog="+encodeURIComponent(n[7][2]),class:"btn",$$slots:{default:[Pi]},$$scope:{ctx:n}}}),f=new Be({props:{href:"/chat",class:"btn",$$slots:{default:[Ai]},$$scope:{ctx:n}}});return{c:function(){(e=F("h2")).textContent="".concat(ft("Connection does not exist.")),t=V(),r=F("p"),o=W(s),i=V(),a=F("p"),Kn(d.$$.fragment),c=V(),Kn(f.$$.fragment)},m:function(n,s){q(n,e,s),q(n,t,s),q(n,r,s),H(r,o),q(n,i,s),q(n,a,s),Fn(d,a,null),H(a,c),Fn(f,a,null),u=!0},p:function(n,e){(!u||128&e[0])&&s!==(s=ft('Do you want to create the connection "%1"?',n[7][1])+"")&&nn(o,s);var t={};128&e[0]&&(t.href="/settings/connection?server="+encodeURIComponent(n[7][1])+"&dialog="+encodeURIComponent(n[7][2])),2&e[1]&&(t.$$scope={dirty:e,ctx:n}),d.$set(t);var r={};2&e[1]&&(r.$$scope={dirty:e,ctx:n}),f.$set(r)},i:function(n){u||(Un(d.$$.fragment,n),Un(f.$$.fragment,n),u=!0)},o:function(n){zn(d.$$.fragment,n),zn(f.$$.fragment,n),u=!1},d:function(n){n&&G(e),n&&G(t),n&&G(r),n&&G(i),n&&G(a),Wn(d),Wn(f)}}}function Ri(n){var e,t=ft("No")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Pi(n){var e,t=ft("Yes")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ai(n){var e,t=ft("No")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ti(n){var e,t={dialog:n[6]},r=new xr({props:t});return n[28](r),{c:function(){Kn(r.$$.fragment)},m:function(n,t){Fn(r,n,t),e=!0},p:function(n,e){var t={};64&e[0]&&(t.dialog=n[6]),r.$set(t)},i:function(n){e||(Un(r.$$.fragment,n),e=!0)},o:function(n){zn(r.$$.fragment,n),e=!1},d:function(e){n[28](null),Wn(r,e)}}}function Li(n){for(var e,t,r,o,i,a,c,u,s=ft("Participants (%1)",n[6].participants().length)+"",d=n[6].participants(),f=[],l=0;l<d.length;l+=1)f[l]=Ii(Oi(n,d,l));var p=function(n){return zn(f[n],1,1,(function(){f[n]=null}))};return{c:function(){e=F("div"),t=F("nav"),r=F("h3"),o=W(s),i=V();for(var n=0;n<f.length;n+=1)f[n].c();a=V(),c=F("nav"),Q(t,"class","sidebar-right__nav"),Q(e,"class","sidebar-right")},m:function(n,s){q(n,e,s),H(e,t),H(t,r),H(r,o),H(t,i);for(var d=0;d<f.length;d+=1)f[d].m(t,null);H(t,a),H(t,c),u=!0},p:function(n,e){if((!u||64&e[0])&&s!==(s=ft("Participants (%1)",n[6].participants().length)+"")&&nn(o,s),64&e[0]){var r;for(d=n[6].participants(),r=0;r<d.length;r+=1){var i=Oi(n,d,r);f[r]?(f[r].p(i,e),Un(f[r],1)):(f[r]=Ii(i),f[r].c(),Un(f[r],1),f[r].m(t,a))}for(jn(),r=d.length;r<f.length;r+=1)p(r);In()}},i:function(n){if(!u){for(var e=0;e<d.length;e+=1)Un(f[e]);u=!0}},o:function(n){f=f.filter(Boolean);for(var e=0;e<f.length;e+=1)zn(f[e]);u=!1},d:function(n){n&&G(e),K(f,n)}}}function ji(n){var e,t,r,o,i=n[29].nick+"",a=new _e({props:{name:"pick:"+n[29].id,family:"solid",color:n[29].color}});return{c:function(){Kn(a.$$.fragment),e=V(),t=F("span"),r=W(i)},m:function(n,i){Fn(a,n,i),q(n,e,i),q(n,t,i),H(t,r),o=!0},p:function(n,e){var t={};64&e[0]&&(t.name="pick:"+n[29].id),64&e[0]&&(t.color=n[29].color),a.$set(t),(!o||64&e[0])&&i!==(i=n[29].nick+"")&&nn(r,i)},i:function(n){o||(Un(a.$$.fragment,n),o=!0)},o:function(n){zn(a.$$.fragment,n),o=!1},d:function(n){Wn(a,n),n&&G(e),n&&G(t)}}}function Ii(n){var e,t=new Be({props:{href:"/chat/"+n[6].connection_id+"/"+n[29].id,class:"participant "+ce(n[29].modes),$$slots:{default:[ji]},$$scope:{ctx:n}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};64&e[0]&&(r.href="/chat/"+n[6].connection_id+"/"+n[29].id),64&e[0]&&(r.class="participant "+ce(n[29].modes)),64&e[0]|2&e[1]&&(r.$$scope={dirty:e,ctx:n}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function Ui(n){var e,t,r,o,i,a,c,u,s,d,f,l,p=n[6].participants().length;Cn(n[25]);var g="settings"==n[8]&&Ci(n),m=new hr({props:{$$slots:{default:[Ni]},$$scope:{ctx:n}}}),h=[Di,Mi,Si],v=[];function $(n,e){return n[7][1]&&!n[5].connection_id?0:n[7][2]&&!n[6].connection_id?1:2}i=$(n),a=v[i]=h[i](n);var b=n[6].connection_id&&Ti(n),y=p&&Li(n);return{c:function(){g&&g.c(),e=V(),Kn(m.$$.fragment),t=V(),r=F("main"),o=F("div"),a.c(),u=V(),b&&b.c(),s=V(),y&&y.c(),d=Y(),Q(o,"class","messages-container"),Cn((function(){return n[26].call(o)})),rn(o,"has-notifications",1==n[7].length),Q(r,"class","main")},m:function(a,p){g&&g.m(a,p),q(a,e,p),Fn(m,a,p),q(a,t,p),q(a,r,p),H(r,o),v[i].m(o,null),c=function(n,e){"static"===getComputedStyle(n).position&&(n.style.position="relative");var t,r=document.createElement("object");return r.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),r.setAttribute("aria-hidden","true"),r.type="text/html",r.tabIndex=-1,r.onload=function(){(t=r.contentDocument.defaultView).addEventListener("resize",e)},/Trident/.test(navigator.userAgent)?(n.appendChild(r),r.data="about:blank"):(r.data="about:blank",n.appendChild(r)),{cancel:function(){t&&t.removeEventListener&&t.removeEventListener("resize",e),n.removeChild(r)}}}(o,n[26].bind(o)),n[27](r),q(a,u,p),b&&b.m(a,p),q(a,s,p),y&&y.m(a,p),q(a,d,p),f=!0,l=[Z(window,"resize",n[25]),Z(r,"scroll",n[12])]},p:function(n,t){"settings"==n[8]?g?(g.p(n,t),Un(g,1)):((g=Ci(n)).c(),Un(g,1),g.m(e.parentNode,e)):g&&(jn(),zn(g,1,1,(function(){g=null})),In());var r={};224&t[0]|2&t[1]&&(r.$$scope={dirty:t,ctx:n}),m.$set(r);var c=i;(i=$(n))===c?v[i].p(n,t):(jn(),zn(v[c],1,1,(function(){v[c]=null})),In(),(a=v[i])||(a=v[i]=h[i](n)).c(),Un(a,1),a.m(o,null)),128&t[0]&&rn(o,"has-notifications",1==n[7].length),n[6].connection_id?b?(b.p(n,t),Un(b,1)):((b=Ti(n)).c(),Un(b,1),b.m(s.parentNode,s)):b&&(jn(),zn(b,1,1,(function(){b=null})),In()),64&t[0]&&(p=n[6].participants().length),p?y?(y.p(n,t),Un(y,1)):((y=Li(n)).c(),Un(y,1),y.m(d.parentNode,d)):y&&(jn(),zn(y,1,1,(function(){y=null})),In())},i:function(n){f||(Un(g),Un(m.$$.fragment,n),Un(a),Un(b),Un(y),f=!0)},o:function(n){zn(g),zn(m.$$.fragment,n),zn(a),zn(b),zn(y),f=!1},d:function(o){g&&g.d(o),o&&G(e),Wn(m,o),o&&G(t),o&&G(r),v[i].d(),c.cancel(),n[27](null),o&&G(u),b&&b.d(o),o&&G(s),y&&y.d(o),o&&G(d),C(l)}}}function zi(n,e,t){var r,o,i,a,c;R(n,Se,(function(n){return t(18,r=n)})),R(n,Me,(function(n){return t(20,i=n)})),R(n,Ce,(function(n){return t(8,a=n)})),R(n,Ne,(function(n){return t(9,c=n)}));var u,s,d=vn("user");R(n,d,(function(n){return t(19,o=n)}));var f,l,p=null,g=0,m=0,h=0,v="bottom",$={},b=d.notifications,y=new Ei,w="",_=r.pathParts,x=[];function k(n,e){t(7,_=e.pathParts);var r=n.findDialog({connection_id:_[1]})||{};r!=$&&function(n){if(n.url&&navigator.registerProtocolHandler){var e=n.url.protocol.replace(/:$/,"");-1!=["irc"].indexOf(e)&&navigator.registerProtocolHandler(e,Se.base+"/register?uri=%s","Convos "+e+" handler")}}(t(5,$=r));var o=1==_.length?n.notifications:n.findDialog({connection_id:_[1],dialog_id:_[2]});return o?o==b&&w?b.load({after:"maybe"}):(w&&O(),ue(document,".message__embed",(function(n){return n.remove()})),t(6,b=o),h=0,w=e.path,v="bottom",t(2,p=b.connection_id?b.dialog_id?ki:ni:null),x=[],$.subscribe&&x.push($.subscribe((function(n){t(5,$=n)}))),b.subscribe&&x.push(b.subscribe((function(n){t(6,b=n)}))),b.load({before:"maybe"}),void L(Me,i=$==b?ft("%1 - Convos",$.name):$.name?ft("%1/%2 - Convos",$.name,b.name):ft("%1 - Convos",b.name))):t(6,b=n.notifications)}function E(n,e){n.forEach((function(n){if(n.isIntersecting){var e=b.messages[n.target.dataset.index]||{};e.embeds&&d.embedMaker.render(n.target,e.embeds)}}))}function O(){b&&b.setLastRead&&b.setLastRead(),y.detach(),x.forEach((function(n){return n()}))}l=function(){f=f||new IntersectionObserver(E,{rootMargin:"0px"}),ue(document,".message",(function(n){n.classList.contains("is-observed")||f.observe(n),n.classList.add("is-observed")})),"bottom"==v?t(1,s.scrollTop=m,s):h&&h<m&&(t(1,s.scrollTop=m-h,s),"top"!=v&&(h=0))},gn().$$.after_update.push(l),function(n){gn().$$.on_destroy.push(n)}(O);var C=ee((function(n){if(s&&b.connection_id){var e=s.offsetHeight,t=s.scrollTop;"top"!=(v=e>m||t+20>m-e?"bottom":t<100?"top":"middle")||b.is("loading")||(b.messages.length&&b.load({before:0}),h=m)}}),20);return n.$$.update=function(){786432&n.$$.dirty[0]&&k(o,r),3&n.$$.dirty[0]&&y.attach(document,s,u&&u.getUploadEl())},[u,s,p,g,m,$,b,_,a,c,d,function(n){$.connection_id&&$.addDialog(n.target.closest("a").href.replace(/.*#add:/,""))},C,h,f,v,w,x,r,o,i,y,k,E,O,function(){t(3,g=window.innerHeight)},function(){m=this.offsetHeight,t(4,m)},function(n){yn[n?"unshift":"push"]((function(){t(1,s=n)}))},function(n){yn[n?"unshift":"push"]((function(){t(0,u=n)}))}]}var Bi=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,zi,Ui,S,{},[-1,-1]),r}return s(t,e),t}(Zn);function Hi(n){var e;return{c:function(){(e=F("h1")).textContent="".concat(ft("Add connection"))},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function qi(n){var e,t,r,o=new hr({props:{$$slots:{default:[Hi]},$$scope:{ctx:n}}}),i=new Wo({});return{c:function(){Kn(o.$$.fragment),e=V(),t=F("main"),Kn(i.$$.fragment),Q(t,"class","main")},m:function(n,a){Fn(o,n,a),q(n,e,a),q(n,t,a),Fn(i,t,null),r=!0},p:function(n,e){var t=p(e,1)[0],r={};2&t&&(r.$$scope={dirty:t,ctx:n}),o.$set(r)},i:function(n){r||(Un(o.$$.fragment,n),Un(i.$$.fragment,n),r=!0)},o:function(n){zn(o.$$.fragment,n),zn(i.$$.fragment,n),r=!1},d:function(n){Wn(o,n),n&&G(e),n&&G(t),Wn(i)}}}function Gi(n,e,t){return R(n,Me,(function(n){return t(0,n)})),L(Me,ft("%1 - Convos",ft("Add connection"))),[]}var Ki=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Gi,qi,S,{}),r}return s(t,e),t}(Zn);function Fi(n,e,t){var r=n.slice();return r[26]=e[t],r[28]=t,r}var Wi=function(n){return{}},Vi=function(n){return{}};function Yi(n){var e,t,r,o,i=(n[26].length>1?n[26][1]:n[26][0])+"";function a(){for(var e,t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return((e=n)[24].apply(e,[n[28]].concat(r)))}return{c:function(){e=F("a"),t=W(i),Q(e,"href",r="#"+n[28]+":"+n[26][0]),Q(e,"tabindex","-1"),rn(e,"is-active",n[28]==n[6])},m:function(r,i){q(r,e,i),H(e,t),o=[Z(e,"click",n[14]),Z(e,"mouseover",a)]},p:function(o,a){n=o,2048&a&&i!==(i=(n[26].length>1?n[26][1]:n[26][0])+"")&&nn(t,i),2048&a&&r!==(r="#"+n[28]+":"+n[26][0])&&Q(e,"href",r),64&a&&rn(e,"is-active",n[28]==n[6])},d:function(n){n&&G(e),C(o)}}}function Zi(n){for(var e,t,r,o,i,a,c,u,s,d,f,l=n[20].label,g=P(l,n,n[19],Vi),m=n[11],h=[],v=0;v<m.length;v+=1)h[v]=Yi(Fi(n,m,v));return{c:function(){e=F("div"),t=F("label"),g||(r=W("Label")),g&&g.c(),o=V(),i=F("input"),a=V(),c=F("input"),u=V(),s=F("div");for(var d=0;d<h.length;d+=1)h[d].c();Q(t,"for",n[3]),Q(i,"type","hidden"),Q(i,"name",n[2]),Q(c,"type","text"),Q(c,"placeholder",n[4]),Q(c,"id",n[3]),c.readOnly=n[5],Q(c,"autocomplete","off"),Q(s,"class","select-field__options"),Q(e,"class","select-field text-field"),e.hidden=n[1],rn(e,"is-open",n[9])},m:function(l,p){q(l,e,p),H(e,t),g||H(t,r),g&&g.m(t,null),H(e,o),H(e,i),n[21](i),en(i,n[0]),H(e,a),H(e,c),n[23](c),H(e,u),H(e,s);for(var m=0;m<h.length;m+=1)h[m].m(s,null);n[25](e),d=!0,f=[Z(i,"input",n[22]),Z(i,"keydown",n[12]),Z(c,"keydown",n[12]),Z(c,"keyup",n[13]),Z(e,"click",J(n[15]))]},p:function(n,r){var o=p(r,1)[0];if(g&&g.p&&524288&o&&g.p(A(l,n,n[19],Vi),T(l,n[19],o,Wi)),(!d||8&o)&&Q(t,"for",n[3]),(!d||4&o)&&Q(i,"name",n[2]),1&o&&en(i,n[0]),(!d||16&o)&&Q(c,"placeholder",n[4]),(!d||8&o)&&Q(c,"id",n[3]),(!d||32&o)&&(c.readOnly=n[5]),18496&o){var a;for(m=n[11],a=0;a<m.length;a+=1){var u=Fi(n,m,a);h[a]?h[a].p(u,o):(h[a]=Yi(u),h[a].c(),h[a].m(s,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=m.length}(!d||2&o)&&(e.hidden=n[1]),512&o&&rn(e,"is-open",n[9])},i:function(n){d||(Un(g,n),d=!0)},o:function(n){zn(g,n),d=!1},d:function(t){t&&G(e),g&&g.d(t),n[21](null),n[23](null),K(h,t),n[25](null),C(f)}}}function Ji(n,e,t){var r,o,i,a=["ArrowDown","ArrowUp","Enter"],c=0,u=!1,s="",d=e.hidden,f=void 0!==d&&d,l=e.name,p=void 0===l?"":l,g=e.id,m=void 0===g?p?"form_"+p:me():g,h=e.options,v=void 0===h?[]:h,$=e.placeholder,b=void 0===$?"":$,y=e.readonly,w=void 0!==y&&y,_=e.value,x=void 0===_?"":_;function k(n){return E.apply(this,arguments)}function E(){return(E=Xn(Jn.mark((function n(e){var r,i;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return"keydown"==e.type?r=S.length?S[c]:[]:(i=e.target.href.replace(/^.*?#\d+:/,""),r=S.filter((function(n){return n[0]==i}))[0]||[]),r.length||(r=[""]),t(0,x=r[0]),t(8,o.value=r.length>1?r[1]:r[0],o),n.next=6,On();case 6:o.setSelectionRange(0,9999),t(9,u=!1);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}mn((function(){o.addEventListener("blur",(function(){return setTimeout((function(){t(9,u=!1)}),100)})),t(0,x=r.value)}));var O=e.$$slots,C=void 0===O?{}:O,N=e.$$scope;var S;return n.$set=function(n){"hidden"in n&&t(1,f=n.hidden),"name"in n&&t(2,p=n.name),"id"in n&&t(3,m=n.id),"options"in n&&t(16,v=n.options),"placeholder"in n&&t(4,b=n.placeholder),"readonly"in n&&t(5,w=n.readonly),"value"in n&&t(0,x=n.value),"$$scope"in n&&t(19,N=n.$$scope)},n.$$.update=function(){if(512&n.$$.dirty&&0==u&&t(17,s=""),196608&n.$$.dirty&&t(11,S=function(n,e){var t=new RegExp("(?:^|\\s|-)"+se(e),"i"),r=[];r.length||(r=n.filter((function(n){return n[0]==e}))),r.length||(r=n.filter((function(n){return n[0].match(t)})));for(var o=0;o<n.length;o++){var i=n[o];i.length>1&&-1!=r.indexOf(i)&&i[1].match(t)&&-1==n.map((function(n){return n[0]})).indexOf(i[0])&&n.push(i)}return n}(v,s)),512&n.$$.dirty&&1==u&&t(6,c=0),128&n.$$.dirty&&r&&!r.syncValue&&(t(7,r.syncValue=function(){t(0,x=this.value)},r),r.syncValue()),65920&n.$$.dirty&&o&&!o.value&&o!=document.activeElement){var e=v.find((function(n){return n[0]==r.value}));e&&t(8,o.value=e[1]||e[0],o)}},[x,f,p,m,b,w,c,r,o,u,i,S,function(n){-1!=a.indexOf(n.key)&&n.preventDefault(),"Tab"!=n.key?u?("ArrowDown"==n.key&&t(6,c++,c),"ArrowUp"==n.key&&t(6,c--,c),"Enter"==n.key&&k(n),c>=v.length&&t(6,c=0),c<0&&t(6,c=v.length-1)):t(9,u=!0):u&&k(n)},function(n){1!=n.key.length&&"Backspace"!=n.key||t(17,s=o.value)},k,function(n){n&&n.target&&ne(n.target,".select-field__options")||t(9,u=!u)},v,s,a,N,C,function(n){yn[n?"unshift":"push"]((function(){t(7,r=n)}))},function(){x=this.value,t(0,x),t(7,r)},function(n){yn[n?"unshift":"push"]((function(){t(8,o=n)}))},function(n){t(6,c=n)},function(n){yn[n?"unshift":"push"]((function(){t(10,i=n)}))}]}var Qi=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Ji,Zi,S,{hidden:1,name:2,id:3,options:16,placeholder:4,readonly:5,value:0}),r}return s(t,e),t}(Zn);function Xi(n,e,t){var r=n.slice();return r[15]=e[t],r}function na(n){var e;return{c:function(){(e=F("h1")).textContent="".concat(ft("Add conversation"))},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function ea(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Connection")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function ta(n){return{c:x,m:x,p:x,d:x}}function ra(n){var e,t=ft(n[0].dialogs.length?"Refresh":"Load")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:function(n,r){1&r&&t!==(t=ft(n[0].dialogs.length?"Refresh":"Load")+"")&&nn(e,t)},d:function(n){n&&G(e)}}}function oa(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Conversation name")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function ia(n){return{c:x,m:x,p:x,d:x}}function aa(n){var e,t=ft("Add")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function ca(n){var e,t,r,o,i=n[0].error+"";return{c:function(){e=F("p"),t=W(n[1]),r=W(": "),o=W(i),Q(e,"class","error")},m:function(n,i){q(n,e,i),H(e,t),H(e,r),H(e,o)},p:function(n,e){2&e&&nn(t,n[1]),1&e&&i!==(i=n[0].error+"")&&nn(o,i)},d:function(n){n&&G(e)}}}function ua(n){var e,t,r;function o(n,e){return n[0].done?da:sa}for(var i=o(n),a=i(n),c=n[0].dialogs,u=[],s=0;s<c.length;s+=1)u[s]=fa(Xi(n,c,s));return{c:function(){e=F("p"),a.c(),t=V(),r=F("div");for(var n=0;n<u.length;n+=1)u[n].c();Q(r,"class","dialog-add-list")},m:function(n,o){q(n,e,o),a.m(e,null),q(n,t,o),q(n,r,o);for(var i=0;i<u.length;i+=1)u[i].m(r,null)},p:function(n,t){if(i===(i=o(n))&&a?a.p(n,t):(a.d(1),(a=i(n))&&(a.c(),a.m(e,null))),65&t){var s;for(c=n[0].dialogs,s=0;s<c.length;s+=1){var d=Xi(n,c,s);u[s]?u[s].p(d,t):(u[s]=fa(d),u[s].c(),u[s].m(r,null))}for(;s<u.length;s+=1)u[s].d(1);u.length=c.length}},d:function(n){n&&G(e),a.d(),n&&G(t),n&&G(r),K(u,n)}}}function sa(n){var e,t=ft("Showing %1 of %2 conversations, but the list is still loading.",n[0].dialogs.length,n[0].n_dialogs)+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:function(n,r){1&r&&t!==(t=ft("Showing %1 of %2 conversations, but the list is still loading.",n[0].dialogs.length,n[0].n_dialogs)+"")&&nn(e,t)},d:function(n){n&&G(e)}}}function da(n){var e,t=ft("Showing %1 of %2 conversations.",n[0].dialogs.length,n[0].n_dialogs)+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:function(n,r){1&r&&t!==(t=ft("Showing %1 of %2 conversations.",n[0].dialogs.length,n[0].n_dialogs)+"")&&nn(e,t)},d:function(n){n&&G(e)}}}function fa(n){var e,t,r,o,i,a,c,u,s,d,f,l,p=n[15].n_users+"",g=n[15].name+"",m=(n[15].topic||"No topic.")+"";return{c:function(){e=F("a"),t=F("span"),r=W(p),o=V(),i=F("b"),a=W(g),c=V(),u=F("i"),s=W(m),d=V(),Q(t,"class","dialog-add-list__n-users"),Q(i,"class","dialog-add-list__name"),Q(u,"class","dialog-add-list__title"),Q(e,"href",f="#add:"+n[15].name)},m:function(f,p){q(f,e,p),H(e,t),H(t,r),H(e,o),H(e,i),H(i,a),H(e,c),H(e,u),H(u,s),H(e,d),l=Z(e,"click",J(n[6]))},p:function(n,t){1&t&&p!==(p=n[15].n_users+"")&&nn(r,p),1&t&&g!==(g=n[15].name+"")&&nn(a,g),1&t&&m!==(m=(n[15].topic||"No topic.")+"")&&nn(s,m),1&t&&f!==(f="#add:"+n[15].name)&&Q(e,"href",f)},d:function(n){n&&G(e),l()}}}function la(n){var e,t,r,o,i,a,c,u,s,d,f,l,g,m,h,v,$=new hr({props:{$$slots:{default:[na]},$$scope:{ctx:n}}});function b(e){n[12].call(null,e)}var y={name:"connection_id",options:n[4],placeholder:ft("Select..."),$$slots:{default:[ta],label:[ea]},$$scope:{ctx:n}};void 0!==n[1]&&(y.value=n[1]);var w=new Qi({props:y});yn.push((function(){return Gn(w,"value",b)}));var _=new Zr({props:{type:"button",icon:"sync-alt",disabled:!n[1]||!1===n[0].done,$$slots:{default:[ra]},$$scope:{ctx:n}}});function x(e){n[13].call(null,e)}_.$on("click",n[7]);var k={name:"dialog_id",placeholder:ft("#room or nick"),autocomplete:"off",$$slots:{default:[ia],label:[oa]},$$scope:{ctx:n}};void 0!==n[2]&&(k.value=n[2]);var E=new Ve({props:k});yn.push((function(){return Gn(E,"value",x)})),E.$on("keyup",n[8]);var O=new Zr({props:{icon:"comment",disabled:!n[1]||!n[2],$$slots:{default:[aa]},$$scope:{ctx:n}}}),C=n[0].error&&ca(n),N=null!==n[0].done&&ua(n);return{c:function(){Kn($.$$.fragment),e=V(),t=F("main"),(r=F("p")).textContent="".concat(ft("Enter the name of an exising conversation, or create a new conversation.")," \n    ").concat(ft("It is also possible to load in all existing conversations for a given connection.")),o=V(),i=F("form"),a=F("div"),Kn(w.$$.fragment),u=V(),Kn(_.$$.fragment),s=V(),d=F("div"),Kn(E.$$.fragment),l=V(),Kn(O.$$.fragment),g=V(),C&&C.c(),m=V(),N&&N.c(),Q(a,"class","inputs-side-by-side"),Q(d,"class","inputs-side-by-side"),Q(i,"method","post"),Q(t,"class","main")},m:function(c,f){Fn($,c,f),q(c,e,f),q(c,t,f),H(t,r),H(t,o),H(t,i),H(i,a),Fn(w,a,null),H(a,u),Fn(_,a,null),H(i,s),H(i,d),Fn(E,d,null),H(d,l),Fn(O,d,null),H(i,g),C&&C.m(i,null),H(i,m),N&&N.m(i,null),n[14](i),h=!0,v=Z(i,"submit",J(n[6]))},p:function(n,e){var t=p(e,1)[0],r={};262144&t&&(r.$$scope={dirty:t,ctx:n}),$.$set(r);var o={};16&t&&(o.options=n[4]),262144&t&&(o.$$scope={dirty:t,ctx:n}),!c&&2&t&&(c=!0,o.value=n[1],Nn((function(){return c=!1}))),w.$set(o);var a={};3&t&&(a.disabled=!n[1]||!1===n[0].done),262145&t&&(a.$$scope={dirty:t,ctx:n}),_.$set(a);var u={};262144&t&&(u.$$scope={dirty:t,ctx:n}),!f&&4&t&&(f=!0,u.value=n[2],Nn((function(){return f=!1}))),E.$set(u);var s={};6&t&&(s.disabled=!n[1]||!n[2]),262144&t&&(s.$$scope={dirty:t,ctx:n}),O.$set(s),n[0].error?C?C.p(n,t):((C=ca(n)).c(),C.m(i,m)):C&&(C.d(1),C=null),null!==n[0].done?N?N.p(n,t):((N=ua(n)).c(),N.m(i,null)):N&&(N.d(1),N=null)},i:function(n){h||(Un($.$$.fragment,n),Un(w.$$.fragment,n),Un(_.$$.fragment,n),Un(E.$$.fragment,n),Un(O.$$.fragment,n),h=!0)},o:function(n){zn($.$$.fragment,n),zn(w.$$.fragment,n),zn(_.$$.fragment,n),zn(E.$$.fragment,n),zn(O.$$.fragment,n),h=!1},d:function(r){Wn($,r),r&&G(e),r&&G(t),Wn(w),Wn(_),Wn(E),Wn(O),C&&C.d(),N&&N.d(),n[14](null),v()}}}function pa(n,e,t){var r,o;R(n,Me,(function(n){return t(10,r=n)}));var i=vn("user");R(n,i,(function(n){return t(11,o=n)}));var a,c,u={dialogs:[],done:null,n_dialogs:0},s="",d="";function f(n){var e="/list"+(d.length?" /"+d+"/":"");"click"==n.type&&u.done&&(e+=" refresh"),c&&clearTimeout(c),i.send({connection_id:s,message:e},(function(e){var r=re(e);t(0,u=r?{dialogs:[],done:!0,n_dialogs:0,error:r}:e);var o=n.interval?n.interval+500:500;o>2e3&&(o=2e3),r||e.done||(c=setTimeout((function(){return f({interval:o})}),o))}))}L(Me,r=ft("%1 - Convos",ft("Add conversation"))),mn((function(){return je(a)}));var l,p=ee(f,250);return n.$$.update=function(){2048&n.$$.dirty&&t(4,l=Array.from(o.connections.keys()).map((function(n){return[n]}))),18&n.$$.dirty&&(s||t(1,s=l[0]?l[0][0]:""))},[u,s,d,a,l,i,function(n){var e=n&&n.target&&n.target.closest("a");e&&e.href&&t(2,d=e.href.replace(/.*#add:/,"")),s&&d&&i.findDialog({connection_id:s}).addDialog(d)},f,p,c,r,o,function(n){t(1,s=n),t(4,l),t(11,o)},function(n){t(2,d=n)},function(n){yn[n?"unshift":"push"]((function(){t(3,a=n)}))}]}var ga=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,pa,la,S,{}),r}return s(t,e),t}(Zn);function ma(n){var e,t,r=ft("loading"==n[0]?"Convos":n[3][n[0]])+"";return{c:function(){e=F("span"),t=W(r)},m:function(n,r){q(n,e,r),H(e,t)},p:function(n,e){1&e&&r!==(r=ft("loading"==n[0]?"Convos":n[3][n[0]])+"")&&nn(t,r)},d:function(n){n&&G(e)}}}function ha(n){var e,t,r,o,i=("loading"==n[0]?"":ft("Convos"))+"",a=ft("for %1",n[1].organization_name)+"";return{c:function(){e=F("small"),t=W(i),r=V(),o=W(a),Q(e,"class","subtitle")},m:function(n,i){q(n,e,i),H(e,t),H(e,r),H(e,o)},p:function(n,e){1&e&&i!==(i=("loading"==n[0]?"":ft("Convos"))+"")&&nn(t,i)},d:function(n){n&&G(e)}}}function va(n){var e,t,r,o,i=("loading"==n[0]?"":ft("Convos"))+"",a=lt("for [%1](%2)",n[1].organization_name,n[1].organization_url)+"";return{c:function(){e=F("small"),t=W(i),r=V(),o=new cn(a,null),Q(e,"class","subtitle")},m:function(n,i){q(n,e,i),H(e,t),H(e,r),o.m(e)},p:function(n,e){1&e&&i!==(i=("loading"==n[0]?"":ft("Convos"))+"")&&nn(t,i)},d:function(n){n&&G(e)}}}function $a(n){var e,t,r,o,i,a,c,u,s=ft("This should not happen.")+"";return{c:function(){e=F("p"),t=W(s),r=W("\n        Please submit "),(o=F("a")).textContent="an issue",i=W(",\n        if the problem does not go away."),a=V(),c=F("p"),(u=F("a")).textContent="".concat(ft("Go to landing page")),Q(o,"href","https://github.com/Nordaaker/convos/issues/"),Q(u,"href","/"),Q(u,"class","btn")},m:function(n,s){q(n,e,s),H(e,t),H(e,r),H(e,o),H(e,i),q(n,a,s),q(n,c,s),H(c,u)},p:x,d:function(n){n&&G(e),n&&G(a),n&&G(c)}}}function ba(n){var e,t,r,o;return{c:function(){(e=F("p")).textContent="".concat(ft("Could not find the page you are looking for. Maybe you entered an invalid URL?")),t=V(),r=F("p"),(o=F("a")).textContent="".concat(ft("Go to landing page")),Q(o,"href","/"),Q(o,"class","btn")},m:function(n,i){q(n,e,i),q(n,t,i),q(n,r,i),H(r,o)},p:x,d:function(n){n&&G(e),n&&G(t),n&&G(r)}}}function ya(n){var e,t,r,o,i,a,c,u,s,d,f,l,p,g,m,h,v,$,b,y,w=ft("Downloading Convos...")+"",_=ft("Starting Convos...")+"",k=ft("Loading user data...")+"",E=ft("Contact admin")+"";return{c:function(){(e=F("p")).textContent="".concat(ft("Convos is the simplest way to use IRC, and it keeps you always online.")),t=V(),r=F("p"),o=F("i"),i=V(),a=W(w),c=V(),u=F("p"),s=F("i"),d=V(),f=W(_),l=V(),p=F("p"),g=F("i"),m=V(),h=W(k),v=V(),$=F("p"),b=F("a"),y=W(E),Q(o,"class","fas fa-download"),Q(s,"class","fas fa-rocket"),Q(g,"class","fas fa-spinner fa-spin"),Q(b,"class","btn"),Q(b,"href",n[1].contact)},m:function(n,w){q(n,e,w),q(n,t,w),q(n,r,w),H(r,o),H(r,i),H(r,a),q(n,c,w),q(n,u,w),H(u,s),H(u,d),H(u,f),q(n,l,w),q(n,p,w),H(p,g),H(p,m),H(p,h),q(n,v,w),q(n,$,w),H($,b),H(b,y)},p:x,d:function(n){n&&G(e),n&&G(t),n&&G(r),n&&G(c),n&&G(u),n&&G(l),n&&G(p),n&&G(v),n&&G($)}}}function wa(n){var e,t,r,o,i,a,c,u=ft("You seem to have lost connection to the internet.")+"";return{c:function(){e=F("p"),t=F("i"),r=V(),o=W(u),i=V(),a=F("p"),(c=F("a")).textContent="".concat(ft("Reload")),Q(t,"class","fas fa-exclamation-triangle"),Q(c,"href","/"),Q(c,"class","btn")},m:function(n,u){q(n,e,u),H(e,t),H(e,r),H(e,o),q(n,i,u),q(n,a,u),H(a,c)},p:x,d:function(n){n&&G(e),n&&G(i),n&&G(a)}}}function _a(n){var e;return{c:function(){e=W("Convos")},m:function(n,t){q(n,e,t)},d:function(n){n&&G(e)}}}function xa(n){var e,t=ft("Blog")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function ka(n){var e,t=ft("Documentation")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ea(n){var e,t=ft("GitHub")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Oa(n){var e,t,r,o,i,a,c,u,s,d,f,l=new Be({props:{href:"/",$$slots:{default:[ma]},$$scope:{ctx:n}}}),g="Convos"!=n[1].organization_name&&function(n){var e,t=function(n,e){return"https://convos.by"!=n[1].organization_url?va:ha}(n)(n);return{c:function(){t.c(),e=Y()},m:function(n,r){t.m(n,r),q(n,e,r)},p:function(n,e){t.p(n,e)},d:function(n){t.d(n),n&&G(e)}}}(n);function m(n,e){return"offline"==n[0]?wa:"loading"==n[0]?ya:"not_found"==n[0]?ba:$a}var h=m(n),v=h(n),$=new Be({props:{href:"https://convos.by/",$$slots:{default:[_a]},$$scope:{ctx:n}}}),b=new Be({props:{href:"https://convos.by/blog",$$slots:{default:[xa]},$$scope:{ctx:n}}}),y=new Be({props:{href:"https://convos.by/doc",$$slots:{default:[ka]},$$scope:{ctx:n}}}),w=new Be({props:{href:"https://github.com/Nordaaker/convos",$$slots:{default:[Ea]},$$scope:{ctx:n}}});return{c:function(){e=F("main"),t=F("article"),r=F("h1"),Kn(l.$$.fragment),o=V(),g&&g.c(),i=V(),v.c(),a=V(),c=F("footer"),Kn($.$$.fragment),u=W("\n    \n    "),Kn(b.$$.fragment),s=W("\n    \n    "),Kn(y.$$.fragment),d=W("\n    \n    "),Kn(w.$$.fragment),Q(t,"class","welcome-screen_fallback"),Q(c,"class","welcome-screen__footer"),Q(e,"class","welcome-screen")},m:function(n,p){q(n,e,p),H(e,t),H(t,r),Fn(l,r,null),H(r,o),g&&g.m(r,null),H(t,i),v.m(t,null),H(e,a),H(e,c),Fn($,c,null),H(c,u),Fn(b,c,null),H(c,s),Fn(y,c,null),H(c,d),Fn(w,c,null),f=!0},p:function(n,e){var r=p(e,1)[0],o={};513&r&&(o.$$scope={dirty:r,ctx:n}),l.$set(o),"Convos"!=n[1].organization_name&&g.p(n,r),h===(h=m(n))&&v?v.p(n,r):(v.d(1),(v=h(n))&&(v.c(),v.m(t,null)));var i={};512&r&&(i.$$scope={dirty:r,ctx:n}),$.$set(i);var a={};512&r&&(a.$$scope={dirty:r,ctx:n}),b.$set(a);var c={};512&r&&(c.$$scope={dirty:r,ctx:n}),y.$set(c);var u={};512&r&&(u.$$scope={dirty:r,ctx:n}),w.$set(u)},i:function(n){f||(Un(l.$$.fragment,n),Un($.$$.fragment,n),Un(b.$$.fragment,n),Un(y.$$.fragment,n),Un(w.$$.fragment,n),f=!0)},o:function(n){zn(l.$$.fragment,n),zn($.$$.fragment,n),zn(b.$$.fragment,n),zn(y.$$.fragment,n),zn(w.$$.fragment,n),f=!1},d:function(n){n&&G(e),Wn(l),g&&g.d(),v.d(),Wn($),Wn(b),Wn(y),Wn(w)}}}function Ca(n,e,t){var r,o;R(n,Se,(function(n){return t(5,o=n)})),R(n,Me,(function(n){return t(6,n)}));var i=vn("settings"),a=vn("user");R(n,a,(function(n){return t(4,r=n)}));var c,u=i.load_user?["loading","pending"]:["loading"],s={loading:"Loading",not_found:"Not Found",offline:"You appear to be offline"};return mn((function(){de("body",/(is-logged-)\S+/,"out"),de("body",/(page-)\S+/,c)})),n.$$.update=function(){48&n.$$.dirty&&t(0,c=function(n,e){var t=e.pathParts[e.pathParts.length-1]||"",r=s[t]?t:n.is("offline")?"offline":n.is(u)?"loading":"not_found";return L(Me,ft("%1 - Convos",ft(s[r]))),r}(r,o))},[c,i,a,s]}var Na=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Ca,Oa,S,{}),r}return s(t,e),t}(Zn);function Sa(n,e,t){var r=n.slice();return r[4]=e[t],r}function Ma(n){var e,t;return{c:function(){(e=F("h1")).textContent="".concat(ft("Help")),(t=F("small")).textContent="v".concat(n[0].version)},m:function(n,r){q(n,e,r),q(n,t,r)},p:x,d:function(n){n&&G(e),n&&G(t)}}}function Da(n){var e,t,r,o,i=n[4].example+"",a=ft(n[4].description)+"";return{c:function(){e=F("dt"),t=W(i),r=F("dd"),o=W(a)},m:function(n,i){q(n,e,i),H(e,t),q(n,r,i),H(r,o)},p:x,d:function(n){n&&G(e),n&&G(r)}}}function Ra(n){for(var e,t,r,o,i,a,c,u,s,d,f,l,g,m,h,v,$,b,y,w,_,k,E,O,C,N,S,M,D,R,P,A,T,L,j,I,U,z,B,Y,J,X,nn,en,tn,rn,on,an,un,sn,dn,fn,ln,pn,gn,mn,hn,vn,$n,bn,yn,wn,_n,xn,kn,En,On,Cn,Nn,Sn,Mn,Dn,Rn,Pn,An,Tn,Ln,jn,In,Bn,Hn,qn=ft("Jump to:")+"",Gn=lt('Got any questions? Come and talk to us in the "#convos" channel on https://freenode.net.')+"",Vn=lt("More information can also be found on https://convos.by.")+"",Yn=lt('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",Zn=lt("Using backticks around some text, will format it as a `code fragment`.")+"",Jn=ft("Contact admin")+"",Qn=new hr({props:{$$slots:{default:[Ma]},$$scope:{ctx:n}}}),Xn=vr,ne=[],ee=0;ee<Xn.length;ee+=1)ne[ee]=Da(Sa(n,Xn,ee));var te="Convos"!=n[0].organization_name&&"https://convos.by"!=n[0].organization_url&&function(n){var e,t,r,o=n[0].organization_name+"";return{c:function(){e=F("li"),t=F("a"),r=W(o),Q(t,"href",n[0].organization_url),Q(t,"target","_blank")},m:function(n,o){q(n,e,o),H(e,t),H(t,r)},p:x,d:function(n){n&&G(e)}}}(n);return{c:function(){Kn(Qn.$$.fragment),e=V(),t=F("main"),r=F("p"),o=W(qn),i=V(),(a=F("a")).textContent="".concat(ft("Shortcuts")),c=W(",\n    "),(u=F("a")).textContent="".concat(ft("Autocomplete")),s=W(",\n    "),(d=F("a")).textContent="".concat(ft("Text formatting")),f=W(",\n    "),(l=F("a")).textContent="".concat(ft("Available commands")),g=W(",\n    "),(m=F("a")).textContent="".concat(ft("Other resources")),h=W("."),v=V(),$=F("p"),y=V(),_=V(),(k=F("h2")).textContent="".concat(ft("Shortcuts")),E=V(),O=F("dl"),(C=F("dt")).textContent="".concat(ft("shift+enter")),(N=F("dd")).textContent="".concat(ft("Shift focus between chat input and search in sidebar.")),(S=F("dt")).textContent="".concat(ft("Open conversation or connection settings")),(M=F("dd")).textContent="".concat(ft("Clicking on the icon next to the conversation name will take you to settings.")),D=V(),(R=F("h2")).textContent="".concat(ft("Autocomplete")),P=V(),(A=F("p")).textContent="".concat(ft("The following rules apply when typing a message:")),T=V(),L=F("dl"),(j=F("dt")).textContent="@nick",(I=F("dd")).textContent="".concat(ft('"@" followed by a character will show matching nicks in the current conversation.')),(U=F("dt")).textContent=":emoji_name",(z=F("dd")).textContent="".concat(ft('":" followed by a character will show matching emojis.')),(B=F("dt")).textContent="/command",(Y=F("dd")).textContent="".concat(ft('"/" will show the available commands.')),(J=F("dt")).textContent="#conversation",(X=F("dd")).textContent="".concat(ft('"#" will show the matching conversation names.')),nn=V(),(en=F("h2")).textContent="".concat(ft("Text formatting")),tn=V(),(rn=F("p")).textContent="".concat(ft("Convos supports some special way of formatting text:")),on=V(),an=F("dl"),(un=F("dt")).textContent="".concat(Object.keys(it).sort().map(n[3]).join(", ")),(sn=F("dd")).textContent="".concat(ft("Will be automatically converted into emojis.")),(dn=F("dt")).textContent="".concat(ft("> some text")),(fn=F("dd")).textContent="".concat(ft('A line starting with ">" will be converted into a quote.')),(ln=F("dt")).textContent="".concat(ft("*some text*, **some text**, ***some text***")),pn=F("dd"),(gn=F("dt")).textContent="".concat(ft("`some fragment`")),mn=F("dd"),(hn=F("dt")).textContent="https://...",(vn=F("dd")).textContent="".concat(ft("URLs will be converted to links, and might be embedded in the chat.")),$n=V(),(bn=F("h2")).textContent="".concat(ft("Available commands")),yn=V(),wn=F("dl");for(var p=0;p<ne.length;p+=1)ne[p].c();_n=V(),(xn=F("h2")).textContent="".concat(ft("Other resources")),kn=V(),En=F("ul"),On=F("li"),(Cn=F("a")).textContent="".concat(ft("Project homepage")),Nn=V(),Sn=F("li"),(Mn=F("a")).textContent="".concat(ft("Bug/issue tracker")),Dn=V(),Rn=F("li"),(Pn=F("a")).textContent="".concat(ft("Source code")),An=V(),te&&te.c(),Tn=V(),Ln=F("li"),jn=F("a"),In=W(Jn),Q(a,"href","#shortcuts"),Q(u,"href","#autocomplete"),Q(d,"href","#formatting"),Q(l,"href","#commands"),Q(m,"href","#resources"),b=new cn(Gn,y),w=new cn(Vn,null),Q(k,"id","shortcuts"),Q(R,"id","autocomplete"),Q(en,"id","formatting"),Q(bn,"id","commands"),Q(xn,"id","resources"),Q(Cn,"href","https://convos.by"),Q(Cn,"target","_blank"),Q(Mn,"href","https://github.com/Nordaaker/convos/issues"),Q(Mn,"target","_blank"),Q(Pn,"href","https://github.com/Nordaaker/convos"),Q(Pn,"target","_blank"),Q(jn,"href",n[0].contact),Q(jn,"target","_blank"),Q(t,"class","main")},m:function(n,p){Fn(Qn,n,p),q(n,e,p),q(n,t,p),H(t,r),H(r,o),H(r,i),H(r,a),H(r,c),H(r,u),H(r,s),H(r,d),H(r,f),H(r,l),H(r,g),H(r,m),H(r,h),H(t,v),H(t,$),b.m($),H($,y),w.m($),H(t,_),H(t,k),H(t,E),H(t,O),H(O,C),H(O,N),H(O,S),H(O,M),H(t,D),H(t,R),H(t,P),H(t,A),H(t,T),H(t,L),H(L,j),H(L,I),H(L,U),H(L,z),H(L,B),H(L,Y),H(L,J),H(L,X),H(t,nn),H(t,en),H(t,tn),H(t,rn),H(t,on),H(t,an),H(an,un),H(an,sn),H(an,dn),H(an,fn),H(an,ln),H(an,pn),pn.innerHTML=Yn,H(an,gn),H(an,mn),mn.innerHTML=Zn,H(an,hn),H(an,vn),H(t,$n),H(t,bn),H(t,yn),H(t,wn);for(var x=0;x<ne.length;x+=1)ne[x].m(wn,null);H(t,_n),H(t,xn),H(t,kn),H(t,En),H(En,On),H(On,Cn),H(En,Nn),H(En,Sn),H(Sn,Mn),H(En,Dn),H(En,Rn),H(Rn,Pn),H(En,An),te&&te.m(En,null),H(En,Tn),H(En,Ln),H(Ln,jn),H(jn,In),Bn=!0,Hn=Z(r,"click",fe)},p:function(n,e){var t=p(e,1)[0],r={};if(128&t&&(r.$$scope={dirty:t,ctx:n}),Qn.$set(r),0&t){var o;for(Xn=vr,o=0;o<Xn.length;o+=1){var i=Sa(n,Xn,o);ne[o]?ne[o].p(i,t):(ne[o]=Da(i),ne[o].c(),ne[o].m(wn,null))}for(;o<ne.length;o+=1)ne[o].d(1);ne.length=Xn.length}"Convos"!=n[0].organization_name&&"https://convos.by"!=n[0].organization_url&&te.p(n,t)},i:function(n){Bn||(Un(Qn.$$.fragment,n),Bn=!0)},o:function(n){zn(Qn.$$.fragment,n),Bn=!1},d:function(n){Wn(Qn,n),n&&G(e),n&&G(t),K(ne,n),te&&te.d(),Hn()}}}function Pa(n,e,t){var r,o;R(n,Me,(function(n){return t(1,r=n)})),R(n,Se,(function(n){return t(2,o=n)}));var i=vn("settings");L(Me,r=ft("%1 - Convos",ft("Help")));return n.$$.update=function(){4&n.$$.dirty&&fe(o.hash||0)},[i,r,o,function(n){return it[n]}]}var Aa=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Pa,Ra,S,{}),r}return s(t,e),t}(Zn);function Ta(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Convos"))},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function La(n){var e;return{c:function(){(e=F("small")).textContent="".concat(ft("for %1",n[3].organization_name)),Q(e,"class","subtitle")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function ja(n){var e,t=lt("for [%1](%2)",n[3].organization_name,n[3].organization_url)+"";return{c:function(){Q(e=F("small"),"class","subtitle")},m:function(n,r){q(n,e,r),e.innerHTML=t},p:x,d:function(n){n&&G(e)}}}function Ia(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("E-mail")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ua(n){return{c:x,m:x,p:x,d:x}}function za(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Password")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ba(n){return{c:x,m:x,p:x,d:x}}function Ha(n){var e,t=ft("Sign in")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function qa(n){var e,t,r,o,i,a,c,u,s,d,f,l,p,g,m=ft("Contact admin")+"";return{c:function(){(e=F("h2")).textContent="".concat(ft("Sign up")),t=V(),(r=F("p")).textContent="".concat(ft("Convos is not open for public registration.")),o=V(),(i=F("p")).textContent="".concat(ft("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")),a=V(),c=F("div"),u=F("a"),s=W(m),d=V(),(f=F("a")).textContent="".concat(ft("Sign in")),l=V(),(p=F("a")).textContent="".concat(ft("Home")),Q(u,"class","btn"),Q(u,"href",n[3].contact),Q(f,"class","btn is-hallow"),Q(f,"href","#signin"),Q(p,"class","btn is-hallow"),Q(p,"href","#top"),Q(c,"class","form-actions")},m:function(n,m){q(n,e,m),q(n,t,m),q(n,r,m),q(n,o,m),q(n,i,m),q(n,a,m),q(n,c,m),H(c,u),H(u,s),H(c,d),H(c,f),H(c,l),H(c,p),g=[Z(i,"click",fe),Z(f,"click",fe),Z(p,"click",fe)]},p:x,i:x,o:x,d:function(n){n&&G(e),n&&G(t),n&&G(r),n&&G(o),n&&G(i),n&&G(a),n&&G(c),C(g)}}}function Ga(n){var e,t,r,o,i,a,c,u,s,d,f,l,p,g,m,h,v,$=n[3].first_user&&{c:function(){(v=F("p")).textContent="".concat(ft('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.'))},m:function(n,e){q(n,v,e)},p:x,d:function(n){n&&G(v)}};function b(e){n[14].call(null,e)}var y={type:"email",name:"email",placeholder:ft("Ex: john@doe.com"),readonly:n[2],$$slots:{default:[Za],help:[Ya],label:[Fa]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(y.value=n[0].formEmail);var w=new Ve({props:y});yn.push((function(){return Gn(w,"value",b)}));var _=new Ve({props:{type:"password",name:"password",$$slots:{default:[Xa],help:[Qa],label:[Ja]},$$scope:{ctx:n}}}),k=new Zr({props:{icon:"save",op:n[5],$$slots:{default:[nc]},$$scope:{ctx:n}}}),E=!n[2]&&!n[3].first_user&&function(n){var e,t,r=lt("Go and [sign in](%1) if you already have an account.","#signin")+"";return{c:function(){e=F("p")},m:function(n,o){q(n,e,o),e.innerHTML=r,t=Z(e,"click",fe)},p:x,d:function(n){n&&G(e),t()}}}(),O=new io({props:{op:n[5]}});return{c:function(){(e=F("h2")).textContent="".concat(ft(n[3].existing_user?"Recover account":"Sign up")),t=V(),$&&$.c(),r=V(),o=F("form"),i=F("input"),a=V(),c=F("input"),u=V(),Kn(w.$$.fragment),d=V(),Kn(_.$$.fragment),f=V(),l=F("div"),Kn(k.$$.fragment),p=V(),E&&E.c(),g=V(),Kn(O.$$.fragment),Q(i,"type","hidden"),Q(i,"name","exp"),Q(c,"type","hidden"),Q(c,"name","token"),Q(l,"class","form-actions"),Q(o,"method","post")},m:function(s,v){q(s,e,v),q(s,t,v),$&&$.m(s,v),q(s,r,v),q(s,o,v),H(o,i),H(o,a),H(o,c),H(o,u),Fn(w,o,null),H(o,d),Fn(_,o,null),H(o,f),H(o,l),Fn(k,l,null),H(o,p),E&&E.m(o,null),H(o,g),Fn(O,o,null),n[16](o),m=!0,h=Z(o,"submit",J(n[15]))},p:function(n,e){n[3].first_user&&$.p(n,e);var t={};131072&e&&(t.$$scope={dirty:e,ctx:n}),!s&&1&e&&(s=!0,t.value=n[0].formEmail,Nn((function(){return s=!1}))),w.$set(t);var r={};131072&e&&(r.$$scope={dirty:e,ctx:n}),_.$set(r);var o={};131072&e&&(o.$$scope={dirty:e,ctx:n}),k.$set(o),n[2]||n[3].first_user||E.p(n,e)},i:function(n){m||(Un(w.$$.fragment,n),Un(_.$$.fragment,n),Un(k.$$.fragment,n),Un(O.$$.fragment,n),m=!0)},o:function(n){zn(w.$$.fragment,n),zn(_.$$.fragment,n),zn(k.$$.fragment,n),zn(O.$$.fragment,n),m=!1},d:function(i){i&&G(e),i&&G(t),$&&$.d(i),i&&G(r),i&&G(o),Wn(w),Wn(_),Wn(k),E&&E.d(),Wn(O),n[16](null),h()}}}function Ka(n){var e,t,r,o,i,a,c,u,s,d,f,l,p,g,m=ft("Contact admin")+"";return{c:function(){(e=F("h2")).textContent="".concat(ft("Invalid invite/recover URL")),t=V(),(r=F("p")).textContent="".concat(ft(410==n[3].status?"The link has expired.":"The link is invalid.")),o=V(),(i=F("p")).textContent="".concat(ft("Please ask your Convos admin for a new link.")),a=V(),c=F("p"),u=F("a"),s=W(m),d=V(),(f=F("a")).textContent="".concat(ft("Sign in")),l=V(),(p=F("a")).textContent="".concat(ft("Home")),Q(u,"class","btn"),Q(u,"href",n[3].contact),Q(f,"class","btn is-hallow"),Q(f,"href","#signin"),Q(p,"class","btn is-hallow"),Q(p,"href","#top")},m:function(n,m){q(n,e,m),q(n,t,m),q(n,r,m),q(n,o,m),q(n,i,m),q(n,a,m),q(n,c,m),H(c,u),H(u,s),H(c,d),H(c,f),H(c,l),H(c,p),g=[Z(f,"click",fe),Z(p,"click",fe)]},p:x,i:x,o:x,d:function(n){n&&G(e),n&&G(t),n&&G(r),n&&G(o),n&&G(i),n&&G(a),n&&G(c),C(g)}}}function Fa(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("E-mail")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Wa(n){var e,t=ft("Your email will be used if you forget your password.")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Va(n){var e,t=ft("Your email is from the invite link.")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ya(n){var e;var t=function(n,e){return n[2]?Va:Wa}(n)(n);return{c:function(){e=F("p"),t.c(),Q(e,"slot","help")},m:function(n,r){q(n,e,r),t.m(e,null)},p:function(n,e){t.p(n,e)},d:function(n){n&&G(e),t.d()}}}function Za(n){var e;return{c:function(){e=V()},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ja(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Password")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Qa(n){var e;return{c:function(){(e=F("p")).textContent="".concat(ft("Hint: Use a phrase from a book.")),Q(e,"slot","help")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Xa(n){var e;return{c:function(){e=V()},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function nc(n){var e,t=ft(n[3].existing_user?"Set new password":"Sign up")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function ec(n){var e;return{c:function(){e=W("Convos")},m:function(n,t){q(n,e,t)},d:function(n){n&&G(e)}}}function tc(n){var e,t=ft("Blog")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function rc(n){var e,t=ft("Documentation")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function oc(n){var e,t=ft("GitHub")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function ic(n){var e,t,r,o,i,a,c,u,s,d,f,l,g,m,h,v,$,b=new Be({props:{href:"/",$$slots:{default:[Ta]},$$scope:{ctx:n}}}),y="Convos"!=n[3].organization_name&&function(n){var e,t=function(n,e){return"https://convos.by"!=n[3].organization_url?ja:La}(n)(n);return{c:function(){t.c(),e=Y()},m:function(n,r){t.m(n,r),q(n,e,r)},p:function(n,e){t.p(n,e)},d:function(n){t.d(n),n&&G(e)}}}(n),w=!n[3].first_user&&function(n){var e,t,r,o,i,a,c,u,s,d,f,l,p;function g(e){n[12].call(null,e)}var m={type:"email",name:"email",placeholder:ft("Ex: john@doe.com"),$$slots:{default:[Ua],label:[Ia]},$$scope:{ctx:n}};void 0!==n[0].formEmail&&(m.value=n[0].formEmail);var h=new Ve({props:m});yn.push((function(){return Gn(h,"value",g)}));var v=new Ve({props:{type:"password",name:"password",autocomplete:"current-password",$$slots:{default:[Ba],label:[za]},$$scope:{ctx:n}}}),$=new Zr({props:{icon:"sign-in-alt",op:n[4],$$slots:{default:[Ha]},$$scope:{ctx:n}}}),b=new io({props:{op:n[4]}});return{c:function(){e=F("section"),t=F("form"),(r=F("h2")).textContent="".concat(ft("Sign in")),o=V(),Kn(h.$$.fragment),a=V(),Kn(v.$$.fragment),c=V(),u=F("div"),Kn($.$$.fragment),s=V(),(d=F("a")).textContent="".concat(ft("Sign up")),f=V(),Kn(b.$$.fragment),Q(d,"class","btn is-hallow"),Q(d,"href","#signup"),Q(u,"class","form-actions"),Q(t,"method","post"),Q(e,"id","signin"),Q(e,"class","welcome-screen__signin fade-in")},m:function(i,g){q(i,e,g),H(e,t),H(t,r),H(t,o),Fn(h,t,null),H(t,a),Fn(v,t,null),H(t,c),H(t,u),Fn($,u,null),H(u,s),H(u,d),H(t,f),Fn(b,t,null),l=!0,p=[Z(d,"click",fe),Z(t,"submit",J(n[13]))]},p:function(n,e){var t={};131072&e&&(t.$$scope={dirty:e,ctx:n}),!i&&1&e&&(i=!0,t.value=n[0].formEmail,Nn((function(){return i=!1}))),h.$set(t);var r={};131072&e&&(r.$$scope={dirty:e,ctx:n}),v.$set(r);var o={};131072&e&&(o.$$scope={dirty:e,ctx:n}),$.$set(o)},i:function(n){l||(Un(h.$$.fragment,n),Un(v.$$.fragment,n),Un($.$$.fragment,n),Un(b.$$.fragment,n),l=!0)},o:function(n){zn(h.$$.fragment,n),zn(v.$$.fragment,n),zn($.$$.fragment,n),zn(b.$$.fragment,n),l=!1},d:function(n){n&&G(e),Wn(h),Wn(v),Wn($),Wn(b),C(p)}}}(n),_=[Ka,Ga,qa],x=[];d=function(n,e){return n[3].status>=400?0:n[2]||n[3].open_to_public||n[3].first_user?1:2}(n),f=x[d]=_[d](n);var k=new Be({props:{href:"https://convos.by/",$$slots:{default:[ec]},$$scope:{ctx:n}}}),E=new Be({props:{href:"https://convos.by/blog",$$slots:{default:[tc]},$$scope:{ctx:n}}}),O=new Be({props:{href:"https://convos.by/doc",$$slots:{default:[rc]},$$scope:{ctx:n}}}),N=new Be({props:{href:"https://github.com/Nordaaker/convos",$$slots:{default:[oc]},$$scope:{ctx:n}}});return{c:function(){e=F("main"),t=F("article"),r=F("h1"),Kn(b.$$.fragment),o=V(),y&&y.c(),i=V(),(a=F("p")).textContent="".concat(ft("Convos is the simplest way to use IRC, and it keeps you always online.")),c=V(),w&&w.c(),u=V(),s=F("section"),f.c(),l=V(),g=F("footer"),Kn(k.$$.fragment),m=W("\n    \n    "),Kn(E.$$.fragment),h=W("\n    \n    "),Kn(O.$$.fragment),v=W("\n    \n    "),Kn(N.$$.fragment),Q(t,"class","welcome-screen__about"),Q(s,"id","signup"),Q(s,"class","welcome-screen__signup fade-in"),Q(g,"class","welcome-screen__footer fade-in"),Q(e,"id","top"),Q(e,"class","welcome-screen")},m:function(n,f){q(n,e,f),H(e,t),H(t,r),Fn(b,r,null),H(r,o),y&&y.m(r,null),H(t,i),H(t,a),H(e,c),w&&w.m(e,null),H(e,u),H(e,s),x[d].m(s,null),H(e,l),H(e,g),Fn(k,g,null),H(g,m),Fn(E,g,null),H(g,h),Fn(O,g,null),H(g,v),Fn(N,g,null),$=!0},p:function(n,e){var t=p(e,1)[0],r={};131072&t&&(r.$$scope={dirty:t,ctx:n}),b.$set(r),"Convos"!=n[3].organization_name&&y.p(n,t),n[3].first_user||w.p(n,t),f.p(n,t);var o={};131072&t&&(o.$$scope={dirty:t,ctx:n}),k.$set(o);var i={};131072&t&&(i.$$scope={dirty:t,ctx:n}),E.$set(i);var a={};131072&t&&(a.$$scope={dirty:t,ctx:n}),O.$set(a);var c={};131072&t&&(c.$$scope={dirty:t,ctx:n}),N.$set(c)},i:function(n){$||(Un(b.$$.fragment,n),Un(w),Un(f),Un(k.$$.fragment,n),Un(E.$$.fragment,n),Un(O.$$.fragment,n),Un(N.$$.fragment,n),$=!0)},o:function(n){zn(b.$$.fragment,n),zn(w),zn(f),zn(k.$$.fragment,n),zn(E.$$.fragment,n),zn(O.$$.fragment,n),zn(N.$$.fragment,n),$=!1},d:function(n){n&&G(e),Wn(b),y&&y.d(),w&&w.d(),x[d].d(),Wn(k),Wn(E),Wn(O),Wn(N)}}}function ac(n,e){n.forEach((function(n){var e=n.isIntersecting?"add":"remove";n.target.classList[e]("is-visible")}))}function cc(n,e,t){var r,o,i;R(n,Se,(function(n){return t(8,r=n)}));var a=-1!=location.href.indexOf("email="),c=vn("settings"),u=vn("user"),s=u.api.operation("loginUser");R(n,s,(function(n){return t(9,o=n)}));var d,f,l=u.api.operation("registerUser");function p(n){return g.apply(this,arguments)}function g(){return(g=Xn(Jn.mark((function n(e){return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return document.cookie=e.res.headers["Set-Cookie"],e.reset(),n.next=4,u.load();case 4:Pe(u.calculateLastUrl());case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}R(n,l,(function(n){return t(10,i=n)})),mn((function(){f||(f=new IntersectionObserver(ac,{rootMargin:"-30px 0px 80px 0px",threshold:.8}),ue(document,".fade-in",(function(n){return f.observe(n)}))),d&&je(d)}));var m;return n.$$.update=function(){256&n.$$.dirty&&t(7,m=-1==r.path.indexOf("register")?0:"#signup"),384&n.$$.dirty&&fe(r.hash||m),512&n.$$.dirty&&o.is("success")&&p(s),1025&n.$$.dirty&&i.is("success")&&(u.update({lastUrl:""}),p(l))},[u,d,a,c,s,l,f,m,r,o,i,p,function(n){u.formEmail=n,t(0,u)},function(n){return s.perform(n.target)},function(n){u.formEmail=n,t(0,u)},function(n){return l.perform(n.target)},function(n){yn[n?"unshift":"push"]((function(){t(1,d=n)}))}]}var uc=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,cc,ic,S,{}),r}return s(t,e),t}(Zn);function sc(n){var e;return{c:function(){(e=F("h1")).textContent="".concat(ft("Settings"))},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function dc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("User email")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function fc(n){return{c:x,m:x,p:x,d:x}}function lc(n){var e,t,r,o,i,a,c,u,s,d,f,l,p,g,m=lt(n[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",h=lt("The link is valid until **%1**.",new Date(n[1].expires).toLocaleString())+"",v=n[1].url+"";return{c:function(){(e=F("h3")).textContent="".concat(ft("A link was generated")),t=V(),r=F("p"),i=V(),c=V(),u=F("a"),s=W(v),f=V(),l=F("p"),(p=F("small")).textContent="".concat(ft("Tip: Clicking on the link will copy it to your clipboard.")),o=new cn(m,i),a=new cn(h,null),Q(u,"href",d=n[1].url)},m:function(d,m){q(d,e,m),q(d,t,m),q(d,r,m),o.m(r),H(r,i),a.m(r),q(d,c,m),q(d,u,m),H(u,s),q(d,f,m),q(d,l,m),H(l,p),g=Z(u,"click",J(n[6]))},p:function(n,e){2&e&&m!==(m=lt(n[1].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&o.p(m),2&e&&h!==(h=lt("The link is valid until **%1**.",new Date(n[1].expires).toLocaleString())+"")&&a.p(h),2&e&&v!==(v=n[1].url+"")&&nn(s,v),2&e&&d!==(d=n[1].url)&&Q(u,"href",d)},d:function(n){n&&G(e),n&&G(t),n&&G(r),n&&G(c),n&&G(u),n&&G(f),n&&G(l),g()}}}function pc(n){var e,t=ft("Generate link")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function gc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Organization name")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function mc(n){var e;return{c:function(){(e=F("p")).textContent="".concat(ft("Can be changed if you want to add a touch of your organization.")),Q(e,"slot","help")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function hc(n){var e;return{c:function(){e=V()},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function vc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Organization URL")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function $c(n){var e;return{c:function(){(e=F("p")).textContent="".concat(ft('Used together with "Organization name" to add a link to your organization on the login screen.')),Q(e,"slot","help")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function bc(n){var e;return{c:function(){e=V()},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function yc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Admin email")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function wc(n){var e;return{c:function(){(e=F("p")).textContent="".concat(ft("This email can be used by users to get in touch with the Convos admin.")),Q(e,"slot","help")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function _c(n){var e;return{c:function(){e=V()},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function xc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Default connection URL")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function kc(n){var e;return{c:function(){(e=F("p")).textContent="".concat(ft("This is the default connection new users will connect to.")," \n        ").concat(ft('The path part is the default channel to join. "%%23convos" means "#convos".')),Q(e,"slot","help")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ec(n){var e;return{c:function(){e=V()},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Oc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Registration is open to public")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Cc(n){var e;return{c:function(){(e=F("p")).textContent="".concat(ft("Tick this box if you want users to be able to register without an invite URL.")),Q(e,"slot","help")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Nc(n){var e;return{c:function(){e=V()},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Sc(n){var e,t=ft("Save settings")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Mc(n){var e,t,r,o,i,a,c,u,s,d,f,l,g,m,h,v,$,b,y,w,_,x,k,E,O,N,S,M,D,R,P=lt("These settings control what users experience when they visit [%1](%1).",n[2].base_url)+"",A=new hr({props:{$$slots:{default:[sc]},$$scope:{ctx:n}}}),T=new Ve({props:{type:"email",name:"email",placeholder:ft("user@example.com"),$$slots:{default:[fc],label:[dc]},$$scope:{ctx:n}}}),L=n[1].url&&lc(n),j=new Zr({props:{icon:"save",op:n[3],$$slots:{default:[pc]},$$scope:{ctx:n}}}),I=new io({props:{op:n[3]}});function U(e){n[12].call(null,e)}var z={name:"organization_name",placeholder:ft("Nordaaker"),$$slots:{default:[hc],help:[mc],label:[gc]},$$scope:{ctx:n}};void 0!==n[0].organization_name&&(z.value=n[0].organization_name);var B=new Ve({props:z});function K(e){n[13].call(null,e)}yn.push((function(){return Gn(B,"value",U)}));var W={name:"organization_url",placeholder:ft("https://convos.by"),$$slots:{default:[bc],help:[$c],label:[vc]},$$scope:{ctx:n}};void 0!==n[0].organization_url&&(W.value=n[0].organization_url);var Y=new Ve({props:W});function X(e){n[14].call(null,e)}yn.push((function(){return Gn(Y,"value",K)}));var nn={name:"contact",placeholder:ft("Ex: jhthorsen@cpan.org"),$$slots:{default:[_c],help:[wc],label:[yc]},$$scope:{ctx:n}};void 0!==n[0].contact&&(nn.value=n[0].contact);var en=new Ve({props:nn});function tn(e){n[15].call(null,e)}yn.push((function(){return Gn(en,"value",X)}));var rn={name:"default_connection",placeholder:ft("irc://chat.freenode.net:6697/%%23convos"),$$slots:{default:[Ec],help:[kc],label:[xc]},$$scope:{ctx:n}};void 0!==n[0].default_connection&&(rn.value=n[0].default_connection);var on=new Ve({props:rn});yn.push((function(){return Gn(on,"value",tn)}));var an=new eo({props:{name:"open_to_public",checked:n[0].open_to_public,$$slots:{default:[Nc],help:[Cc],label:[Oc]},$$scope:{ctx:n}}}),cn=new Zr({props:{icon:"save",op:n[4],$$slots:{default:[Sc]},$$scope:{ctx:n}}}),un=new io({props:{op:n[4]}});return{c:function(){Kn(A.$$.fragment),e=V(),t=F("main"),r=F("form"),(o=F("h2")).textContent="".concat(ft("Recover or invite")),i=V(),(a=F("p")).textContent="".concat(ft("Using this form, you can generate an invite link for new users, or a recover password link for existing users.")),c=V(),Kn(T.$$.fragment),u=V(),L&&L.c(),s=V(),d=F("div"),Kn(j.$$.fragment),f=V(),Kn(I.$$.fragment),l=V(),g=F("form"),(m=F("h2")).textContent="".concat(ft("Convos settings")),h=V(),v=F("p"),$=V(),Kn(B.$$.fragment),y=V(),Kn(Y.$$.fragment),_=V(),Kn(en.$$.fragment),k=V(),Kn(on.$$.fragment),O=V(),Kn(an.$$.fragment),N=V(),S=F("div"),Kn(cn.$$.fragment),M=V(),Kn(un.$$.fragment),Q(d,"class","form-actions"),Q(r,"method","post"),Q(S,"class","form-actions"),Q(g,"method","post"),Q(t,"class","main")},m:function(p,b){Fn(A,p,b),q(p,e,b),q(p,t,b),H(t,r),H(r,o),H(r,i),H(r,a),H(r,c),Fn(T,r,null),H(r,u),L&&L.m(r,null),H(r,s),H(r,d),Fn(j,d,null),H(r,f),Fn(I,r,null),H(t,l),H(t,g),H(g,m),H(g,h),H(g,v),v.innerHTML=P,H(g,$),Fn(B,g,null),H(g,y),Fn(Y,g,null),H(g,_),Fn(en,g,null),H(g,k),Fn(on,g,null),H(g,O),Fn(an,g,null),H(g,N),H(g,S),Fn(cn,S,null),H(g,M),Fn(un,g,null),D=!0,R=[Z(r,"submit",J(n[5])),Z(g,"submit",J(n[7]))]},p:function(n,e){var t=p(e,1)[0],o={};65536&t&&(o.$$scope={dirty:t,ctx:n}),A.$set(o);var i={};65536&t&&(i.$$scope={dirty:t,ctx:n}),T.$set(i),n[1].url?L?L.p(n,t):((L=lc(n)).c(),L.m(r,s)):L&&(L.d(1),L=null);var a={};65536&t&&(a.$$scope={dirty:t,ctx:n}),j.$set(a);var c={};65536&t&&(c.$$scope={dirty:t,ctx:n}),!b&&1&t&&(b=!0,c.value=n[0].organization_name,Nn((function(){return b=!1}))),B.$set(c);var u={};65536&t&&(u.$$scope={dirty:t,ctx:n}),!w&&1&t&&(w=!0,u.value=n[0].organization_url,Nn((function(){return w=!1}))),Y.$set(u);var d={};65536&t&&(d.$$scope={dirty:t,ctx:n}),!x&&1&t&&(x=!0,d.value=n[0].contact,Nn((function(){return x=!1}))),en.$set(d);var f={};65536&t&&(f.$$scope={dirty:t,ctx:n}),!E&&1&t&&(E=!0,f.value=n[0].default_connection,Nn((function(){return E=!1}))),on.$set(f);var l={};1&t&&(l.checked=n[0].open_to_public),65536&t&&(l.$$scope={dirty:t,ctx:n}),an.$set(l);var g={};65536&t&&(g.$$scope={dirty:t,ctx:n}),cn.$set(g)},i:function(n){D||(Un(A.$$.fragment,n),Un(T.$$.fragment,n),Un(j.$$.fragment,n),Un(I.$$.fragment,n),Un(B.$$.fragment,n),Un(Y.$$.fragment,n),Un(en.$$.fragment,n),Un(on.$$.fragment,n),Un(an.$$.fragment,n),Un(cn.$$.fragment,n),Un(un.$$.fragment,n),D=!0)},o:function(n){zn(A.$$.fragment,n),zn(T.$$.fragment,n),zn(j.$$.fragment,n),zn(I.$$.fragment,n),zn(B.$$.fragment,n),zn(Y.$$.fragment,n),zn(en.$$.fragment,n),zn(on.$$.fragment,n),zn(an.$$.fragment,n),zn(cn.$$.fragment,n),zn(un.$$.fragment,n),D=!1},d:function(n){Wn(A,n),n&&G(e),n&&G(t),Wn(T),L&&L.d(),Wn(j),Wn(I),Wn(B),Wn(Y),Wn(en),Wn(on),Wn(an),Wn(cn),Wn(un),C(R)}}}function Dc(n,e,t){var r,o;R(n,Me,(function(n){return t(8,r=n)}));var i=vn("settings"),a=vn("user"),c=a.api.operation("getSettings"),u=a.api.operation("inviteUser");R(n,u,(function(n){return t(9,o=n)}));var s,d=a.api.operation("updateSettings"),f={};return L(Me,r=ft("%1 - Convos",ft("Convos settings"))),d.on("start",(function(n){n.body.contact&&(n.body.contact="mailto:"+n.body.contact),n.body.open_to_public=!!n.body.open_to_public})),mn(Xn(Jn.mark((function n(){var e;return Jn.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.perform();case 2:(e=c.res.body).contact=e.contact.replace(/mailto:/,""),t(0,f=e);case 5:case"end":return n.stop()}}),n)})))),n.$$.update=function(){512&n.$$.dirty&&t(1,s=o.res.body||{})},[f,s,i,u,d,function(n){u.perform(n.target)},function(n){var e=function(n){var e=document.createElement("textarea");e.value=n.textContent||n.value,e.style.opacity=0,e.style.position="absolute",document.body.appendChild(e);try{e.focus(),e.select(),document.execCommand("copy")}catch(n){e.value="",console.log("copyToClipboard() failed:",n)}return document.body.removeChild(e),e.value}(n.target);e&&a.events.notifyUser("Invite link copied",e,{force:!0})},function(n){d.perform(n.target)},r,o,a,c,function(n){f.organization_name=n,t(0,f)},function(n){f.organization_url=n,t(0,f)},function(n){f.contact=n,t(0,f)},function(n){f.default_connection=n,t(0,f)}]}var Rc=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Dc,Mc,S,{}),r}return s(t,e),t}(Zn);function Pc(n){var e;return{c:function(){(e=F("h1")).textContent="".concat(ft("Account"))},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Ac(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Email")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Tc(n){return{c:x,m:x,p:x,d:x}}function Lc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Notification keywords")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function jc(n){return{c:x,m:x,p:x,d:x}}function Ic(n){var e,t;function r(e){n[11].call(null,e)}var o={name:"notifications",$$slots:{default:[zc],label:[Uc]},$$scope:{ctx:n}};void 0!==n[4]&&(o.checked=n[4]);var i=new eo({props:o});return yn.push((function(){return Gn(i,"checked",r)})),{c:function(){Kn(i.$$.fragment)},m:function(n,e){Fn(i,n,e),t=!0},p:function(n,t){var r={};32768&t&&(r.$$scope={dirty:t,ctx:n}),!e&&16&t&&(e=!0,r.checked=n[4],Nn((function(){return e=!1}))),i.$set(r)},i:function(n){t||(Un(i.$$.fragment,n),t=!0)},o:function(n){zn(i.$$.fragment,n),t=!1},d:function(n){Wn(i,n)}}}function Uc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Enable notifications")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function zc(n){return{c:x,m:x,p:x,d:x}}function Bc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Expand URL to media")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Hc(n){return{c:x,m:x,p:x,d:x}}function qc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Theme")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Gc(n){return{c:x,m:x,p:x,d:x}}function Kc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Password")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Fc(n){return{c:x,m:x,p:x,d:x}}function Wc(n){var e;return{c:function(){(e=F("span")).textContent="".concat(ft("Repeat password")),Q(e,"slot","label")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Vc(n){return{c:x,m:x,p:x,d:x}}function Yc(n){var e,t=ft("Save settings")+"";return{c:function(){e=W(t)},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Zc(n){var e;return{c:function(){(e=F("p")).textContent="".concat(ft("You cannot receive notifications, because it is denied by your browser.")),Q(e,"class","error")},m:function(n,t){q(n,e,t)},p:x,d:function(n){n&&G(e)}}}function Jc(n){var e,t,r,o,i,a,c,u,s,d,f,l,g,m,h,v,$,b,y,w=new hr({props:{$$slots:{default:[Pc]},$$scope:{ctx:n}}}),_=new Ve({props:{type:"email",name:"email",value:n[5].email,readonly:!0,$$slots:{default:[Tc],label:[Ac]},$$scope:{ctx:n}}}),x=new Ve({props:{name:"highlight_keywords",placeholder:ft("whatever, keywords"),value:n[8],$$slots:{default:[jc],label:[Lc]},$$scope:{ctx:n}}}),k=!n[2]&&Ic(n);function E(e){n[12].call(null,e)}var O={name:"expand_url",$$slots:{default:[Hc],label:[Bc]},$$scope:{ctx:n}};void 0!==n[1]&&(O.checked=n[1]);var C=new eo({props:O});function N(e){n[13].call(null,e)}yn.push((function(){return Gn(C,"checked",E)}));var S={name:"theme",options:fr,$$slots:{default:[Gc],label:[qc]},$$scope:{ctx:n}};void 0!==n[3]&&(S.value=n[3]);var M=new Qi({props:S});yn.push((function(){return Gn(M,"value",N)}));var D=new Ve({props:{type:"password",name:"password",autocomplete:"new-password",$$slots:{default:[Fc],label:[Kc]},$$scope:{ctx:n}}}),R=new Ve({props:{type:"password",name:"password_again",autocomplete:"new-password",$$slots:{default:[Vc],label:[Wc]},$$scope:{ctx:n}}}),P=new Zr({props:{icon:"save",op:n[7],$$slots:{default:[Yc]},$$scope:{ctx:n}}}),A=new io({props:{op:n[7]}}),T=n[2]&&Zc();return{c:function(){Kn(w.$$.fragment),e=V(),t=F("main"),r=F("form"),Kn(_.$$.fragment),o=V(),Kn(x.$$.fragment),i=V(),k&&k.c(),a=V(),Kn(C.$$.fragment),u=V(),Kn(M.$$.fragment),d=V(),Kn(D.$$.fragment),f=V(),Kn(R.$$.fragment),l=V(),(g=F("p")).textContent="".concat(ft("Leave the password fields empty to keep the current password.")),m=V(),h=F("div"),Kn(P.$$.fragment),v=V(),Kn(A.$$.fragment),$=V(),T&&T.c(),Q(h,"class","form-actions"),Q(r,"method","post"),Q(t,"class","main")},m:function(c,s){Fn(w,c,s),q(c,e,s),q(c,t,s),H(t,r),Fn(_,r,null),H(r,o),Fn(x,r,null),H(r,i),k&&k.m(r,null),H(r,a),Fn(C,r,null),H(r,u),Fn(M,r,null),H(r,d),Fn(D,r,null),H(r,f),Fn(R,r,null),H(r,l),H(r,g),H(r,m),H(r,h),Fn(P,h,null),H(r,v),Fn(A,r,null),H(r,$),T&&T.m(r,null),n[14](r),b=!0,y=Z(r,"submit",J(n[9]))},p:function(n,e){var t=p(e,1)[0],o={};32768&t&&(o.$$scope={dirty:t,ctx:n}),w.$set(o);var i={};32&t&&(i.value=n[5].email),32768&t&&(i.$$scope={dirty:t,ctx:n}),_.$set(i);var u={};32768&t&&(u.$$scope={dirty:t,ctx:n}),x.$set(u),n[2]?k&&(jn(),zn(k,1,1,(function(){k=null})),In()):k?(k.p(n,t),Un(k,1)):((k=Ic(n)).c(),Un(k,1),k.m(r,a));var d={};32768&t&&(d.$$scope={dirty:t,ctx:n}),!c&&2&t&&(c=!0,d.checked=n[1],Nn((function(){return c=!1}))),C.$set(d);var f={};32768&t&&(f.$$scope={dirty:t,ctx:n}),!s&&8&t&&(s=!0,f.value=n[3],Nn((function(){return s=!1}))),M.$set(f);var l={};32768&t&&(l.$$scope={dirty:t,ctx:n}),D.$set(l);var g={};32768&t&&(g.$$scope={dirty:t,ctx:n}),R.$set(g);var m={};32768&t&&(m.$$scope={dirty:t,ctx:n}),P.$set(m),n[2]?T?T.p(n,t):((T=Zc()).c(),T.m(r,null)):T&&(T.d(1),T=null)},i:function(n){b||(Un(w.$$.fragment,n),Un(_.$$.fragment,n),Un(x.$$.fragment,n),Un(k),Un(C.$$.fragment,n),Un(M.$$.fragment,n),Un(D.$$.fragment,n),Un(R.$$.fragment,n),Un(P.$$.fragment,n),Un(A.$$.fragment,n),b=!0)},o:function(n){zn(w.$$.fragment,n),zn(_.$$.fragment,n),zn(x.$$.fragment,n),zn(k),zn(C.$$.fragment,n),zn(M.$$.fragment,n),zn(D.$$.fragment,n),zn(R.$$.fragment,n),zn(P.$$.fragment,n),zn(A.$$.fragment,n),b=!1},d:function(r){Wn(w,r),r&&G(e),r&&G(t),Wn(_),Wn(x),k&&k.d(),Wn(C),Wn(M),Wn(D),Wn(R),Wn(P),Wn(A),T&&T.d(),n[14](null),y()}}}function Qc(n,e,t){var r,o;R(n,Me,(function(n){return t(10,r=n)}));var i=vn("user");R(n,i,(function(n){return t(5,o=n)}));var a,c=i.api.operation("updateUser"),u=i.embedMaker.expandUrlToMedia,s="denied"==i.events.browserNotifyPermission,d=i.theme,f=i.events.wantNotifications,l=i.highlight_keywords.join(", ");return L(Me,r=ft("%1 - Convos",ft("Account"))),c.on("start",(function(n){n.body.password||delete n.body.password,n.body.highlight_keywords=n.body.highlight_keywords.split(/[.,\s]+/).map((function(n){return n.trim()}))})),[a,u,s,d,f,o,i,c,l,function(n){var e=n.target,r=[e.password.value,e.password_again.value];if(f&&i.events.requestPermissionToNotify((function(n){"denied"==n&&(t(4,f=!1),t(2,s=!0))})),r.join("").length&&r[0]!=r[1])return c.error("Passwords does not match.");i.embedMaker.update({expandUrlToMedia:u}),i.update({theme:d}),c.perform(n.target)},r,function(n){t(4,f=n)},function(n){t(1,u=n)},function(n){t(3,d=n)},function(n){yn[n?"unshift":"push"]((function(){t(0,a=n)}))}]}var Xc=function(e){function t(e){var r;return n(this,t),r=a(this,c(t).call(this)),Yn(i(r),e,Qc,Jc,S,{}),r}return s(t,e),t}(Zn),nu=qn.window;function eu(n){var e,t,r,o,i=n[1]&&("nav"==n[3]||n[4].wideScreen)&&tu(n),a=n[2];if(a)var c=new a({});var u=n[3]&&!n[4].wideScreen&&ru(n);return{c:function(){i&&i.c(),e=V(),c&&Kn(c.$$.fragment),t=V(),u&&u.c(),r=Y()},m:function(n,a){i&&i.m(n,a),q(n,e,a),c&&Fn(c,n,a),q(n,t,a),u&&u.m(n,a),q(n,r,a),o=!0},p:function(n,o){if(n[1]&&("nav"==n[3]||n[4].wideScreen)?i?(i.p(n,o),Un(i,1)):((i=tu(n)).c(),Un(i,1),i.m(e.parentNode,e)):i&&(jn(),zn(i,1,1,(function(){i=null})),In()),a!==(a=n[2])){if(c){jn();var s=c;zn(s.$$.fragment,1,0,(function(){Wn(s,1)})),In()}a?(Kn((c=new a({})).$$.fragment),Un(c.$$.fragment,1),Fn(c,t.parentNode,t)):c=null}n[3]&&!n[4].wideScreen?u?(u.p(n,o),Un(u,1)):((u=ru(n)).c(),Un(u,1),u.m(r.parentNode,r)):u&&(jn(),zn(u,1,1,(function(){u=null})),In())},i:function(n){o||(Un(i),c&&Un(c.$$.fragment,n),Un(u),o=!0)},o:function(n){zn(i),c&&zn(c.$$.fragment,n),zn(u),o=!1},d:function(n){i&&i.d(n),n&&G(e),c&&Wn(c,n),n&&G(t),u&&u.d(n),n&&G(r)}}}function tu(n){var e,t=new Pt({props:{transition:{duration:n[4].wideScreen?0:250,x:n[4].width}}});return{c:function(){Kn(t.$$.fragment)},m:function(n,r){Fn(t,n,r),e=!0},p:function(n,e){var r={};16&e&&(r.transition={duration:n[4].wideScreen?0:250,x:n[4].width}),t.$set(r)},i:function(n){e||(Un(t.$$.fragment,n),e=!0)},o:function(n){zn(t.$$.fragment,n),e=!1},d:function(n){Wn(t,n)}}}function ru(n){var e,t,r,o;return{c:function(){(e=F("div")).textContent="",Q(e,"class","overlay")},m:function(t,i){q(t,e,i),r=!0,o=Z(e,"click",n[17])},p:x,i:function(n){r||(Cn((function(){t||(t=Hn(e,Ze,{duration:200},!0)),t.run(1)})),r=!0)},o:function(n){t||(t=Hn(e,Ze,{duration:200},!1)),t.run(0),r=!1},d:function(n){n&&G(e),n&&t&&t.end(),o()}}}function ou(n){var e,t,r;Cn(n[16]);var o=n[2]&&eu(n);return{c:function(){o&&o.c(),e=Y()},m:function(i,a){o&&o.m(i,a),q(i,e,a),t=!0,r=[Z(nu,"click",n[6]),Z(nu,"focus",n[7]),Z(nu,"keydown",iu),Z(nu,"resize",n[16])]},p:function(n,t){var r=p(t,1)[0];n[2]?o?(o.p(n,r),Un(o,1)):((o=eu(n)).c(),Un(o,1),o.m(e.parentNode,e)):o&&(jn(),zn(o,1,1,(function(){o=null})),In())},i:function(n){t||(Un(o),t=!0)},o:function(n){zn(o),t=!1},d:function(n){o&&o.d(n),n&&G(e),C(r)}}}function iu(n){if(n.shiftKey&&13==n.keyCode){n.preventDefault();var e=document.getElementById("search_input"),t=document.activeElement;if(t!=e&&!ge(t,"body"))return e.focus();for(var r=["#chat_input",'.main input[type="text"]',".main a","#search_input"],o=0;o<r.length;o++){var i=document.querySelector(r[o]);if(i)return i.focus()}}}function au(n,e,t){var r,o,i,a,c,u;R(n,Se,(function(n){return t(9,r=n)})),R(n,Me,(function(n){return t(11,i=n)})),R(n,De,(function(n){return t(2,a=n)})),R(n,Ce,(function(n){return t(3,c=n)})),R(n,Ne,(function(n){return t(4,u=n)}));var s=[[new RegExp("^/(file|paste)"),null,{}],[new RegExp("^/docs"),null,{}],[new RegExp("^/$"),uc,{user:"pending"}],[new RegExp(".*"),Na,{user:"offline"}],[new RegExp("^/(login|register)"),uc,{}],[new RegExp("^/settings/connection"),Ki,{user:"loggedIn"}],[new RegExp("^/settings/conversation"),ga,{user:"loggedIn"}],[new RegExp("^/settings/account"),Xc,{user:"loggedIn"}],[new RegExp("^/settings"),Rc,{user:"loggedIn"}],[new RegExp("^/chat"),Bi,{user:"loggedIn"}],[new RegExp("^/help"),Aa,{user:"loggedIn"}],[new RegExp("^/$"),null,{user:["error","success"],gotoLast:!0}],[new RegExp(".*"),Na,{}]],d=[window.__convos,delete window.__convos][0],f=new $e(d.api_url,{debug:!0}),l=new dr({api:f,wsUrl:d.ws_url});R(n,l,(function(n){return t(10,o=n)}));var g=l.notifications,m=0;function h(n){var e=["","chat",n.connection_id];if(L(Ce,c=""),"part"==n.command[0]){var t=document.querySelector('.sidebar-left [href$="'+e.map(encodeURIComponent).join("/")+'"]');Pe(t?t.href:"/chat")}else n.dialog_id&&e.push(n.dialog_id),Pe(e.map(encodeURIComponent).join("/"))}window.hljs=be,Se.base=d.base_url,l.events.listenToGlobalEvents(),hn("settings",d),hn("user",l),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then((function(n){l.update({latestVersion:d.asset_version}),n.update()})).catch((function(n){console.log("[Convos] ServiceWorker registration failed:",n)})),mn((function(){ae(Se.base+"/images/emojis.js"),d.load_user&&l.load(),l.showGrid&&document.querySelector("body").classList.add("with-grid");var n,e=[];return e.push((n=function(){return Se.set(Ae(location.href))},window.addEventListener("popstate",n),function(){return window.removeEventListener("popstate",n)})),e.push(l.on("wsEventSentJoin",h)),e.push(l.on("wsEventSentPart",h)),function(){return e.forEach((function(n){return n()}))}}));var v;return n.$$.update=function(){1&n.$$.dirty&&Ne.set({wideScreen:m>800,width:m}),1536&n.$$.dirty&&function(n,e,t){var r=n.path,o=[e.status,r].join(":");if(o!=Oe){for(var i=0;i<t.length;i++){var a=p(t[i],3),c=a[0],u=a[1],s=a[2];if(c.test(r)&&(!s.user||e.is(s.user))){if(s.gotoLast)return Pe(e.calculateLastUrl());u.routerOptions=s,Te(u),de("body",/(is-logged-)\S+/,e.is("loggedIn")?"in":"out"),de("body",/(page-)\S+/,s.name||n.pathParts[0]),"loggedIn"==s.user&&e.update({lastUrl:n.toString()});break}}Oe=o}}(r,o,s),1024&n.$$.dirty&&function(n){0==fr.filter((function(e){return e[0]==n})).length&&(n="auto"),"auto"==n&&(n=lr);var e=document.documentElement;e.className=e.className.replace(/theme-\S+/,(function(){return"theme-"+n}))}(o.theme),3072&n.$$.dirty&&document&&(document.title=o.unread?"("+o.unread+") "+i:i),4&n.$$.dirty&&t(1,v="loggedIn"==a.routerOptions.user)},[m,v,a,c,u,l,function(n){var e=ne(n.target,"a"),t=e&&e.href.match(/#call:(\w+):(\w+)/)||["","",""];if(t[2])switch(n.preventDefault(),t[1]){case"events":return l.events[t[2]]();case"user":return l[t[2]]()}if(e&&"_self"==e.target)return n.preventDefault(),void Pe(e.href);var o=e&&e.href.match(/(.*)#(activeMenu):(\w*)/)||["","","",""];0==o[1].indexOf("http")&&r.toString()!=o[1]&&Pe(o[1]),ne(n.target,".sidebar-left")&&!e||ne(n.target,".main")&&!o[3]||((o[2]||c)&&n.preventDefault(),L(Ce,c=o[3]==c?"":o[3]))},function(){l.ensureConnected()},s,r,o,i,d,f,g,h,function(){t(0,m=nu.innerWidth)},function(){return L(Ce,c="")}]}var cu=function(e){function r(e){var t;return n(this,r),t=a(this,c(r).call(this)),Yn(i(t),e,au,ou,S,{routingRules:8}),t}return s(r,e),t(r,[{key:"routingRules",get:function(){return this.$$.ctx[8]}}]),r}(Zn),uu=document.querySelector("body");new cu({target:document.body});uu.classList=uu.className.replace(/no-js/,"has-js")}();
//# sourceMappingURL=convos.5e4f820e.js.map
