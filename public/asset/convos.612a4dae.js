!function(){"use strict";var e={add:function(e){document.body.classList.remove("no-"+e),document.body.classList.add("has-"+e)},has:function(e){return document.body.classList.contains("has-"+e)},remove:function(e){document.body.classList.add("no-"+e),document.body.classList.remove("has-"+e)}};function t(t,n){document.addEventListener(t,(function r(o){"mousemove"!=t&&e.add(n),"mousemove"!=t||e.has("touch")||e.add(n),document.removeEventListener(t,r)}))}function n(e){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function r(e,t,o){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}(e,t);if(o){var i=Object.getOwnPropertyDescriptor(o,t);return i.get?i.get.call(r):i.value}})(e,t,o||e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?s(e):t}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function u(e,t,n){return(u=l()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&o(i,n.prototype),i}).apply(null,arguments)}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return u(e,arguments,n(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),o(i,e)})(e)}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function m(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function v(){}t("mousemove","mouse"),t("touchstart","touch"),e.add("js");var y=function(e){return e};function b(e){return e()}function w(){return Object.create(null)}function _(e){e.forEach(b)}function k(e){return"function"==typeof e}function x(e,t){return e!=e?t==t:e!==t||e&&"object"===a(e)||"function"==typeof e}function E(e){if(null==e)return v;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=e.subscribe.apply(e,n);return o.unsubscribe?function(){return o.unsubscribe()}:o}function O(e){var t;return E(e,(function(e){return t=e}))(),t}function S(e,t,n){e.$$.on_destroy.push(E(t,n))}function C(e,t,n,r){if(e){var o=N(e,t,n,r);return e[0](o)}}function N(e,t,n,r){return e[1]&&r?function(e,t){for(var n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function A(e,t,n,r,o,i,s){var c=function(e,t,n,r){if(e[2]&&r){var o=e[2](r(n));if(void 0===t.dirty)return o;if("object"===a(o)){for(var i=[],s=Math.max(t.dirty.length,o.length),c=0;c<s;c+=1)i[c]=t.dirty[c]|o[c];return i}return t.dirty|o}return t.dirty}(t,r,o,i);if(c){var l=N(t,n,r,s);e.p(l,c)}}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;return e.set(n),t}function R(e){return e&&k(e.destroy)?e.destroy:v}var T="undefined"!=typeof window,L=T?function(){return window.performance.now()}:function(){return Date.now()},P=T?function(e){return requestAnimationFrame(e)}:v,M=new Set;function D(e){M.forEach((function(t){t.c(e)||(M.delete(t),t.f())})),0!==M.size&&P(D)}var I,U=!1;function B(){U=!0}function H(){U=!1}function z(e,t,n,r){for(;e<t;){var o=e+(t-e>>1);n(o)<=r?e=o+1:t=o}return e}function q(e,t){U?(!function(e){if(!e.hydrate_init){e.hydrate_init=!0;var t=e.childNodes,n=new Int32Array(t.length+1),r=new Int32Array(t.length);n[0]=-1;for(var o=0,i=0;i<t.length;i++){var a=z(1,o+1,(function(e){return t[n[e]].claim_order}),t[i].claim_order)-1;r[i]=n[a]+1;var s=a+1;n[s]=i,o=Math.max(s,o)}for(var c=[],l=[],u=t.length-1,d=n[o]+1;0!=d;d=r[d-1]){for(c.push(t[d-1]);u>=d;u--)l.push(t[u]);u--}for(;u>=0;u--)l.push(t[u]);c.reverse(),l.sort((function(e,t){return e.claim_order-t.claim_order}));for(var f=0,p=0;f<l.length;f++){for(;p<c.length&&l[f].claim_order>=c[p].claim_order;)p++;var m=p<c.length?c[p]:null;e.insertBefore(l[f],m)}}}(e),(void 0===e.actual_end_child||null!==e.actual_end_child&&e.actual_end_child.parentElement!==e)&&(e.actual_end_child=e.firstChild),t!==e.actual_end_child?e.insertBefore(t,e.actual_end_child):e.actual_end_child=t.nextSibling):t.parentNode!==e&&e.appendChild(t)}function F(e,t,n){U&&!n?q(e,t):(t.parentNode!==e||n&&t.nextSibling!==n)&&e.insertBefore(t,n||null)}function W(e){e.parentNode.removeChild(e)}function K(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function G(e){return document.createElement(e)}function Y(e){return document.createTextNode(e)}function V(){return Y(" ")}function J(){return Y("")}function Z(e,t,n,r){return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n,r)}}function Q(e){return function(t){return t.preventDefault(),e.call(this,t)}}function X(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ee(e){return Array.from(e.childNodes)}function te(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function ne(e,t){e.value=null==t?"":t}function re(e,t,n,r){e.style.setProperty(t,n,r?"important":"")}function oe(){if(void 0===I){I=!1;try{"undefined"!=typeof window&&window.parent&&window.parent.document}catch(e){I=!0}}return I}function ie(e,t,n){e.classList[n?"add":"remove"](t)}function ae(e,t){var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}var se,ce=function(){function e(t){h(this,e),this.e=this.n=null,this.l=t}return $(e,[{key:"m",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.e||(this.e=G(t.nodeName),this.t=t,this.l?this.n=this.l:this.h(e)),this.i(n)}},{key:"h",value:function(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}},{key:"i",value:function(e){for(var t=0;t<this.n.length;t+=1)F(this.t,this.n[t],e)}},{key:"p",value:function(e){this.d(),this.h(e),this.i(this.a)}},{key:"d",value:function(){this.n.forEach(W)}}]),e}(),le=new Set,ue=0;function de(e){for(var t=5381,n=e.length;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function fe(e,t,n,r,o,i,a){for(var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=16.666/r,l="{\n",u=0;u<=1;u+=c){var d=t+(n-t)*i(u);l+=100*u+"%{".concat(a(d,1-d),"}\n")}var f=l+"100% {".concat(a(n,1-n),"}\n}"),p="__svelte_".concat(de(f),"_").concat(s),m=e.ownerDocument;le.add(m);var h=m.__svelte_stylesheet||(m.__svelte_stylesheet=m.head.appendChild(G("style")).sheet),g=m.__svelte_rules||(m.__svelte_rules={});g[p]||(g[p]=!0,h.insertRule("@keyframes ".concat(p," ").concat(f),h.cssRules.length));var $=e.style.animation||"";return e.style.animation="".concat($?"".concat($,", "):"").concat(p," ").concat(r,"ms linear ").concat(o,"ms 1 both"),ue+=1,p}function pe(e,t){var n=(e.style.animation||"").split(", "),r=n.filter(t?function(e){return e.indexOf(t)<0}:function(e){return-1===e.indexOf("__svelte")}),o=n.length-r.length;o&&(e.style.animation=r.join(", "),(ue-=o)||P((function(){ue||(le.forEach((function(e){for(var t=e.__svelte_stylesheet,n=t.cssRules.length;n--;)t.deleteRule(n);e.__svelte_rules={}})),le.clear())})))}function me(e){se=e}function he(){if(!se)throw new Error("Function called outside component initialization");return se}function ge(e){he().$$.on_mount.push(e)}function $e(e){he().$$.on_destroy.push(e)}function ve(e,t){he().$$.context.set(e,t)}function ye(e){return he().$$.context.get(e)}function be(e,t){var n=this,r=e.$$.callbacks[t.type];r&&r.slice().forEach((function(e){return e.call(n,t)}))}var we=[],_e=[],ke=[],xe=[],Ee=Promise.resolve(),Oe=!1;function Se(){Oe||(Oe=!0,Ee.then(Le))}function Ce(){return Se(),Ee}function Ne(e){ke.push(e)}function Ae(e){xe.push(e)}var je,Re=!1,Te=new Set;function Le(){if(!Re){Re=!0;do{for(var e=0;e<we.length;e+=1){var t=we[e];me(t),Pe(t.$$)}for(me(null),we.length=0;_e.length;)_e.pop()();for(var n=0;n<ke.length;n+=1){var r=ke[n];Te.has(r)||(Te.add(r),r())}ke.length=0}while(we.length);for(;xe.length;)xe.pop()();Oe=!1,Re=!1,Te.clear()}}function Pe(e){if(null!==e.fragment){e.update(),_(e.before_update);var t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ne)}}function Me(e,t,n){e.dispatchEvent(ae("".concat(t?"intro":"outro").concat(n)))}var De,Ie=new Set;function Ue(){De={r:0,c:[],p:De}}function Be(){De.r||_(De.c),De=De.p}function He(e,t){e&&e.i&&(Ie.delete(e),e.i(t))}function ze(e,t,n,r){if(e&&e.o){if(Ie.has(e))return;Ie.add(e),De.c.push((function(){Ie.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}}var qe={duration:0};function Fe(e,t,n,r){var o=t(e,n),i=r?0:1,a=null,s=null,c=null;function l(){c&&pe(e,c)}function u(e,t){var n=e.b-i;return t*=Math.abs(n),{a:i,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function d(t){var n,r=o||qe,d=r.delay,f=void 0===d?0:d,p=r.duration,m=void 0===p?300:p,h=r.easing,g=void 0===h?y:h,$=r.tick,b=void 0===$?v:$,w=r.css,k={start:L()+f,b:t};t||(k.group=De,De.r+=1),a||s?s=k:(w&&(l(),c=fe(e,i,t,m,f,g,w)),t&&b(0,1),a=u(k,m),Ne((function(){return Me(e,t,"start")})),n=function(t){if(s&&t>s.start&&(a=u(s,m),s=null,Me(e,a.b,"start"),w&&(l(),c=fe(e,i,a.b,a.duration,0,g,o.css))),a)if(t>=a.end)b(i=a.b,1-i),Me(e,a.b,"end"),s||(a.b?l():--a.group.r||_(a.group.c)),a=null;else if(t>=a.start){var n=t-a.start;i=a.a+a.d*g(n/a.duration),b(i,1-i)}return!(!a&&!s)},0===M.size&&P(D),new Promise((function(e){M.add({c:n,f:e})})))}return{run:function(e){k(o)?(je||(je=Promise.resolve()).then((function(){je=null})),je).then((function(){o=o(),d(e)})):d(e)},end:function(){l(),a=s=null}}}function We(e,t){var n,r=t.token={};function o(e,n,o,i){if(t.token===r){t.resolved=i;var a=t.ctx;void 0!==o&&((a=a.slice())[o]=i);var s=e&&(t.current=e)(a),c=!1;t.block&&(t.blocks?t.blocks.forEach((function(e,r){r!==n&&e&&(Ue(),ze(e,1,1,(function(){t.blocks[r]===e&&(t.blocks[r]=null)})),Be())})):t.block.d(1),s.c(),He(s,1),s.m(t.mount(),t.anchor),c=!0),t.block=s,t.blocks&&(t.blocks[n]=s),c&&Le()}}if((n=e)&&"object"===a(n)&&"function"==typeof n.then){var i=he();if(e.then((function(e){me(i),o(t.then,1,t.value,e),me(null)}),(function(e){if(me(i),o(t.catch,2,t.error,e),me(null),!t.hasCatch)throw e})),t.current!==t.pending)return o(t.pending,0),!0}else{if(t.current!==t.then)return o(t.then,1,t.value,e),!0;t.resolved=e}}var Ke="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function Ge(e,t,n){var r=e.$$.props[t];void 0!==r&&(e.$$.bound[r]=n,n(e.$$.ctx[r]))}function Ye(e){e&&e.c()}function Ve(e,t,n,r){var o=e.$$,i=o.fragment,a=o.on_mount,s=o.on_destroy,c=o.after_update;i&&i.m(t,n),r||Ne((function(){var t=a.map(b).filter(k);s?s.push.apply(s,m(t)):_(t),e.$$.on_mount=[]})),c.forEach(Ne)}function Je(e,t){var n=e.$$;null!==n.fragment&&(_(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Ze(e,t){-1===e.$$.dirty[0]&&(we.push(e),Se(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Qe(e,t,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[-1],s=se;me(e);var c=e.$$={fragment:null,ctx:null,props:i,update:v,not_equal:o,bound:w(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s?s.$$.context:t.context||[]),callbacks:w(),dirty:a,skip_bound:!1},l=!1;if(c.ctx=n?n(e,t.props||{},(function(t,n){var r=!(arguments.length<=2)&&arguments.length-2?arguments.length<=2?void 0:arguments[2]:n;return c.ctx&&o(c.ctx[t],c.ctx[t]=r)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](r),l&&Ze(e,t)),n})):[],c.update(),l=!0,_(c.before_update),c.fragment=!!r&&r(c.ctx),t.target){if(t.hydrate){B();var u=ee(t.target);c.fragment&&c.fragment.l(u),u.forEach(W)}else c.fragment&&c.fragment.c();t.intro&&He(e.$$.fragment),Ve(e,t.target,t.anchor,t.customElement),H(),Le()}me(s)}var Xe=function(){function e(){h(this,e)}return $(e,[{key:"$destroy",value:function(){Je(this,1),this.$destroy=v}},{key:"$on",value:function(e,t){var n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}}},{key:"$set",value:function(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}]),e}();function et(e){let t,n,r,o,i,a;return{c(){t=G("i"),X(t,"class",n=e[3](e[2],e[1])),X(t,"style",r=ot(e[2],e[0])),t.hidden=o=!e[2]},m(n,r){F(n,t,r),i||(a=Z(t,"click",e[6]),i=!0)},p(e,[i]){6&i&&n!==(n=e[3](e[2],e[1]))&&X(t,"class",n),5&i&&r!==(r=ot(e[2],e[0]))&&X(t,"style",r),4&i&&o!==(o=!e[2])&&(t.hidden=o)},i:v,o:v,d(e){e&&W(t),i=!1,a()}}}const tt={brand:"fab",regular:"far",solid:"fas"},nt={batman:"https://www.gravatar.com/avatar/ab1839667863f31e359d98364cfdef61",marcusr:"https://www.gravatar.com/avatar/6c056546d802b1a9ac186ab63f9fb632"},rt=["fas fa-anchor","fas fa-atom","fas fa-award","fas fa-balance-scale","fas fa-baseball-ball","fas fa-basketball-ball","fas fa-bicycle","fas fa-bolt","fas fa-book-reader","fas fa-candy-cane","fas fa-carrot","fas fa-cat","fas fa-chess-knight","fas fa-child","fas fa-coffee","fas fa-cookie-bite","fas fa-crow","fas fa-dice","fas fa-dog","fas fa-dove","fas fa-feather","fas fa-fish","fas fa-gem","fas fa-ghost","fas fa-hard-hat","fas fa-hat-cowboy","fas fa-hat-wizard","fas fa-hiking","fas fa-horse-head","fas fa-horse","fas fa-id-badge","fas fa-igloo","fas fa-mask","fas fa-meteor","fas fa-paint-brush","fas fa-paw","fas fa-pepper-hot","fas fa-pizza-slice","fas fa-portrait","fas fa-puzzle-piece","fas fa-rainbow","fas fa-robot","fas fa-rocket","fas fa-running","fas fa-seedling","fas fa-skating","fas fa-skiing","fas fa-smile","fas fa-snowboarding","fas fa-snowflake","fas fa-snowman","fas fa-swimmer","fas fa-umbrella","fas fa-user-astronaut","fas fa-user-graduate","fas fa-user-ninja","fas fa-user-secret","fas fa-walking","fas fa-yin-yang"];function ot(e,t){const n=[];let r="color:";const o=e.match(/^pick:(.+)$/);return o&&nt[o[1]]&&(r="background-color:",n.push('background-image:url("'+nt[o[1]]+'")')),t&&n.push(r+t),n.join(";")}function it(e,t,n){let{class:r=""}=t,{animation:o=""}=t,{color:i=""}=t,{family:a=""}=t,{name:s}=t;return e.$$set=e=>{"class"in e&&n(4,r=e.class),"animation"in e&&n(5,o=e.animation),"color"in e&&n(0,i=e.color),"family"in e&&n(1,a=e.family),"name"in e&&n(2,s=e.name)},[i,a,s,function(e,t){const n=[],i=e.match(/^pick:(.+)$/);if(i){if("Convos"==i[1])return"fas fa-info-circle";if(nt[i[1]])return"fas fa-contributor for-"+i[1].toLowerCase();n.push(function(e){if(e.match(/^\d+$/))return rt[e];let t=0;for(let n=0;n<e.length;n++)t=e.charCodeAt(n)+((t<<5)-t),t&=t;return t=Math.abs(t),rt[t%rt.length]}(i[1]))}else n.push(tt[t]||"fas"),n.push("fa-"+e);return o&&n.push(o.split(" ").map((e=>"fa-"+e))),r&&n.push(r.split(" ")),n.join(" ")},r,o,function(t){be.call(this,e,t)}]}class at extends Xe{constructor(e){super(),Qe(this,e,it,et,x,{class:4,animation:5,color:0,family:1,name:2})}}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lt={exports:{}};
/*!
   * JavaScript Cookie v2.2.1
   * https://github.com/js-cookie/js-cookie
   *
   * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
   * Released under the MIT license
   */lt.exports=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function o(){}function i(t,n,i){if("undefined"!=typeof document){"number"==typeof(i=e({path:"/"},o.defaults,i)).expires&&(i.expires=new Date(1*new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var a=JSON.stringify(n);/^[\{\[]/.test(a)&&(n=a)}catch(e){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var s="";for(var c in i)i[c]&&(s+="; "+c,!0!==i[c]&&(s+="="+i[c].split(";")[0]));return document.cookie=t+"="+n+s}}function a(e,n){if("undefined"!=typeof document){for(var o={},i=document.cookie?document.cookie.split("; "):[],a=0;a<i.length;a++){var s=i[a].split("="),c=s.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var l=t(s[0]);if(c=(r.read||r)(c,l)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(o[l]=c,e===l)break}catch(e){}}return e?o[e]:o}}return o.set=i,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,n){i(t,"",e(n,{expires:-1}))},o.defaults={},o.withConverter=n,o}((function(){}))}();var ut=lt.exports,dt=["trace","debug","info","warn","error"],ft={},pt={},mt=function(){};function ht(e){var t=this,n=e.name;this.name=n,this.isLevel=function(e){var n=dt.indexOf(e)||e||e.length;return t.numLevel>=n},this.setLevel=function(e){var n=dt.indexOf(e);return-1==n&&(n=2),t.numLevel=n,dt.forEach((function(e,r){var o=!console||r<n?mt:console["trace"==e||"debug"==e?"log":e]||console.log||mt;t[e]=o.bind(t,"["+t.name+"]")})),t},this.setLevel(function(e,t){if(void 0===pt.root){var n=(location.href.match(/_debug=([a-z,:]+)/)||[]).pop();n?(n.split(",").forEach((function(e){var t=st(e.split(":"),2),n=t[0],r=t[1];pt[n]=r||"debug"})),localStorage.setItem("logger:nameToLevel",JSON.stringify(pt))):(n=localStorage.getItem("logger:nameToLevel"))&&(n=JSON.parse(n),Object.keys(n).forEach((function(e,t){return pt[e]=t||"debug"})))}return pt[t]||pt.root||"info"}("root"==n||ft.root,n))}function gt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root";return ft[e]||(ft[e]=new ht({name:e}))}function $t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}ft.root=new ht({name:"root"});var yt=gt("util"),bt=.618033988749,wt=1e3,_t=1e3*wt,kt=1e3*_t;function xt(e,t){if(t&&!t.match(/^[+-]\w/)&&(t="+"+t),!t)return{};var n,r={},o=!0,i=$t(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;"+"==a?o=!0:"-"==a?o=!1:r[e[a]||a]=o}}catch(e){i.e(e)}finally{i.f()}return r}function Et(e,t){for(;e;){if(t.tagName?e==t:e.matches&&e.matches(t))return e;e=e.parentNode}return null}function Ot(e,t){var n=function n(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var a=this;n.debounceTid&&clearTimeout(n.debounceTid),n.debounceTid=setTimeout((function(){e.apply(a,o),n.debounceTid=0}),t)};return n.debounceTid=0,n}function St(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"message",n=e.errors||e;return n&&n[0]?n[0][t]||"Unknown error.":""}function Ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,r=Math.floor(6*e),o=6*e-r,i=n*(1-t),a=n*(1-o*t),s=n*(1-(1-o)*t),c=255,l=255,u=255;switch(r){case 0:c=n,l=s,u=i;break;case 1:c=a,l=n,u=i;break;case 2:c=i,l=n,u=s;break;case 3:c=i,l=a,u=n;break;case 4:c=s,l=i,u=n;break;case 5:c=n,l=i,u=a}return[Math.floor(255*c),Math.floor(255*l),Math.floor(255*u)]}function Nt(e,t){var n=e<wt?[e,""]:e<_t?[e/wt,"k"]:e<kt?[e/_t,"M"]:[e/kt,"G"],r=String(Math.round(10*n[0])/10);return(r.match(/\./)?r:r+".0")+n[1]+(t||"")}var At={array:function(e){return Array.isArray(e)},defined:function(e){return!At.undefined(e)},false:function(e){return!At.true(e)},function:function(e){return"function"==typeof e},number:function(e){return"number"==typeof e},object:function(e){return"object"===a(e)&&null!==e},string:function(e){return"string"==typeof e},stringable:function(e){return"number"==typeof e||"string"==typeof e},true:function(e){return At.string(e)?!!e.length&&"0"!=e:!!e},undefined:function(e){return null==e}};function jt(e){var t=document,n=e.replace(/\W/g,"_");if(!t.getElementById(n)){var r=t.createElement("script"),o=[n,e];return r.id=o[0],r.src=o[1],t.getElementsByTagName("head")[0].appendChild(r),new Promise((function(e,t){r.addEventListener("error",t),r.addEventListener("load",e)}))}}function Rt(e){return Object.keys(e).filter((function(t){return e[t]})).sort().map((function(e){return"has-mode-"+e})).join(" ")}function Tt(e,t,n){var r=":children"==t?e.children:e.querySelectorAll(t);if(!n)return[].slice.call(r,0);if(Array.isArray(n))return[].forEach.call(r,(function(e){return e.addEventListener(n[0],n[1])}));for(var o=[],i=0;i<r.length;i++)o.push(n(r[i],i));return o}function Lt(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function Pt(e,t){var n=function(e){return document.querySelector('meta[name="convos:'+e+'"]')||document.querySelector('meta[name="'+e+'"]')};if(1==arguments.length){"organization_name"==e&&(e="contactorganization"),"organization_url"==e&&(e="contactnetworkaddress");var r=n(e);if(!r)throw'Cannot get settings for "'+e+'".';var o={no:!1,yes:!0};return"contact"==e?atob(r.content||""):o.hasOwnProperty(r.content)?o[r.content]:r.content}"organization_name"==e&&(e="contactorganization"),"organization_url"==e&&(e="contactnetworkaddress"),"contact"==e&&(t=btoa(t)),"boolean"==typeof t&&(t=t?"yes":"no"),n(e).content=t}function Mt(e,t){e&&e.preventDefault&&e.preventDefault();var n,r,o,i,a=(n=document.body,r="fullscreen",o=function(e){e.addEventListener("click",(function(t){return t.target==e&&e.hide()})),e.hide=function(){return a.classList.add("hidden")}},(i=n&&n.querySelector("."+r.split(" ").join(".")))||((i=document.createElement("div")).className=r,n&&n.appendChild(i),o&&o(i),i));return function(e){for(;e.firstChild;)e.removeChild(e.firstChild)}(a),t?(a.classList.remove("hidden"),a.appendChild(t.cloneNode(!0)),a):a.hide()}function Dt(e){return(At.string(e)?e:"").split(/[.,\s]+/).map((function(e){return e.trim()})).filter((function(e){return e.length}))}function It(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(0==e.length)return"#000";for(var n=0,r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n),n&=n;return"#"+Ct(((n=Math.abs(n%t/t))+bt)%1,.4,.7).map((function(e){return e.toString(16)})).join("")}function Ut(e,t){return At.array(t)?t.find((function(t){return Ut(e,t)}))||!1:e&&e.tagName&&e.tagName.toLowerCase()===t||!1}function Bt(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function Ht(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ft=gt("reactive"),Wt=function(){function e(){h(this,e),this.cookieName="convos_js",this._on={},this._props={}}return $(e,[{key:"emit",value:function(e){for(var t=this._on[e],n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(var i=0;i<(t||[]).length;i++){var a;(a=t[i])[0].apply(a,r)}return this}},{key:"on",value:function(e,t){var n=t?null:new Promise((function(e){t=e})),r=this._on[e]||(this._on[e]=[]),o=[t];r.push(o);var i=function(){var e=r.indexOf(o);-1!=e&&r.splice(e,1)};return n?n.finally(i):i}},{key:"prop",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=qt(qt({},r),{},{defaultValue:n,name:t,type:e,value:n});switch(this._props[t]=o,o.updateable=-1!=["cookie","persist","rw"].indexOf(e),e){case"cookie":return this._cookieProp(o);case"persist":return this._localStorageProp(o);case"ro":return this._readOnlyProp(o);case"rw":return this._updateableProp(o)}throw"["+this.constructor.name+'] Unknown prop type "'+e+'" for prop "'+t+'".'}},{key:"subscribe",value:function(e){return e(this),this.on("update",e)}},{key:"update",value:function(e){var t=this;return Object.keys(e).forEach((function(n){var r=t._props[n];if(!r)return Ft.trace("["+t.constructor.name+'] Unknown prop "'+n+'".');r.hasOwnProperty("prev")||(r.prev="ro"==r.type?void 0:r.value),r.updateable&&(r.value=e[n])})),this._updatedTid||(this._updatedTid=setTimeout(this._delayedUpdate.bind(this),1)),this}},{key:"_cookie",value:function(e,t){var n=e.key||e.name,r=document.decodedB64JSONCookies||(document.decodedB64JSONCookies={});if(!r[this.cookieName])try{var o=ut.get(this.cookieName);r[this.cookieName]=JSON.parse(o?atob(o):"{}")}catch(e){Ft.error(ct({},n,e))}var i=r[this.cookieName]||{};if(1==arguments.length)return i[n];t===e.defaultValue?delete i[n]:i[n]=t;var a=0==location.href.indexOf("https:");ut.set(this.cookieName,btoa(JSON.stringify(i)),{expires:365,SameSite:"Lax",secure:a})}},{key:"_cookieProp",value:function(e){var t=this._cookie(e);At.defined(t)&&(e.value=t),At.undefined(t)&&this._cookie(e,e.value),this._updateableProp(e)}},{key:"_delayedUpdate",value:function(){var e=this,t={};return Object.keys(this._props).forEach((function(n){var r=e._props[n];if(r.hasOwnProperty("prev")){var o=r.prev;delete r.prev,r.value!==o&&("cookie"==r.type&&e._cookie(r,r.value),"persist"==r.type&&e._localStorage(r,r.value),t[n]="ro"!=r.type)}})),delete this._updatedTid,Object.keys(t).length&&this.emit("update",this,t),t}},{key:"_localStorage",value:function(e,t){var n="convos:"+(e.key||e.name);if(2==arguments.length)return t===e.defaultValue?localStorage.removeItem(n):localStorage.setItem(n,JSON.stringify(t));try{return localStorage.hasOwnProperty(n)?JSON.parse(localStorage.getItem(n)):void 0}catch(e){return void Ft.error(ct({},n,localStorage.getItem(n)),e)}}},{key:"_localStorageProp",value:function(e){var t=this._localStorage(e);At.defined(t)&&(e.value=t),At.undefined(t)&&this._localStorage(e,e.value),this._updateableProp(e)}},{key:"_readOnlyProp",value:function(e){if(void 0===e.value)throw"["+this.constructor.name+'] Read-only attribute "'+e.name+'" cannot be undefined';var t=At.function(e.value)?e.value:function(){return e.value};Object.defineProperty(this,e.name,{get:t})}},{key:"_updateableProp",value:function(e){Object.defineProperty(this,e.name,{get:function(){return e.value}})}}]),e}();function Kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Gt=function(e){i(n,e);var t=Kt(n);function n(e){var r;return h(this,n),(r=t.call(this)).prop("ro","api",e.api),r.prop("ro","defaultParams",e.defaultParams||{}),r.prop("ro","id",e.id),r.prop("ro","req",{body:null,headers:{}}),r.prop("ro","res",{body:{},headers:{}}),r.prop("rw","err",null),r.prop("rw","status","pending"),r}return $(n,[{key:"error",value:function(e,t){if(e)return this.update({err:Array.isArray(e)?e:[{message:e,source:t}],status:"error"});if(!this.err||!this.err.length)return"";var n=this.err[0],r=n.path&&n.path.match(/\w$/)&&n.path.split("/").pop();return r?r+": "+n.message:n.message}},{key:"perform",value:function(e){var t=this;return this._promise||(this._promise=new Promise((function(n){t.api.spec(t.id).then((function(n){if(!n)throw'Unknown operationId "'+t.id+'".';var r=st(t._paramsToRequest(n,e||t.defaultParams),2),o=r[0],i=r[1];if(!o)throw i;return t.update({status:"loading"}),At.object(i.body)&&!At.function(i.body.has)&&(i.body=JSON.stringify(i.body)),fetch(o,i)})).then((function(e){return Promise.all([e,e.json()])})).then((function(e){var r=st(e,2),o=r[0],i=r[1];delete t._promise,n(t.parse(o,i))})).catch((function(e){delete t._promise,n(t.error(Array.isArray(e)?e:'Failed fetching operationId "'+t.id+'": '+e,"fetch"))}))})))}},{key:"is",value:function(e){return this.status==e}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.body;this.res.body=t||e,this.res.status=e.status||"201",e.headers&&(this.res.headers=e.headers);var n=null;return String(this.res.status).match(/^[23]/)||(n=t&&t.errors?t.errors:[{message:e.statusText||"Unknown error."}]),this.update({err:n,status:n?"error":"success"})}},{key:"reset",value:function(){return this.res.body={},this.res.headers={},this.res.status=0,this.update({err:null,status:"pending"})}},{key:"_extractValue",value:function(e,t){return t.schema?Object.keys(t.schema.properties).reduce((function(t,n){return t[n]=e[n],t}),{}):e[t.name]}},{key:"_hasProperty",value:function(e,t){return"body"==t.in||("formData"==t.in?e.formData.has(t.name):e.hasOwnProperty(t.name))}},{key:"_paramsToRequest",value:function(e,t){var n=this,r={headers:this.req.headers,method:e.method},o=new URL(e.url),i=[];return(e.parameters||[]).forEach((function(e){if(!n._hasProperty(t,e)&&e.required)i.push({message:"Missing property.",path:"/"+e.name});else{if(!n._hasProperty(t,e)&&!e.required)return;if("path"==e.in){var a=new RegExp("(%7B|\\{)"+Lt(e.name)+"(%7D|\\})","i");o.pathname=o.pathname.replace(a,encodeURIComponent(n._extractValue(t,e)))}else if("query"==e.in)o.searchParams.set(e.name,n._extractValue(t,e));else if("formData"==e.in)delete r.headers["Content-Type"],r.body=t.formData;else if("body"==e.in)r.body=n._extractValue(t,e);else{if("header"!=e.in)throw"[Api] Parameter in:"+e.in+" is not supported.";r.header[e.name]=n._extractValue(t,e.name)}}})),i.length?[null,i]:[o,r]}}]),n}(Wt);function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Vt={0:"Jan",1:"Feb",2:"March",3:"Apr",4:"May",5:"Jun",6:"July",7:"Aug",8:"Sept",9:"Oct",10:"Nov",11:"Dec"},Jt={H:"_getPaddedHours",M:"_getPaddedMinutes",S:"_getPaddedSeconds",b:"_getMonthAbbr",e:"getDate",Y:"getFullYear"},Zt=function(e){i(o,e);var t=Yt(o);function o(e){return h(this,o),"string"!=typeof e||e.match(/Z$/)||(e+="Z"),t.call(this,e||new Date)}return $(o,[{key:"format",value:function(e){var t=this;return e.replace(/%(\w)/g,(function(e,n){return Jt[n]?t[Jt[n]]():n}))}},{key:"getHumanDate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.format("%b %e"),n=new o,r=this.getYear()==n.getYear();return r&&!e.year||(t+=", "+this.getFullYear()),t}},{key:"setDate",value:function(e,t){return t?r(n(o.prototype),"setUTCDate",this).call(this,e):r(n(o.prototype),"setDate",this).call(this,e),this}},{key:"setFullYear",value:function(e,t){return t?r(n(o.prototype),"setUTCFullYear",this).call(this,e):r(n(o.prototype),"setFullYear",this).call(this,e),this}},{key:"setHours",value:function(e,t){return t?r(n(o.prototype),"setUTCHours",this).call(this,e):r(n(o.prototype),"setHours",this).call(this,e),this}},{key:"setMilliseconds",value:function(e,t){return t?r(n(o.prototype),"setUTCMilliseconds",this).call(this,e):r(n(o.prototype),"setMilliseconds",this).call(this,e),this}},{key:"setMinutes",value:function(e,t){return t?r(n(o.prototype),"setUTCMinutes",this).call(this,e):r(n(o.prototype),"setMinutes",this).call(this,e),this}},{key:"setMonth",value:function(e,t){return t?r(n(o.prototype),"setUTCMonth",this).call(this,e):r(n(o.prototype),"setMonth",this).call(this,e),this}},{key:"setSeconds",value:function(e,t){return t?r(n(o.prototype),"setUTCSeconds",this).call(this,e):r(n(o.prototype),"setSeconds",this).call(this,e),this}},{key:"setTime",value:function(e){return r(n(o.prototype),"setTime",this).call(this,e),this}},{key:"setYear",value:function(e){return this.setYear(e),this}},{key:"toEpoch",value:function(){return this.getTime()/1e3}},{key:"_getMonthAbbr",value:function(){return Vt[this.getMonth()]||""}},{key:"_getPaddedHours",value:function(){return String(this.getHours()).padStart(2,"0")}},{key:"_getPaddedMinutes",value:function(){return String(this.getMinutes()).padStart(2,"0")}},{key:"_getPaddedSeconds",value:function(){return String(this.getSeconds()).padStart(2,"0")}}]),o}(d(Date));function Qt(e){let t,n,r,o,i,a,s;n=new at({props:{animation:e[4],name:e[0]}});const c=e[13].default,l=C(c,e,e[12],null);return{c(){t=G("button"),Ye(n.$$.fragment),r=V(),l&&l.c(),X(t,"class",o=e[5].join(" ")),t.disabled=e[6],X(t,"type",e[3]),X(t,"data-tooltip",e[2]),ie(t,"has-tooltip",!!e[2].length)},m(o,c){F(o,t,c),Ve(n,t,null),q(t,r),l&&l.m(t,null),i=!0,a||(s=Z(t,"click",e[14]),a=!0)},p(e,[r]){const a={};16&r&&(a.animation=e[4]),1&r&&(a.name=e[0]),n.$set(a),l&&l.p&&(!i||4096&r)&&A(l,c,e,e[12],i?r:-1,null,null),(!i||32&r&&o!==(o=e[5].join(" ")))&&X(t,"class",o),(!i||64&r)&&(t.disabled=e[6]),(!i||8&r)&&X(t,"type",e[3]),(!i||4&r)&&X(t,"data-tooltip",e[2]),36&r&&ie(t,"has-tooltip",!!e[2].length)},i(e){i||(He(n.$$.fragment,e),He(l,e),i=!0)},o(e){ze(n.$$.fragment,e),ze(l,e),i=!1},d(e){e&&W(t),Je(n),l&&l.d(e),a=!1,s()}}}function Xt(e,t,n){let r,o,i=v,a=()=>(i(),i=E(g,(e=>n(11,o=e))),g);e.$$.on_destroy.push((()=>i()));let{$$slots:s={},$$scope:c}=t,l="",{class:u=""}=t,d=[],f=!1,p=0,{disabled:m=!1}=t,{icon:h=""}=t,{op:g=new Gt({api:!1,id:""})}=t;a();let{tooltip:$=""}=t,{type:y=""}=t;function b(e){e&&n(10,p=(new Zt).toEpoch()),n(4,l=e?"spin":""),n(9,f=e)}return e.$$set=e=>{"class"in e&&n(7,u=e.class),"disabled"in e&&n(8,m=e.disabled),"icon"in e&&n(0,h=e.icon),"op"in e&&a(n(1,g=e.op)),"tooltip"in e&&n(2,$=e.tooltip),"type"in e&&n(3,y=e.type),"$$scope"in e&&n(12,c=e.$$scope)},e.$$.update=()=>{2048&e.$$.dirty&&o.is("loading")&&b(!0),3072&e.$$.dirty&&(o.is("loading")||setTimeout((()=>b(!1)),700-((new Zt).toEpoch()-p))),129&e.$$.dirty&&n(5,d=["btn","for-"+(h||"default")].concat(u)),768&e.$$.dirty&&n(6,r=m||f)},[h,g,$,y,l,d,r,u,m,f,p,o,c,s,function(t){be.call(this,e,t)}]}class en extends Xe{constructor(e){super(),Qe(this,e,Xt,Qt,x,{class:7,disabled:8,icon:0,op:1,tooltip:2,type:3})}}var tn=[];function nn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,r=[];function o(n){if(x(e,n)&&(e=n,t)){for(var o=!tn.length,i=0;i<r.length;i+=1){var a=r[i];a[1](),tn.push(a,e)}if(o){for(var s=0;s<tn.length;s+=2)tn[s][0](tn[s+1]);tn.length=0}}}function i(t){o(t(e))}function a(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,s=[i,a];return r.push(s),1===r.length&&(t=n(o)||v),i(e),function(){var e=r.indexOf(s);-1!==e&&r.splice(e,1),0===r.length&&(t(),t=null)}}return{set:o,update:i,subscribe:a}}function rn(e,t,n){var r=!Array.isArray(e),o=r?[e]:e,i=t.length<2;return{subscribe:nn(n,(function(e){var n=!1,a=[],s=0,c=v,l=function(){if(!s){c();var n=t(r?a[0]:a,e);i?e(n):c=k(n)?n:v}},u=o.map((function(e,t){return E(e,(function(e){a[t]=e,s&=~(1<<t),n&&l()}),(function(){s|=1<<t}))}));return n=!0,l(),function(){_(u),c()}})).subscribe}}var on={},an=cn("menu"),sn=nn({nColumns:1,width:0});function cn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(on[e])return on[e];var n=on[e]=nn(t);return n.toggle=function(e){var r=e.target.closest("a");if(!r)return setTimeout((function(){return n.set(t)}),50);e.preventDefault();var o=r.href.replace(/.*#/,"");0==r.href.indexOf("#")||0==r.href.indexOf(location.href)?n.set(O(n)==o?"":o):setTimeout((function(){return n.set(o)}),100)},n}function ln(e){let t,n,r,o,i,a,s,c,l,u,d,f=e[2].unread+"";return n=new at({props:{name:"bars"}}),o=new at({props:{name:"times"}}),{c(){t=G("a"),Ye(n.$$.fragment),r=V(),Ye(o.$$.fragment),i=V(),a=G("small"),s=Y(f),X(a,"class","badge is-important"),a.hidden=c=!e[2].unread,X(t,"href","#nav"),X(t,"class","btn-hallow"),ie(t,"is-active","nav"==e[1])},m(e,c){F(e,t,c),Ve(n,t,null),q(t,r),Ve(o,t,null),q(t,i),q(t,a),q(a,s),l=!0,u||(d=Z(t,"click",an.toggle),u=!0)},p(e,n){(!l||4&n)&&f!==(f=e[2].unread+"")&&te(s,f),(!l||4&n&&c!==(c=!e[2].unread))&&(a.hidden=c),2&n&&ie(t,"is-active","nav"==e[1])},i(e){l||(He(n.$$.fragment,e),He(o.$$.fragment,e),l=!0)},o(e){ze(n.$$.fragment,e),ze(o.$$.fragment,e),l=!1},d(e){e&&W(t),Je(n),Je(o),u=!1,d()}}}function un(e){let t,n,r;const o=e[5].default,i=C(o,e,e[4],null);let a=e[0].nColumns<=1&&ln(e);return{c(){t=G("header"),i&&i.c(),n=V(),a&&a.c(),X(t,"class","chat-header")},m(e,o){F(e,t,o),i&&i.m(t,null),q(t,n),a&&a.m(t,null),r=!0},p(e,[n]){i&&i.p&&(!r||16&n)&&A(i,o,e,e[4],r?n:-1,null,null),e[0].nColumns<=1?a?(a.p(e,n),1&n&&He(a,1)):(a=ln(e),a.c(),He(a,1),a.m(t,null)):a&&(Ue(),ze(a,1,1,(()=>{a=null})),Be())},i(e){r||(He(i,e),He(a),r=!0)},o(e){ze(i,e),ze(a),r=!1},d(e){e&&W(t),i&&i.d(e),a&&a.d()}}}function dn(e,t,n){let r,o,i;S(e,sn,(e=>n(0,r=e))),S(e,an,(e=>n(1,o=e)));let{$$slots:a={},$$scope:s}=t;const c=ye("user");return S(e,c,(e=>n(2,i=e))),e.$$set=e=>{"$$scope"in e&&n(4,s=e.$$scope)},[r,o,i,c,s,a]}class fn extends Xe{constructor(e){super(),Qe(this,e,dn,un,x,{})}}function pn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var mn=function(e){i(o,e);var t=pn(o);function o(){var e;return h(this,o),(e=t.call(this)).prop("persist","history",[],{key:"command_history"}),e.prop("rw","conversation",null),e.prop("rw","index",-1),e}return $(o,[{key:"add",value:function(e){if(!e.length)return this;var t=this.history.slice(0,19);return t.unshift(e),this.update({history:t,index:-1})}},{key:"attach",value:function(e){this.inputEl=e}},{key:"render",value:function(e,t){(t=this.index+t)<-1&&(t=-1),t>=this.history.length&&(t=this.history.length-1);var n=this.inputEl.value;return this.inputEl.selectionStart==n.length&&((!n.length||n==this.history[this.index])&&(e.preventDefault(),this.update({index:t}),this.inputEl.value=-1==t?"":this.history[t],!0))}},{key:"update",value:function(e){return e.conversation&&e.conversation!=this.conversation&&this.update({index:-1}),r(n(o.prototype),"update",this).call(this,e)}}]),o}(Wt);function hn(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function gn(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){hn(i,r,o,a,s,"next",e)}function s(e){hn(i,r,o,a,s,"throw",e)}a(void 0)}))}}var $n={exports:{}};!function(e){var t=function(e){var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var o=t&&t.prototype instanceof $?t:$,i=Object.create(o.prototype),a=new N(r||[]);return i._invoke=function(e,t,n){var r=f;return function(o,i){if(r===m)throw new Error("Generator is already running");if(r===h){if("throw"===o)throw i;return j()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var s=O(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=m;var c=d(e,t,n);if("normal"===c.type){if(r=n.done?h:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=h,n.method="throw",n.arg=c.arg)}}}(e,n,a),i}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f="suspendedStart",p="suspendedYield",m="executing",h="completed",g={};function $(){}function v(){}function y(){}var b={};b[i]=function(){return this};var w=Object.getPrototypeOf,_=w&&w(w(A([])));_&&_!==n&&r.call(_,i)&&(b=_);var k=y.prototype=$.prototype=Object.create(b);function x(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(o,i,s,c){var l=d(e[o],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"===a(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,c)}),(function(e){n("throw",e,s,c)})):t.resolve(f).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,c)}))}c(l.arg)}var o;this._invoke=function(e,r){function i(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(i,i):i()}}function O(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,O(e,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var o=d(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,g;var i=o.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,g):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function N(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,a=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:j}}function j(){return{value:t,done:!0}}return v.prototype=k.constructor=y,y.constructor=v,v.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},x(E.prototype),E.prototype[s]=function(){return this},e.AsyncIterator=E,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new E(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(k),l(k,c,"Generator"),k[i]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,N.prototype={constructor:N,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,g):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),g}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}($n);var vn=$n.exports,yn=function(){var e={base:"https://twemoji.maxcdn.com/v/12.1.6/",ext:".png",size:"72x72",className:"emoji",convert:{fromCodePoint:function(e){var t="string"==typeof e?parseInt(e,16):e;if(t<65536)return s(t);return s(55296+((t-=65536)>>10),56320+(1023&t))},toCodePoint:$},onerror:function(){this.parentNode&&this.parentNode.replaceChild(c(this.alt,!1),this)},parse:function(t,n){n&&"function"!=typeof n||(n={callback:n});return("string"==typeof t?p:f)(t,{callback:n.callback||l,attributes:"function"==typeof n.attributes?n.attributes:h,base:"string"==typeof n.base?n.base:e.base,ext:n.ext||e.ext,size:n.folder||(r=n.size||e.size,"number"==typeof r?r+"x"+r:r),className:n.className||e.className,onerror:n.onerror||e.onerror});var r},replace:g,test:function(e){n.lastIndex=0;var t=n.test(e);return n.lastIndex=0,t}},t={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"},n=/(?:\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d])|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\udd70\udd71\udd7e\udd7f\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5\udeeb\udeec\udef4-\udefa\udfe0-\udfeb]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd1d\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd71\udd73-\udd76\udd7a-\udda2\udda5-\uddaa\uddae-\uddb4\uddb7\uddba\uddbc-\uddca\uddd0\uddde-\uddff\ude70-\ude73\ude78-\ude7a\ude80-\ude82\ude90-\ude95]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g,r=/\uFE0F/g,o=String.fromCharCode(8205),i=/[&<>'"]/g,a=/^(?:iframe|noframes|noscript|script|select|style|textarea)$/,s=String.fromCharCode;return e;function c(e,t){return document.createTextNode(t?e.replace(r,""):e)}function l(e,t){return"".concat(t.base,t.size,"/",e,t.ext)}function u(e,t){for(var n,r,o=e.childNodes,i=o.length;i--;)3===(r=(n=o[i]).nodeType)?t.push(n):1!==r||"ownerSVGElement"in n||a.test(n.nodeName.toLowerCase())||u(n,t);return t}function d(e){return $(e.indexOf(o)<0?e.replace(r,""):e)}function f(e,t){for(var r,o,i,a,s,l,f,p,m,h,g,$,v,y=u(e,[]),b=y.length;b--;){for(i=!1,a=document.createDocumentFragment(),l=(s=y[b]).nodeValue,p=0;f=n.exec(l);){if((m=f.index)!==p&&a.appendChild(c(l.slice(p,m),!0)),$=d(g=f[0]),p=m+g.length,v=t.callback($,t),$&&v){for(o in(h=new Image).onerror=t.onerror,h.setAttribute("draggable","false"),r=t.attributes(g,$))r.hasOwnProperty(o)&&0!==o.indexOf("on")&&!h.hasAttribute(o)&&h.setAttribute(o,r[o]);h.className=t.className,h.alt=g,h.src=v,i=!0,a.appendChild(h)}h||a.appendChild(c(g,!1)),h=null}i&&(p<l.length&&a.appendChild(c(l.slice(p),!0)),s.parentNode.replaceChild(a,s))}return e}function p(e,t){return g(e,(function(e){var n,r,o=e,a=d(e),s=t.callback(a,t);if(a&&s){for(r in o="<img ".concat('class="',t.className,'" ','draggable="false" ','alt="',e,'"',' src="',s,'"'),n=t.attributes(e,a))n.hasOwnProperty(r)&&0!==r.indexOf("on")&&-1===o.indexOf(" "+r+"=")&&(o=o.concat(" ",r,'="',n[r].replace(i,m),'"'));o=o.concat("/>")}return o}))}function m(e){return t[e]}function h(){return null}function g(e,t){return String(e).replace(n,t)}function $(e,t){for(var n=[],r=0,o=0,i=0;i<e.length;)r=e.charCodeAt(i++),o?(n.push((65536+(o-55296<<10)+(r-56320)).toString(16)),o=0):55296<=r&&r<=56319?o=r:n.push(r.toString(16));return n.join(t||"-")}}(),bn=Object.prototype.hasOwnProperty,wn=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),_n=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n},kn={arrayToObject:_n,assign:function(e,t){return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],i=o.obj[o.prop],s=Object.keys(i),c=0;c<s.length;++c){var l=s[c],u=i[l];"object"===a(u)&&null!==u&&-1===n.indexOf(u)&&(t.push({obj:i,prop:l}),n.push(u))}return function(e){for(var t;e.length;){var n=e.pop();if(t=n.obj[n.prop],Array.isArray(t)){for(var r=[],o=0;o<t.length;++o)void 0!==t[o]&&r.push(t[o]);n.obj[n.prop]=r}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=t.charAt(r):o<128?n+=wn[o]:o<2048?n+=wn[192|o>>6]+wn[128|63&o]:o<55296||o>=57344?n+=wn[224|o>>12]+wn[128|o>>6&63]+wn[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),n+=wn[240|o>>18]+wn[128|o>>12&63]+wn[128|o>>6&63]+wn[128|63&o])}return n},isBuffer:function(e){return null!=e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,r){if(!n)return t;if("object"!==a(n)){if(Array.isArray(t))t.push(n);else{if("object"!==a(t))return[t,n];(r.plainObjects||r.allowPrototypes||!bn.call(Object.prototype,n))&&(t[n]=!0)}return t}if("object"!==a(t))return[t].concat(n);var o=t;return Array.isArray(t)&&!Array.isArray(n)&&(o=_n(t,r)),Array.isArray(t)&&Array.isArray(n)?(n.forEach((function(n,o){bn.call(t,o)?t[o]&&"object"===a(t[o])?t[o]=e(t[o],n,r):t.push(n):t[o]=n})),t):Object.keys(n).reduce((function(t,o){var i=n[o];return bn.call(t,o)?t[o]=e(t[o],i,r):t[o]=i,t}),o)}},xn=String.prototype.replace,En=/%20/g,On={default:"RFC3986",formatters:{RFC1738:function(e){return xn.call(e,En,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"},Sn=kn,Cn=On,Nn={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},An=Date.prototype.toISOString,jn={delimiter:"&",encode:!0,encoder:Sn.encode,encodeValuesOnly:!1,serializeDate:function(e){return An.call(e)},skipNulls:!1,strictNullHandling:!1},Rn=function e(t,n,r,o,i,a,s,c,l,u,d,f){var p=t;if("function"==typeof s)p=s(n,p);else if(p instanceof Date)p=u(p);else if(null===p){if(o)return a&&!f?a(n,jn.encoder):n;p=""}if("string"==typeof p||"number"==typeof p||"boolean"==typeof p||Sn.isBuffer(p))return a?[d(f?n:a(n,jn.encoder))+"="+d(a(p,jn.encoder))]:[d(n)+"="+d(String(p))];var m,h=[];if(void 0===p)return h;if(Array.isArray(s))m=s;else{var g=Object.keys(p);m=c?g.sort(c):g}for(var $=0;$<m.length;++$){var v=m[$];i&&null===p[v]||(h=Array.isArray(p)?h.concat(e(p[v],r(n,v),r,o,i,a,s,c,l,u,d,f)):h.concat(e(p[v],n+(l?"."+v:"["+v+"]"),r,o,i,a,s,c,l,u,d,f)))}return h},Tn=kn,Ln=Object.prototype.hasOwnProperty,Pn={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:Tn.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},Mn=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,i=/(\[[^[\]]*])/.exec(r),a=i?r.slice(0,i.index):r,s=[];if(a){if(!n.plainObjects&&Ln.call(Object.prototype,a)&&!n.allowPrototypes)return;s.push(a)}for(var c=0;null!==(i=o.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&Ln.call(Object.prototype,i[1].slice(1,-1))&&!n.allowPrototypes)return;s.push(i[1])}return i&&s.push("["+r.slice(i.index)+"]"),function(e,t,n){for(var r=t,o=e.length-1;o>=0;--o){var i,a=e[o];if("[]"===a)i=(i=[]).concat(r);else{i=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(s,10);!isNaN(c)&&a!==s&&String(c)===s&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(i=[])[c]=r:i[s]=r}r=i}return r}(s,t,n)}},Dn={formats:On,parse:function(e,t){var n=t?Tn.assign({},t):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||Tn.isRegExp(n.delimiter)?n.delimiter:Pn.delimiter,n.depth="number"==typeof n.depth?n.depth:Pn.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:Pn.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:Pn.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:Pn.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:Pn.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:Pn.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:Pn.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:Pn.strictNullHandling,""===e||null==e)return n.plainObjects?Object.create(null):{};for(var r="string"==typeof e?function(e,t){for(var n={},r=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=t.parameterLimit===1/0?void 0:t.parameterLimit,i=r.split(t.delimiter,o),a=0;a<i.length;++a){var s,c,l=i[a],u=l.indexOf("]="),d=-1===u?l.indexOf("="):u+1;-1===d?(s=t.decoder(l,Pn.decoder),c=t.strictNullHandling?null:""):(s=t.decoder(l.slice(0,d),Pn.decoder),c=t.decoder(l.slice(d+1),Pn.decoder)),Ln.call(n,s)?n[s]=[].concat(n[s]).concat(c):n[s]=c}return n}(e,n):e,o=n.plainObjects?Object.create(null):{},i=Object.keys(r),a=0;a<i.length;++a){var s=i[a],c=Mn(s,r[s],n);o=Tn.merge(o,c,n)}return Tn.compact(o)},stringify:function(e,t){var n=e,r=t?Sn.assign({},t):{};if(null!==r.encoder&&void 0!==r.encoder&&"function"!=typeof r.encoder)throw new TypeError("Encoder has to be a function.");var o=void 0===r.delimiter?jn.delimiter:r.delimiter,i="boolean"==typeof r.strictNullHandling?r.strictNullHandling:jn.strictNullHandling,s="boolean"==typeof r.skipNulls?r.skipNulls:jn.skipNulls,c="boolean"==typeof r.encode?r.encode:jn.encode,l="function"==typeof r.encoder?r.encoder:jn.encoder,u="function"==typeof r.sort?r.sort:null,d=void 0!==r.allowDots&&r.allowDots,f="function"==typeof r.serializeDate?r.serializeDate:jn.serializeDate,p="boolean"==typeof r.encodeValuesOnly?r.encodeValuesOnly:jn.encodeValuesOnly;if(void 0===r.format)r.format=Cn.default;else if(!Object.prototype.hasOwnProperty.call(Cn.formatters,r.format))throw new TypeError("Unknown format option provided.");var m,h,g=Cn.formatters[r.format];"function"==typeof r.filter?n=(h=r.filter)("",n):Array.isArray(r.filter)&&(m=h=r.filter);var $,v=[];if("object"!==a(n)||null===n)return"";$=r.arrayFormat in Nn?r.arrayFormat:"indices"in r?r.indices?"indices":"repeat":"indices";var y=Nn[$];m||(m=Object.keys(n)),u&&m.sort(u);for(var b=0;b<m.length;++b){var w=m[b];s&&null===n[w]||(v=v.concat(Rn(n[w],w,y,i,s,c?l:null,h,u,d,f,g,p)))}var _=v.join(o),k=!0===r.addQueryPrefix?"?":"";return _.length>0?k+_:""}};
/*! Copyright Twitter Inc. and other contributors. Licensed under MIT */function In(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Un=gt("route"),Bn=new(function(e){i(o,e);var t=In(o);function o(){var e;return h(this,o),(e=t.call(this)).prop("ro","basePath",(function(){return e._basePath})),e.prop("ro","hash",(function(){return(e._location.hash||"").replace(/^#/,"")})),e.prop("ro","path",(function(){return e._path})),e.prop("ro","pathParts",(function(){return e._pathParts})),e.prop("ro","query",(function(){return e._query})),e.prop("rw","baseUrl",""),e.prop("rw","enabled",!1),e._onClick=e._onClick.bind(s(e)),e._onLocationChange=e._onLocationChange.bind(s(e)),window.addEventListener("click",e._onClick),window.addEventListener("popstate",e._onLocationChange),e._history=window.history,e._location=window.location,e._basePath="",e._path="/",e._pathParts=[],e._query={},e}return $(o,[{key:"conversationPath",value:function(e){var t=["","chat"];return e.connection_id&&t.push(e.connection_id),e.conversation_id&&t.push(e.conversation_id),t.map((function(e){return encodeURIComponent(e)})).join("/")}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};0==e.indexOf(this.baseUrl)&&(e=e.substr(this.baseUrl.length));var n=this.baseUrl+e;if(n==this._location.href)return this;this._history[t.replace?"replaceState":"pushState"]({},document.title,n),t.replace||an.set(""),this.update({path:!0})._onLocationChange({})}},{key:"param",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.query;return n.hasOwnProperty(e)?n[e]:t}},{key:"subscribe",value:function(e){return e(this),this.on("update",e)}},{key:"update",value:function(e){return e.baseUrl&&(e.baseUrl=e.baseUrl.replace(/\/+$/,""),this._basePath=new URL(e.baseUrl).pathname.replace(/\/+$/,"")),r(n(o.prototype),"update",this).call(this,e),e.baseUrl&&this._onLocationChange(),this}},{key:"urlFor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.match(/^\w+:/)||e.match(/^#/)?e:this.basePath+e,r=Object.keys(t).sort().filter((function(e){return At.defined(t[e])})).map((function(e){return e+"="+encodeURIComponent(t[e])})).join("&");return n+(r?"?"+r:"")}},{key:"wsUrlFor",value:function(e){return(e.match(/^\w+:/)?e:this.baseUrl+e).replace(/^http/,"ws")}},{key:"_onClick",value:function(e){if(this.enabled&&!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){var t=e.target&&e.target.closest("a");if(t&&t.href){if("_self"==t.target)if((0==t.href.indexOf("/")?this.baseUrl+t.href:t.href)==location.href)return location.reload();if(!t.hasAttribute("download")&&!t.hasAttribute("target")){var n=t.getAttribute("href")||"";0==n.indexOf("#")&&(n=this.path+n),0==n.indexOf(this.baseUrl)&&(n=n.substr(this.baseUrl.length)),0==n.indexOf(this.basePath)&&(n=n.substr(this.basePath.length)),0==n.indexOf("/")&&(this.go(n,{},t.hasAttribute("replace")),e.preventDefault())}}}}},{key:"_onLocationChange",value:function(e){if(this.enabled){an.set("");var t=this._location.href.substr(this.baseUrl.length).split("#")[0].split("?");this._query=2==t.length?Dn.parse(t.pop()):{},this._path=t[0],this._pathParts=t[0].length<=1?[]:t[0].replace(/^\//,"").split("/").map(decodeURIComponent),Un.info('path="'+this._path+'" '+JSON.stringify(this._pathParts)+", query="+JSON.stringify(this._query)),this.update({path:!0})}}}]),o}(Wt));function Hn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return zn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function zn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qn=function(){function e(){h(this,e),this.aliases=this._buildAliases(),this.re=this._buildRe(),this.byShortName={},this.grouped={},this.status="pending"}var t;return $(e,[{key:"load",value:(t=gn(vn.mark((function e(){var t;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1==["loading","success"].indexOf(this.status)){e.next=2;break}return e.abrupt("return",this);case 2:return this.status="loading",e.next=5,fetch(Bn.urlFor("/emojis/0bf11a9aff0d6da7b46f1490f86a71eb.json"));case 5:return t=e.sent,e.t0=this,e.next=9,t.json();case 9:return e.t1=e.sent.emojis,e.t0._load.call(e.t0,e.t1),this.status="success",e.abrupt("return",this);case 13:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"markup",value:function(e){var t=this;return yn.parse(e.replace(this.re,(function(e,n,r){var o=t.aliases[r]||r,i=t.byShortName[o];return n+(i&&i.emoji||r)})))}},{key:"search",value:function(e){var t=this;e=e.toLowerCase();var n=this.grouped[e]||this.grouped[e.substring(0,2)]||{};return Object.keys(n).sort((function(e,t){return n[e]-n[t]})).map((function(e){return t.byShortName[e]})).filter((function(t){return-1!=(t.shortname+t.name).toLowerCase().indexOf(e)}))}},{key:"_buildAliases",value:function(){return{"&lt;3":":heart:","(Y)":":thumbsup:",":(":":disappointed:",":)":":slight_smile:",":-*":":kissing:",":/":":confused:",":D":":smiley:",":O":":open_mouth:",":P":":stuck_out_tongue:",";)":":wink:",";D":":grin:"}}},{key:"_buildRe",value:function(){var e=Object.keys(this.aliases).sort().map(Lt).join("|");return new RegExp("(^|\\s)(:\\w+:|"+e+")(?=\\s|\\,|\\.|$)","gi")}},{key:"_load",value:function(e){this.grouped={};var t,n=Hn(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.emoji&&r.shortname&&(r.name||(r.name=r.shortname),delete r.category,delete r.html,delete r.order,delete r.unicode,this.byShortName[r.shortname]=r,this._toGrouped(r))}}catch(e){n.e(e)}finally{n.f()}}},{key:"_toGrouped",value:function(e){var t=this.grouped;([e.shortname,e.name].join("-").replace(/\W+/," ").match(/\W(\w{2})/g)||[]).forEach((function(n,r){n=n.substring(1).toLowerCase(),t[n]||(t[n]={}),t[n][e.shortname]=r,n=n[0],t[n]||(t[n]={}),t[n][e.shortname]=r}))}}]),e}();function Fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Wn=function e(t,n,r){var o=e.singletons[t]||(e.singletons[t]=new Kn);return n?o.operation(n,r):o};Wn.singletons={};var Kn=function(e){i(r,e);var t,n=Fn(r);function r(){var e;return h(this,r),(e=n.call(this)).prop("rw","protocol",location.protocol||"http"),e.prop("rw","url",""),e}return $(r,[{key:"operation",value:function(e,t){var n=new Gt({api:this,id:e,defaultParams:t});return n.req.headers={"Content-Type":"application/json"},n}},{key:"spec",value:(t=gn(vn.mark((function e(t){var n,r,o=this;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._ops||!t){e.next=2;break}return e.abrupt("return",this._ops[t]);case 2:if(!this._spec){e.next=4;break}return e.abrupt("return",this._spec);case 4:return e.next=6,fetch(this.url);case 6:return n=e.sent,e.next=9,n.json();case 9:if(r=e.sent,this._ops={},this._spec=r,Object.keys(r.paths).forEach((function(e){Object.keys(r.paths[e]).forEach((function(t){var n=r.paths[e][t],i=n.operationId;i&&(n.method=t.toUpperCase(),n.url=o.protocol+"//"+r.host+r.basePath+e+".json",n.parameters=(n.parameters||[]).map((function(e){return o._resolveRef(e)})),o._ops[i]=n)}))})),!this._ops||!t){e.next=15;break}return e.abrupt("return",this._ops[t]);case 15:if(!this._spec){e.next=17;break}return e.abrupt("return",this._spec);case 17:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"toFunction",value:function(){var e=this;return function(t,n){return t?e.operation(t,n):e}}},{key:"_resolveRef",value:function(e){var t=this,n=e;if(e.$ref){var r=e.$ref.replace(/^#\//,"").split("/");for(n=this._spec;r.length;)n=n[r.shift()]}return At.object(n)&&Object.keys(n).forEach((function(e){n[e]=t._resolveRef(n[e])})),n}}]),r}(Wt);function Gn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Yn={"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"},Vn=new(function(e){i(r,e);var t,n=Gn(r);function r(){var e;return h(this,r),(e=n.call(this)).prop("cookie","lang",""),e.prop("ro","dictionaries",{}),e.prop("ro","emojis",new qn),e.prop("ro","languages",(function(){return e._languages})),e.prop("ro","languageOptions",(function(){return e._languageOptions})),e._languages=[],e._languageOptions=[],e}return $(r,[{key:"l",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=this.dictionaries[this.lang]||{},i=String(o[e]||e);return i.replace(/%(\d)(\D|$)/g,(function(e,t,r){return void 0===n[t-1]?e:n[t-1]+r}))}},{key:"load",value:(t=gn(vn.mark((function e(t){var n,r=this;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||(t=this.lang||document.documentElement.getAttribute("lang")),!this.dictionaries[t]){e.next=3;break}return e.abrupt("return",this.update({lang:t}));case 3:return e.next=5,Wn("/api","getDictionary",{lang:t}).perform();case 5:return n=e.sent,this.dictionaries[t]=n.res.body.dictionary,this._languages=n.res.body.available_languages||{},this._languageOptions=Object.keys(this._languages).sort().map((function(e){return[e,r._languages[e].language_team.replace(/\s*<.*/,"")]})),e.abrupt("return",this.update({lang:t}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"lmd",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.md(this.l.apply(this,[e].concat(n)))}},{key:"lmdRaw",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return this.md(this.l.apply(this,[e].concat(n)),{raw:!0})}},{key:"md",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._state={},e=this._xmlEscape(e),e=this._nbsp(e),t.raw||(e=this._mdLink(e)),t.raw||(e=this._plainUrlToLink(e)),t.raw||(e=this._extendedFormatting(e)),t.raw||(e=this._mdCode(e)),t.raw||(e=this._mdEmStrong(e)),t.raw||(e=this.emojis.markup(e)),t.raw||(e=this._mdBlockQuote(e)),e}},{key:"_extendedFormatting",value:function(e){var t="0[0-9]|[1-9][0-9]",n=new RegExp("("+t+")(?:,("+t+"))?([^]*)","g");return e.replace(n,(function(e,t,n,r){return r})).replace(/[\x02\x03\x1d\x1f\x1e\x11\x16\x0f]/g,"")}},{key:"_mdBlockQuote",value:function(e){return e.replace(/^&gt;\s(.*)/,(function(e,t){return"<blockquote>"+t+"</blockquote>"}))}},{key:"_mdCode",value:function(e){return e.replace(/(\\?)`([^` ][^`]*)`/g,(function(e,t,n){return t?e.replace(/^\\/,""):"<code>"+n+"</code>"}))}},{key:"_mdEmStrong",value:function(e){return e.replace(/(^|\s)(\\?)(\*+)(\w[^<]*?)\3/g,(function(e,t,n,r,o){return 1==r.length?n?e.replace(/^\\/,""):t+"<em>"+o+"</em>":2==r.length?n?e.replace(/^\\/,""):t+"<strong>"+o+"</strong>":3==r.length?n?e.replace(/^\\/,""):t+"<em><strong>"+o+"</strong></em>":e}))}},{key:"_mdLink",value:function(e){var t=this;return e.replace(/\[([a-zA-Z][^\]]+)\]\(([^)]+)\)/g,(function(e,n,r){var o=r.match(/^\s*(\w+):/)||["",""];if(o[1]&&-1==["http","https","mailto"].indexOf(o[1]))return e;t._state.md=!0;var i=r.substring(0,1),a=-1!=["/","#"].indexOf(i)?"":' target="_blank"';return'<a href="'+Bn.urlFor(r)+'"'+a+">"+n+"</a>"}))}},{key:"_nbsp",value:function(e){return e.length?e.replace(/^\s/,"&nbsp;").replace(/\s{2}/g," &nbsp;"):"&nbsp;"}},{key:"_plainUrlToLink",value:function(e){return this._state.md?e:e.replace(/\b[a-z]{2,5}:\/\S+/g,(function(e){var t=e.match(/^(.*?)(&\w+;|\W)?$/);return'<a href="'+t[1]+'" target="_blank">'+t[1]+"</a>"+(t[2]||"")})).replace(/mailto:(\S+)/,(function(e,t){return-1!=e.indexOf('">')?e:'<a href="'+e+'" target="_blank">'+t+"</a>"}))}},{key:"_xmlEscape",value:function(e){return e.replace(/[&<>"']/g,(function(e){return Yn[e]}))}}]),r}(Wt)),Jn=rn(Vn,(function(e){return function(){return e.l.apply(e,arguments)}})),Zn=rn(Vn,(function(e){return function(){return e.lmd.apply(e,arguments)}})),Qn=[],Xn={};var er=function(e,t,n){return Qn.push({cmd:e,description:n,example:t})};er("/me","/me <msg>","Send message as an action."),er("/say","/say <msg>",'Used when you want to send a message starting with "/".'),er("/whois","/whois <nick>","Show information about a user."),er("/query","/query <nick>","Open up a new chat window with nick."),er("/msg","/msg <nick> <msg>","Send a direct message to nick."),er("/shrug","/shrug <msg>","Add a shrug to end of message. Message is optional."),er("/join","/join <#channel>","Join channel and open up a chat window."),er("/close","/close [nick|#channel]","Close conversation."),er("/nick","/nick <nick>","Change your wanted nick."),er("/kick","/kick <nick>","Kick a user from the current channel."),er("/mode","/mode [+|-][b|o|v] <user>","Change mode of yourself or a user"),er("/topic","/topic or /topic <new topic>","Show current topic, or set a new one."),er("/names","/names","Show participants in the channel."),er("/invite","/invite <nick> [#channel]","Invite a user to a channel."),er("/reconnect","/reconnect","Restart the current connection."),er("/clear","/clear history <#channel> or /clear history <nick>","Delete all history for the given conversation."),er("/oper","/oper <nick> <password>","Gain operator status on a network."),er("/cs","/cs <msg>","Send a message to chanserv."),er("/ns","/ns <msg>","Send a message to nickserv."),er("/ms","/ms <msg>","Send a message to memoserv."),er("/hs","/hs <msg>","Send a message to hostserv."),er("/bs","/bs <msg>","Send a message to botserv."),er("/os","/os <msg>","Send a message to operserv."),er("/quote","/quote <irc-command>","Allow you to send any raw IRC message.");var tr=function(e,t){return Xn[e]=t};function nr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return rr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function or(e,t){return or[e]?or[e](t):[]}tr("/close","/part"),tr("/shrug",(function(e){return"/say "+e.concat("\\_()_/").join(" ")})),tr("/cs","/quote chanserv"),tr("/ns","/quote nickserv"),tr("/ms","/quote memoserv"),tr("/hs","/quote hotserv"),tr("/bs","/quote botserv"),tr("/os","/quote operserv"),tr("/j","/join"),tr("/raw","/quote"),or.commands=function(e){return function(e){for(var t=e.query,n=[],r=0;r<Qn.length;r++)if(0==Qn[r].cmd.indexOf(t)){var o=Qn[r].alias||Qn[r].cmd;n.push({val:o,text:Vn.md(Qn[r].example)})}return n}({query:e.query})},or.conversations=function(e){for(var t=e.conversation,n=e.query,r=e.user,o=r.findConversation({connection_id:t.connection_id}),i=o?o.conversations.toArray():r.conversations(),a=[],s=0;s<i.length&&!(-1!=i[s].name.toLowerCase().indexOf(n)&&(a.push({text:i[s].name,val:i[s].conversation_id}),a.length>=20));s++);return a},or.emojis=function(e){var t,n=e.query,r=Vn.emojis,o=[],i=nr(r.search(n.substring(1)));try{for(i.s();!(t=i.n()).done;){var a=t.value;if(o.push({val:a.emoji,text:r.markup(a.emoji)}),o.length>=30)break}}catch(e){i.e(e)}finally{i.f()}return o},or.nicks=function(e){var t,n=e.conversation,r=e.query,o=new RegExp("^"+Lt(r.slice(1)),"i"),i=[],a=nr(n.participants.toArray());try{for(a.s();!(t=a.n()).done;){var s=t.value;if(i.length>=20)break;s.nick.match(o)&&i.push({val:s.nick})}}catch(e){a.e(e)}finally{a.f()}return i};var ir=nn(null);function ar(e,t){return"onInfinityScrolled"==e?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return lr.apply(void 0,[t].concat(n))}:"onInfinityVisibility"==e?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return ur.apply(void 0,[t].concat(n))}:"onMessageClick"==e?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return dr.apply(void 0,[t].concat(n))}:"onVideoLinkClick"==e?function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return fr.apply(void 0,[t].concat(n))}:void 0}function sr(e){var t=["","chat",e.connection_id];return e.conversation_id&&t.push(e.conversation_id),Bn.urlFor(t.map(encodeURIComponent).join("/")+"#"+e.ts.toISOString())}function cr(e){e.target.closest("a")||(e.preventDefault(),Bn.go(e.target.closest(".message").querySelector("a").href))}function lr(e,t){var n=e.conversation,r=t.detail.visibleEls.filter((function(e){return e.dataset.ts}));if(r.length){var o=function(e){return Bn.go(n.path+(e.length?"#"+e:""),{replace:!0})},i=t.detail.pos;if("top"==i){var a=r[0].dataset.ts;n.historyStartAt||n.load({before:a}),o(a)}else if("bottom"==i){var s=r.slice(-1)[0].dataset.ts;n.historyStopAt||n.load({after:s}),o(n.historyStopAt?"":s)}else o(r[0].dataset.ts)}}function ur(e,t){var n=e.conversation,r=e.onLoadHash,o=t.detail,i=o.infinityEl,a=o.scrollHeightChanged,s=o.scrollTo,c=o.visibleEls,l=o.visibleElsChanged,u=n.messages;!(i.scrollHeight>i.offsetHeight)&&u.length&&n.load({before:u.get(0).ts.toISOString()}),a&&(s(Bn.hash?'.message[data-ts="'+Bn.hash+'"]':-1),function(e,t){var n=t&&Bn.hash&&e.querySelector('.message[data-ts="'+Bn.hash+'"]');Tt(e,".has-focus",(function(e){return e.classList.remove("has-focus")})),n&&n.classList.add("has-focus")}(i,r==Bn.hash)),l&&c.forEach((function(e){return u.render(e.dataset.index)}))}function dr(e,t){var n=t.target.closest("a");n&&!n.target&&t.target.closest(".embed")&&(n.target="_blank");var r=n&&document.querySelector('[target="convos_video"][href="'+n.href+'"]');if(r)return fr(e,t,r);var o=t.target.closest(".le-meta");if(o)return n||o.parentNode.classList.toggle("is-expanded");var i=n&&n.href.match(/#(action|popover):(\w+):?(.*)/);return i?function(e,t,n){var r=e.conversation,o=e.fillIn,i=e.focusChatInput,a=e.popoverTarget;if(t.preventDefault(),"popover"==n[0])a.set(O(a)==n[1]?null:n[1]);else if("details"==n[1]){var s=r.messages.get(n[2]);s.showDetails=!s.showDetails,r.messages.update({messages:!0})}else"close"==n[1]?(r.send("/close "+(n[2]?decodeURIComponent(n[2]):r.conversation_id)),Bn.go("/settings/conversation")):"join"==n[1]?(a.set(null),r.send("/join "+(n[2]?decodeURIComponent(n[2]):r.conversation_id))):"mention"==n[1]?(a.set(null),o(n[2],{}),i()):"whois"==n[1]?(a.set(null),r.send("/whois "+decodeURIComponent(n[2]),(function(e){var t=St(e);t&&r.addMessages({message:t,sent:e,type:"error"})}))):console.warn("Unhandled onMessageActionClick",n)}(e,t,i.slice(1)):Ut(t.target,"img")?Mt(t,t.target):n&&n.classList.contains("le-thumbnail")?Mt(t,n.querySelector("img")):void 0}function fr(e,t,n){var r=e.conversation,o=e.user;n||(n=t.target.closest("a"));var i=-1!=n.href.indexOf("#action:video");if(ir.close()&&i)return t.preventDefault();var a=n.closest(".le-provider-convosapp")||n.closest(".le-provider-jitsi"),s={nick:r.participants.me().nick};if(i){var c=new URL(o.videoService);c.pathname+="/"+hr(r),c.pathname=c.pathname.replace(/\/+/g,"/"),function(e,t){t=new URL(t,location.href).href;var n=e.messages.toArray().slice(-20).reverse().find((function(e){return-1!=e.message.indexOf(t)}));n&&n.ts.toEpoch()>(new Zt).toEpoch()-600||e.send({method:"send",message:t})}(r,c.toString()),t.preventDefault(),ir.open(Bn.urlFor("/video/"+c.hostname+"/"+hr(r),s))}else if(-1!=n.href.indexOf("/video/")){var l=new URL(n.href);t.preventDefault(),ir.open(Bn.urlFor(l.pathname.replace(/.*?\/video\//,"/video/"),s))}else if(a){var u=new URL(n.href);t.preventDefault(),ir.open(Bn.urlFor("/video/"+u.hostname+u.pathname,s))}}function pr(e,t){var n=t.nodes[0]&&t.nodes[0].parentNode;if(n&&n.classList){var r=n.classList.contains("embed")?"add":"remove";n.classList[r]("hidden")}t.nodes.forEach((function(t){return e.appendChild(t)}))}function mr(e,t){return t.is("not_found")?"":e.frozen?e.frozen:e==t?"Connection messages.":(t.frozen?t.frozen:t.topic)||(t.is("private")?"Private conversation.":"No topic is set.")}function hr(e){var t=e.is("private")?e.participants.nicks().sort().join("-and-"):e.title;return encodeURIComponent(t)}function gr(e){var t=e-1;return t*t*t+1}function $r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,r=void 0===n?0:n,o=t.duration,i=void 0===o?400:o,a=t.easing,s=void 0===a?y:a,c=+getComputedStyle(e).opacity;return{delay:r,duration:i,easing:s,css:function(e){return"opacity: ".concat(e*c)}}}function vr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,r=void 0===n?0:n,o=t.duration,i=void 0===o?400:o,a=t.easing,s=void 0===a?gr:a,c=t.x,l=void 0===c?0:c,u=t.y,d=void 0===u?0:u,f=t.opacity,p=void 0===f?0:f,m=getComputedStyle(e),h=+m.opacity,g="none"===m.transform?"":m.transform,$=h*(1-p);return{delay:r,duration:i,easing:s,css:function(e,t){return"\n\t\t\ttransform: ".concat(g," translate(").concat((1-e)*l,"px, ").concat((1-e)*d,"px);\n\t\t\topacity: ").concat(h-$*t)}}}function yr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,r=void 0===n?0:n,o=t.duration,i=void 0===o?400:o,a=t.easing,s=void 0===a?gr:a,c=getComputedStyle(e),l=+c.opacity,u=parseFloat(c.height),d=parseFloat(c.paddingTop),f=parseFloat(c.paddingBottom),p=parseFloat(c.marginTop),m=parseFloat(c.marginBottom),h=parseFloat(c.borderTopWidth),g=parseFloat(c.borderBottomWidth);return{delay:r,duration:i,easing:s,css:function(e){return"overflow: hidden;"+"opacity: ".concat(Math.min(20*e,1)*l,";")+"height: ".concat(e*u,"px;")+"padding-top: ".concat(e*d,"px;")+"padding-bottom: ".concat(e*f,"px;")+"margin-top: ".concat(e*p,"px;")+"margin-bottom: ".concat(e*m,"px;")+"border-top-width: ".concat(e*h,"px;")+"border-bottom-width: ".concat(e*g,"px;")}}}function br(e,t,n){const r=e.slice();return r[39]=t[n],r[41]=n,r}function wr(e){let t,n,r,o,i;n=new at({props:{name:"cloud-upload-alt"}});let a=e[12].videoService&&_r(e);return{c(){t=G("label"),Ye(n.$$.fragment),r=V(),a&&a.c(),o=J(),X(t,"for","upload_files"),X(t,"class","btn-hallow upload")},m(e,s){F(e,t,s),Ve(n,t,null),F(e,r,s),a&&a.m(e,s),F(e,o,s),i=!0},p(e,t){e[12].videoService?a?(a.p(e,t),4096&t[0]&&He(a,1)):(a=_r(e),a.c(),He(a,1),a.m(o.parentNode,o)):a&&(Ue(),ze(a,1,1,(()=>{a=null})),Be())},i(e){i||(He(n.$$.fragment,e),He(a),i=!0)},o(e){ze(n.$$.fragment,e),ze(a),i=!1},d(e){e&&W(t),Je(n),e&&W(r),a&&a.d(e),e&&W(o)}}}function _r(e){let t,n,r,o,i,a;return n=new at({props:{name:e[13]?"video-slash":"video"}}),{c(){t=G("a"),Ye(n.$$.fragment),X(t,"href","#action:video"),X(t,"class","btn-hallow has-tooltip"),X(t,"tooltip",r=e[1]("Start a video conference"))},m(r,s){F(r,t,s),Ve(n,t,null),o=!0,i||(a=Z(t,"click",(function(){k(e[10])&&e[10].apply(this,arguments)})),i=!0)},p(i,a){e=i;const s={};8192&a[0]&&(s.name=e[13]?"video-slash":"video"),n.$set(s),(!o||2&a[0]&&r!==(r=e[1]("Start a video conference")))&&X(t,"tooltip",r)},i(e){o||(He(n.$$.fragment,e),o=!0)},o(e){ze(n.$$.fragment,e),o=!1},d(e){e&&W(t),Je(n),i=!1,a()}}}function kr(e){let t,n,r,o,i,a,s;return n=new at({props:{name:"plus-circle"}}),o=new at({props:{name:"times"}}),{c(){t=G("a"),Ye(n.$$.fragment),r=V(),Ye(o.$$.fragment),X(t,"href","#actions"),X(t,"class","btn-hallow"),ie(t,"is-active","actions"==e[7])},m(c,l){F(c,t,l),Ve(n,t,null),q(t,r),Ve(o,t,null),i=!0,a||(s=Z(t,"click",e[16].toggle),a=!0)},p(e,n){128&n[0]&&ie(t,"is-active","actions"==e[7])},i(e){i||(He(n.$$.fragment,e),He(o.$$.fragment,e),i=!0)},o(e){ze(n.$$.fragment,e),ze(o.$$.fragment,e),i=!1},d(e){e&&W(t),Je(n),Je(o),a=!1,s()}}}function xr(e){let t,n,r,o,i=e[4],a=[];for(let t=0;t<i.length;t+=1)a[t]=Or(br(e,i,t));return{c(){t=G("div");for(let e=0;e<a.length;e+=1)a[e].c();X(t,"class",n="chat-input_menu for-"+e[5])},m(e,n){F(e,t,n);for(let e=0;e<a.length;e+=1)a[e].m(t,null);o=!0},p(r,s){if(e=r,262168&s[0]){let n;for(i=e[4],n=0;n<i.length;n+=1){const r=br(e,i,n);a[n]?a[n].p(r,s):(a[n]=Or(r),a[n].c(),a[n].m(t,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}(!o||32&s[0]&&n!==(n="chat-input_menu for-"+e[5]))&&X(t,"class",n)},i(n){o||(Ne((()=>{r||(r=Fe(t,vr,e[14],!0)),r.run(1)})),o=!0)},o(n){r||(r=Fe(t,vr,e[14],!1)),r.run(0),o=!1},d(e){e&&W(t),K(a,e),e&&r&&r.end()}}}function Er(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h=e[1]("Start a video conference")+"",g=e[1]("Attach a file")+"";return r=new at({props:{name:e[13]?"video-slash":"video"}}),c=new at({props:{name:"cloud-upload-alt"}}),{c(){t=G("div"),n=G("a"),Ye(r.$$.fragment),o=V(),i=Y(h),a=V(),s=G("label"),Ye(c.$$.fragment),l=V(),u=Y(g),X(n,"href","#action:video"),X(s,"for","upload_files"),X(t,"class","chat-input_menu for-actions")},m(d,h){F(d,t,h),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(t,a),q(t,s),Ve(c,s,null),q(s,l),q(s,u),f=!0,p||(m=[Z(n,"click",(function(){k(e[10])&&e[10].apply(this,arguments)})),Z(t,"click",e[16].toggle)],p=!0)},p(t,n){e=t;const o={};8192&n[0]&&(o.name=e[13]?"video-slash":"video"),r.$set(o),(!f||2&n[0])&&h!==(h=e[1]("Start a video conference")+"")&&te(i,h),(!f||2&n[0])&&g!==(g=e[1]("Attach a file")+"")&&te(u,g)},i(n){f||(He(r.$$.fragment,n),He(c.$$.fragment,n),Ne((()=>{d||(d=Fe(t,vr,e[14],!0)),d.run(1)})),f=!0)},o(n){ze(r.$$.fragment,n),ze(c.$$.fragment,n),d||(d=Fe(t,vr,e[14],!1)),d.run(0),f=!1},d(e){e&&W(t),Je(r),Je(c),e&&d&&d.end(),p=!1,_(m)}}}function Or(e){let t,n,r,o,i=(e[39].text||e[39].val)+"";return{c(){t=G("a"),X(t,"href",n="#index:"+e[41]),X(t,"tabindex","-1"),ie(t,"has-focus",e[41]==e[3])},m(n,a){F(n,t,a),t.innerHTML=i,r||(o=Z(t,"click",Q(e[18])),r=!0)},p(e,n){16&n[0]&&i!==(i=(e[39].text||e[39].val)+"")&&(t.innerHTML=i),8&n[0]&&ie(t,"has-focus",e[41]==e[3])},d(e){e&&W(t),r=!1,o()}}}function Sr(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y=e[11].nColumns>1&&e[2].is("conversation"),b=1==e[11].nColumns&&e[0].is("conversation"),w=y&&wr(e),k=b&&kr(e);d=new at({props:{name:e[9]}});const x=[Er,xr],E=[];function O(e,t){return 129&t[0]&&(p=!("actions"!=e[7]||!e[0].is("conversation"))),p?0:e[4].length?1:-1}return~(m=O(e,[-1,-1]))&&(h=E[m]=x[m](e)),{c(){t=G("form"),n=G("input"),r=V(),o=G("textarea"),i=V(),a=G("textarea"),s=V(),w&&w.c(),c=V(),k&&k.c(),l=V(),u=G("button"),Ye(d.$$.fragment),f=V(),h&&h.c(),X(n,"type","file"),X(n,"id","upload_files"),X(n,"name","upload_files"),X(n,"class","non-interactive"),X(o,"class","non-interactive"),X(o,"placeholder",e[8]),X(a,"class","is-primary-input"),X(a,"placeholder",e[8]),X(u,"type","buttton"),X(u,"class","btn-hallow chat-input__send"),X(t,"class","chat-input")},m(p,h){F(p,t,h),q(t,n),q(t,r),q(t,o),e[29](o),q(t,i),q(t,a),q(t,s),w&&w.m(t,null),q(t,c),k&&k.m(t,null),q(t,l),q(t,u),Ve(d,u,null),q(t,f),~m&&E[m].m(t,null),g=!0,$||(v=[Z(n,"change",e[20]),R(e[17].call(null,a)),Z(u,"click",e[19]),Z(t,"submit",Q(e[28]))],$=!0)},p(e,n){(!g||256&n[0])&&X(o,"placeholder",e[8]),(!g||256&n[0])&&X(a,"placeholder",e[8]),2052&n[0]&&(y=e[11].nColumns>1&&e[2].is("conversation")),y?w?(w.p(e,n),2052&n[0]&&He(w,1)):(w=wr(e),w.c(),He(w,1),w.m(t,c)):w&&(Ue(),ze(w,1,1,(()=>{w=null})),Be()),2049&n[0]&&(b=1==e[11].nColumns&&e[0].is("conversation")),b?k?(k.p(e,n),2049&n[0]&&He(k,1)):(k=kr(e),k.c(),He(k,1),k.m(t,l)):k&&(Ue(),ze(k,1,1,(()=>{k=null})),Be());const r={};512&n[0]&&(r.name=e[9]),d.$set(r);let i=m;m=O(e,n),m===i?~m&&E[m].p(e,n):(h&&(Ue(),ze(E[i],1,1,(()=>{E[i]=null})),Be()),~m?(h=E[m],h?h.p(e,n):(h=E[m]=x[m](e),h.c()),He(h,1),h.m(t,null)):h=null)},i(e){g||(He(w),He(k),He(d.$$.fragment,e),He(h),g=!0)},o(e){ze(w),ze(k),ze(d.$$.fragment,e),ze(h),g=!1},d(n){n&&W(t),e[29](null),w&&w.d(),k&&k.d(),Je(d),~m&&E[m].d(),$=!1,_(v)}}}function Cr(e,t,n){let r,o,i,a,s,c,l,u,d,f,p,m=v,h=()=>(m(),m=E($,(e=>n(2,u=e))),$);S(e,Jn,(e=>n(1,l=e))),S(e,sn,(e=>n(11,d=e))),S(e,ir,(e=>n(13,p=e))),e.$$.on_destroy.push((()=>m()));const g=H;let{conversation:$}=t;h();let y,b,w=0,_=[],k="none",x=0;const O=ye("api"),C=ye("user");S(e,C,(e=>n(12,f=e)));const N=cn("activeChatMenu");S(e,N,(e=>n(7,c=e)));const A=new mn;function R(e,t){const{before:n,middle:r,after:o}=function(e,t){e&&e.hasOwnProperty("val")&&(e=e.val);var n=t.append?t.value.length:t.cursorPos,r=[t.value.substring(0,n),t.value.substring(n)],o=r[0],i=r[1];return At.undefined(e)?{before:o,middle:"",after:i}:(t.append&&(o=o.replace(/[ ]$/,"")).length&&(e=" "+e),t.padBefore&&(o=o.replace(/[ ]$/,"")).length&&(e=" "+e),t.padAfter&&(i=i.replace(/^[ ]/,""),e+=" "),t.replace&&(o=o.replace(/\S*\s?$/,"")),{before:o,middle:e,after:i})}(e,{...t,cursorPos:y.selectionStart,value:y.value});I(n+r+o),y.selectionStart=y.selectionEnd=(n+r).length}function T(e,t){_.length&&(e.preventDefault(),n(3,w+=t),w<0&&n(3,w=_.length-1),w>=_.length&&n(3,w=0),R(_[w],{replace:!0}))}function L(e){!e.conversation_id&&$.conversation_id&&(e.conversation_id=$.conversation_id)}function P(e){n(3,w=0),n(24,x=e.selectionStart),$.update({userInput:e.value}),e.value.length||A.update({index:-1})}function M(){b.maxHeight||n(6,b.maxHeight=b.parentNode.offsetHeight,b),n(6,b.value=y.value,b),n(6,b.style.width=y.offsetWidth+"px",b),y.style.height=(b.maxHeight>b.scrollHeight?b.scrollHeight:b.maxHeight)+"px"}function D(e){if(_[w])e.preventDefault(),R(_[w],{replace:!0}),n(24,x=y.selectionStart+1);else if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)){e.preventDefault();const n={method:"send"};n.message=(t=y.value,r=t.split(/\s/),o=Xn[r[0].toLowerCase()],At.function(o)?o(r.slice(1)):o?[o].concat(r.slice(1)).filter((function(e){return At.defined(e)&&e.length})).join(" "):t),n.message.length&&$.send(n,L),A.add(n.message),$.is("search")||I(""),setTimeout(M,10)}var t,r,o}function I(e){y&&(y.value=e),$.update({userInput:e})}function U(e){y&&(n(4,_=e>y.value.length?[]:function(e,t,n){var r=n.conversation,o=n.user,i="",a="",s=e.substring(0,t).replace(/(\S)(\S*)$/,(function(e,t,n){return i=t,a=n,""})),c=":"==i&&a.length?"emojis":"/"!=i||s.length?"@"==i&&a.length?"nicks":"#"==i||"&"==i?"conversations":"none":"commands",l=or(c,{conversation:r,query:i+a,user:o});return l.length&&l.unshift({autocompleteCategory:c,val:i+a}),l}(y.value,e,{conversation:$,user:C})),n(5,k=_.length&&_[0].autocompleteCategory||"none"))}function B(e){B.lock!=e.path&&(n(25,B.lock=e.path,B),I(At.undefined(e.userInput)?"":e.userInput))}function H(e){const t=e.target&&e.target.files||e.dataTransfer&&e.dataTransfer.files;if(!t||!t.length)return;if(t.length>1)return $.addMessages({message:"Cannot upload more than one file.",type:"error"});const n=new FormData;n.append("file",t[0]),O("uploadFile").perform({formData:n}).then((e=>{const t=e.res.body;if(t.files&&t.files.length)return R(t.files[0].url,{append:!0});t.errors&&$.addMessages({message:"Could not upload file: %1",vars:[l(St(t.errors))],type:"error"})}))}return e.$$set=e=>{"conversation"in e&&h(n(0,$=e.conversation))},e.$$.update=()=>{1&e.$$.dirty[0]&&n(26,r=C.findConversation({connection_id:$.connection_id})),1&e.$$.dirty[0]&&$&&j(N,c="",c),67108864&e.$$.dirty[0]&&n(27,o=r&&r.nick),201326595&e.$$.dirty[0]&&n(8,i=$.is("search")?l("What are you looking for?"):r&&r.is("unreachable")?l("Connecting..."):l("What is on your mind %1?",o)),1&e.$$.dirty[0]&&n(9,a=$.is("search")?"search":"paper-plane"),1&e.$$.dirty[0]&&n(10,s=ar("onVideoLinkClick",{conversation:$,user:C})),4&e.$$.dirty[0]&&A.update({conversation:u}),16777216&e.$$.dirty[0]&&U(x),33554433&e.$$.dirty[0]&&B($)},[$,l,u,w,_,k,b,c,i,a,s,d,f,p,{y:-10,duration:200},C,N,function(e){y=e,y.addEventListener("focus",(()=>n(24,x=y.value.length+1))),y.addEventListener("change",(()=>P(y))),y.addEventListener("input",M),y.addEventListener("keyup",(e=>{1!=e.key.length&&-1==["ArrowLeft","ArrowRight","Backspace"].indexOf(e.key)||P(y)})),y.addEventListener("keydown",(e=>{if(!("ArrowDown"==e.key&&A.render(e,-1)||"ArrowUp"==e.key&&A.render(e,1)))return"ArrowDown"==e.key?T(e,e.shiftKey?4:1):"ArrowUp"==e.key?T(e,e.shiftKey?-4:-1):"Enter"==e.key?D(e):"Tab"==e.key?T(e,e.shiftKey?-1:1):void 0})),A.attach(y),I(At.undefined($.userInput)?"":$.userInput)},function(e){n(3,w=parseInt(e.target.closest("a").href.replace(/.*index:/,""),10)),R(_[w],{padAfter:!0,replace:!0}),setTimeout((()=>{P(y),y.focus()}),1)},D,H,g,R,function(){y&&y.focus()},x,B,r,o,function(t){be.call(this,e,t)},function(e){_e[e?"unshift":"push"]((()=>{b=e,n(6,b)}))}]}ir.close=function(){var e=O(this);return!!e&&[!0,e.close(),this.set(null)][0]},ir.open=function(e){var t=this,n=window.open(e.toString(),"convos_video");["beforeunload","close"].forEach((function(e){return n.addEventListener(e,(function(){return t.set(null)}))})),this.set(n)};class Nr extends Xe{constructor(e){super(),Qe(this,e,Cr,Sr,x,{uploader:21,conversation:0,fillIn:22,focus:23},[-1,-1])}get uploader(){return this.$$.ctx[21]}get fillIn(){return this.$$.ctx[22]}get focus(){return this.$$.ctx[23]}}const Ar=e=>({}),jr=e=>({});function Rr(e){let t,n,r,o,i,a,s,c,l;o=new at({props:{family:"regular",name:e[7]}}),o.$on("click",e[17]);const u=e[13].label,d=C(u,e,e[12],jr),f=d||function(e){let t;return{c(){t=Y("Label")},m(e,n){F(e,t,n)},d(e){e&&W(t)}}}();return{c(){t=G("div"),n=G("input"),r=V(),Ye(o.$$.fragment),i=V(),a=G("label"),f&&f.c(),X(n,"type","checkbox"),X(n,"id",e[4]),X(n,"name",e[3]),n.disabled=e[1],X(a,"for",e[4]),X(t,"class","checkbox"),t.hidden=e[2],ie(t,"has-badge",e[0]),ie(t,"has-focus",e[6]),ie(t,"is-disabled",e[1])},m(u,d){F(u,t,d),q(t,n),n.checked=e[5],q(t,r),Ve(o,t,null),q(t,i),q(t,a),f&&f.m(a,null),s=!0,c||(l=[Z(n,"change",e[14]),Z(n,"blur",e[15]),Z(n,"focus",e[16])],c=!0)},p(e,[r]){(!s||16&r)&&X(n,"id",e[4]),(!s||8&r)&&X(n,"name",e[3]),(!s||2&r)&&(n.disabled=e[1]),32&r&&(n.checked=e[5]);const i={};128&r&&(i.name=e[7]),o.$set(i),d&&d.p&&(!s||4096&r)&&A(d,u,e,e[12],s?r:-1,Ar,jr),(!s||16&r)&&X(a,"for",e[4]),(!s||4&r)&&(t.hidden=e[2]),1&r&&ie(t,"has-badge",e[0]),64&r&&ie(t,"has-focus",e[6]),2&r&&ie(t,"is-disabled",e[1])},i(e){s||(He(o.$$.fragment,e),He(f,e),s=!0)},o(e){ze(o.$$.fragment,e),ze(f,e),s=!1},d(e){e&&W(t),Je(o),f&&f.d(e),c=!1,_(l)}}}function Tr(e,t,n){let r,o,i,{$$slots:a={},$$scope:s}=t,{badge:c=!1}=t,{disabled:l=!1}=t,{form:u}=t,{hidden:d=!1}=t,{icon:f="square"}=t,{name:p=""}=t,{id:m=(p?"form_"+p:Ht())}=t;const h=u.field(p);S(e,h,(e=>n(5,i=e)));let g=!1;return e.$$set=e=>{"badge"in e&&n(0,c=e.badge),"disabled"in e&&n(1,l=e.disabled),"form"in e&&n(9,u=e.form),"hidden"in e&&n(2,d=e.hidden),"icon"in e&&n(10,f=e.icon),"name"in e&&n(3,p=e.name),"id"in e&&n(4,m=e.id),"$$scope"in e&&n(12,s=e.$$scope)},e.$$.update=()=>{1024&e.$$.dirty&&n(11,r="caret"==f?["caret-square-down","caret-square-up"]:["square","check-square"]),2080&e.$$.dirty&&n(7,o=r[i?1:0])},[c,l,d,p,m,i,g,o,h,u,f,r,s,a,function(){i=this.checked,h.set(i)},()=>{n(6,g=!1)},()=>{n(6,g=!0)},()=>{l||j(h,i=!i,i)}]}class Lr extends Xe{constructor(e){super(),Qe(this,e,Tr,Rr,x,{badge:0,disabled:1,form:9,hidden:2,icon:10,name:3,id:4})}}var Pr=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"http://localhost";h(this,e),this._url=new URL("http://localhost"),Object.defineProperty(this,"href",{get:function(){return t._url.href.replace(/^http:/,t.protocol)},set:function(e){t._url.href=e.replace(/^\w+:/,"http:"),t.protocol=e.match(/^\w+:/)[0]}}),["host","pathname","password","searchParams","username"].forEach((function(e){Object.defineProperty(t,e,{get:function(){return t._url[e]},set:function(n){t._url[e]=n}})})),this.href=n}return $(e,[{key:"fromFields",value:function(e){At.string(e.protocol)&&(this.protocol=e.protocol.replace(/:?$/,":")),At.string(e.host)&&(this.host=e.host),At.string(e.password)&&(this.password=e.password),At.string(e.username)&&(this.username=e.username),At.string(e.conversation_id)&&(this.pathname=encodeURIComponent(e.conversation_id));var t=this.searchParams;return At.string(e.local_address)&&t.append("local_address",e.local_address||""),At.string(e.nick)&&t.append("nick",e.nick.trim()),At.string(e.realname)&&e.realname.length&&t.append("realname",e.realname.trim()),At.string(e.sasl)&&t.append("sasl",e.sasl||"none"),t.append("tls",At.true(e.tls)?"1":"0"),t.append("tls_verify",At.true(e.tls)&&At.true(e.tls_verify)?"1":"0"),this}},{key:"toFields",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.protocol=this.protocol.replace(/:$/,""),e.host=this.host,e.password=At.string(this.password)?this.password:"",e.username=At.string(this.username)?this.username:"",e.conversation_id=decodeURIComponent(this.pathname.split("/").filter((function(e){return e.length}))[0]||"");var t=this.searchParams;return e.local_address=t.get("local_address")||e.local_address||"",e.nick=t.get("nick")||e.nick||"",e.realname=t.get("realname")||e.realname||"",e.sasl=t.get("sasl")||e.sasl||"none",e.realname=t.get("realname")||e.realname||"",e.tls=At.true(t.get("tls")),e.tls_verify=At.true(t.get("tls_verify")),e}},{key:"toString",value:function(){return this.href.replace(/^http:/,this.protocol)}}]),e}();function Mr(e){let t,n,r,o,i=e[4](e[1])+"";return{c(){t=G("div"),n=Y(i),X(t,"class","success")},m(e,r){F(e,t,r),q(t,n),o=!0},p(e,t){(!o||18&t)&&i!==(i=e[4](e[1])+"")&&te(n,i)},i(e){o||(Ne((()=>{r||(r=Fe(t,$r,{},!0)),r.run(1)})),o=!0)},o(e){r||(r=Fe(t,$r,{},!1)),r.run(0),o=!1},d(e){e&&W(t),e&&r&&r.end()}}}function Dr(e){let t,n,r,o,i=e[4](e[2].error())+"";return{c(){t=G("div"),n=Y(i),X(t,"class","error")},m(e,r){F(e,t,r),q(t,n),o=!0},p(e,t){(!o||20&t)&&i!==(i=e[4](e[2].error())+"")&&te(n,i)},i(e){o||(Ne((()=>{r||(r=Fe(t,$r,{},!0)),r.run(1)})),o=!0)},o(e){r||(r=Fe(t,$r,{},!1)),r.run(0),o=!1},d(e){e&&W(t),e&&r&&r.end()}}}function Ir(e){let t,n,r,o,i,a;const s=[Dr,Mr],c=[];function l(e,r){return 4&r&&(t=!!e[2].is("error")),t?0:(12&r&&(n=!(!e[2].is("success")||!e[3])),n?1:-1)}return~(r=l(e,-1))&&(o=c[r]=s[r](e)),{c(){o&&o.c(),i=J()},m(e,t){~r&&c[r].m(e,t),F(e,i,t),a=!0},p(e,[t]){let n=r;r=l(e,t),r===n?~r&&c[r].p(e,t):(o&&(Ue(),ze(c[n],1,1,(()=>{c[n]=null})),Be()),~r?(o=c[r],o?o.p(e,t):(o=c[r]=s[r](e),o.c()),He(o,1),o.m(i.parentNode,i)):o=null)},i(e){a||(He(o),a=!0)},o(e){ze(o),a=!1},d(e){~r&&c[r].d(e),e&&W(i)}}}function Ur(e,t,n){let r,o,i=v,a=()=>(i(),i=E(s,(e=>n(2,r=e))),s);S(e,Jn,(e=>n(4,o=e))),e.$$.on_destroy.push((()=>i()));let{op:s=new Gt({})}=t;a();let c,{success:l="Saved."}=t,u=!1;return $e((()=>c&&clearTimeout(c))),e.$$set=e=>{"op"in e&&a(n(0,s=e.op)),"success"in e&&n(1,l=e.success)},e.$$.update=()=>{4&e.$$.dirty&&function(e){if(!e.is("success"))return n(3,u=!1);u||(n(3,u=!0),c=setTimeout((()=>n(3,u=!1)),2e3))}(r)},[s,l,r,u,o]}class Br extends Xe{constructor(e){super(),Qe(this,e,Ur,Ir,x,{op:0,success:1})}}function Hr(e,t,n){const r=e.slice();return r[29]=t[n],r[31]=n,r}const zr=e=>({}),qr=e=>({});function Fr(e){let t,n,r,o,i,a=(e[29].length>1?e[29][1]:e[29][0])+"";function s(){return e[23](e[31])}return{c(){t=G("a"),n=Y(a),X(t,"href",r="#"+e[31]+":"+e[29][0]),X(t,"class","select-field__option"),X(t,"tabindex","-1"),ie(t,"is-active",e[31]==e[8])},m(e,r){F(e,t,r),q(t,n),o||(i=Z(t,"mouseover",s),o=!0)},p(o,i){e=o,1024&i[0]&&a!==(a=(e[29].length>1?e[29][1]:e[29][0])+"")&&te(n,a),1024&i[0]&&r!==(r="#"+e[31]+":"+e[29][0])&&X(t,"href",r),256&i[0]&&ie(t,"is-active",e[31]==e[8])},d(e){e&&W(t),o=!1,i()}}}function Wr(e){let t,n,r,o,i,a,s,c,l,u,d;const f=e[20].label,p=C(f,e,e[19],qr),m=p||function(e){let t;return{c(){t=Y("Label")},m(e,n){F(e,t,n)},d(e){e&&W(t)}}}();let h=e[10],g=[];for(let t=0;t<h.length;t+=1)g[t]=Fr(Hr(e,h,t));return{c(){t=G("div"),n=G("label"),m&&m.c(),r=V(),o=G("input"),i=V(),a=G("input"),s=V(),c=G("div");for(let e=0;e<g.length;e+=1)g[e].c();X(n,"for",e[2]),X(o,"type","hidden"),X(o,"name",e[1]),X(a,"type","text"),X(a,"id",e[2]),X(a,"autocomplete","off"),X(a,"placeholder",e[3]),a.readOnly=e[4],X(c,"class","select-field__options"),X(t,"class","select-field text-field"),t.hidden=e[0],ie(t,"is-open",e[6]),ie(t,"is-readonly",e[4])},m(f,p){F(f,t,p),q(t,n),m&&m.m(n,null),q(t,r),q(t,o),ne(o,e[7]),q(t,i),q(t,a),e[22](a),q(t,s),q(t,c);for(let e=0;e<g.length;e+=1)g[e].m(c,null);e[24](t),l=!0,u||(d=[Z(o,"input",e[21]),Z(o,"keydown",e[13]),Z(a,"blur",e[12]),Z(a,"keydown",e[13]),Z(a,"keyup",e[14]),Z(a,"click",Q(e[15])),Z(c,"click",Q(e[15]))],u=!0)},p(e,r){if(p&&p.p&&(!l||524288&r[0])&&A(p,f,e,e[19],l?r:[-1,-1],zr,qr),(!l||4&r[0])&&X(n,"for",e[2]),(!l||2&r[0])&&X(o,"name",e[1]),128&r[0]&&ne(o,e[7]),(!l||4&r[0])&&X(a,"id",e[2]),(!l||8&r[0])&&X(a,"placeholder",e[3]),(!l||16&r[0])&&(a.readOnly=e[4]),1280&r[0]){let t;for(h=e[10],t=0;t<h.length;t+=1){const n=Hr(e,h,t);g[t]?g[t].p(n,r):(g[t]=Fr(n),g[t].c(),g[t].m(c,null))}for(;t<g.length;t+=1)g[t].d(1);g.length=h.length}(!l||1&r[0])&&(t.hidden=e[0]),64&r[0]&&ie(t,"is-open",e[6]),16&r[0]&&ie(t,"is-readonly",e[4])},i(e){l||(He(m,e),l=!0)},o(e){ze(m,e),l=!1},d(n){n&&W(t),m&&m.d(n),e[22](null),K(g,n),e[24](null),u=!1,_(d)}}}function Kr(e,t,n){let r,o,i,{$$slots:a={},$$scope:s}=t,c=0,l=!1,u="",d=[],{form:f}=t,{hidden:p=!1}=t,{name:m=""}=t,{id:h=(m?"form_"+m:Ht())}=t,{options:g}=t,{placeholder:$=""}=t,{readonly:v=!1}=t;const y=["ArrowDown","ArrowUp","Enter"],b=f.field(m);function w(e){let t;if("keydown"==e.type)t=d.length&&d[c]||g.filter((e=>e[0]==r))[0];else{const n=Et(e.target,".select-field__option").href.replace(/^.*?#\d+:/,"");t=d.filter((e=>e[0]==n))[0]||[]}t&&t.length||(t=[""]),b.set(t[0]),n(6,l=!1)}function _(e){const t=d.filter((t=>t[0]==e))[0]||[];n(5,o.value=t.length>1?t[1]:t.length?t[0]:e,o)}function k(e){if(v)return;const t=e&&e.target&&Et(e.target,".select-field__option");return l||(n(8,c=d.map((e=>e[0])).indexOf(r)),o.setSelectionRange(0,9999)),t?w(e):n(6,l=!l)}S(e,b,(e=>n(7,r=e)));return e.$$set=e=>{"form"in e&&n(16,f=e.form),"hidden"in e&&n(0,p=e.hidden),"name"in e&&n(1,m=e.name),"id"in e&&n(2,h=e.id),"options"in e&&n(17,g=e.options),"placeholder"in e&&n(3,$=e.placeholder),"readonly"in e&&n(4,v=e.readonly),"$$scope"in e&&n(19,s=e.$$scope)},e.$$.update=()=>{if(64&e.$$.dirty[0]&&0==l&&n(18,u=""),393216&e.$$.dirty[0]&&function(e,t){let r=new RegExp("(?:^|\\s|-)"+Lt(t),"i"),o=e.filter((e=>e[0]==t));o.length||(o=e.filter((e=>e[0].match(r))));for(let t=0;t<e.length;t++){const n=e[t];n.length>1&&-1!=o.indexOf(n)&&n[1].match(r)&&-1==e.map((e=>e[0])).indexOf(n[0])&&o.push(n)}n(8,c=0),n(10,d=o)}(g,u),131232&e.$$.dirty[0]&&o&&!o.value&&o!=document.activeElement){const e=g.find((e=>e[0]==r));e&&n(5,o.value=e[1]||e[0],o)}160&e.$$.dirty[0]&&o&&_(r)},[p,m,h,$,v,o,l,r,c,i,d,b,function(){setTimeout((()=>document.activeElement.closest(".select-field__option")||n(6,l=!1)),100),_(r)},function(e){if(-1!=y.indexOf(e.key)&&e.preventDefault(),"Tab"!=e.key){if(!l)return k(e);"ArrowDown"==e.key&&n(8,c++,c),"ArrowUp"==e.key&&n(8,c--,c),"Enter"==e.key&&w(e),c>=g.length&&n(8,c=0),c<0&&n(8,c=g.length-1)}else l&&w(e)},function(e){1!=e.key.length&&"Backspace"!=e.key||n(18,u=o.value)},k,f,g,u,s,a,function(){r=this.value,b.set(r)},function(e){_e[e?"unshift":"push"]((()=>{o=e,n(5,o),n(17,g),n(7,r)}))},e=>{n(8,c=e)},function(e){_e[e?"unshift":"push"]((()=>{i=e,n(9,i)}))}]}class Gr extends Xe{constructor(e){super(),Qe(this,e,Kr,Wr,x,{form:16,hidden:0,name:1,id:2,options:17,placeholder:3,readonly:4},[-1,-1])}}const Yr=e=>({}),Vr=e=>({});function Jr(e){let t,n,r,o,i,a,s;const c=e[9].label,l=C(c,e,e[8],Vr),u=l||function(e){let t;return{c(){t=Y("Label")},m(e,n){F(e,t,n)},d(e){e&&W(t)}}}();return{c(){t=G("div"),n=G("label"),u&&u.c(),r=V(),o=G("textarea"),X(n,"for",e[2]),X(o,"id",e[2]),X(o,"name",e[1]),X(o,"placeholder",e[3]),o.readOnly=e[4],X(t,"class","text-area"),t.hidden=e[0]},m(c,l){F(c,t,l),q(t,n),u&&u.m(n,null),q(t,r),q(t,o),ne(o,e[5]),i=!0,a||(s=Z(o,"input",e[10]),a=!0)},p(e,[r]){l&&l.p&&(!i||256&r)&&A(l,c,e,e[8],i?r:-1,Yr,Vr),(!i||4&r)&&X(n,"for",e[2]),(!i||4&r)&&X(o,"id",e[2]),(!i||2&r)&&X(o,"name",e[1]),(!i||8&r)&&X(o,"placeholder",e[3]),(!i||16&r)&&(o.readOnly=e[4]),32&r&&ne(o,e[5]),(!i||1&r)&&(t.hidden=e[0])},i(e){i||(He(u,e),i=!0)},o(e){ze(u,e),i=!1},d(e){e&&W(t),u&&u.d(e),a=!1,s()}}}function Zr(e,t,n){let r,{$$slots:o={},$$scope:i}=t,{form:a}=t,{hidden:s=!1}=t,{name:c=""}=t,{id:l=(c?"form_"+c:Ht())}=t,{placeholder:u=""}=t,{readonly:d=!1}=t;const f=a.field(c);return S(e,f,(e=>n(5,r=e))),e.$$set=e=>{"form"in e&&n(7,a=e.form),"hidden"in e&&n(0,s=e.hidden),"name"in e&&n(1,c=e.name),"id"in e&&n(2,l=e.id),"placeholder"in e&&n(3,u=e.placeholder),"readonly"in e&&n(4,d=e.readonly),"$$scope"in e&&n(8,i=e.$$scope)},[s,c,l,u,d,r,f,a,i,o,function(){r=this.value,f.set(r)}]}class Qr extends Xe{constructor(e){super(),Qe(this,e,Zr,Jr,x,{form:7,hidden:0,name:1,id:2,placeholder:3,readonly:4})}}const Xr=e=>({}),eo=e=>({}),to=e=>({}),no=e=>({});function ro(e){let t,n,r,o,i;return n=new at({props:{name:e[7]?"eye-slash":"eye"}}),{c(){t=G("a"),Ye(n.$$.fragment),X(t,"href","#toggle"),X(t,"class","text-field__toggle")},m(a,s){F(a,t,s),Ve(n,t,null),r=!0,o||(i=Z(t,"click",Q(e[15])),o=!0)},p(e,t){const r={};128&t&&(r.name=e[7]?"eye-slash":"eye"),n.$set(r)},i(e){r||(He(n.$$.fragment,e),r=!0)},o(e){ze(n.$$.fragment,e),r=!1},d(e){e&&W(t),Je(n),o=!1,i()}}}function oo(e){let t,n,r,o,i,a,s,c,l,u;const d=e[13].label,f=C(d,e,e[12],no),p=f||function(e){let t;return{c(){t=Y("Label")},m(e,n){F(e,t,n)},d(e){e&&W(t)}}}();let m="password"==e[6]&&!e[5]&&ro(e);const h=e[13].help,g=C(h,e,e[12],eo);return{c(){t=G("div"),n=G("label"),p&&p.c(),r=V(),o=G("input"),a=V(),m&&m.c(),s=V(),g&&g.c(),X(n,"for",e[3]),X(o,"type",i=e[7]?"text":e[6]),X(o,"id",e[3]),X(o,"name",e[2]),X(o,"autocomplete",e[0]),X(o,"placeholder",e[4]),o.readOnly=e[5],o.value=e[8],X(t,"class","text-field"),t.hidden=e[1],ie(t,"has-password","password"==e[6])},m(i,d){F(i,t,d),q(t,n),p&&p.m(n,null),q(t,r),q(t,o),q(t,a),m&&m.m(t,null),F(i,s,d),g&&g.m(i,d),c=!0,l||(u=[Z(o,"input",e[9]),Z(o,"keyup",e[14])],l=!0)},p(e,[r]){f&&f.p&&(!c||4096&r)&&A(f,d,e,e[12],c?r:-1,to,no),(!c||8&r)&&X(n,"for",e[3]),(!c||192&r&&i!==(i=e[7]?"text":e[6]))&&X(o,"type",i),(!c||8&r)&&X(o,"id",e[3]),(!c||4&r)&&X(o,"name",e[2]),(!c||1&r)&&X(o,"autocomplete",e[0]),(!c||16&r)&&X(o,"placeholder",e[4]),(!c||32&r)&&(o.readOnly=e[5]),(!c||256&r&&o.value!==e[8])&&(o.value=e[8]),"password"!=e[6]||e[5]?m&&(Ue(),ze(m,1,1,(()=>{m=null})),Be()):m?(m.p(e,r),96&r&&He(m,1)):(m=ro(e),m.c(),He(m,1),m.m(t,null)),(!c||2&r)&&(t.hidden=e[1]),64&r&&ie(t,"has-password","password"==e[6]),g&&g.p&&(!c||4096&r)&&A(g,h,e,e[12],c?r:-1,Xr,eo)},i(e){c||(He(p,e),He(m),He(g,e),c=!0)},o(e){ze(p,e),ze(m),ze(g,e),c=!1},d(e){e&&W(t),p&&p.d(e),m&&m.d(),e&&W(s),g&&g.d(e),l=!1,_(u)}}}function io(e,t,n){let r,{$$slots:o={},$$scope:i}=t;let a=!1,{autocomplete:s=null}=t,{form:c}=t,{hidden:l=!1}=t,{name:u=""}=t,{id:d=(u?"form_"+u:Ht())}=t,{placeholder:f=""}=t,{readonly:p=!1}=t,{type:m="text"}=t;const h=c.field(u);S(e,h,(e=>n(8,r=e)));return e.$$set=e=>{"autocomplete"in e&&n(0,s=e.autocomplete),"form"in e&&n(11,c=e.form),"hidden"in e&&n(1,l=e.hidden),"name"in e&&n(2,u=e.name),"id"in e&&n(3,d=e.id),"placeholder"in e&&n(4,f=e.placeholder),"readonly"in e&&n(5,p=e.readonly),"type"in e&&n(6,m=e.type),"$$scope"in e&&n(12,i=e.$$scope)},[s,l,u,d,f,p,m,a,r,e=>{h.set(m.match(/^(number|range)$/)?parseInt(e.target.value,10):e.target.value)},h,c,i,o,function(t){be.call(this,e,t)},()=>{n(7,a=!a)}]}class ao extends Xe{constructor(e){super(),Qe(this,e,io,oo,x,{autocomplete:0,form:11,hidden:1,name:2,id:3,placeholder:4,readonly:5,type:6})}}function so(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return co(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return co(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function co(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lo=gt("form");function uo(e,t){return At.undefined(t)&&(t=Object.keys(e)),At.array(t)?t.reduce((function(t,n){return t[n]=e[n],t}),{}):e[t]}function fo(e,t){return Object.keys(t).forEach((function(n){return e.field(n).set(At.stringable(t[n])?String(t[n]):t[n])})),e}function po(e,t){var n=[t];return e.push(n),function(){var t=e.indexOf(n);-1!=t&&e.splice(t,1)}}var mo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n={},r={},o=[];return r.field=function(e){if(n[e])return n[e];var r=nn("");return r.subscribe((function(n){lo.debug(e,"=",n),t[e]=n;var r,i=so(o);try{for(i.s();!(r=i.n()).done;){r.value[0](t)}}catch(e){i.e(e)}finally{i.f()}})),n[e]=r},r.get=function(e){return uo(t,e)},r.set=function(e){return fo(r,e)},r.subscribe=function(e){return e(t),po(o,e)},Object.keys(e).forEach((function(t){return r.set(ct({},t,e[t]))})),r};function ho(e){let t,n,r=e[1]("Host and port")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Host and port")+"")&&te(n,r)},d(e){e&&W(t)}}}function go(e){let t,n,r=e[1]("You cannot create custom connections.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help"),t.hidden=!e[5].forced_connection},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("You cannot create custom connections.")+"")&&te(n,r)},d(e){e&&W(t)}}}function $o(e){let t,n,r=e[1]("Nickname")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Nickname")+"")&&te(n,r)},d(e){e&&W(t)}}}function vo(e){let t,n,r=e[1]("Your name")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Your name")+"")&&te(n,r)},d(e){e&&W(t)}}}function yo(e){let t,n;return t=new ao({props:{name:"conversation_id",form:e[4],placeholder:e[1]("Ex: #convos"),$$slots:{label:[wo]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};2&n&&(r.placeholder=e[1]("Ex: #convos")),262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function bo(e){let t,n;return t=new Lr({props:{name:"want_to_be_connected",form:e[4],$$slots:{label:[_o]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function wo(e){let t,n,r=e[1]("Conversation name")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Conversation name")+"")&&te(n,r)},d(e){e&&W(t)}}}function _o(e){let t,n,r=e[1]("Want to be connected")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Want to be connected")+"")&&te(n,r)},d(e){e&&W(t)}}}function ko(e){let t,n,r=e[1]("Secure connection (TLS)")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Secure connection (TLS)")+"")&&te(n,r)},d(e){e&&W(t)}}}function xo(e){let t,n,r=e[1]("Verify certificate (TLS)")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Verify certificate (TLS)")+"")&&te(n,r)},d(e){e&&W(t)}}}function Eo(e){let t,n,r=e[1]("Advanced settings")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Advanced settings")+"")&&te(n,r)},d(e){e&&W(t)}}}function Oo(e){let t,n,r,o,i;n=new Qr({props:{name:"on_connect_commands",form:e[4],placeholder:e[1]("Put each command on a new line."),$$slots:{label:[So]},$$scope:{ctx:e}}});let a=!e[5].forced_connection&&function(e){let t,n;return t=new ao({props:{name:"local_address",form:e[4],$$slots:{help:[No],label:[Co]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}(e);return{c(){t=G("div"),Ye(n.$$.fragment),r=V(),a&&a.c(),X(t,"class","form-group")},m(e,o){F(e,t,o),Ve(n,t,null),q(t,r),a&&a.m(t,null),i=!0},p(e,t){const r={};2&t&&(r.placeholder=e[1]("Put each command on a new line.")),262146&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r),e[5].forced_connection||a.p(e,t)},i(e){i||(He(n.$$.fragment,e),He(a),Ne((()=>{o||(o=Fe(t,yr,{duration:150},!0)),o.run(1)})),i=!0)},o(e){ze(n.$$.fragment,e),ze(a),o||(o=Fe(t,yr,{duration:150},!1)),o.run(0),i=!1},d(e){e&&W(t),Je(n),a&&a.d(),e&&o&&o.end()}}}function So(e){let t,n,r=e[1]("On-connect commands")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("On-connect commands")+"")&&te(n,r)},d(e){e&&W(t)}}}function Co(e){let t,n,r=e[1]("Source IP")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Source IP")+"")&&te(n,r)},d(e){e&&W(t)}}}function No(e){let t,n,r=e[1]("Leave this blank, unless you know what you are doing.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Leave this blank, unless you know what you are doing.")+"")&&te(n,r)},d(e){e&&W(t)}}}function Ao(e){let t,n,r=e[1]("Authentication settings")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Authentication settings")+"")&&te(n,r)},d(e){e&&W(t)}}}function jo(e){let t,n,r,o,i,a,s,c;return n=new ao({props:{name:"username",form:e[4],$$slots:{label:[Ro]},$$scope:{ctx:e}}}),o=new ao({props:{type:"password",name:"password",form:e[4],$$slots:{label:[To]},$$scope:{ctx:e}}}),a=new Gr({props:{name:"sasl",options:e[6],form:e[4],$$slots:{label:[Lo]},$$scope:{ctx:e}}}),{c(){t=G("div"),Ye(n.$$.fragment),r=V(),Ye(o.$$.fragment),i=V(),Ye(a.$$.fragment),X(t,"class","form-group")},m(e,s){F(e,t,s),Ve(n,t,null),q(t,r),Ve(o,t,null),q(t,i),Ve(a,t,null),c=!0},p(e,t){const r={};262146&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const i={};262146&t&&(i.$$scope={dirty:t,ctx:e}),o.$set(i);const s={};262146&t&&(s.$$scope={dirty:t,ctx:e}),a.$set(s)},i(e){c||(He(n.$$.fragment,e),He(o.$$.fragment,e),He(a.$$.fragment,e),Ne((()=>{s||(s=Fe(t,yr,{duration:150},!0)),s.run(1)})),c=!0)},o(e){ze(n.$$.fragment,e),ze(o.$$.fragment,e),ze(a.$$.fragment,e),s||(s=Fe(t,yr,{duration:150},!1)),s.run(0),c=!1},d(e){e&&W(t),Je(n),Je(o),Je(a),e&&s&&s.end()}}}function Ro(e){let t,n,r=e[1]("Username")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Username")+"")&&te(n,r)},d(e){e&&W(t)}}}function To(e){let t,n,r=e[1]("Password")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Password")+"")&&te(n,r)},d(e){e&&W(t)}}}function Lo(e){let t,n,r=e[1]("SASL authentication mechanism")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("SASL authentication mechanism")+"")&&te(n,r)},d(e){e&&W(t)}}}function Po(e){let t,n;return t=new en({props:{icon:"plus-circle",op:e[7],$$slots:{default:[Do]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function Mo(e){let t,n;return t=new en({props:{icon:"save",op:e[9],$$slots:{default:[Io]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};262146&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function Do(e){let t,n,r=e[1]("Add")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Add")+"")&&te(n,r)},d(e){e&&W(t)}}}function Io(e){let t,n,r=e[1]("Update")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Update")+"")&&te(n,r)},d(e){e&&W(t)}}}function Uo(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g=e[1]("Delete")+"",$=e[1]("This will permanently remove chat logs and other connection related data.")+"",v=e[3]("Please confirm by entering **%1** before hitting **%2**.",e[0],e[1]("Delete"))+"";return l=new ao({props:{name:"confirm_connection_id",form:e[4],$$slots:{label:[Bo]},$$scope:{ctx:e}}}),f=new en({props:{icon:"trash",op:e[8],disabled:e[2].confirm_connection_id!=e[0],$$slots:{default:[Ho]},$$scope:{ctx:e}}}),f.$on("click",e[10]),m=new Br({props:{op:e[8],success:"Deleted."}}),{c(){t=G("h3"),n=Y(g),r=V(),o=G("p"),i=Y($),a=V(),s=new ce,c=V(),Ye(l.$$.fragment),u=V(),d=G("div"),Ye(f.$$.fragment),p=V(),Ye(m.$$.fragment),s.a=null,X(d,"class","form-actions")},m(e,g){F(e,t,g),q(t,n),F(e,r,g),F(e,o,g),q(o,i),q(o,a),s.m(v,o),F(e,c,g),Ve(l,e,g),F(e,u,g),F(e,d,g),Ve(f,d,null),F(e,p,g),Ve(m,e,g),h=!0},p(e,t){(!h||2&t)&&g!==(g=e[1]("Delete")+"")&&te(n,g),(!h||2&t)&&$!==($=e[1]("This will permanently remove chat logs and other connection related data.")+"")&&te(i,$),(!h||11&t)&&v!==(v=e[3]("Please confirm by entering **%1** before hitting **%2**.",e[0],e[1]("Delete"))+"")&&s.p(v);const r={};262146&t&&(r.$$scope={dirty:t,ctx:e}),l.$set(r);const o={};5&t&&(o.disabled=e[2].confirm_connection_id!=e[0]),262146&t&&(o.$$scope={dirty:t,ctx:e}),f.$set(o)},i(e){h||(He(l.$$.fragment,e),He(f.$$.fragment,e),He(m.$$.fragment,e),h=!0)},o(e){ze(l.$$.fragment,e),ze(f.$$.fragment,e),ze(m.$$.fragment,e),h=!1},d(e){e&&W(t),e&&W(r),e&&W(o),e&&W(c),Je(l,e),e&&W(u),e&&W(d),Je(f),e&&W(p),Je(m,e)}}}function Bo(e){let t,n,r=e[1]("Confirm connection ID")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Confirm connection ID")+"")&&te(n,r)},d(e){e&&W(t)}}}function Ho(e){let t,n,r=e[1]("Delete")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Delete")+"")&&te(n,r)},d(e){e&&W(t)}}}function zo(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,_,k,x,E,O,S,C,N;n=new ao({props:{name:"host",form:e[4],placeholder:e[1]("Ex: irc.libera.chat:6697"),readonly:e[5].forced_connection,$$slots:{help:[go],label:[ho]},$$scope:{ctx:e}}}),o=new ao({props:{name:"nick",form:e[4],placeholder:e[1]("Ex: superman"),$$slots:{label:[$o]},$$scope:{ctx:e}}}),a=new ao({props:{name:"realname",form:e[4],placeholder:e[1]("Ex: Clark Kent"),$$slots:{label:[vo]},$$scope:{ctx:e}}});const A=[bo,yo],j=[];function R(e,t){return"add"!=e[0]?0:1}c=R(e),l=j[c]=A[c](e),d=new Lr({props:{name:"tls",form:e[4],$$slots:{label:[ko]},$$scope:{ctx:e}}}),p=new Lr({props:{name:"tls_verify",form:e[4],disabled:!e[2].tls,hidden:!e[2].tls,$$slots:{label:[xo]},$$scope:{ctx:e}}}),h=new Lr({props:{icon:"caret",name:"show_advanced_settings",form:e[4],$$slots:{label:[Eo]},$$scope:{ctx:e}}});let T=e[2].show_advanced_settings&&Oo(e),L=!e[5].forced_connection&&function(e){let t,n,r,o;t=new Lr({props:{icon:"caret",name:"show_auth_settings",form:e[4],$$slots:{label:[Ao]},$$scope:{ctx:e}}});let i=e[2].show_auth_settings&&jo(e);return{c(){Ye(t.$$.fragment),n=V(),i&&i.c(),r=J()},m(e,a){Ve(t,e,a),F(e,n,a),i&&i.m(e,a),F(e,r,a),o=!0},p(e,n){const o={};262146&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),e[2].show_auth_settings?i?(i.p(e,n),4&n&&He(i,1)):(i=jo(e),i.c(),He(i,1),i.m(r.parentNode,r)):i&&(Ue(),ze(i,1,1,(()=>{i=null})),Be())},i(e){o||(He(t.$$.fragment,e),He(i),o=!0)},o(e){ze(t.$$.fragment,e),ze(i),o=!1},d(e){Je(t,e),e&&W(n),i&&i.d(e),e&&W(r)}}}(e);const P=[Mo,Po],M=[];function D(e,t){return"add"!=e[0]?0:1}b=D(e),w=M[b]=P[b](e),k=new Br({props:{op:e[7]}}),E=new Br({props:{op:e[9]}});let I="add"!=e[0]&&Uo(e);return{c(){t=G("form"),Ye(n.$$.fragment),r=V(),Ye(o.$$.fragment),i=V(),Ye(a.$$.fragment),s=V(),l.c(),u=V(),Ye(d.$$.fragment),f=V(),Ye(p.$$.fragment),m=V(),Ye(h.$$.fragment),g=V(),T&&T.c(),$=V(),L&&L.c(),v=V(),y=G("div"),w.c(),_=V(),Ye(k.$$.fragment),x=V(),Ye(E.$$.fragment),O=V(),I&&I.c(),X(y,"class","form-actions"),X(t,"method","post")},m(l,w){F(l,t,w),Ve(n,t,null),q(t,r),Ve(o,t,null),q(t,i),Ve(a,t,null),q(t,s),j[c].m(t,null),q(t,u),Ve(d,t,null),q(t,f),Ve(p,t,null),q(t,m),Ve(h,t,null),q(t,g),T&&T.m(t,null),q(t,$),L&&L.m(t,null),q(t,v),q(t,y),M[b].m(y,null),q(t,_),Ve(k,t,null),q(t,x),Ve(E,t,null),q(t,O),I&&I.m(t,null),S=!0,C||(N=Z(t,"submit",Q(e[11])),C=!0)},p(e,[r]){const i={};2&r&&(i.placeholder=e[1]("Ex: irc.libera.chat:6697")),262146&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i);const s={};2&r&&(s.placeholder=e[1]("Ex: superman")),262146&r&&(s.$$scope={dirty:r,ctx:e}),o.$set(s);const f={};2&r&&(f.placeholder=e[1]("Ex: Clark Kent")),262146&r&&(f.$$scope={dirty:r,ctx:e}),a.$set(f);let m=c;c=R(e),c===m?j[c].p(e,r):(Ue(),ze(j[m],1,1,(()=>{j[m]=null})),Be(),l=j[c],l?l.p(e,r):(l=j[c]=A[c](e),l.c()),He(l,1),l.m(t,u));const g={};262146&r&&(g.$$scope={dirty:r,ctx:e}),d.$set(g);const v={};4&r&&(v.disabled=!e[2].tls),4&r&&(v.hidden=!e[2].tls),262146&r&&(v.$$scope={dirty:r,ctx:e}),p.$set(v);const _={};262146&r&&(_.$$scope={dirty:r,ctx:e}),h.$set(_),e[2].show_advanced_settings?T?(T.p(e,r),4&r&&He(T,1)):(T=Oo(e),T.c(),He(T,1),T.m(t,$)):T&&(Ue(),ze(T,1,1,(()=>{T=null})),Be()),e[5].forced_connection||L.p(e,r);let k=b;b=D(e),b===k?M[b].p(e,r):(Ue(),ze(M[k],1,1,(()=>{M[k]=null})),Be(),w=M[b],w?w.p(e,r):(w=M[b]=P[b](e),w.c()),He(w,1),w.m(y,null)),"add"!=e[0]?I?(I.p(e,r),1&r&&He(I,1)):(I=Uo(e),I.c(),He(I,1),I.m(t,null)):I&&(Ue(),ze(I,1,1,(()=>{I=null})),Be())},i(e){S||(He(n.$$.fragment,e),He(o.$$.fragment,e),He(a.$$.fragment,e),He(l),He(d.$$.fragment,e),He(p.$$.fragment,e),He(h.$$.fragment,e),He(T),He(L),He(w),He(k.$$.fragment,e),He(E.$$.fragment,e),He(I),S=!0)},o(e){ze(n.$$.fragment,e),ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(l),ze(d.$$.fragment,e),ze(p.$$.fragment,e),ze(h.$$.fragment,e),ze(T),ze(L),ze(w),ze(k.$$.fragment,e),ze(E.$$.fragment,e),ze(I),S=!1},d(e){e&&W(t),Je(n),Je(o),Je(a),j[c].d(),Je(d),Je(p),Je(h),T&&T.d(),L&&L.d(),M[b].d(),Je(k),Je(E),I&&I.d(),C=!1,N()}}}function qo(e,t,n){let r,o,i,a;S(e,Jn,(e=>n(1,o=e))),S(e,Zn,(e=>n(3,a=e)));let{id:s="add"}=t,{is_page:c=!1}=t;const l=ye("api"),u=mo();S(e,u,(e=>n(2,i=e)));const d=ye("user");S(e,d,(e=>n(14,r=e)));const f=l("createConnection"),p=l("removeConnection"),m=l("updateConnection");let h={};function g(e){const t=e.url?e.url.toFields():{};At.array(e.on_connect_commands)&&(t.on_connect_commands=e.on_connect_commands.join("\n")),t.nick||(t.nick=d.email.replace(/@.*/,"").replace(/\W/g,"_")),t.want_to_be_connected="disconnected"!=e.wanted_state,u.set(t)}return ge((()=>{h="add"==s?{}:r.findConversation({connection_id:s})||{},h.connection_id?g(h):function(){const e=new Pr(Bn.query.uri||d.default_connection||"irc://localhost").toFields();e.want_to_be_connected=!0,d.connections.size&&!Bn.query.uri&&(e.host="");e.nick||(e.nick=d.email.replace(/@.*/,"").replace(/\W/g,"_"));u.set(e)}()})),e.$$set=e=>{"id"in e&&n(0,s=e.id),"is_page"in e&&n(12,c=e.is_page)},[s,o,i,a,u,d,[["none","None"],["plain","Plain"],["external","External"]],f,p,m,async function(){await p.perform(h),d.removeConversation(h),Bn.go("/settings/connections")},async function(){const e=u.get();if(e.on_connect_commands=(e.on_connect_commands||"").split(/\n\r?/).filter((e=>e.length)),e.url=new Pr("irc://localhost").fromFields(e).toString(),h.connection_id)e.connection_id=h.connection_id,e.wanted_state=e.want_to_be_connected?"connected":"disconnected",await m.perform(e),h=d.ensureConversation(m.res.body),g(h);else{await f.perform(e);const t=f.res.body;t.connection_id&&Bn.go(d.ensureConversation(t).path)}c&&Bn.go("/settings/connections")},c]}class Fo extends Xe{constructor(e){super(),Qe(this,e,qo,zo,x,{id:0,is_page:12})}}function Wo(e){let t,n,r=e[4]("Currently connecting to %1.",e[3])+"";return{c(){t=G("p"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){24&t&&r!==(r=e[4]("Currently connecting to %1.",e[3])+"")&&te(n,r)},d(e){e&&W(t)}}}function Ko(e){let t,n,r=e[4]("Currently connected to %1.",e[3])+"";return{c(){t=G("p"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){24&t&&r!==(r=e[4]("Currently connected to %1.",e[3])+"")&&te(n,r)},d(e){e&&W(t)}}}function Go(e){let t,n,r=e[4]("Currently disconnected from %1.",e[3])+"";return{c(){t=G("p"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){24&t&&r!==(r=e[4]("Currently disconnected from %1.",e[3])+"")&&te(n,r)},d(e){e&&W(t)}}}function Yo(e){let t,n,r=e[4]("Connection not found.")+"";return{c(){t=G("p"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){16&t&&r!==(r=e[4]("Connection not found.")+"")&&te(n,r)},d(e){e&&W(t)}}}function Vo(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h=e[4]("Connection")+"";function g(e,t){return e[2].url?"disconnected"==e[2].state?Go:"connected"==e[2].state?Ko:Wo:Yo}s=new at({props:{name:"times"}});let $=g(e),v=$(e);return u=new Fo({props:{id:e[0].connection_id}}),{c(){t=G("div"),n=G("div"),r=G("h2"),o=Y(h),i=V(),a=G("a"),Ye(s.$$.fragment),c=V(),v.c(),l=V(),Ye(u.$$.fragment),X(a,"href","#settings"),X(a,"class","btn-hallow is-active"),X(n,"class","sidebar-header"),X(t,"class","sidebar-left")},m(e,d){F(e,t,d),q(t,n),q(n,r),q(r,o),q(n,i),q(n,a),Ve(s,a,null),q(t,c),v.m(t,null),q(t,l),Ve(u,t,null),f=!0,p||(m=Z(a,"click",an.toggle),p=!0)},p(n,[r]){e=n,(!f||16&r)&&h!==(h=e[4]("Connection")+"")&&te(o,h),$===($=g(e))&&v?v.p(e,r):(v.d(1),v=$(e),v&&(v.c(),v.m(t,l)));const i={};1&r&&(i.id=e[0].connection_id),u.$set(i)},i(n){f||(He(s.$$.fragment,n),He(u.$$.fragment,n),Ne((()=>{d||(d=Fe(t,vr,e[1],!0)),d.run(1)})),f=!0)},o(n){ze(s.$$.fragment,n),ze(u.$$.fragment,n),d||(d=Fe(t,vr,e[1],!1)),d.run(0),f=!1},d(e){e&&W(t),Je(s),v.d(),Je(u),e&&d&&d.end(),p=!1,m()}}}function Jo(e,t,n){let r,o;S(e,Jn,(e=>n(4,o=e)));let{conversation:i={}}=t,{transition:a}=t;const s=ye("user");let c={};return ge((async()=>{n(2,c=s.findConversation({connection_id:i.connection_id})||{})})),e.$$set=e=>{"conversation"in e&&n(0,i=e.conversation),"transition"in e&&n(1,a=e.transition)},e.$$.update=()=>{4&e.$$.dirty&&n(3,r=c.real_host||c.url&&c.url.host)},[i,a,c,r,o]}class Zo extends Xe{constructor(e){super(),Qe(this,e,Jo,Vo,x,{conversation:0,transition:1})}}function Qo(e){let t,n,r,o;const i=e[9].default,a=C(i,e,e[8],null);return{c(){t=G("a"),a&&a.c(),X(t,"href",e[2]),X(t,"class",e[0]),X(t,"style",e[1]),ie(t,"has-path",e[4])},m(i,s){F(i,t,s),a&&a.m(t,null),e[11](t),n=!0,r||(o=Z(t,"click",e[10]),r=!0)},p(e,[r]){a&&a.p&&(!n||256&r)&&A(a,i,e,e[8],n?r:-1,null,null),(!n||4&r)&&X(t,"href",e[2]),(!n||1&r)&&X(t,"class",e[0]),(!n||2&r)&&X(t,"style",e[1]),17&r&&ie(t,"has-path",e[4])},i(e){n||(He(a,e),n=!0)},o(e){ze(a,e),n=!1},d(n){n&&W(t),a&&a.d(n),e[11](null),r=!1,o()}}}function Xo(e,t,n){let r,o,i;S(e,Bn,(e=>n(7,i=e)));let a,{$$slots:s={},$$scope:c}=t,{class:l=""}=t,{href:u="/"}=t,{style:d=""}=t;return e.$$set=e=>{"class"in e&&n(0,l=e.class),"href"in e&&n(5,u=e.href),"style"in e&&n(1,d=e.style),"$$scope"in e&&n(8,c=e.$$scope)},e.$$.update=()=>{160&e.$$.dirty&&n(2,r=0==u.indexOf("/")?i.basePath+u:u),132&e.$$.dirty&&n(4,o=i.basePath+i.path==r.replace(/(#|\?).*/,""))},[l,d,r,a,o,u,()=>a.focus(),i,c,s,function(t){be.call(this,e,t)},function(e){_e[e?"unshift":"push"]((()=>{a=e,n(3,a)}))}]}class ei extends Xe{constructor(e){super(),Qe(this,e,Xo,Qo,x,{class:0,href:5,style:1,focus:6})}get focus(){return this.$$.ctx[6]}}var ti={b:"channel_ban",C:"ctcp_block",c:"colour_filter",e:"ban_exemption",F:"enable_forwarding",f:"forward",g:"free_invite",i:"invite_only",I:"invite_exemption",j:"join_throttle",k:"password",l:"join_limit",L:"large_ban_list",m:"moderated",M:"login_to_talk",n:"prevent_external_send",P:"permanent",p:"privat",Q:"block_forwarded_users",q:"quiet",r:"block_unidentified",R:"login_to_join",s:"secret",S:"secure_connection_only",t:"topic_protection"};function ni(e){return ti[e]?ti[e]:Object.keys(ti).filter((function(t){return e==ti[t]}))[0]||""}var ri={a:"&",h:"%",o:"@",q:"~",v:"+"},oi={a:"admin",B:"bot",h:"half_operator",i:"invisible",I:"whois_hide_online",o:"operator",p:"whois_hide_channels",R:"privmsg_from_registered_only",r:"registered",S:"service_bot",T:"ctcp_block",t:"vhost",v:"voice",W:"whois_notifications",x:"cloaked_hostname",z:"secure_connection",Z:"secure_connection_only"};function ii(e,t,n){const r=e.slice();return r[19]=t[n],r}function ai(e,t,n){const r=e.slice();return r[22]=t[n],r}function si(e){let t,n=e[8]("You are not a channel operator in %1.",e[0].name)+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){257&r&&n!==(n=e[8]("You are not a channel operator in %1.",e[0].name)+"")&&te(t,n)},d(e){e&&W(t)}}}function ci(e){let t,n=e[8]("You are channel operator in %1.",e[0].name)+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){257&r&&n!==(n=e[8]("You are channel operator in %1.",e[0].name)+"")&&te(t,n)},d(e){e&&W(t)}}}function li(e){let t,n=e[8]("Private conversation with %1.",e[0].name)+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){257&r&&n!==(n=e[8]("Private conversation with %1.",e[0].name)+"")&&te(t,n)},d(e){e&&W(t)}}}function ui(e){let t,n=e[8]("Conversation with %1 is frozen. Reason: %2",e[0].name,e[8](e[0].frozen))+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){257&r&&n!==(n=e[8]("Conversation with %1 is frozen. Reason: %2",e[0].name,e[8](e[0].frozen))+"")&&te(t,n)},d(e){e&&W(t)}}}function di(e){let t,n,r,o;const i=[pi,fi],a=[];function s(e,t){return e[7]||!e[2].modes.topic_protection?0:1}return t=s(e),n=a[t]=i[t](e),{c(){n.c(),r=J()},m(e,n){a[t].m(e,n),F(e,r,n),o=!0},p(e,o){let c=t;t=s(e),t===c?a[t].p(e,o):(Ue(),ze(a[c],1,1,(()=>{a[c]=null})),Be(),n=a[t],n?n.p(e,o):(n=a[t]=i[t](e),n.c()),He(n,1),n.m(r.parentNode,r))},i(e){o||(He(n),o=!0)},o(e){ze(n),o=!1},d(e){a[t].d(e),e&&W(r)}}}function fi(e){let t,n,r,o,i,a=e[8]("Topic")+"",s=e[9](e[0].topic||"No topic is set.")+"";return{c(){t=G("div"),n=G("label"),r=Y(a),o=V(),i=G("div"),X(n,"for","nothing"),X(i,"class","input"),X(t,"class","text-field")},m(e,a){F(e,t,a),q(t,n),q(n,r),q(t,o),q(t,i),i.innerHTML=s},p(e,t){256&t&&a!==(a=e[8]("Topic")+"")&&te(r,a),513&t&&s!==(s=e[9](e[0].topic||"No topic is set.")+"")&&(i.innerHTML=s)},i:v,o:v,d(e){e&&W(t)}}}function pi(e){let t,n;return t=new Qr({props:{name:"topic",form:e[11],placeholder:e[8]("No topic is set."),$$slots:{label:[mi]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};256&n&&(r.placeholder=e[8]("No topic is set.")),33554688&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function mi(e){let t,n,r=e[8]("Topic")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){256&t&&r!==(r=e[8]("Topic")+"")&&te(n,r)},d(e){e&&W(t)}}}function hi(e){let t,n;return t=new Lr({props:{name:"want_notifications",form:e[11],$$slots:{label:[gi]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};33554688&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function gi(e){let t,n,r=e[8]("Notify me on new messages")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){256&t&&r!==(r=e[8]("Notify me on new messages")+"")&&te(n,r)},d(e){e&&W(t)}}}function $i(e){let t,n,r=e[8]("Show raw messages")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){256&t&&r!==(r=e[8]("Show raw messages")+"")&&te(n,r)},d(e){e&&W(t)}}}function vi(e){let t,n,r,o,i,a,s=e[8]("Conversation modes")+"",c=e[13],l=[];for(let t=0;t<c.length;t+=1)l[t]=_i(ai(e,c,t));const u=e=>ze(l[e],1,1,(()=>{l[e]=null}));let d=!e[7]&&ki(e);return{c(){t=G("nav"),n=G("h3"),r=Y(s),o=V();for(let e=0;e<l.length;e+=1)l[e].c();i=V(),d&&d.c(),X(t,"class","sidebar-left__nav")},m(e,s){F(e,t,s),q(t,n),q(n,r),q(t,o);for(let e=0;e<l.length;e+=1)l[e].m(t,null);q(t,i),d&&d.m(t,null),a=!0},p(e,n){if((!a||256&n)&&s!==(s=e[8]("Conversation modes")+"")&&te(r,s),10640&n){let r;for(c=e[13],r=0;r<c.length;r+=1){const o=ai(e,c,r);l[r]?(l[r].p(o,n),He(l[r],1)):(l[r]=_i(o),l[r].c(),He(l[r],1),l[r].m(t,i))}for(Ue(),r=c.length;r<l.length;r+=1)u(r);Be()}e[7]?d&&(d.d(1),d=null):d?d.p(e,n):(d=ki(e),d.c(),d.m(t,null))},i(e){if(!a){for(let e=0;e<c.length;e+=1)He(l[e]);a=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)ze(l[e]);a=!1},d(e){e&&W(t),K(l,e),d&&d.d()}}}function yi(e){let t,n,r,o,i,a,s=e[8](Bt(e[22].replace(/_/g," ")))+"",c=e[4]["mode_"+e[22]]?"+":"-",l=ni(e[22])+"";return{c(){t=G("span"),n=Y(s),r=V(),o=G("b"),i=Y(c),a=Y(l),X(o,"class","badge"),X(t,"slot","label")},m(e,s){F(e,t,s),q(t,n),q(t,r),q(t,o),q(o,i),q(o,a)},p(e,t){256&t&&s!==(s=e[8](Bt(e[22].replace(/_/g," ")))+"")&&te(n,s),16&t&&c!==(c=e[4]["mode_"+e[22]]?"+":"-")&&te(i,c)},d(e){e&&W(t)}}}function bi(e){let t,n;return t=new ao({props:{type:"password",name:"password",form:e[11],$$slots:{label:[wi]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};33554688&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function wi(e){let t,n,r=e[8]("Password")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){256&t&&r!==(r=e[8]("Password")+"")&&te(n,r)},d(e){e&&W(t)}}}function _i(e){let t,n,r,o;t=new Lr({props:{badge:!0,name:"mode_"+e[22],form:e[11],disabled:!e[7],$$slots:{label:[yi]},$$scope:{ctx:e}}});let i="password"==e[22]&&e[4].mode_password&&bi(e);return{c(){Ye(t.$$.fragment),n=V(),i&&i.c(),r=J()},m(e,a){Ve(t,e,a),F(e,n,a),i&&i.m(e,a),F(e,r,a),o=!0},p(e,n){const o={};128&n&&(o.disabled=!e[7]),33554704&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),"password"==e[22]&&e[4].mode_password?i?(i.p(e,n),16&n&&He(i,1)):(i=bi(e),i.c(),He(i,1),i.m(r.parentNode,r)):i&&(Ue(),ze(i,1,1,(()=>{i=null})),Be())},i(e){o||(He(t.$$.fragment,e),He(i),o=!0)},o(e){ze(t.$$.fragment,e),ze(i),o=!1},d(e){Je(t,e),e&&W(n),i&&i.d(e),e&&W(r)}}}function ki(e){let t,n,r,o=e[8]("Only operators can change modes.")+"";return{c(){t=G("p"),n=G("i"),r=Y(o)},m(e,o){F(e,t,o),q(t,n),q(n,r)},p(e,t){256&t&&o!==(o=e[8]("Only operators can change modes.")+"")&&te(r,o)},d(e){e&&W(t)}}}function xi(e){let t,n,r=e[8]("Update")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){256&t&&r!==(r=e[8]("Update")+"")&&te(n,r)},d(e){e&&W(t)}}}function Ei(e){let t,n,r=e[8]("Leave")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){256&t&&r!==(r=e[8]("Leave")+"")&&te(n,r)},d(e){e&&W(t)}}}function Oi(e){let t,n,r,o,i,a=e[8]("Participants (%1)",e[3].length)+"",s=e[3].toArray(),c=[];for(let t=0;t<s.length;t+=1)c[t]=Ci(ii(e,s,t));const l=e=>ze(c[e],1,1,(()=>{c[e]=null}));return{c(){t=G("nav"),n=G("h3"),r=Y(a),o=V();for(let e=0;e<c.length;e+=1)c[e].c();X(t,"class","sidebar-left__nav")},m(e,a){F(e,t,a),q(t,n),q(n,r),q(t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null);i=!0},p(e,n){if((!i||264&n)&&a!==(a=e[8]("Participants (%1)",e[3].length)+"")&&te(r,a),9&n){let r;for(s=e[3].toArray(),r=0;r<s.length;r+=1){const o=ii(e,s,r);c[r]?(c[r].p(o,n),He(c[r],1)):(c[r]=Ci(o),c[r].c(),He(c[r],1),c[r].m(t,null))}for(Ue(),r=s.length;r<c.length;r+=1)l(r);Be()}},i(e){if(!i){for(let e=0;e<s.length;e+=1)He(c[e]);i=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)ze(c[e]);i=!1},d(e){e&&W(t),K(c,e)}}}function Si(e){let t,n,r,o=e[19].nick+"";return{c(){t=G("div"),n=Y(o),r=V()},m(e,o){F(e,t,o),q(t,n),F(e,r,o)},p(e,t){8&t&&o!==(o=e[19].nick+"")&&te(n,o)},d(e){e&&W(t),e&&W(r)}}}function Ci(e){let t,n;return t=new ei({props:{href:"/chat/"+e[0].connection_id+"/"+e[19].id,class:"participant "+Rt(e[19].modes),$$slots:{default:[Si]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};9&n&&(r.href="/chat/"+e[0].connection_id+"/"+e[19].id),8&n&&(r.class="participant "+Rt(e[19].modes)),33554440&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function Ni(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,k,x,E,O,S,C,N=e[8]("Conversation")+"",A=e[0].hasOwnProperty("wantNotifications");function j(e,t){return e[0].frozen?ui:e[6]?li:e[7]?ci:si}s=new at({props:{name:"times"}});let R=j(e),T=R(e),L=!e[6]&&di(e),P=A&&hi(e);m=new Lr({props:{name:"raw_messages",form:e[11],$$slots:{label:[$i]},$$scope:{ctx:e}}});let M=!e[6]&&vi(e);v=new en({props:{icon:"save",$$slots:{default:[xi]},$$scope:{ctx:e}}}),b=new en({props:{type:"button",icon:"sign-out-alt",$$slots:{default:[Ei]},$$scope:{ctx:e}}}),b.$on("click",e[14]),k=new Br({props:{op:e[12]}});let D=!e[0].frozen&&e[10].nColumns<3&&Oi(e);return{c(){t=G("div"),n=G("div"),r=G("h2"),o=Y(N),i=V(),a=G("a"),Ye(s.$$.fragment),c=V(),l=G("p"),T.c(),u=V(),d=G("form"),L&&L.c(),f=V(),P&&P.c(),p=V(),Ye(m.$$.fragment),h=V(),M&&M.c(),g=V(),$=G("div"),Ye(v.$$.fragment),y=V(),Ye(b.$$.fragment),w=V(),Ye(k.$$.fragment),x=V(),D&&D.c(),X(a,"href","#settings"),X(a,"class","btn-hallow is-active"),X(n,"class","sidebar-header"),X($,"class","form-actions"),X(d,"method","post"),X(t,"class","sidebar-left")},m(_,E){F(_,t,E),q(t,n),q(n,r),q(r,o),q(n,i),q(n,a),Ve(s,a,null),q(t,c),q(t,l),T.m(l,null),q(t,u),q(t,d),L&&L.m(d,null),q(d,f),P&&P.m(d,null),q(d,p),Ve(m,d,null),q(d,h),M&&M.m(d,null),q(d,g),q(d,$),Ve(v,$,null),q($,y),Ve(b,$,null),q(d,w),Ve(k,d,null),q(t,x),D&&D.m(t,null),O=!0,S||(C=[Z(a,"click",an.toggle),Z(d,"submit",Q(e[15]))],S=!0)},p(n,[r]){e=n,(!O||256&r)&&N!==(N=e[8]("Conversation")+"")&&te(o,N),R===(R=j(e))&&T?T.p(e,r):(T.d(1),T=R(e),T&&(T.c(),T.m(l,null))),e[6]?L&&(Ue(),ze(L,1,1,(()=>{L=null})),Be()):L?(L.p(e,r),64&r&&He(L,1)):(L=di(e),L.c(),He(L,1),L.m(d,f)),1&r&&(A=e[0].hasOwnProperty("wantNotifications")),A?P?(P.p(e,r),1&r&&He(P,1)):(P=hi(e),P.c(),He(P,1),P.m(d,p)):P&&(Ue(),ze(P,1,1,(()=>{P=null})),Be());const i={};33554688&r&&(i.$$scope={dirty:r,ctx:e}),m.$set(i),e[6]?M&&(Ue(),ze(M,1,1,(()=>{M=null})),Be()):M?(M.p(e,r),64&r&&He(M,1)):(M=vi(e),M.c(),He(M,1),M.m(d,g));const a={};33554688&r&&(a.$$scope={dirty:r,ctx:e}),v.$set(a);const s={};33554688&r&&(s.$$scope={dirty:r,ctx:e}),b.$set(s),!e[0].frozen&&e[10].nColumns<3?D?(D.p(e,r),1025&r&&He(D,1)):(D=Oi(e),D.c(),He(D,1),D.m(t,null)):D&&(Ue(),ze(D,1,1,(()=>{D=null})),Be())},i(n){O||(He(s.$$.fragment,n),He(L),He(P),He(m.$$.fragment,n),He(M),He(v.$$.fragment,n),He(b.$$.fragment,n),He(k.$$.fragment,n),He(D),Ne((()=>{E||(E=Fe(t,vr,e[1],!0)),E.run(1)})),O=!0)},o(n){ze(s.$$.fragment,n),ze(L),ze(P),ze(m.$$.fragment,n),ze(M),ze(v.$$.fragment,n),ze(b.$$.fragment,n),ze(k.$$.fragment,n),ze(D),E||(E=Fe(t,vr,e[1],!1)),E.run(0),O=!1},d(e){e&&W(t),Je(s),T.d(),L&&L.d(),P&&P.d(),Je(m),M&&M.d(),Je(v),Je(b),Je(k),D&&D.d(),e&&E&&E.end(),S=!1,_(C)}}}function Ai(e,t,n){let r,o,i,a,s,c,l,u,d,f,p=v,m=()=>(p(),p=E(g,(e=>n(2,a=e))),g),h=v;S(e,an,(e=>n(16,l=e))),S(e,Jn,(e=>n(8,u=e))),S(e,Zn,(e=>n(9,d=e))),S(e,sn,(e=>n(10,f=e))),e.$$.on_destroy.push((()=>p())),e.$$.on_destroy.push((()=>h()));let{conversation:g}=t;m();let{transition:$}=t;const y=mo({password:""});S(e,y,(e=>n(4,c=e)));const b=new Gt({api:!1,id:"saveConversationSettings"}),w=["invite_only","moderated","password","prevent_external_send","topic_protection"];return ge((async()=>{y.set({topic:g.topic,want_notifications:g.wantNotifications}),0!=Object.keys(g.modes).length||o||await new Promise((e=>g.send("/mode",e))),await Ce();const e={};for(const t of w)e["mode_"+t]=g.modes[t]||!1;y.set(e)})),e.$$set=e=>{"conversation"in e&&m(n(0,g=e.conversation)),"transition"in e&&n(1,$=e.transition)},e.$$.update=()=>{4&e.$$.dirty&&(n(5,r=a.participants),h(),h=E(r,(e=>n(3,s=e)))),4&e.$$.dirty&&n(6,o=a.is("private")),8&e.$$.dirty&&n(7,i=s.me().modes.operator),17&e.$$.dirty&&g.messages.update({raw:c.raw_messages})},[g,$,a,s,c,r,o,i,u,d,f,y,b,w,function(){g.send("/part",(e=>!e.errrors&&j(an,l="",l)))},async function(){b.update({status:"loading"}),await b.on("update"),g.update({wantNotifications:y.get("want_notifications")||!1}),function(){const e=[];for(const t of w){const n=y.get("mode_"+t)||!1;if("password"==t&&n){const e=y.get("password");e&&g.send(i?"/mode +k "+e:"/join "+g.name+" "+e),y.set({password:""})}else n!=(g.modes[t]||!1)&&e.push((n?"+":"-")+ni(t))}i&&e.length&&g.send("/mode "+e.join(""))}(),(i||!g.modes.topic_protection)&&y.get("topic")!=g.topic&&g.send("/topic "+y.get("topic")),await Ce(),b.update({status:"success"})}]}class ji extends Xe{constructor(e){super(),Qe(this,e,Ai,Ni,x,{conversation:0,transition:1})}}var Ri=function(){function e(){var t=this;h(this,e),this.dragAndDropEvents={drag:this._preventDefault.bind(this),dragend:this.stop.bind(this),dragenter:this.start.bind(this),dragleave:this.stop.bind(this),dragover:this.start.bind(this),dragstart:this._preventDefault.bind(this),drop:this.drop.bind(this)},this.pasteEvents={paste:this.paste.bind(this)},this.dropIndicatorEl=document.createElement("div"),this.dropIndicatorEl.className="drop-area hidden",this.removeDragOverDebounced=Ot((function(){return t._removeDragOver()}),100)}return $(e,[{key:"attach",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;this.dropEl=e,this.uploader=t,this.targetEl=r,Object.keys(this.dragAndDropEvents).forEach((function(e){r.addEventListener(e,n.dragAndDropEvents[e])})),Object.keys(this.pasteEvents).forEach((function(e){document.addEventListener(e,n.pasteEvents[e])}))}},{key:"detach",value:function(){var e=this;Object.keys(this.dragAndDropEvents).forEach((function(t){e.targetEl.removeEventListener(t,e.dragAndDropEvents[t])})),Object.keys(this.pasteEvents).forEach((function(t){document.removeEventListener(t,e.pasteEvents[t])}))}},{key:"drop",value:function(e){this.stop(e),this.uploader&&this.uploader(e)}},{key:"paste",value:function(e){var t=(e.clipboardData||e.originalEvent.clipboardData).items;if(this.uploader)for(var n=0;n<t.length;n++)if("file"==t[n].kind)return this.uploader({dataTransfer:{files:[t[n].getAsFile()]}})}},{key:"stop",value:function(e){this._preventDefault(e),this.removeDragOverDebounced()}},{key:"start",value:function(e){if(this.dropEl){this._preventDefault(e);var t=this.dropIndicatorEl.style;t.height=this.dropEl.offsetHeight+"px",t.width=this.dropEl.offsetWidth+"px",t.top=this.dropEl.offsetTop+"px",t.left=this.dropEl.offsetLeft+"px",this.dropIndicatorEl.classList.remove("hidden"),this.dropEl.parentNode.appendChild(this.dropIndicatorEl)}}},{key:"_preventDefault",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"_removeDragOver",value:function(){this.dropIndicatorEl.classList.add("hidden")}}]),e}();function Ti(e){let t,n,r,o,i,a,s;const c=e[6].default,l=C(c,e,e[5],null);return{c(){t=G("main"),n=G("div"),l&&l.c(),Ne((()=>e[7].call(n))),X(t,"class",o=e[1].join(" "))},m(o,c){F(o,t,c),q(t,n),l&&l.m(n,null),r=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");var n=G("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;var r,o=oe();return o?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=Z(window,"message",(function(e){e.source===n.contentWindow&&t()}))):(n.src="about:blank",n.onload=function(){r=Z(n.contentWindow,"resize",t)}),q(e,n),function(){(o||r&&n.contentWindow)&&r(),W(n)}}(n,e[7].bind(n)),i=!0,a||(s=R(e[2].call(null,t)),a=!0)},p(e,[n]){l&&l.p&&(!i||32&n)&&A(l,c,e,e[5],i?n:-1,null,null),(!i||2&n&&o!==(o=e[1].join(" ")))&&X(t,"class",o)},i(e){i||(He(l,e),i=!0)},o(e){ze(l,e),i=!1},d(e){e&&W(t),l&&l.d(e),r(),a=!1,s()}}}function Li(e,t,n){let r,{$$slots:o={},$$scope:i}=t;const a=(s=he(),function(e,t){var n=s.$$.callbacks[e];if(n){var r=ae(e,t);n.slice().forEach((function(e){e.call(s,r)}))}});var s;const c={scrollDelay:80,scrollOffset:80,scrollTop:0,visibleEls:[]};let{class:l=""}=t,u=Date.now(),d=0,{pos:f="top"}=t;function p(){const e=c.infinityEl;if(!e)return;n(3,f=e.scrollTop>d-e.offsetHeight-c.scrollOffset?"bottom":e.scrollTop<c.scrollOffset?"top":"middle"),c.pos=f,c.scrollHeightChanged=c.scrollHeight!=d,c.scrollHeight=d,c.visibleElsChanged=!1;const t=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,n=m(e.childNodes),r=[],o=0;o<n.length;)n[o].nodeType==Node.ELEMENT_NODE?(r.push([o,n[o]]),o++):n.splice(o,1);if(!n.length)return[];for(var i=t.scrollTop;r.length>1;){var a=Math.floor(r.length/2);r[a][1].offsetTop<=i?r.splice(0,a):r.splice(a)}r.length||r.push([0,n[0]]);for(var s=t.offsetHeight,c=r[0][0],l=c;l<n.length&&!(n[l].offsetTop>i+s);)l++;return n.slice(c,l).filter((function(e){return!e.getAttribute("aria-hidden")}))}(e.firstElementChild,e);t.length==c.visibleEls.length&&t[0]==c.visibleEls[0]||(c.visibleEls=t,c.visibleElsChanged=!0),(c.scrollHeightChanged||c.visibleElsChanged)&&a("visibility",c),c.scrollHeightChanged&&a("rendered",c)}function h(e){return!At.undefined(e)&&(-1==e&&(e=d),At.string(e)&&(e=c.infinityEl.querySelector(e)),e&&e.tagName&&(e=e.offsetTop),!At.undefined(e)&&(!(e<0)&&(u=Date.now(),c.infinityEl.scrollTop=e,c.scrollTop=c.infinityEl.scrollTop,!0)))}return e.$$set=e=>{"class"in e&&n(4,l=e.class),"pos"in e&&n(3,f=e.pos),"$$scope"in e&&n(5,i=e.$$scope)},e.$$.update=()=>{24&e.$$.dirty&&n(1,r=[l||"infinity-scroll"].concat(["has-pos-"+f])),1&e.$$.dirty&&d&&p()},[d,r,function(e){c.infinityEl=e,c.scrollTo=h,e.addEventListener("scroll",(()=>function(e){c.scrollTid&&clearTimeout(c.scrollTid);c.scrollTid=setTimeout((()=>function(e){u+500>Date.now()?(Math.abs(e.scrollTop-c.scrollTop)>40&&(e.scrollTop=c.scrollTop),c.scrollTid&&clearTimeout(c.scrollTid),p()):(c.scrollTop=e.scrollTop,p(),a("scrolled",c))}(e)),c.scrollDelay)}(e))),p()},f,l,i,o,function(){d=this.offsetHeight,n(0,d)}]}class Pi extends Xe{constructor(e){super(),Qe(this,e,Li,Ti,x,{class:4,pos:3})}}function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Di(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Ui=new(function(e){i(n,e);var t=Ii(n);function n(){var e;return h(this,n),(e=t.call(this)).Notification=window.Notification||{permission:"denied"},e.prop("persist","notificationCloseDelay",5e3),e.prop("persist","wantNotifications",!!e.Notification.requestPermission&&null),e.prop("ro","appHasFocus",(function(){return document.hasFocus()})),e.prop("rw","desktopAccess",e.Notification.permission),e}return $(n,[{key:"requestDesktopAccess",value:function(){var e=this;return this.Notification.requestPermission?(this.Notification.requestPermission((function(t){return e.update({desktopAccess:t})})),this):this.update({desktopAccess:this.Notification.permission})}},{key:"show",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n.title||(n.title=document.title),!this.wantNotifications)return this._showInConsole(e,n);if("granted"!=this.desktopAccess)return this.showInApp(e,n);var r=new Notification(n.title,Di(Di({},n),{},{body:e}));return r.onclick=function(e){return t._onClick(e,r,n)},setTimeout((function(){return r.close()}),this.notificationCloseDelay),r}},{key:"showInApp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.title||(t.title=document.title);var n=document.createElement("div"),r=Di(Di({},t),{},{body:e,close:function(){n.remove(),r.closed=!0},target:"app"});return n.className="notify-notification fade-in",n.innerHTML='<a href="#close" class="notify-notification__close"></a><h6 class="notify-notification__title"></h6><div class="notify-notification__content"></div>',n.querySelector("a").addEventListener("click",(function(e){e.preventDefault(),r.close()})),n.querySelector("h6").textContent=t.title,n.querySelector("div").textContent=e,-1==t.closeAfter?n.querySelector("a").remove():setTimeout((function(){return r.close()}),t.closeAfter||this.notificationCloseDelay),setTimeout((function(){return n.classList.add("is-visible")}),1),document.body.insertBefore(n,document.body.querySelector(".notify-notification")),r}},{key:"_onClick",value:function(e,t,n){t.close(),window.focus(),this.emit("click",Di(Di({},n),{},{sourceEvent:e}))}},{key:"_showInConsole",value:function(e,t){return console.info("[Notify]",e,t),Di(Di({},t),{},{body:e,close:function(){},target:"console"})}}]),n}(Wt));function Bi(e,t,n){const r=e.slice();return r[39]=t[n],r}function Hi(e,t,n){const r=e.slice();return r[42]=t[n],r[44]=n,r}function zi(e,t,n){const r=e.slice();return r[45]=t[n],r}function qi(e){let t,n,r,o,i,a,s;return n=new at({props:{name:"users-cog"}}),o=new at({props:{name:"times"}}),{c(){t=G("a"),Ye(n.$$.fragment),r=V(),Ye(o.$$.fragment),X(t,"href","#settings"),X(t,"class","btn-hallow"),ie(t,"is-active","settings"==e[16])},m(e,c){F(e,t,c),Ve(n,t,null),q(t,r),Ve(o,t,null),i=!0,a||(s=Z(t,"click",an.toggle),a=!0)},p(e,n){65536&n[0]&&ie(t,"is-active","settings"==e[16])},i(e){i||(He(n.$$.fragment,e),He(o.$$.fragment,e),i=!0)},o(e){ze(n.$$.fragment,e),ze(o.$$.fragment,e),i=!1},d(e){e&&W(t),Je(n),Je(o),a=!1,s()}}}function Fi(e){let t,n,r,o,i,a,s,c,l,u,d,f=e[14](e[1].name)+"",p=mr(e[15],e[5])+"",m=!e[5].is("not_found"),h=m&&qi(e);return{c(){t=G("h1"),n=G("a"),r=Y(f),o=V(),i=G("span"),a=Y(p),s=V(),h&&h.c(),c=J(),X(n,"href","#settings"),X(t,"class","ellipsis"),X(i,"class","chat-header__topic ellipsis")},m(e,f){F(e,t,f),q(t,n),q(n,r),F(e,o,f),F(e,i,f),q(i,a),F(e,s,f),h&&h.m(e,f),F(e,c,f),l=!0,u||(d=Z(n,"click",an.toggle),u=!0)},p(e,t){(!l||16386&t[0])&&f!==(f=e[14](e[1].name)+"")&&te(r,f),(!l||32800&t[0])&&p!==(p=mr(e[15],e[5])+"")&&te(a,p),32&t[0]&&(m=!e[5].is("not_found")),m?h?(h.p(e,t),32&t[0]&&He(h,1)):(h=qi(e),h.c(),He(h,1),h.m(c.parentNode,c)):h&&(Ue(),ze(h,1,1,(()=>{h=null})),Be())},i(e){l||(He(h),l=!0)},o(e){ze(h),l=!1},d(e){e&&W(t),e&&W(o),e&&W(i),e&&W(s),h&&h.d(e),e&&W(c),u=!1,d()}}}function Wi(e){let t,n,r,o;const i=[Gi,Ki],a=[];function s(e,t){return e[0]?0:1}return t=s(e),n=a[t]=i[t](e),{c(){n.c(),r=J()},m(e,n){a[t].m(e,n),F(e,r,n),o=!0},p(e,o){let c=t;t=s(e),t===c?a[t].p(e,o):(Ue(),ze(a[c],1,1,(()=>{a[c]=null})),Be(),n=a[t],n?n.p(e,o):(n=a[t]=i[t](e),n.c()),He(n,1),n.m(r.parentNode,r))},i(e){o||(He(n),o=!0)},o(e){ze(n),o=!1},d(e){a[t].d(e),e&&W(r)}}}function Ki(e){let t,n;return t=new Zo({props:{conversation:e[1],transition:{duration:250,x:e[17].nColumns>1?0:e[17].width}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.conversation=e[1]),131072&n[0]&&(r.transition={duration:250,x:e[17].nColumns>1?0:e[17].width}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function Gi(e){let t,n;return t=new ji({props:{conversation:e[1],transition:{duration:250,x:e[17].nColumns>1?0:e[17].width}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.conversation=e[1]),131072&n[0]&&(r.transition={duration:250,x:e[17].nColumns>1?0:e[17].width}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function Yi(e){let t,n,r,o,i;const a=[Ji,Vi],s=[];function c(e,n){return 32&n[0]&&(t=!!e[5].is("private")),t?0:e[5].frozen?-1:1}return~(n=c(e,[-1,-1]))&&(r=s[n]=a[n](e)),{c(){r&&r.c(),o=J()},m(e,t){~n&&s[n].m(e,t),F(e,o,t),i=!0},p(e,t){let i=n;n=c(e,t),n===i?~n&&s[n].p(e,t):(r&&(Ue(),ze(s[i],1,1,(()=>{s[i]=null})),Be()),~n?(r=s[n],r?r.p(e,t):(r=s[n]=a[n](e),r.c()),He(r,1),r.m(o.parentNode,o)):r=null)},i(e){i||(He(r),i=!0)},o(e){ze(r),i=!1},d(e){~n&&s[n].d(e),e&&W(o)}}}function Vi(e){let t,n,r,o,i,a,s,c,l,u=e[19](e[5].topic?"Topic for %1 is: %2":"No topic is set for %1.",e[5].name,e[5].topic)+"";function d(e,t){return 1==e[20].length?Qi:Zi}n=new at({props:{name:"info-circle"}}),s=new at({props:{name:"info-circle"}});let f=d(e),p=f(e);return{c(){t=G("p"),Ye(n.$$.fragment),r=V(),o=new ce,i=V(),a=G("p"),Ye(s.$$.fragment),c=V(),p.c(),o.a=null},m(e,d){F(e,t,d),Ve(n,t,null),q(t,r),o.m(u,t),F(e,i,d),F(e,a,d),Ve(s,a,null),q(a,c),p.m(a,null),l=!0},p(e,t){(!l||524320&t[0])&&u!==(u=e[19](e[5].topic?"Topic for %1 is: %2":"No topic is set for %1.",e[5].name,e[5].topic)+"")&&o.p(u),f===(f=d(e))&&p?p.p(e,t):(p.d(1),p=f(e),p&&(p.c(),p.m(a,null)))},i(e){l||(He(n.$$.fragment,e),He(s.$$.fragment,e),l=!0)},o(e){ze(n.$$.fragment,e),ze(s.$$.fragment,e),l=!1},d(e){e&&W(t),Je(n),e&&W(i),e&&W(a),Je(s),p.d()}}}function Ji(e){let t,n,r,o,i,a=e[19]('This is a private conversation with "%1".',e[5].name)+"";return n=new at({props:{name:"info-circle"}}),{c(){t=G("p"),Ye(n.$$.fragment),r=V(),o=new ce,o.a=null},m(e,s){F(e,t,s),Ve(n,t,null),q(t,r),o.m(a,t),i=!0},p(e,t){(!i||524320&t[0])&&a!==(a=e[19]('This is a private conversation with "%1".',e[5].name)+"")&&o.p(a)},i(e){i||(He(n.$$.fragment,e),i=!0)},o(e){ze(n.$$.fragment,e),i=!1},d(e){e&&W(t),Je(n)}}}function Zi(e){let t,n,r=e[19]("There are %1 participants in this conversation.",e[20].length)+"";return{c(){t=new ce,n=J(),t.a=n},m(e,o){t.m(r,e,o),F(e,n,o)},p(e,n){1572864&n[0]&&r!==(r=e[19]("There are %1 participants in this conversation.",e[20].length)+"")&&t.p(r)},d(e){e&&W(n),e&&t.d()}}}function Qi(e){let t,n=e[14]("You are the only participant in this conversation.")+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){16384&r[0]&&n!==(n=e[14]("You are the only participant in this conversation.")+"")&&te(t,n)},d(e){e&&W(t)}}}function Xi(e){let t,n,r,o,i,a,s,c=e[14]("Loading...")+"";return r=new at({props:{name:"spinner",animation:"spin"}}),{c(){t=G("div"),n=G("span"),Ye(r.$$.fragment),o=V(),i=G("i"),a=Y(c),X(t,"class","message__status-line for-loading has-pos-top")},m(e,c){F(e,t,c),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(i,a),s=!0},p(e,t){(!s||16384&t[0])&&c!==(c=e[14]("Loading...")+"")&&te(a,c)},i(e){s||(He(r.$$.fragment,e),s=!0)},o(e){ze(r.$$.fragment,e),s=!1},d(e){e&&W(t),Je(r)}}}function ea(e){let t,n,r,o,i,a,s,c=e[14]("Started chatting on %1",e[5].historyStartAt.getHumanDate())+"";return r=new at({props:{name:"calendar-alt"}}),{c(){t=G("div"),n=G("span"),Ye(r.$$.fragment),o=V(),i=G("i"),a=Y(c),X(t,"class","message__status-line for-start-of-history")},m(e,c){F(e,t,c),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(i,a),s=!0},p(e,t){(!s||16416&t[0])&&c!==(c=e[14]("Started chatting on %1",e[5].historyStartAt.getHumanDate())+"")&&te(a,c)},i(e){s||(He(r.$$.fragment,e),s=!0)},o(e){ze(r.$$.fragment,e),s=!1},d(e){e&&W(t),Je(r)}}}function ta(e){let t,n,r,o,i,a,s,c=e[42].ts.getHumanDate()+"";return r=new at({props:{name:"calendar-alt"}}),{c(){t=G("div"),n=G("span"),Ye(r.$$.fragment),o=V(),i=G("i"),a=Y(c),X(t,"class","message__status-line for-day-changed")},m(e,c){F(e,t,c),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(i,a),s=!0},p(e,t){(!s||262144&t[0])&&c!==(c=e[42].ts.getHumanDate()+"")&&te(a,c)},i(e){s||(He(r.$$.fragment,e),s=!0)},o(e){ze(r.$$.fragment,e),s=!1},d(e){e&&W(t),Je(r)}}}function na(e){let t,n,r,o,i,a,s=e[14]("New messages")+"";return r=new at({props:{name:"comments"}}),{c(){t=G("div"),n=G("span"),Ye(r.$$.fragment),o=V(),i=Y(s),X(t,"class","message__status-line for-last-read")},m(e,s){F(e,t,s),q(t,n),Ve(r,n,null),q(n,o),q(n,i),a=!0},p(e,t){(!a||16384&t[0])&&s!==(s=e[14]("New messages")+"")&&te(i,s)},i(e){a||(He(r.$$.fragment,e),a=!0)},o(e){ze(r.$$.fragment,e),a=!1},d(e){e&&W(t),Je(r)}}}function ra(e){let t,n,r,o;return n=new at({props:{name:e[42].showDetails?"caret-square-up":"caret-square-down"}}),{c(){t=G("a"),Ye(n.$$.fragment),X(t,"href",r="#action:details:"+e[42].index)},m(e,r){F(e,t,r),Ve(n,t,null),o=!0},p(e,i){const a={};262144&i[0]&&(a.name=e[42].showDetails?"caret-square-up":"caret-square-down"),n.$set(a),(!o||262144&i[0]&&r!==(r="#action:details:"+e[42].index))&&X(t,"href",r)},i(e){o||(He(n.$$.fragment,e),o=!0)},o(e){ze(n.$$.fragment,e),o=!1},d(e){e&&W(t),Je(n)}}}function oa(e){let t,n,r,o,i,a,s,c;return n=new at({props:{name:"times-circle"}}),a=new at({props:{name:"sync-alt"}}),{c(){t=G("a"),Ye(n.$$.fragment),o=V(),i=G("a"),Ye(a.$$.fragment),X(t,"href","#action:remove"),X(t,"class","pull-right has-tooltip"),X(t,"data-tooltip",r=e[14]("Remove")),X(i,"href","#action:resend"),X(i,"class","pull-right has-tooltip "),X(i,"data-tooltip",s=e[14]("Resend"))},m(e,r){F(e,t,r),Ve(n,t,null),F(e,o,r),F(e,i,r),Ve(a,i,null),c=!0},p(e,n){(!c||16384&n[0]&&r!==(r=e[14]("Remove")))&&X(t,"data-tooltip",r),(!c||16384&n[0]&&s!==(s=e[14]("Resend")))&&X(i,"data-tooltip",s)},i(e){c||(He(n.$$.fragment,e),He(a.$$.fragment,e),c=!0)},o(e){ze(n.$$.fragment,e),ze(a.$$.fragment,e),c=!1},d(e){e&&W(t),Je(n),e&&W(o),e&&W(i),Je(a)}}}function ia(e){return{c:v,m:v,p:v,d:v}}function aa(e){let t,n,r,o,i;return{c(){t=G("div"),X(t,"class",n="embed "+e[48].className)},m(n,a){F(n,t,a),o||(i=R(r=pr.call(null,t,e[48])),o=!0)},p(o,i){e=o,262144&i[0]&&n!==(n="embed "+e[48].className)&&X(t,"class",n),r&&k(r.update)&&262144&i[0]&&r.update.call(null,e[48])},d(e){e&&W(t),o=!1,i()}}}function sa(e){return{c:v,m:v,p:v,d:v}}function ca(e){let t,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:sa,then:aa,catch:ia,value:48};return We(n=e[45],r),{c(){t=J(),r.block.c()},m(e,n){F(e,t,n),r.block.m(e,r.anchor=n),r.mount=()=>t.parentNode,r.anchor=t},p(t,o){e=t,r.ctx=e,262144&o[0]&&n!==(n=e[45])&&We(n,r)||function(e,t,n){var r=t.slice(),o=e.resolved;e.current===e.then&&(r[e.value]=o),e.current===e.catch&&(r[e.error]=o),e.block.p(r,n)}(r,e,o)},d(e){e&&W(t),r.block.d(e),r.token=null,r=null}}}function la(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,_,k=e[14]("Mention")+"",x=e[14]("Chat")+"",E=e[14]("Whois")+"";return r=new at({props:{name:"quote-left"}}),l=new at({props:{name:"comments"}}),h=new at({props:{name:"address-card"}}),{c(){t=G("div"),n=G("a"),Ye(r.$$.fragment),o=V(),i=Y(k),s=V(),c=G("a"),Ye(l.$$.fragment),u=V(),d=Y(x),p=V(),m=G("a"),Ye(h.$$.fragment),g=V(),$=Y(E),X(n,"href",a="#action:mention:"+e[42].from),X(n,"class","on-hover"),X(c,"href",f="#action:join:"+e[42].from),X(c,"class","on-hover"),X(m,"href",v="#action:whois:"+e[42].from),X(m,"class","on-hover"),X(t,"class","popover")},m(a,f){F(a,t,f),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(t,s),q(t,c),Ve(l,c,null),q(c,u),q(c,d),q(t,p),q(t,m),Ve(h,m,null),q(m,g),q(m,$),b=!0,w||(_=Z(t,"mouseout",e[24]),w=!0)},p(e,t){(!b||16384&t[0])&&k!==(k=e[14]("Mention")+"")&&te(i,k),(!b||262144&t[0]&&a!==(a="#action:mention:"+e[42].from))&&X(n,"href",a),(!b||16384&t[0])&&x!==(x=e[14]("Chat")+"")&&te(d,x),(!b||262144&t[0]&&f!==(f="#action:join:"+e[42].from))&&X(c,"href",f),(!b||16384&t[0])&&E!==(E=e[14]("Whois")+"")&&te($,E),(!b||262144&t[0]&&v!==(v="#action:whois:"+e[42].from))&&X(m,"href",v)},i(e){b||(He(r.$$.fragment,e),He(l.$$.fragment,e),He(h.$$.fragment,e),Ne((()=>{y||(y=Fe(t,$r,{duration:200},!0)),y.run(1)})),b=!0)},o(e){ze(r.$$.fragment,e),ze(l.$$.fragment,e),ze(h.$$.fragment,e),y||(y=Fe(t,$r,{duration:200},!1)),y.run(0),b=!1},d(e){e&&W(t),Je(r),Je(l),Je(h),e&&y&&y.end(),w=!1,_()}}}function ua(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,x,E,O,S,C,N,A,j=e[42].ts.toLocaleString()+"",R=e[42].from+"",T=e[42].markdown+"",L=e[42].dayChanged&&ta(e),P=e[44]&&e[44]==e[18].length-e[5].unread&&na(e);o=new at({props:{name:"pick:"+e[42].from,color:e[42].color}});const M=[oa,ra],D=[];function I(e,t){return!1===e[42].waitingForResponse?0:!e[42].waitingForResponse&&e[42].details?1:-1}~(g=I(e))&&($=D[g]=M[g](e));let U=e[42].embeds,B=[];for(let t=0;t<U.length;t+=1)B[t]=ca(zi(e,U,t));let H=e[13]==e[42].id&&la(e);return{c(){L&&L.c(),t=V(),P&&P.c(),n=V(),r=G("div"),Ye(o.$$.fragment),i=V(),a=G("div"),s=G("div"),c=Y(j),u=V(),d=G("a"),f=Y(R),m=V(),h=G("div"),$&&$.c(),v=V(),y=new ce,b=V();for(let e=0;e<B.length;e+=1)B[e].c();w=V(),H&&H.c(),x=V(),X(a,"class","message__ts has-tooltip"),X(a,"data-content",l=e[42].ts.format("%H:%M")),X(d,"href",p="#popover:"+e[42].id),X(d,"class","message__from"),re(d,"color",e[42].color),X(d,"tabindex","-1"),y.a=null,X(h,"class","message__text"),X(r,"class",E=e[42].className),X(r,"data-index",O=e[44]),X(r,"data-ts",S=e[42].ts.toISOString()),ie(r,"is-not-present",!e[20].get(e[42].from)),ie(r,"show-details",!!e[42].showDetails)},m(l,p){L&&L.m(l,p),F(l,t,p),P&&P.m(l,p),F(l,n,p),F(l,r,p),Ve(o,r,null),q(r,i),q(r,a),q(a,s),q(s,c),q(r,u),q(r,d),q(d,f),q(r,m),q(r,h),~g&&D[g].m(h,null),q(h,v),y.m(T,h),q(r,b);for(let e=0;e<B.length;e+=1)B[e].m(r,null);q(r,w),H&&H.m(r,null),q(r,x),C=!0,N||(A=[Z(d,"mouseover",e[24]),Z(d,"mouseout",e[24]),Z(r,"click",(function(){k(e[12])&&e[12].apply(this,arguments)}))],N=!0)},p(i,s){(e=i)[42].dayChanged?L?(L.p(e,s),262144&s[0]&&He(L,1)):(L=ta(e),L.c(),He(L,1),L.m(t.parentNode,t)):L&&(Ue(),ze(L,1,1,(()=>{L=null})),Be()),e[44]&&e[44]==e[18].length-e[5].unread?P?(P.p(e,s),262176&s[0]&&He(P,1)):(P=na(e),P.c(),He(P,1),P.m(n.parentNode,n)):P&&(Ue(),ze(P,1,1,(()=>{P=null})),Be());const u={};262144&s[0]&&(u.name="pick:"+e[42].from),262144&s[0]&&(u.color=e[42].color),o.$set(u),(!C||262144&s[0])&&j!==(j=e[42].ts.toLocaleString()+"")&&te(c,j),(!C||262144&s[0]&&l!==(l=e[42].ts.format("%H:%M")))&&X(a,"data-content",l),(!C||262144&s[0])&&R!==(R=e[42].from+"")&&te(f,R),(!C||262144&s[0]&&p!==(p="#popover:"+e[42].id))&&X(d,"href",p),(!C||262144&s[0])&&re(d,"color",e[42].color);let m=g;if(g=I(e),g===m?~g&&D[g].p(e,s):($&&(Ue(),ze(D[m],1,1,(()=>{D[m]=null})),Be()),~g?($=D[g],$?$.p(e,s):($=D[g]=M[g](e),$.c()),He($,1),$.m(h,v)):$=null),(!C||262144&s[0])&&T!==(T=e[42].markdown+"")&&y.p(T),262144&s[0]){let t;for(U=e[42].embeds,t=0;t<U.length;t+=1){const n=zi(e,U,t);B[t]?B[t].p(n,s):(B[t]=ca(n),B[t].c(),B[t].m(r,w))}for(;t<B.length;t+=1)B[t].d(1);B.length=U.length}e[13]==e[42].id?H?(H.p(e,s),270336&s[0]&&He(H,1)):(H=la(e),H.c(),He(H,1),H.m(r,x)):H&&(Ue(),ze(H,1,1,(()=>{H=null})),Be()),(!C||262144&s[0]&&E!==(E=e[42].className))&&X(r,"class",E),(!C||262144&s[0]&&S!==(S=e[42].ts.toISOString()))&&X(r,"data-ts",S),1310720&s[0]&&ie(r,"is-not-present",!e[20].get(e[42].from)),262144&s[0]&&ie(r,"show-details",!!e[42].showDetails)},i(e){C||(He(L),He(P),He(o.$$.fragment,e),He($),He(H),C=!0)},o(e){ze(L),ze(P),ze(o.$$.fragment,e),ze($),ze(H),C=!1},d(e){L&&L.d(e),e&&W(t),P&&P.d(e),e&&W(n),e&&W(r),Je(o),~g&&D[g].d(),K(B,e),H&&H.d(),N=!1,_(A)}}}function da(e){let t,n,r,o,i,a,s=mr(e[15],e[5])+"";return r=new at({props:{name:"exclamation-triangle"}}),{c(){t=G("div"),n=G("div"),Ye(r.$$.fragment),o=V(),i=Y(s),X(n,"class","message__text"),X(t,"class","message is-highlighted")},m(e,s){F(e,t,s),q(t,n),Ve(r,n,null),q(n,o),q(n,i),a=!0},p(e,t){(!a||32800&t[0])&&s!==(s=mr(e[15],e[5])+"")&&te(i,s)},i(e){a||(He(r.$$.fragment,e),a=!0)},o(e){ze(r.$$.fragment,e),a=!1},d(e){e&&W(t),Je(r)}}}function fa(e){let t,n,r,o,i,a,s,c,l,u,d,f=e[14]("You are invited to join %1.",e[1].name)+"",p=e[14]("Do you want to join?")+"";return c=new ei({props:{href:"#action:join",class:"btn",$$slots:{default:[ga]},$$scope:{ctx:e}}}),c.$on("click",(function(){k(e[12])&&e[12].apply(this,arguments)})),u=new ei({props:{href:"#action:close",class:"btn is-secondary",$$slots:{default:[$a]},$$scope:{ctx:e}}}),u.$on("click",(function(){k(e[12])&&e[12].apply(this,arguments)})),{c(){t=G("h2"),n=Y(f),r=V(),o=G("p"),i=Y(p),a=V(),s=G("p"),Ye(c.$$.fragment),l=V(),Ye(u.$$.fragment)},m(e,f){F(e,t,f),q(t,n),F(e,r,f),F(e,o,f),q(o,i),F(e,a,f),F(e,s,f),Ve(c,s,null),q(s,l),Ve(u,s,null),d=!0},p(t,r){e=t,(!d||16386&r[0])&&f!==(f=e[14]("You are invited to join %1.",e[1].name)+"")&&te(n,f),(!d||16384&r[0])&&p!==(p=e[14]("Do you want to join?")+"")&&te(i,p);const o={};16384&r[0]|262144&r[1]&&(o.$$scope={dirty:r,ctx:e}),c.$set(o);const a={};16384&r[0]|262144&r[1]&&(a.$$scope={dirty:r,ctx:e}),u.$set(a)},i(e){d||(He(c.$$.fragment,e),He(u.$$.fragment,e),d=!0)},o(e){ze(c.$$.fragment,e),ze(u.$$.fragment,e),d=!1},d(e){e&&W(t),e&&W(r),e&&W(o),e&&W(a),e&&W(s),Je(c),Je(u)}}}function pa(e){let t,n,r,o,i,a,s,c,l=e[19]("Disconnected. Your connection %1 can be edited in [settings](%2).",e[15].name,"/chat/"+e[15].connection_id+"#settings")+"";return r=new at({props:{name:"exclamation-triangle"}}),{c(){t=G("div"),n=G("div"),Ye(r.$$.fragment),o=V(),i=new ce,i.a=null,X(n,"class","message__text"),X(t,"class","message is-highlighted")},m(e,u){F(e,t,u),q(t,n),Ve(r,n,null),q(n,o),i.m(l,n),a=!0,s||(c=Z(t,"click",an.toggle),s=!0)},p(e,t){(!a||557056&t[0])&&l!==(l=e[19]("Disconnected. Your connection %1 can be edited in [settings](%2).",e[15].name,"/chat/"+e[15].connection_id+"#settings")+"")&&i.p(l)},i(e){a||(He(r.$$.fragment,e),a=!0)},o(e){ze(r.$$.fragment,e),a=!1},d(e){e&&W(t),Je(r),s=!1,c()}}}function ma(e){let t,n,r,o,i,a,s,c,l,u,d,f=e[14]("You are not part of this conversation.")+"",p=e[14]('Do you want to chat with "%1"?',e[5].name)+"";return c=new ei({props:{href:"#action:join:"+e[5].name,class:"btn",$$slots:{default:[va]},$$scope:{ctx:e}}}),c.$on("click",(function(){k(e[12])&&e[12].apply(this,arguments)})),u=new ei({props:{href:"/settings/conversation",class:"btn is-secondary",$$slots:{default:[ya]},$$scope:{ctx:e}}}),{c(){t=G("h2"),n=Y(f),r=V(),o=G("p"),i=Y(p),a=V(),s=G("p"),Ye(c.$$.fragment),l=V(),Ye(u.$$.fragment)},m(e,f){F(e,t,f),q(t,n),F(e,r,f),F(e,o,f),q(o,i),F(e,a,f),F(e,s,f),Ve(c,s,null),q(s,l),Ve(u,s,null),d=!0},p(t,r){e=t,(!d||16384&r[0])&&f!==(f=e[14]("You are not part of this conversation.")+"")&&te(n,f),(!d||16416&r[0])&&p!==(p=e[14]('Do you want to chat with "%1"?',e[5].name)+"")&&te(i,p);const o={};32&r[0]&&(o.href="#action:join:"+e[5].name),16384&r[0]|262144&r[1]&&(o.$$scope={dirty:r,ctx:e}),c.$set(o);const a={};16384&r[0]|262144&r[1]&&(a.$$scope={dirty:r,ctx:e}),u.$set(a)},i(e){d||(He(c.$$.fragment,e),He(u.$$.fragment,e),d=!0)},o(e){ze(c.$$.fragment,e),ze(u.$$.fragment,e),d=!1},d(e){e&&W(t),e&&W(r),e&&W(o),e&&W(a),e&&W(s),Je(c),Je(u)}}}function ha(e){let t,n,r,o,i,a,s,c,l,u,d,f=e[14]("Connection does not exist.")+"",p=e[14]('Do you want to create the connection "%1"?',e[15].connection_id)+"";return c=new ei({props:{href:"/settings/connections?uri="+encodeURIComponent(e[23](e[5])),class:"btn",$$slots:{default:[ba]},$$scope:{ctx:e}}}),u=new ei({props:{href:"/settings/connections",class:"btn is-secondary",$$slots:{default:[wa]},$$scope:{ctx:e}}}),{c(){t=G("h2"),n=Y(f),r=V(),o=G("p"),i=Y(p),a=V(),s=G("p"),Ye(c.$$.fragment),l=V(),Ye(u.$$.fragment)},m(e,f){F(e,t,f),q(t,n),F(e,r,f),F(e,o,f),q(o,i),F(e,a,f),F(e,s,f),Ve(c,s,null),q(s,l),Ve(u,s,null),d=!0},p(e,t){(!d||16384&t[0])&&f!==(f=e[14]("Connection does not exist.")+"")&&te(n,f),(!d||49152&t[0])&&p!==(p=e[14]('Do you want to create the connection "%1"?',e[15].connection_id)+"")&&te(i,p);const r={};32&t[0]&&(r.href="/settings/connections?uri="+encodeURIComponent(e[23](e[5]))),16384&t[0]|262144&t[1]&&(r.$$scope={dirty:t,ctx:e}),c.$set(r);const o={};16384&t[0]|262144&t[1]&&(o.$$scope={dirty:t,ctx:e}),u.$set(o)},i(e){d||(He(c.$$.fragment,e),He(u.$$.fragment,e),d=!0)},o(e){ze(c.$$.fragment,e),ze(u.$$.fragment,e),d=!1},d(e){e&&W(t),e&&W(r),e&&W(o),e&&W(a),e&&W(s),Je(c),Je(u)}}}function ga(e){let t,n,r,o,i,a=e[14]("Yes")+"";return t=new at({props:{name:"thumbs-up"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||16384&t[0])&&a!==(a=e[14]("Yes")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function $a(e){let t,n,r,o,i,a=e[14]("No")+"";return t=new at({props:{name:"thumbs-down"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||16384&t[0])&&a!==(a=e[14]("No")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function va(e){let t,n,r,o,i,a=e[14]("Yes")+"";return t=new at({props:{name:"thumbs-up"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||16384&t[0])&&a!==(a=e[14]("Yes")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function ya(e){let t,n,r,o,i,a=e[14]("No")+"";return t=new at({props:{name:"thumbs-down"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||16384&t[0])&&a!==(a=e[14]("No")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function ba(e){let t,n,r,o,i=e[14]("Yes")+"";return t=new at({props:{name:"thumbs-up"}}),{c(){Ye(t.$$.fragment),n=V(),r=Y(i)},m(e,i){Ve(t,e,i),F(e,n,i),F(e,r,i),o=!0},p(e,t){(!o||16384&t[0])&&i!==(i=e[14]("Yes")+"")&&te(r,i)},i(e){o||(He(t.$$.fragment,e),o=!0)},o(e){ze(t.$$.fragment,e),o=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function wa(e){let t,n,r,o,i=e[14]("No")+"";return t=new at({props:{name:"thumbs-down"}}),{c(){Ye(t.$$.fragment),n=V(),r=Y(i)},m(e,i){Ve(t,e,i),F(e,n,i),F(e,r,i),o=!0},p(e,t){(!o||16384&t[0])&&i!==(i=e[14]("No")+"")&&te(r,i)},i(e){o||(He(t.$$.fragment,e),o=!0)},o(e){ze(t.$$.fragment,e),o=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function _a(e){let t,n,r,o,i,a,s,c=e[14]("Loading...")+"";return r=new at({props:{name:"spinner",animation:"spin"}}),{c(){t=G("div"),n=G("span"),Ye(r.$$.fragment),o=V(),i=G("i"),a=Y(c),X(t,"class","message__status-line for-loading has-pos-bottom")},m(e,c){F(e,t,c),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(i,a),s=!0},p(e,t){(!s||16384&t[0])&&c!==(c=e[14]("Loading...")+"")&&te(a,c)},i(e){s||(He(r.$$.fragment,e),s=!0)},o(e){ze(r.$$.fragment,e),s=!1},d(e){e&&W(t),Je(r)}}}function ka(e){let t,n,r,o,i,a,s,c=e[14]("Jump to %1",e[8].format("%b %e %H:%M"))+"";return r=new at({props:{name:"external-link-alt"}}),{c(){t=G("div"),n=G("a"),Ye(r.$$.fragment),o=V(),i=Y(c),X(n,"href",a=e[1].path),X(t,"class","message__status-line for-jump-to-now")},m(e,a){F(e,t,a),q(t,n),Ve(r,n,null),q(n,o),q(n,i),s=!0},p(e,t){(!s||16640&t[0])&&c!==(c=e[14]("Jump to %1",e[8].format("%b %e %H:%M"))+"")&&te(i,c),(!s||2&t[0]&&a!==(a=e[1].path))&&X(n,"href",a)},i(e){s||(He(r.$$.fragment,e),s=!0)},o(e){ze(r.$$.fragment,e),s=!1},d(e){e&&W(t),Je(r)}}}function xa(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$=e[18].length<10&&!e[5].is("not_found"),v=e[5].is("loading")&&e[18].length>10,y=e[5].historyStartAt&&!e[5].is("not_found")&&e[18].length,b=e[5].is("loading"),w=$&&Yi(e),_=v&&Xi(e),k=y&&ea(e),x=e[18].render(),E=[];for(let t=0;t<x.length;t+=1)E[t]=ua(Hi(e,x,t));const O=e=>ze(E[e],1,1,(()=>{E[e]=null})),S=[ha,ma,pa,fa,da],C=[];function N(e,t){return 32768&t[0]&&(i=!!e[15].is("not_found")),i?0:(32&t[0]&&(a=!!e[5].is("not_found")),a?1:(32768&t[0]&&(s=!(e[15].is("unreachable")||!e[15].frozen)),s?2:(32&t[0]&&(c=!(!e[5].frozen||!e[5].is("pending"))),c?3:(32&t[0]&&(l=!(!e[5].frozen||e[5].is("locked"))),l?4:-1))))}~(u=N(e,[-1,-1]))&&(d=C[u]=S[u](e));let A=null===Ui.wantNotifications&&function(e){let t,n,r,o,i,a,s=e[19]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"";return r=new at({props:{name:"info-circle"}}),{c(){t=G("div"),n=G("div"),Ye(r.$$.fragment),o=V(),i=new ce,i.a=null,X(n,"class","message__text"),X(t,"class","message is-highlighted")},m(e,c){F(e,t,c),q(t,n),Ve(r,n,null),q(n,o),i.m(s,n),a=!0},p(e,t){(!a||524288&t[0])&&s!==(s=e[19]('Go to "[account settings](%1)" to enable or disable notifications.',"/settings/account")+"")&&i.p(s)},i(e){a||(He(r.$$.fragment,e),a=!0)},o(e){ze(r.$$.fragment,e),a=!1},d(e){e&&W(t),Je(r)}}}(e),j=b&&_a(e),R=!e[5].historyStopAt&&e[18].length&&ka(e);return{c(){w&&w.c(),t=V(),_&&_.c(),n=V(),k&&k.c(),r=V();for(let e=0;e<E.length;e+=1)E[e].c();o=V(),d&&d.c(),f=V(),A&&A.c(),p=V(),j&&j.c(),m=V(),R&&R.c(),h=J()},m(e,i){w&&w.m(e,i),F(e,t,i),_&&_.m(e,i),F(e,n,i),k&&k.m(e,i),F(e,r,i);for(let t=0;t<E.length;t+=1)E[t].m(e,i);F(e,o,i),~u&&C[u].m(e,i),F(e,f,i),A&&A.m(e,i),F(e,p,i),j&&j.m(e,i),F(e,m,i),R&&R.m(e,i),F(e,h,i),g=!0},p(e,i){if(262176&i[0]&&($=e[18].length<10&&!e[5].is("not_found")),$?w?(w.p(e,i),262176&i[0]&&He(w,1)):(w=Yi(e),w.c(),He(w,1),w.m(t.parentNode,t)):w&&(Ue(),ze(w,1,1,(()=>{w=null})),Be()),262176&i[0]&&(v=e[5].is("loading")&&e[18].length>10),v?_?(_.p(e,i),262176&i[0]&&He(_,1)):(_=Xi(e),_.c(),He(_,1),_.m(n.parentNode,n)):_&&(Ue(),ze(_,1,1,(()=>{_=null})),Be()),262176&i[0]&&(y=e[5].historyStartAt&&!e[5].is("not_found")&&e[18].length),y?k?(k.p(e,i),262176&i[0]&&He(k,1)):(k=ea(e),k.c(),He(k,1),k.m(r.parentNode,r)):k&&(Ue(),ze(k,1,1,(()=>{k=null})),Be()),18116640&i[0]){let t;for(x=e[18].render(),t=0;t<x.length;t+=1){const n=Hi(e,x,t);E[t]?(E[t].p(n,i),He(E[t],1)):(E[t]=ua(n),E[t].c(),He(E[t],1),E[t].m(o.parentNode,o))}for(Ue(),t=x.length;t<E.length;t+=1)O(t);Be()}let a=u;u=N(e,i),u===a?~u&&C[u].p(e,i):(d&&(Ue(),ze(C[a],1,1,(()=>{C[a]=null})),Be()),~u?(d=C[u],d?d.p(e,i):(d=C[u]=S[u](e),d.c()),He(d,1),d.m(f.parentNode,f)):d=null),null===Ui.wantNotifications&&A.p(e,i),32&i[0]&&(b=e[5].is("loading")),b?j?(j.p(e,i),32&i[0]&&He(j,1)):(j=_a(e),j.c(),He(j,1),j.m(m.parentNode,m)):j&&(Ue(),ze(j,1,1,(()=>{j=null})),Be()),!e[5].historyStopAt&&e[18].length?R?(R.p(e,i),262176&i[0]&&He(R,1)):(R=ka(e),R.c(),He(R,1),R.m(h.parentNode,h)):R&&(Ue(),ze(R,1,1,(()=>{R=null})),Be())},i(e){if(!g){He(w),He(_),He(k);for(let e=0;e<x.length;e+=1)He(E[e]);He(d),He(A),He(j),He(R),g=!0}},o(e){ze(w),ze(_),ze(k),E=E.filter(Boolean);for(let e=0;e<E.length;e+=1)ze(E[e]);ze(d),ze(A),ze(j),ze(R),g=!1},d(e){w&&w.d(e),e&&W(t),_&&_.d(e),e&&W(n),k&&k.d(e),e&&W(r),K(E,e),e&&W(o),~u&&C[u].d(e),e&&W(f),A&&A.d(e),e&&W(p),j&&j.d(e),e&&W(m),R&&R.d(e),e&&W(h)}}}function Ea(e){let t,n,r,o,i,a,s,c,l,u,d=e[14]("Participants (%1)",e[20].length)+"",f=e[20].toArray(),p=[];for(let t=0;t<f.length;t+=1)p[t]=Oa(Bi(e,f,t));const m=e=>ze(p[e],1,1,(()=>{p[e]=null}));return{c(){t=G("div"),n=G("nav"),r=G("h3"),o=Y(d),i=V();for(let e=0;e<p.length;e+=1)p[e].c();a=V(),s=G("nav"),X(n,"class","sidebar-right__nav"),X(t,"class","sidebar-right")},m(d,f){F(d,t,f),q(t,n),q(n,r),q(r,o),q(n,i);for(let e=0;e<p.length;e+=1)p[e].m(n,null);q(n,a),q(n,s),c=!0,l||(u=Z(n,"click",(function(){k(e[12])&&e[12].apply(this,arguments)})),l=!0)},p(t,r){if(e=t,(!c||1064960&r[0])&&d!==(d=e[14]("Participants (%1)",e[20].length)+"")&&te(o,d),1048576&r[0]){let t;for(f=e[20].toArray(),t=0;t<f.length;t+=1){const o=Bi(e,f,t);p[t]?(p[t].p(o,r),He(p[t],1)):(p[t]=Oa(o),p[t].c(),He(p[t],1),p[t].m(n,a))}for(Ue(),t=f.length;t<p.length;t+=1)m(t);Be()}},i(e){if(!c){for(let e=0;e<f.length;e+=1)He(p[e]);c=!0}},o(e){p=p.filter(Boolean);for(let e=0;e<p.length;e+=1)ze(p[e]);c=!1},d(e){e&&W(t),K(p,e),l=!1,u()}}}function Oa(e){let t,n,r,o,i,a,s,c,l=e[39].nick+"";return n=new at({props:{name:"pick:"+e[39].id,family:"solid",color:e[39].color}}),{c(){t=G("a"),Ye(n.$$.fragment),r=V(),o=G("span"),i=Y(l),X(t,"href",a="#action:join:"+e[39].id),X(t,"class",s="participant "+Rt(e[39].modes))},m(e,a){F(e,t,a),Ve(n,t,null),q(t,r),q(t,o),q(o,i),c=!0},p(e,r){const o={};1048576&r[0]&&(o.name="pick:"+e[39].id),1048576&r[0]&&(o.color=e[39].color),n.$set(o),(!c||1048576&r[0])&&l!==(l=e[39].nick+"")&&te(i,l),(!c||1048576&r[0]&&a!==(a="#action:join:"+e[39].id))&&X(t,"href",a),(!c||1048576&r[0]&&s!==(s="participant "+Rt(e[39].modes)))&&X(t,"class",s)},i(e){c||(He(n.$$.fragment,e),c=!0)},o(e){ze(n.$$.fragment,e),c=!1},d(e){e&&W(t),Je(n)}}}function Sa(e){let t,n,r,o,i,a,s,c,l,u,d,f,p=e[17].nColumns>2&&e[20].length&&!e[5].is("not_found");t=new fn({props:{$$slots:{default:[Fi]},$$scope:{ctx:e}}});let m="settings"==e[16]&&Wi(e);function h(t){e[30](t)}function g(t){e[31](t)}function $(t){e[32](t)}o=new Pi({props:{class:"main is-above-chat-input",$$slots:{default:[xa]},$$scope:{ctx:e}}}),o.$on("scrolled",(function(){k(e[10])&&e[10].apply(this,arguments)})),o.$on("visibility",(function(){k(e[11])&&e[11].apply(this,arguments)}));let v={conversation:e[1]};void 0!==e[4]&&(v.fillIn=e[4]),void 0!==e[3]&&(v.focus=e[3]),void 0!==e[9]&&(v.uploader=e[9]),a=new Nr({props:v}),_e.push((()=>Ge(a,"fillIn",h))),_e.push((()=>Ge(a,"focus",g))),_e.push((()=>Ge(a,"uploader",$)));let y=p&&Ea(e);return{c(){Ye(t.$$.fragment),n=V(),m&&m.c(),r=V(),Ye(o.$$.fragment),i=V(),Ye(a.$$.fragment),u=V(),y&&y.c(),d=J()},m(e,s){Ve(t,e,s),F(e,n,s),m&&m.m(e,s),F(e,r,s),Ve(o,e,s),F(e,i,s),Ve(a,e,s),F(e,u,s),y&&y.m(e,s),F(e,d,s),f=!0},p(n,i){e=n;const u={};114722&i[0]|262144&i[1]&&(u.$$scope={dirty:i,ctx:e}),t.$set(u),"settings"==e[16]?m?(m.p(e,i),65536&i[0]&&He(m,1)):(m=Wi(e),m.c(),He(m,1),m.m(r.parentNode,r)):m&&(Ue(),ze(m,1,1,(()=>{m=null})),Be());const f={};1896738&i[0]|262144&i[1]&&(f.$$scope={dirty:i,ctx:e}),o.$set(f);const h={};2&i[0]&&(h.conversation=e[1]),!s&&16&i[0]&&(s=!0,h.fillIn=e[4],Ae((()=>s=!1))),!c&&8&i[0]&&(c=!0,h.focus=e[3],Ae((()=>c=!1))),!l&&512&i[0]&&(l=!0,h.uploader=e[9],Ae((()=>l=!1))),a.$set(h),1179680&i[0]&&(p=e[17].nColumns>2&&e[20].length&&!e[5].is("not_found")),p?y?(y.p(e,i),1179680&i[0]&&He(y,1)):(y=Ea(e),y.c(),He(y,1),y.m(d.parentNode,d)):y&&(Ue(),ze(y,1,1,(()=>{y=null})),Be())},i(e){f||(He(t.$$.fragment,e),He(m),He(o.$$.fragment,e),He(a.$$.fragment,e),He(y),f=!0)},o(e){ze(t.$$.fragment,e),ze(m),ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(y),f=!1},d(e){Je(t,e),e&&W(n),m&&m.d(e),e&&W(r),Je(o,e),e&&W(i),Je(a,e),e&&W(u),y&&y.d(e),e&&W(d)}}}function Ca(e,t,n){let r,o,i,a,s,c,l,u,d,f,p,m,h,g,$=v,y=()=>($(),$=E(M,(e=>n(5,s=e))),M),b=v,w=()=>(b(),b=E(P,(e=>n(15,d=e))),P),_=v,k=()=>(_(),_=E(D,(e=>n(18,m=e))),D),x=v,O=()=>(x(),x=E(I,(e=>n(20,g=e))),I);S(e,Bn,(e=>n(29,c=e))),S(e,Jn,(e=>n(14,u=e))),S(e,an,(e=>n(16,f=e))),S(e,sn,(e=>n(17,p=e))),S(e,Zn,(e=>n(19,h=e))),e.$$.on_destroy.push((()=>$())),e.$$.on_destroy.push((()=>b())),e.$$.on_destroy.push((()=>_())),e.$$.on_destroy.push((()=>x()));let{connection_id:C=""}=t,{conversation_id:N=""}=t,{title:A="Chat"}=t;const R=new Ri;ye("socket");const T=ye("user");S(e,T,(e=>n(28,a=e)));const L=cn("chat:popoverTarget");S(e,L,(e=>n(13,l=e)));let P=T.notifications;w();let M=T.notifications;y();let D=M.messages;k();let I=M.participants;O();let U,B,H,z=new Zt,q="",F={};function W(e){var t;if(e.activeConversation!=M)return F.conversation&&F.conversation(),F.markAsRead&&F.markAsRead(),y(n(1,M=e.activeConversation)),k(n(2,D=M.messages)),O(n(7,I=M.participants)),w(n(6,P=e.findConversation({connection_id:M.connection_id})||M)),n(8,z=new Zt),F.conversation=M.subscribe((e=>{y(n(1,M=e))})),F.markAsRead=M.markAsRead.bind(M),e.updateNotificationCount([e.activeConversation]),n(27,(t=Bn.hash,q=!!String(t||"").match(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/)&&Bn.hash||"")),q?M.load({around:q}):M.historyStopAt?void 0:M.load({around:z.toISOString()})}return ge((()=>{L.set(""),R.attach(document.querySelector(".main"),H)})),$e((()=>{Object.keys(F).forEach((e=>F[e]())),R.detach()})),e.$$set=e=>{"connection_id"in e&&n(26,C=e.connection_id),"conversation_id"in e&&n(0,N=e.conversation_id),"title"in e&&n(25,A=e.title)},e.$$.update=()=>{67108865&e.$$.dirty[0]&&function(e,t){M.connection_id==e&&M.conversation_id==t||(T.setActiveConversation({connection_id:e,conversation_id:t}),L.set(""))}(C,N),268435456&e.$$.dirty[0]&&W(a),268435460&e.$$.dirty[0]&&D.update({expandUrlToMedia:a.expandUrlToMedia}),32&e.$$.dirty[0]&&s.frozen,32&e.$$.dirty[0]&&n(25,A=s.title),536870946&e.$$.dirty[0]&&(c.hash||s.historyStopAt||M.load({})),2&e.$$.dirty[0]&&n(10,r=ar("onInfinityScrolled",{conversation:M})),134217730&e.$$.dirty[0]&&n(11,o=ar("onInfinityVisibility",{conversation:M,onLoadHash:q})),26&e.$$.dirty[0]&&n(12,i=ar("onMessageClick",{conversation:M,fillIn:B,focusChatInput:U,popoverTarget:L,user:T}))},[N,M,D,U,B,s,P,I,z,H,r,o,i,l,u,d,f,p,m,h,g,T,L,function(){const[e,t]=s.connection_id.split("-");return e+"://"+t+"/"+encodeURIComponent(s.conversation_id)+"?tls=1"},function(e){const{relatedTarget:t,target:n,type:r}=e;setTimeout((()=>{"mouseout"==r?t&&t.closest(".popover")||j(L,l=null,l):l||n.click()}),250)},A,C,q,a,c,function(e){B=e,n(4,B)},function(e){U=e,n(3,U)},function(e){H=e,n(9,H)}]}class Na extends Xe{constructor(e){super(),Qe(this,e,Ca,Sa,x,{connection_id:26,conversation_id:0,title:25},[-1,-1])}}function Aa(e){let t,n=e[3]("Loading...")+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){8&r&&n!==(n=e[3]("Loading...")+"")&&te(t,n)},d(e){e&&W(t)}}}function ja(e){let t,n,r=e[3](e[2].error())+"";return{c(){t=G("div"),n=Y(r),X(t,"class","error")},m(e,r){F(e,t,r),q(t,n)},p(e,t){12&t&&r!==(r=e[3](e[2].error())+"")&&te(n,r)},d(e){e&&W(t)}}}function Ra(e){let t,n,r,o;function i(e,t){return(null==r||4&t)&&(r=!!e[2].is("error")),r?ja:((null==o||4&t)&&(o=!!e[2].is("loading")),o?Aa:void 0)}let a=i(e,-1),s=a&&a(e);return{c(){t=G("tr"),n=G("td"),s&&s.c(),X(n,"colspan",e[0])},m(e,r){F(e,t,r),q(t,n),s&&s.m(n,null)},p(e,[t]){a===(a=i(e,t))&&s?s.p(e,t):(s&&s.d(1),s=a&&a(e),s&&(s.c(),s.m(n,null))),1&t&&X(n,"colspan",e[0])},i:v,o:v,d(e){e&&W(t),s&&s.d()}}}function Ta(e,t,n){let r,o,i=v,a=()=>(i(),i=E(c,(e=>n(2,r=e))),c);S(e,Jn,(e=>n(3,o=e))),e.$$.on_destroy.push((()=>i()));let{colspan:s=1}=t,{op:c}=t;return a(),e.$$set=e=>{"colspan"in e&&n(0,s=e.colspan),"op"in e&&a(n(1,c=e.op))},[s,c,r,o]}class La extends Xe{constructor(e){super(),Qe(this,e,Ta,Ra,x,{colspan:0,op:1})}}function Pa(e,t,n){const r=e.slice();return r[9]=t[n],r}function Ma(e,t,n){const r=e.slice();return r[12]=t[n],r}function Da(e){let t,n,r=e[2]("Connections")+"";return{c(){t=G("h1"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Connections")+"")&&te(n,r)},d(e){e&&W(t)}}}function Ia(e){let t,n=e[12].host.replace(/:\d+$/,"")+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){1&r&&n!==(n=e[12].host.replace(/:\d+$/,"")+"")&&te(t,n)},d(e){e&&W(t)}}}function Ua(e){let t,n,r,o,i,a,s,c,l,u,d,f=(At.true(e[12].tls_verify)?e[2]("Strict"):At.true(e[12].tls)?e[2]("Yes"):e[2]("No"))+"",p=e[12].nick+"";return r=new ei({props:{href:"/settings/connection/"+e[12].connection_id,$$slots:{default:[Ia]},$$scope:{ctx:e}}}),{c(){t=G("tr"),n=G("td"),Ye(r.$$.fragment),o=V(),i=G("td"),a=Y(f),s=V(),c=G("td"),l=Y(p),u=V()},m(e,f){F(e,t,f),q(t,n),Ve(r,n,null),q(t,o),q(t,i),q(i,a),q(t,s),q(t,c),q(c,l),q(t,u),d=!0},p(e,t){const n={};1&t&&(n.href="/settings/connection/"+e[12].connection_id),32769&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n),(!d||5&t)&&f!==(f=(At.true(e[12].tls_verify)?e[2]("Strict"):At.true(e[12].tls)?e[2]("Yes"):e[2]("No"))+"")&&te(a,f),(!d||1&t)&&p!==(p=e[12].nick+"")&&te(l,p)},i(e){d||(He(r.$$.fragment,e),d=!0)},o(e){ze(r.$$.fragment,e),d=!1},d(e){e&&W(t),Je(r)}}}function Ba(e){let t,n,r;return n=new ei({props:{href:"/settings/connection/add",class:"btn",$$slots:{default:[Ha]},$$scope:{ctx:e}}}),{c(){t=G("div"),Ye(n.$$.fragment),X(t,"class","form-actions")},m(e,o){F(e,t,o),Ve(n,t,null),r=!0},p(e,t){const r={};32772&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(He(n.$$.fragment,e),r=!0)},o(e){ze(n.$$.fragment,e),r=!1},d(e){e&&W(t),Je(n)}}}function Ha(e){let t,n,r,o,i,a=e[2]("Add")+"";return t=new at({props:{name:"plus-circle"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||4&t)&&a!==(a=e[2]("Add")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function za(e){let t,n=e[9].url.host.replace(/:\d+$/,"")+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){8&r&&n!==(n=e[9].url.host.replace(/:\d+$/,"")+"")&&te(t,n)},d(e){e&&W(t)}}}function qa(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h=(At.true(e[9].tls_verify)?e[2]("Strict"):At.true(e[9].tls)?e[2]("Yes"):e[2]("No"))+"",g=(e[9].is_default?e[2]("Yes"):e[2]("No"))+"",$=(e[9].is_forced?e[2]("Yes"):e[2]("No"))+"";return r=new ei({props:{href:"/settings/connection-profile/"+e[9].id,$$slots:{default:[za]},$$scope:{ctx:e}}}),{c(){t=G("tr"),n=G("td"),Ye(r.$$.fragment),o=V(),i=G("td"),a=Y(h),s=V(),c=G("td"),l=Y(g),u=V(),d=G("td"),f=Y($),p=V()},m(e,h){F(e,t,h),q(t,n),Ve(r,n,null),q(t,o),q(t,i),q(i,a),q(t,s),q(t,c),q(c,l),q(t,u),q(t,d),q(d,f),q(t,p),m=!0},p(e,t){const n={};8&t&&(n.href="/settings/connection-profile/"+e[9].id),32776&t&&(n.$$scope={dirty:t,ctx:e}),r.$set(n),(!m||12&t)&&h!==(h=(At.true(e[9].tls_verify)?e[2]("Strict"):At.true(e[9].tls)?e[2]("Yes"):e[2]("No"))+"")&&te(a,h),(!m||12&t)&&g!==(g=(e[9].is_default?e[2]("Yes"):e[2]("No"))+"")&&te(l,g),(!m||12&t)&&$!==($=(e[9].is_forced?e[2]("Yes"):e[2]("No"))+"")&&te(f,$)},i(e){m||(He(r.$$.fragment,e),m=!0)},o(e){ze(r.$$.fragment,e),m=!1},d(e){e&&W(t),Je(r)}}}function Fa(e){let t,n,r;return n=new ei({props:{href:"/settings/connection-profile/add",class:"btn",$$slots:{default:[Wa]},$$scope:{ctx:e}}}),{c(){t=G("div"),Ye(n.$$.fragment),X(t,"class","form-actions")},m(e,o){F(e,t,o),Ve(n,t,null),r=!0},p(e,t){const r={};32772&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r)},i(e){r||(He(n.$$.fragment,e),r=!0)},o(e){ze(n.$$.fragment,e),r=!1},d(e){e&&W(t),Je(n)}}}function Wa(e){let t,n,r,o,i,a=e[2]("Add")+"";return t=new at({props:{name:"plus-circle"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||4&t)&&a!==(a=e[2]("Add")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function Ka(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,_,k,x,E,O,S,C,N,A,j,R,T,L,P,M,D,I,U,B,H,z,J,Z,Q,ee,ne,re=e[2]("Connections")+"",oe=e[2]("Host")+"",ie=e[2]("Secure")+"",ae=e[2]("Nick")+"",se=e[2]("Connection profiles")+"",ce=e[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"",le=e[2]("Host")+"",ue=e[2]("Secure")+"",de=e[2]("Default")+"",fe=e[2]("Forced")+"";t=new fn({props:{$$slots:{default:[Da]},$$scope:{ctx:e}}});let pe=e[0],me=[];for(let t=0;t<pe.length;t+=1)me[t]=Ua(Ma(e,pe,t));const he=e=>ze(me[e],1,1,(()=>{me[e]=null}));let ge=(e[1]||!e[4].forced_connection)&&Ba(e);Z=new La({props:{op:e[5].op}});let $e=e[3].search(),ve=[];for(let t=0;t<$e.length;t+=1)ve[t]=qa(Pa(e,$e,t));const ye=e=>ze(ve[e],1,1,(()=>{ve[e]=null}));let be=e[1]&&Fa(e);return{c(){Ye(t.$$.fragment),n=V(),r=G("main"),o=G("h2"),i=Y(re),a=V(),s=G("table"),c=G("thead"),l=G("tr"),u=G("th"),d=Y(oe),f=V(),p=G("th"),m=Y(ie),h=V(),g=G("th"),$=Y(ae),v=V(),y=G("tbody");for(let e=0;e<me.length;e+=1)me[e].c();b=V(),ge&&ge.c(),w=V(),_=G("h2"),k=Y(se),x=V(),E=G("p"),O=Y(ce),S=V(),C=G("table"),N=G("thead"),A=G("tr"),j=G("th"),R=Y(le),T=V(),L=G("th"),P=Y(ue),M=V(),D=G("th"),I=Y(de),U=V(),B=G("th"),H=Y(fe),z=V(),J=G("tbody"),Ye(Z.$$.fragment),Q=V();for(let e=0;e<ve.length;e+=1)ve[e].c();ee=V(),be&&be.c(),X(r,"class","main")},m(e,W){Ve(t,e,W),F(e,n,W),F(e,r,W),q(r,o),q(o,i),q(r,a),q(r,s),q(s,c),q(c,l),q(l,u),q(u,d),q(l,f),q(l,p),q(p,m),q(l,h),q(l,g),q(g,$),q(s,v),q(s,y);for(let e=0;e<me.length;e+=1)me[e].m(y,null);q(r,b),ge&&ge.m(r,null),q(r,w),q(r,_),q(_,k),q(r,x),q(r,E),q(E,O),q(r,S),q(r,C),q(C,N),q(N,A),q(A,j),q(j,R),q(A,T),q(A,L),q(L,P),q(A,M),q(A,D),q(D,I),q(A,U),q(A,B),q(B,H),q(C,z),q(C,J),Ve(Z,J,null),q(J,Q);for(let e=0;e<ve.length;e+=1)ve[e].m(J,null);q(r,ee),be&&be.m(r,null),ne=!0},p(e,[n]){const o={};if(32772&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),(!ne||4&n)&&re!==(re=e[2]("Connections")+"")&&te(i,re),(!ne||4&n)&&oe!==(oe=e[2]("Host")+"")&&te(d,oe),(!ne||4&n)&&ie!==(ie=e[2]("Secure")+"")&&te(m,ie),(!ne||4&n)&&ae!==(ae=e[2]("Nick")+"")&&te($,ae),5&n){let t;for(pe=e[0],t=0;t<pe.length;t+=1){const r=Ma(e,pe,t);me[t]?(me[t].p(r,n),He(me[t],1)):(me[t]=Ua(r),me[t].c(),He(me[t],1),me[t].m(y,null))}for(Ue(),t=pe.length;t<me.length;t+=1)he(t);Be()}if(e[1]||!e[4].forced_connection?ge?(ge.p(e,n),2&n&&He(ge,1)):(ge=Ba(e),ge.c(),He(ge,1),ge.m(r,w)):ge&&(Ue(),ze(ge,1,1,(()=>{ge=null})),Be()),(!ne||4&n)&&se!==(se=e[2]("Connection profiles")+"")&&te(k,se),(!ne||4&n)&&ce!==(ce=e[2]("Connection profiles are used to set up global values for every connection that connect to the same host.")+"")&&te(O,ce),(!ne||4&n)&&le!==(le=e[2]("Host")+"")&&te(R,le),(!ne||4&n)&&ue!==(ue=e[2]("Secure")+"")&&te(P,ue),(!ne||4&n)&&de!==(de=e[2]("Default")+"")&&te(I,de),(!ne||4&n)&&fe!==(fe=e[2]("Forced")+"")&&te(H,fe),12&n){let t;for($e=e[3].search(),t=0;t<$e.length;t+=1){const r=Pa(e,$e,t);ve[t]?(ve[t].p(r,n),He(ve[t],1)):(ve[t]=qa(r),ve[t].c(),He(ve[t],1),ve[t].m(J,null))}for(Ue(),t=$e.length;t<ve.length;t+=1)ye(t);Be()}e[1]?be?(be.p(e,n),2&n&&He(be,1)):(be=Fa(e),be.c(),He(be,1),be.m(r,null)):be&&(Ue(),ze(be,1,1,(()=>{be=null})),Be())},i(e){if(!ne){He(t.$$.fragment,e);for(let e=0;e<pe.length;e+=1)He(me[e]);He(ge),He(Z.$$.fragment,e);for(let e=0;e<$e.length;e+=1)He(ve[e]);He(be),ne=!0}},o(e){ze(t.$$.fragment,e),me=me.filter(Boolean);for(let e=0;e<me.length;e+=1)ze(me[e]);ze(ge),ze(Z.$$.fragment,e),ve=ve.filter(Boolean);for(let e=0;e<ve.length;e+=1)ze(ve[e]);ze(be),ne=!1},d(e){Je(t,e),e&&W(n),e&&W(r),K(me,e),ge&&ge.d(),Je(Z),K(ve,e),be&&be.d()}}}function Ga(e,t,n){let r,o,i,a;S(e,Jn,(e=>n(2,i=e)));const s=ye("user");S(e,s,(e=>n(7,o=e)));const c=s.connectionProfiles;S(e,c,(e=>n(3,a=e)));const l=e=>e.url.toFields({connection_id:e.connection_id});let u=[];return ge((()=>c.load())),e.$$.update=()=>{129&e.$$.dirty&&o.is("success")&&!u.length&&n(0,u=s.connections.toArray().map(l))},n(1,r=s.roles.has("admin")),[u,r,i,a,s,c,"Connections",o]}class Ya extends Xe{constructor(e){super(),Qe(this,e,Ga,Ka,x,{title:6})}get title(){return this.$$.ctx[6]}}function Va(e){let t,n,r;return t=new at({props:{name:"list"}}),n=new at({props:{name:"times"}}),{c(){Ye(t.$$.fragment),Ye(n.$$.fragment)},m(e,o){Ve(t,e,o),Ve(n,e,o),r=!0},p:v,i(e){r||(He(t.$$.fragment,e),He(n.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),ze(n.$$.fragment,e),r=!1},d(e){Je(t,e),Je(n,e)}}}function Ja(e){let t,n,r,o,i,a=("add"==e[0]?e[2]("Add connection profile"):e[2]("Edit connection profile"))+"";return o=new ei({props:{href:"/settings/connections",class:"btn-hallow is-active","data-tooltip":e[2]("See all connection profiles"),$$slots:{default:[Va]},$$scope:{ctx:e}}}),{c(){t=G("h1"),n=Y(a),r=V(),Ye(o.$$.fragment)},m(e,a){F(e,t,a),q(t,n),F(e,r,a),Ve(o,e,a),i=!0},p(e,t){(!i||5&t)&&a!==(a=("add"==e[0]?e[2]("Add connection profile"):e[2]("Edit connection profile"))+"")&&te(n,a);const r={};4&t&&(r["data-tooltip"]=e[2]("See all connection profiles")),16384&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r)},i(e){i||(He(o.$$.fragment,e),i=!0)},o(e){ze(o.$$.fragment,e),i=!1},d(e){e&&W(t),e&&W(r),Je(o,e)}}}function Za(e){let t,n,r=e[2]("Host and port")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Host and port")+"")&&te(n,r)},d(e){e&&W(t)}}}function Qa(e){let t,n,r=e[2]("Will match connections on hostname.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Will match connections on hostname.")+"")&&te(n,r)},d(e){e&&W(t)}}}function Xa(e){let t,n,r=e[2]("Secure connection (TLS)")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Secure connection (TLS)")+"")&&te(n,r)},d(e){e&&W(t)}}}function es(e){let t,n,r=e[2]("Verify certificate (TLS)")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Verify certificate (TLS)")+"")&&te(n,r)},d(e){e&&W(t)}}}function ts(e){let t,n,r=e[2]("Conversation name")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Conversation name")+"")&&te(n,r)},d(e){e&&W(t)}}}function ns(e){let t,n,r=e[2]("Service accounts")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Service accounts")+"")&&te(n,r)},d(e){e&&W(t)}}}function rs(e){let t,n,r=e[2]("Messages from these nicks will be shown in the connection conversation.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Messages from these nicks will be shown in the connection conversation.")+"")&&te(n,r)},d(e){e&&W(t)}}}function os(e){let t,n,r=e[2]("Default connection")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Default connection")+"")&&te(n,r)},d(e){e&&W(t)}}}function is(e){let t,n,r=e[2]("Force default connection")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Force default connection")+"")&&te(n,r)},d(e){e&&W(t)}}}function as(e){let t,n,r,o=e[2]("Tick this box if you want to prevent users from creating custom connections.")+"";return{c(){t=G("p"),n=Y(o),X(t,"class","help"),t.hidden=r=!e[3].is_default},m(e,r){F(e,t,r),q(t,n)},p(e,i){4&i&&o!==(o=e[2]("Tick this box if you want to prevent users from creating custom connections.")+"")&&te(n,o),8&i&&r!==(r=!e[3].is_default)&&(t.hidden=r)},d(e){e&&W(t)}}}function ss(e){let t,n,r=e[2]("Advanced settings")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Advanced settings")+"")&&te(n,r)},d(e){e&&W(t)}}}function cs(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m=e[2]("This might result in flood ban.")+"";return n=new ao({props:{name:"max_bulk_message_size",form:e[5],type:"number",readonly:!e[1],$$slots:{help:[us],label:[ls]},$$scope:{ctx:e}}}),o=new ao({props:{name:"max_message_length",form:e[5],type:"number",readonly:!e[1],$$slots:{help:[fs],label:[ds]},$$scope:{ctx:e}}}),a=new ao({props:{name:"webirc_password",form:e[5],type:"password",readonly:!e[1],$$slots:{label:[ps]},$$scope:{ctx:e}}}),c=new Lr({props:{name:"skip_queue",form:e[5],disabled:!e[1],$$slots:{label:[ms]},$$scope:{ctx:e}}}),{c(){t=G("div"),Ye(n.$$.fragment),r=V(),Ye(o.$$.fragment),i=V(),Ye(a.$$.fragment),s=V(),Ye(c.$$.fragment),l=V(),u=G("p"),d=Y(m),X(u,"class","help"),X(t,"class","form-group")},m(e,f){F(e,t,f),Ve(n,t,null),q(t,r),Ve(o,t,null),q(t,i),Ve(a,t,null),q(t,s),Ve(c,t,null),q(t,l),q(t,u),q(u,d),p=!0},p(e,t){const r={};2&t&&(r.readonly=!e[1]),16388&t&&(r.$$scope={dirty:t,ctx:e}),n.$set(r);const i={};2&t&&(i.readonly=!e[1]),16388&t&&(i.$$scope={dirty:t,ctx:e}),o.$set(i);const s={};2&t&&(s.readonly=!e[1]),16388&t&&(s.$$scope={dirty:t,ctx:e}),a.$set(s);const l={};2&t&&(l.disabled=!e[1]),16388&t&&(l.$$scope={dirty:t,ctx:e}),c.$set(l),(!p||4&t)&&m!==(m=e[2]("This might result in flood ban.")+"")&&te(d,m)},i(e){p||(He(n.$$.fragment,e),He(o.$$.fragment,e),He(a.$$.fragment,e),He(c.$$.fragment,e),Ne((()=>{f||(f=Fe(t,yr,{duration:150},!0)),f.run(1)})),p=!0)},o(e){ze(n.$$.fragment,e),ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(c.$$.fragment,e),f||(f=Fe(t,yr,{duration:150},!1)),f.run(0),p=!1},d(e){e&&W(t),Je(n),Je(o),Je(a),Je(c),e&&f&&f.end()}}}function ls(e){let t,n,r=e[2]("Max number of pasted lines")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Max number of pasted lines")+"")&&te(n,r)},d(e){e&&W(t)}}}function us(e){let t,n,r=e[2]("Setting this value too high might get you banned from the server.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Setting this value too high might get you banned from the server.")+"")&&te(n,r)},d(e){e&&W(t)}}}function ds(e){let t,n,r=e[2]("Max message length")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Max message length")+"")&&te(n,r)},d(e){e&&W(t)}}}function fs(e){let t,n,r=e[2]("Messages longer than this will be split into multiple messages.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Messages longer than this will be split into multiple messages.")+"")&&te(n,r)},d(e){e&&W(t)}}}function ps(e){let t,n,r=e[2]("WEBIRC password")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("WEBIRC password")+"")&&te(n,r)},d(e){e&&W(t)}}}function ms(e){let t,n,r=e[2]("Skip connection queue")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Skip connection queue")+"")&&te(n,r)},d(e){e&&W(t)}}}function hs(e){let t,n,r=e[2]("Only administrators can edit this section.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","error")},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Only administrators can edit this section.")+"")&&te(n,r)},d(e){e&&W(t)}}}function gs(e){let t,n;return t=new en({props:{icon:"plus-circle",op:e[7],$$slots:{default:[vs]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};16388&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function $s(e){let t,n,r,o;return t=new en({props:{icon:"save",op:e[7],disabled:!e[1],$$slots:{default:[ys]},$$scope:{ctx:e}}}),r=new en({props:{icon:"trash",type:"button",op:e[6],disabled:!e[1],$$slots:{default:[bs]},$$scope:{ctx:e}}}),r.$on("click",e[8]),{c(){Ye(t.$$.fragment),n=V(),Ye(r.$$.fragment)},m(e,i){Ve(t,e,i),F(e,n,i),Ve(r,e,i),o=!0},p(e,n){const o={};2&n&&(o.disabled=!e[1]),16388&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};2&n&&(i.disabled=!e[1]),16388&n&&(i.$$scope={dirty:n,ctx:e}),r.$set(i)},i(e){o||(He(t.$$.fragment,e),He(r.$$.fragment,e),o=!0)},o(e){ze(t.$$.fragment,e),ze(r.$$.fragment,e),o=!1},d(e){Je(t,e),e&&W(n),Je(r,e)}}}function vs(e){let t,n,r=e[2]("Add")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Add")+"")&&te(n,r)},d(e){e&&W(t)}}}function ys(e){let t,n,r=e[2]("Update")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Update")+"")&&te(n,r)},d(e){e&&W(t)}}}function bs(e){let t,n,r=e[2]("Delete")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){4&t&&r!==(r=e[2]("Delete")+"")&&te(n,r)},d(e){e&&W(t)}}}function ws(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,_,k,x,E,O,S,C,N,A,j,R,T;t=new fn({props:{$$slots:{default:[Ja]},$$scope:{ctx:e}}}),i=new ao({props:{name:"host",form:e[5],placeholder:e[2]("Ex: irc.libera.chat:6697"),readonly:!e[1],$$slots:{help:[Qa],label:[Za]},$$scope:{ctx:e}}}),s=new Lr({props:{name:"tls",form:e[5],disabled:!e[1],$$slots:{label:[Xa]},$$scope:{ctx:e}}}),l=new Lr({props:{name:"tls_verify",form:e[5],disabled:!e[3].tls||!e[1],hidden:!e[3].tls,$$slots:{label:[es]},$$scope:{ctx:e}}}),d=new ao({props:{name:"conversation_id",form:e[5],placeholder:e[2]("Ex: #convos"),readonly:!e[1],$$slots:{label:[ts]},$$scope:{ctx:e}}}),p=new ao({props:{name:"service_accounts",form:e[5],placeholder:e[2]("chanserv, nickserv, ..."),readonly:!e[1],$$slots:{help:[rs],label:[ns]},$$scope:{ctx:e}}}),h=new Lr({props:{name:"is_default",form:e[5],disabled:!e[1],$$slots:{label:[os]},$$scope:{ctx:e}}}),$=new Lr({props:{name:"is_forced",form:e[5],disabled:!e[1],hidden:!e[3].is_default,$$slots:{label:[is]},$$scope:{ctx:e}}});let L=e[1]&&as(e);b=new Lr({props:{icon:"caret",name:"show_advanced_settings",form:e[5],$$slots:{label:[ss]},$$scope:{ctx:e}}});let P=e[3].show_advanced_settings&&cs(e),M=!e[1]&&hs(e);const D=[$s,gs],I=[];function U(e,t){return"add"!=e[0]?0:1}return E=U(e),O=I[E]=D[E](e),C=new Br({props:{op:e[6],success:"Deleted."}}),A=new Br({props:{op:e[7]}}),{c(){Ye(t.$$.fragment),n=V(),r=G("main"),o=G("form"),Ye(i.$$.fragment),a=V(),Ye(s.$$.fragment),c=V(),Ye(l.$$.fragment),u=V(),Ye(d.$$.fragment),f=V(),Ye(p.$$.fragment),m=V(),Ye(h.$$.fragment),g=V(),Ye($.$$.fragment),v=V(),L&&L.c(),y=V(),Ye(b.$$.fragment),w=V(),P&&P.c(),_=V(),M&&M.c(),k=V(),x=G("div"),O.c(),S=V(),Ye(C.$$.fragment),N=V(),Ye(A.$$.fragment),X(x,"class","form-actions"),X(o,"method","post"),X(r,"class","main")},m(O,D){Ve(t,O,D),F(O,n,D),F(O,r,D),q(r,o),Ve(i,o,null),q(o,a),Ve(s,o,null),q(o,c),Ve(l,o,null),q(o,u),Ve(d,o,null),q(o,f),Ve(p,o,null),q(o,m),Ve(h,o,null),q(o,g),Ve($,o,null),q(o,v),L&&L.m(o,null),q(o,y),Ve(b,o,null),q(o,w),P&&P.m(o,null),q(o,_),M&&M.m(o,null),q(o,k),q(o,x),I[E].m(x,null),q(o,S),Ve(C,o,null),q(o,N),Ve(A,o,null),j=!0,R||(T=Z(o,"submit",Q(e[9])),R=!0)},p(e,[n]){const r={};16389&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const a={};4&n&&(a.placeholder=e[2]("Ex: irc.libera.chat:6697")),2&n&&(a.readonly=!e[1]),16388&n&&(a.$$scope={dirty:n,ctx:e}),i.$set(a);const c={};2&n&&(c.disabled=!e[1]),16388&n&&(c.$$scope={dirty:n,ctx:e}),s.$set(c);const u={};10&n&&(u.disabled=!e[3].tls||!e[1]),8&n&&(u.hidden=!e[3].tls),16388&n&&(u.$$scope={dirty:n,ctx:e}),l.$set(u);const f={};4&n&&(f.placeholder=e[2]("Ex: #convos")),2&n&&(f.readonly=!e[1]),16388&n&&(f.$$scope={dirty:n,ctx:e}),d.$set(f);const m={};4&n&&(m.placeholder=e[2]("chanserv, nickserv, ...")),2&n&&(m.readonly=!e[1]),16388&n&&(m.$$scope={dirty:n,ctx:e}),p.$set(m);const g={};2&n&&(g.disabled=!e[1]),16388&n&&(g.$$scope={dirty:n,ctx:e}),h.$set(g);const v={};2&n&&(v.disabled=!e[1]),8&n&&(v.hidden=!e[3].is_default),16388&n&&(v.$$scope={dirty:n,ctx:e}),$.$set(v),e[1]?L?L.p(e,n):(L=as(e),L.c(),L.m(o,y)):L&&(L.d(1),L=null);const w={};16388&n&&(w.$$scope={dirty:n,ctx:e}),b.$set(w),e[3].show_advanced_settings?P?(P.p(e,n),8&n&&He(P,1)):(P=cs(e),P.c(),He(P,1),P.m(o,_)):P&&(Ue(),ze(P,1,1,(()=>{P=null})),Be()),e[1]?M&&(M.d(1),M=null):M?M.p(e,n):(M=hs(e),M.c(),M.m(o,k));let S=E;E=U(e),E===S?I[E].p(e,n):(Ue(),ze(I[S],1,1,(()=>{I[S]=null})),Be(),O=I[E],O?O.p(e,n):(O=I[E]=D[E](e),O.c()),He(O,1),O.m(x,null))},i(e){j||(He(t.$$.fragment,e),He(i.$$.fragment,e),He(s.$$.fragment,e),He(l.$$.fragment,e),He(d.$$.fragment,e),He(p.$$.fragment,e),He(h.$$.fragment,e),He($.$$.fragment,e),He(b.$$.fragment,e),He(P),He(O),He(C.$$.fragment,e),He(A.$$.fragment,e),j=!0)},o(e){ze(t.$$.fragment,e),ze(i.$$.fragment,e),ze(s.$$.fragment,e),ze(l.$$.fragment,e),ze(d.$$.fragment,e),ze(p.$$.fragment,e),ze(h.$$.fragment,e),ze($.$$.fragment,e),ze(b.$$.fragment,e),ze(P),ze(O),ze(C.$$.fragment,e),ze(A.$$.fragment,e),j=!1},d(e){Je(t,e),e&&W(n),e&&W(r),Je(i),Je(s),Je(l),Je(d),Je(p),Je(h),Je($),L&&L.d(),Je(b),P&&P.d(),M&&M.d(),I[E].d(),Je(C),Je(A),R=!1,T()}}}function _s(e,t,n){let r,o,i,a;S(e,Jn,(e=>n(2,i=e)));let{profile_id:s="add"}=t;const c="add"==s?"Add connection profile":"Edit connection profile",l=ye("api"),u=ye("user"),d=u.connectionProfiles;S(e,d,(e=>n(11,o=e)));const f=mo();S(e,f,(e=>n(3,a=e)));const p=l("removeConnectionProfile"),m=l("saveConnectionProfile");return ge((()=>d.load())),e.$$set=e=>{"profile_id"in e&&n(0,s=e.profile_id)},e.$$.update=()=>{2049&e.$$.dirty&&f.set(o.find(s)||o.defaultProfile())},n(1,r=u.roles.has("admin")),[s,r,i,a,d,f,p,m,async function(){await p.perform({id:s}),await d.load({force:!0}),await Ce(),Bn.go("/settings/connections")},async function(){const e=f.get();["is_default","is_forced","skip_queue"].forEach((t=>e[t]=!!e[t])),e.service_accounts=Dt(e.service_accounts),e.url=new Pr("irc://localhost").fromFields(e).toString(),await m.perform(e),m.is("error")||(e.is_default&&u.update({default_connection:e.url,forced_connection:e.is_forced}),await d.load({force:!0}),await Ce(),Bn.go("/settings/connections"))},c,o]}class ks extends Xe{constructor(e){super(),Qe(this,e,_s,ws,x,{profile_id:0,title:10})}get title(){return this.$$.ctx[10]}}function xs(e){let t,n,r;return t=new at({props:{name:"list"}}),n=new at({props:{name:"times"}}),{c(){Ye(t.$$.fragment),Ye(n.$$.fragment)},m(e,o){Ve(t,e,o),Ve(n,e,o),r=!0},p:v,i(e){r||(He(t.$$.fragment,e),He(n.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),ze(n.$$.fragment,e),r=!1},d(e){Je(t,e),Je(n,e)}}}function Es(e){let t,n,r,o,i,a=("add"==e[0]?e[1]("Add connection"):e[1]("Edit connection"))+"";return o=new ei({props:{href:"/settings/connections",class:"btn-hallow is-active","data-tooltip":e[1]("See all connections"),$$slots:{default:[xs]},$$scope:{ctx:e}}}),{c(){t=G("h1"),n=Y(a),r=V(),Ye(o.$$.fragment)},m(e,a){F(e,t,a),q(t,n),F(e,r,a),Ve(o,e,a),i=!0},p(e,t){(!i||3&t)&&a!==(a=("add"==e[0]?e[1]("Add connection"):e[1]("Edit connection"))+"")&&te(n,a);const r={};2&t&&(r["data-tooltip"]=e[1]("See all connections")),8&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r)},i(e){i||(He(o.$$.fragment,e),i=!0)},o(e){ze(o.$$.fragment,e),i=!1},d(e){e&&W(t),e&&W(r),Je(o,e)}}}function Os(e){let t,n,r,o,i;return t=new fn({props:{$$slots:{default:[Es]},$$scope:{ctx:e}}}),o=new Fo({props:{id:e[0],is_page:!0}}),{c(){Ye(t.$$.fragment),n=V(),r=G("main"),Ye(o.$$.fragment),X(r,"class","main")},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),Ve(o,r,null),i=!0},p(e,[n]){const r={};11&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const i={};1&n&&(i.id=e[0]),o.$set(i)},i(e){i||(He(t.$$.fragment,e),He(o.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),ze(o.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r),Je(o)}}}function Ss(e,t,n){let r;S(e,Jn,(e=>n(1,r=e)));let{connection_id:o="add"}=t;const i="add"==o?"Add connection":"Edit connection";return e.$$set=e=>{"connection_id"in e&&n(0,o=e.connection_id)},[o,r,i]}class Cs extends Xe{constructor(e){super(),Qe(this,e,Ss,Os,x,{connection_id:0,title:2})}get title(){return this.$$.ctx[2]}}function Ns(e,t,n){const r=e.slice();return r[14]=t[n],r}function As(e){let t,n,r=e[3]("Add conversation")+"";return{c(){t=G("h1"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Add conversation")+"")&&te(n,r)},d(e){e&&W(t)}}}function js(e){let t,n,r=e[3]("Connection")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Connection")+"")&&te(n,r)},d(e){e&&W(t)}}}function Rs(e){let t,n,r=e[3](e[1].conversations.length?"Refresh":"Load")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){10&t&&r!==(r=e[3](e[1].conversations.length?"Refresh":"Load")+"")&&te(n,r)},d(e){e&&W(t)}}}function Ts(e){let t,n,r=e[3]("Conversation name")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Conversation name")+"")&&te(n,r)},d(e){e&&W(t)}}}function Ls(e){let t,n,r=e[3]("Add")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Add")+"")&&te(n,r)},d(e){e&&W(t)}}}function Ps(e){let t,n,r,o,i=e[0].connection_id+"",a=e[1].error+"";return{c(){t=G("p"),n=Y(i),r=Y(": "),o=Y(a),X(t,"class","error")},m(e,i){F(e,t,i),q(t,n),q(t,r),q(t,o)},p(e,t){1&t&&i!==(i=e[0].connection_id+"")&&te(n,i),2&t&&a!==(a=e[1].error+"")&&te(o,a)},d(e){e&&W(t)}}}function Ms(e){let t,n,r;function o(e,t){return e[1].done?Is:Ds}let i=o(e),a=i(e),s=e[1].conversations,c=[];for(let t=0;t<s.length;t+=1)c[t]=Us(Ns(e,s,t));return{c(){t=G("p"),a.c(),n=V(),r=G("div");for(let e=0;e<c.length;e+=1)c[e].c();X(r,"class","conversation-add-list")},m(e,o){F(e,t,o),a.m(t,null),F(e,n,o),F(e,r,o);for(let e=0;e<c.length;e+=1)c[e].m(r,null)},p(e,n){if(i===(i=o(e))&&a?a.p(e,n):(a.d(1),a=i(e),a&&(a.c(),a.m(t,null))),66&n){let t;for(s=e[1].conversations,t=0;t<s.length;t+=1){const o=Ns(e,s,t);c[t]?c[t].p(o,n):(c[t]=Us(o),c[t].c(),c[t].m(r,null))}for(;t<c.length;t+=1)c[t].d(1);c.length=s.length}},d(e){e&&W(t),a.d(),e&&W(n),e&&W(r),K(c,e)}}}function Ds(e){let t,n=e[3]("Showing %1 of %2 conversations, but the list is still loading.",e[1].conversations.length,e[1].n_conversations)+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){10&r&&n!==(n=e[3]("Showing %1 of %2 conversations, but the list is still loading.",e[1].conversations.length,e[1].n_conversations)+"")&&te(t,n)},d(e){e&&W(t)}}}function Is(e){let t,n=e[3]("Showing %1 of %2 conversations.",e[1].conversations.length,e[1].n_conversations)+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){10&r&&n!==(n=e[3]("Showing %1 of %2 conversations.",e[1].conversations.length,e[1].n_conversations)+"")&&te(t,n)},d(e){e&&W(t)}}}function Us(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m=e[14].n_users+"",h=e[14].name+"",g=(e[14].topic||"No topic.")+"";return{c(){t=G("a"),n=G("span"),r=Y(m),o=V(),i=G("b"),a=Y(h),s=V(),c=G("i"),l=Y(g),u=V(),X(n,"class","conversation-add-list__n-users"),X(i,"class","conversation-add-list__name"),X(c,"class","conversation-add-list__title"),X(t,"href",d="#add:"+e[14].name)},m(d,m){F(d,t,m),q(t,n),q(n,r),q(t,o),q(t,i),q(i,a),q(t,s),q(t,c),q(c,l),q(t,u),f||(p=Z(t,"click",Q(e[6])),f=!0)},p(e,n){2&n&&m!==(m=e[14].n_users+"")&&te(r,m),2&n&&h!==(h=e[14].name+"")&&te(a,h),2&n&&g!==(g=(e[14].topic||"No topic.")+"")&&te(l,g),2&n&&d!==(d="#add:"+e[14].name)&&X(t,"href",d)},d(e){e&&W(t),f=!1,p()}}}function Bs(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,_,k,x=e[3]("Enter the name of an exising conversation, or create a new conversation.")+"";t=new fn({props:{$$slots:{default:[As]},$$scope:{ctx:e}}}),l=new Gr({props:{name:"connection_id",form:e[4],options:e[2],placeholder:e[3]("Select..."),$$slots:{label:[js]},$$scope:{ctx:e}}}),f=new en({props:{type:"button",icon:"sync-alt",disabled:!e[0].connection_id||!1===e[1].done,$$slots:{default:[Rs]},$$scope:{ctx:e}}}),f.$on("click",e[7]),h=new ao({props:{name:"conversation_id",form:e[4],placeholder:e[3]("#room or nick"),autocomplete:"off",$$slots:{label:[Ts]},$$scope:{ctx:e}}}),h.$on("keyup",e[8]),v=new en({props:{icon:"comment",disabled:!e[0].connection_id||!e[0].conversation_id,$$slots:{default:[Ls]},$$scope:{ctx:e}}});let E=e[1].error&&Ps(e),O=null!==e[1].done&&Ms(e);return{c(){Ye(t.$$.fragment),n=V(),r=G("main"),o=G("p"),i=Y(x),a=V(),s=G("form"),c=G("div"),Ye(l.$$.fragment),u=V(),d=G("div"),Ye(f.$$.fragment),p=V(),m=G("div"),Ye(h.$$.fragment),g=V(),$=G("div"),Ye(v.$$.fragment),y=V(),E&&E.c(),b=V(),O&&O.c(),X(d,"class","flex-basis-30"),X(c,"class","inputs-side-by-side"),X($,"class","flex-basis-30"),X(m,"class","inputs-side-by-side"),X(s,"method","post"),X(r,"class","main")},m(x,S){Ve(t,x,S),F(x,n,S),F(x,r,S),q(r,o),q(o,i),q(r,a),q(r,s),q(s,c),Ve(l,c,null),q(c,u),q(c,d),Ve(f,d,null),q(s,p),q(s,m),Ve(h,m,null),q(m,g),q(m,$),Ve(v,$,null),q(s,y),E&&E.m(s,null),q(s,b),O&&O.m(s,null),w=!0,_||(k=Z(s,"submit",Q(e[6])),_=!0)},p(e,[n]){const r={};131080&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),(!w||8&n)&&x!==(x=e[3]("Enter the name of an exising conversation, or create a new conversation.")+"")&&te(i,x);const o={};4&n&&(o.options=e[2]),8&n&&(o.placeholder=e[3]("Select...")),131080&n&&(o.$$scope={dirty:n,ctx:e}),l.$set(o);const a={};3&n&&(a.disabled=!e[0].connection_id||!1===e[1].done),131082&n&&(a.$$scope={dirty:n,ctx:e}),f.$set(a);const c={};8&n&&(c.placeholder=e[3]("#room or nick")),131080&n&&(c.$$scope={dirty:n,ctx:e}),h.$set(c);const u={};1&n&&(u.disabled=!e[0].connection_id||!e[0].conversation_id),131080&n&&(u.$$scope={dirty:n,ctx:e}),v.$set(u),e[1].error?E?E.p(e,n):(E=Ps(e),E.c(),E.m(s,b)):E&&(E.d(1),E=null),null!==e[1].done?O?O.p(e,n):(O=Ms(e),O.c(),O.m(s,null)):O&&(O.d(1),O=null)},i(e){w||(He(t.$$.fragment,e),He(l.$$.fragment,e),He(f.$$.fragment,e),He(h.$$.fragment,e),He(v.$$.fragment,e),w=!0)},o(e){ze(t.$$.fragment,e),ze(l.$$.fragment,e),ze(f.$$.fragment,e),ze(h.$$.fragment,e),ze(v.$$.fragment,e),w=!1},d(e){Je(t,e),e&&W(n),e&&W(r),Je(l),Je(f),Je(h),Je(v),E&&E.d(),O&&O.d(),_=!1,k()}}}function Hs(e,t,n){let r,o,i,a;S(e,Jn,(e=>n(3,a=e)));const s=mo();S(e,s,(e=>n(0,i=e)));const c=ye("socket"),l=ye("user");S(e,l,(e=>n(10,o=e)));let u,d={conversations:[],done:null,n_conversations:0};async function f(e){const t=s.get("conversation_id")||"";let r="/list"+(t.length?" /"+t+"/":"");"click"==e.type&&d.done&&(r+=" refresh"),u&&clearTimeout(u);const o=s.get("connection_id");c.send({connection_id:o,message:r,method:"send"},(t=>{const r=St(t);n(1,d=r?{conversations:[],done:!0,n_conversations:0,error:r}:t);let o=e.interval?e.interval+500:500;o>2e3&&(o=2e3),r||t.done||(u=setTimeout((()=>f({interval:o})),o))}))}const p=Ot(f,250);return e.$$.update=()=>{1024&e.$$.dirty&&n(2,r=Array.from(o.connections.keys()).map((e=>[e]))),1&e.$$.dirty&&(i.connection_id||s.set({connection_id:Bn.param("connection_id")||r[0]||"",conversation_id:Bn.param("conversation_id")||""}))},[i,d,r,a,s,l,function(e){const t=e&&e.target&&e.target.closest("a");t&&t.href&&s.set({conversation_id:t.href.replace(/.*#add:/,"")});const n=l.findConversation({connection_id:s.get("connection_id")});n&&s.get("conversation_id")&&n.send("/join "+s.get("conversation_id"))},f,p,"Add conversation",o]}class zs extends Xe{constructor(e){super(),Qe(this,e,Hs,Bs,x,{title:9})}get title(){return this.$$.ctx[9]}}function qs(e){let t,n,r,o,i,a,s,c,l=e[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"",u=e[2]("Go to start page")+"";return i=new at({props:{name:"play"}}),{c(){t=G("p"),n=V(),r=G("p"),o=G("a"),Ye(i.$$.fragment),a=V(),s=Y(u),X(o,"href",e[1]),X(o,"target","_self"),X(o,"class","btn")},m(e,u){F(e,t,u),t.innerHTML=l,F(e,n,u),F(e,r,u),q(r,o),Ve(i,o,null),q(o,a),q(o,s),c=!0},p(e,n){(!c||16&n)&&l!==(l=e[4]("Yikes! we are so sorry for the inconvenience. Please submit an [issue](%1), if the problem does not go away.","https://github.com/convos-chat/convos/issues")+"")&&(t.innerHTML=l),(!c||4&n)&&u!==(u=e[2]("Go to start page")+"")&&te(s,u),(!c||2&n)&&X(o,"href",e[1])},i(e){c||(He(i.$$.fragment,e),c=!0)},o(e){ze(i.$$.fragment,e),c=!1},d(e){e&&W(t),e&&W(n),e&&W(r),Je(i)}}}function Fs(e){let t,n,r,o,i,a,s,c,l,u=e[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"",d=e[2]("Go to start page")+"";return a=new at({props:{name:"play"}}),{c(){t=G("p"),n=Y(u),r=V(),o=G("p"),i=G("a"),Ye(a.$$.fragment),s=V(),c=Y(d),X(i,"href",e[1]),X(i,"target","_self"),X(i,"class","btn")},m(e,u){F(e,t,u),q(t,n),F(e,r,u),F(e,o,u),q(o,i),Ve(a,i,null),q(i,s),q(i,c),l=!0},p(e,t){(!l||4&t)&&u!==(u=e[2]("The Convos Team have been searching and searching, but the requested page could not be found.")+"")&&te(n,u),(!l||4&t)&&d!==(d=e[2]("Go to start page")+"")&&te(c,d),(!l||2&t)&&X(i,"href",e[1])},i(e){l||(He(a.$$.fragment,e),l=!0)},o(e){ze(a.$$.fragment,e),l=!1},d(e){e&&W(t),e&&W(r),e&&W(o),Je(a)}}}function Ws(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b=e[2]("Downloaded Convos.")+"",w=e[2]("Started Convos.")+"",_=e[2]("Contact admin")+"";n=new at({props:{name:"download"}}),s=new at({props:{name:"rocket"}});const k=[Gs,Ks],x=[];function E(e,t){return e[3].error?0:1}return d=E(e),f=x[d]=k[d](e),g=new at({props:{name:"paper-plane"}}),{c(){t=G("p"),Ye(n.$$.fragment),r=V(),o=Y(b),i=V(),a=G("p"),Ye(s.$$.fragment),c=V(),l=Y(w),u=V(),f.c(),p=V(),m=G("p"),h=G("a"),Ye(g.$$.fragment),$=V(),v=Y(_),X(h,"class","btn"),X(h,"href",Pt("contact"))},m(e,f){F(e,t,f),Ve(n,t,null),q(t,r),q(t,o),F(e,i,f),F(e,a,f),Ve(s,a,null),q(a,c),q(a,l),F(e,u,f),x[d].m(e,f),F(e,p,f),F(e,m,f),q(m,h),Ve(g,h,null),q(h,$),q(h,v),y=!0},p(e,t){(!y||4&t)&&b!==(b=e[2]("Downloaded Convos.")+"")&&te(o,b),(!y||4&t)&&w!==(w=e[2]("Started Convos.")+"")&&te(l,w);let n=d;d=E(e),d===n?x[d].p(e,t):(Ue(),ze(x[n],1,1,(()=>{x[n]=null})),Be(),f=x[d],f?f.p(e,t):(f=x[d]=k[d](e),f.c()),He(f,1),f.m(p.parentNode,p)),(!y||4&t)&&_!==(_=e[2]("Contact admin")+"")&&te(v,_)},i(e){y||(He(n.$$.fragment,e),He(s.$$.fragment,e),He(f),He(g.$$.fragment,e),y=!0)},o(e){ze(n.$$.fragment,e),ze(s.$$.fragment,e),ze(f),ze(g.$$.fragment,e),y=!1},d(e){e&&W(t),Je(n),e&&W(i),e&&W(a),Je(s),e&&W(u),x[d].d(e),e&&W(p),e&&W(m),Je(g)}}}function Ks(e){let t,n,r,o,i,a=e[2]("Loading user data...")+"";return n=new at({props:{name:"spinner fa-spin"}}),{c(){t=G("p"),Ye(n.$$.fragment),r=V(),o=Y(a)},m(e,a){F(e,t,a),Ve(n,t,null),q(t,r),q(t,o),i=!0},p(e,t){(!i||4&t)&&a!==(a=e[2]("Loading user data...")+"")&&te(o,a)},i(e){i||(He(n.$$.fragment,e),i=!0)},o(e){ze(n.$$.fragment,e),i=!1},d(e){e&&W(t),Je(n)}}}function Gs(e){let t,n,r,o,i,a=e[2]("Loading user data failed: %1",e[2](e[3].error))+"";return n=new at({props:{name:"exclamation-triangle"}}),{c(){t=G("p"),Ye(n.$$.fragment),r=V(),o=Y(a)},m(e,a){F(e,t,a),Ve(n,t,null),q(t,r),q(t,o),i=!0},p(e,t){(!i||12&t)&&a!==(a=e[2]("Loading user data failed: %1",e[2](e[3].error))+"")&&te(o,a)},i(e){i||(He(n.$$.fragment,e),i=!0)},o(e){ze(n.$$.fragment,e),i=!1},d(e){e&&W(t),Je(n)}}}function Ys(e){let t,n,r,o,i,a,s,c=e[2](e[5][e[0]])+"";const l=[Ws,Fs,qs],u=[];function d(e,t){return"loading"==e[0]?0:"not_found"==e[0]?1:2}return i=d(e),a=u[i]=l[i](e),{c(){t=G("main"),n=G("h2"),r=Y(c),o=V(),a.c(),X(t,"class","cms-main")},m(e,a){F(e,t,a),q(t,n),q(n,r),q(t,o),u[i].m(t,null),s=!0},p(e,[n]){(!s||5&n)&&c!==(c=e[2](e[5][e[0]])+"")&&te(r,c);let o=i;i=d(e),i===o?u[i].p(e,n):(Ue(),ze(u[o],1,1,(()=>{u[o]=null})),Be(),a=u[i],a?a.p(e,n):(a=u[i]=l[i](e),a.c()),He(a,1),a.m(t,null))},i(e){s||(He(a),s=!0)},o(e){ze(a),s=!1},d(e){e&&W(t),u[i].d()}}}function Vs(e,t,n){let r,o,i,a,s,c,l;S(e,Bn,(e=>n(9,i=e))),S(e,Jn,(e=>n(2,s=e))),S(e,Zn,(e=>n(4,l=e)));let{title:u="Loading..."}=t;const d={loading:"Loading...",not_found:"Not Found"},f=ye("socket");S(e,f,(e=>n(3,c=e)));const p=ye("user");return S(e,p,(e=>n(10,a=e))),e.$$set=e=>{"title"in e&&n(8,u=e.title)},e.$$.update=()=>{1536&e.$$.dirty&&n(0,r=function(e,t){const n=e.path.match(/\/err\/(\w+)/);return n?n[1]:t.is("pending")||t.is("loading")?"loading":"not_found"}(i,a)),1&e.$$.dirty&&n(8,u=d[r])},n(1,o=Bn.urlFor(p.email?"/chat":"/login")),[r,o,s,c,l,d,f,p,u,i,a]}class Js extends Xe{constructor(e){super(),Qe(this,e,Vs,Ys,x,{title:8})}}function Zs(e,t,n){const r=e.slice();return r[5]=t[n],r}function Qs(e){let t,n,r,o,i,a,s,c=e[0]("Help")+"",l=Pt("version")+"";return{c(){t=G("h1"),n=Y(c),r=V(),o=G("small"),i=G("a"),a=Y("v"),s=Y(l),X(i,"href",e[2]),X(i,"target","_blank")},m(e,c){F(e,t,c),q(t,n),q(t,r),q(t,o),q(o,i),q(i,a),q(i,s)},p(e,t){1&t&&c!==(c=e[0]("Help")+"")&&te(n,c)},d(e){e&&W(t)}}}function Xs(e){let t,n,r,o,i=e[5].example+"",a=e[0](e[5].description)+"";return{c(){t=G("dt"),n=Y(i),r=G("dd"),o=Y(a)},m(e,i){F(e,t,i),q(t,n),F(e,r,i),q(r,o)},p(e,t){1&t&&a!==(a=e[0](e[5].description)+"")&&te(o,a)},d(e){e&&W(t),e&&W(r)}}}function ec(e){let t;return{c(){t=Y("Loading")},m(e,n){F(e,t,n)},d(e){e&&W(t)}}}function tc(e){let t;return{c(){t=Y("Not found")},m(e,n){F(e,t,n)},d(e){e&&W(t)}}}function nc(e){let t;return{c(){t=Y("Unknown")},m(e,n){F(e,t,n)},d(e){e&&W(t)}}}function rc(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,y,b,w,_,k,x,E,O,S,C,N,A,j,R,T,L,P,M,D,I,U,B,H,z,J,Z,Q,ee,ne,re,oe,ie,ae,se,le,ue,de,fe,pe,me,he,ge,$e,ve,ye,be,we,_e,ke,xe,Ee,Oe,Se,Ce,Ne,Ae,je,Re,Te,Le,Pe,Me,De,Ie,Ue,Be,qe,Fe,We,Ke,Ge,Ze,Qe,Xe,et,tt,nt,rt,ot,it,at,st,ct,lt,ut,dt,ft,pt,mt,ht,gt,$t,vt,yt,bt,wt,_t,kt,xt,Et,Ot,St=e[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"",Ct=e[1]("More information can also be found on https://convos.chat.")+"",Nt=e[0]("Quick search")+"",At=e[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"",jt=e[0]("Filter conversations with unread messages.")+"",Rt=e[0]("Filter private conversations with unread messages.")+"",Tt=e[0]("Filter channels with unread messages.")+"",Lt=e[0]("Any other combination")+"",Mt=e[0]("Filter channels, private conversations or search for a string.")+"",Dt=e[0]("Autocomplete")+"",It=e[0]("The following rules apply when typing a message:")+"",Ut=e[0]('"@" followed by a character will show matching nicks in the current conversation.')+"",Bt=e[0]('":" followed by a character will show matching emojis.')+"",Ht=e[0]('"/" will show the available commands.')+"",zt=e[0]('"#" will show the matching conversation names.')+"",qt=e[0]("Text formatting")+"",Ft=e[0]("Convos supports some special way of formatting text:")+"",Wt=e[0]("Will be automatically converted into emojis.")+"",Kt=e[0]("> some text")+"",Gt=e[0]('A line starting with ">" will be converted into a quote.')+"",Yt=e[0]("*some text*, **some text**, ***some text***")+"",Vt=e[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"",Jt=e[0]("`some fragment`")+"",Zt=e[1]("Using backticks around some text, will format it as a `code fragment`.")+"",Qt=e[0]("URLs will be converted to links, and might be embedded in the chat.")+"",Xt=e[0]("Available commands")+"",en=e[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"",tn=e[0]("Other resources")+"",nn=e[0]("Changelog for v%1",Pt("version"))+"",rn=e[0]("Project homepage")+"",on=e[0]("Bug/issue tracker")+"",an=e[0]("Source code")+"",sn="Convos"!=Pt("organization_name")&&"https://convos.chat"!=Pt("organization_url"),cn=e[0]("Contact admin")+"",ln=e[0]("Demo error pages")+"";t=new fn({props:{$$slots:{default:[Qs]},$$scope:{ctx:e}}});let un=Qn,dn=[];for(let t=0;t<un.length;t+=1)dn[t]=Xs(Zs(e,un,t));let pn=sn&&function(e){let t,n,r,o,i=Pt("organization_name")+"";return{c(){t=G("li"),n=G("a"),r=Y(i),X(n,"href",o=Pt("organization_url")),X(n,"target","_blank")},m(e,o){F(e,t,o),q(t,n),q(n,r)},p:v,d(e){e&&W(t)}}}();return yt=new ei({props:{href:"/err/loading",$$slots:{default:[ec]},$$scope:{ctx:e}}}),_t=new ei({props:{href:"/err/not_found",$$slots:{default:[tc]},$$scope:{ctx:e}}}),Et=new ei({props:{href:"/err/unknown",$$slots:{default:[nc]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment),n=V(),r=G("main"),o=G("p"),i=new ce,a=V(),s=new ce,c=V(),l=G("h2"),u=Y(Nt),d=V(),f=G("p"),p=Y(At),m=V(),h=G("dl"),g=G("dt"),g.textContent="+",$=G("dd"),y=Y(jt),b=G("dt"),b.textContent="+@",w=G("dd"),_=Y(Rt),k=G("dt"),k.textContent="+#",x=G("dd"),E=Y(Tt),O=G("dt"),S=Y(Lt),C=G("dd"),N=Y(Mt),A=V(),j=G("h2"),R=Y(Dt),T=V(),L=G("p"),P=Y(It),M=V(),D=G("dl"),I=G("dt"),I.textContent="@nick",U=G("dd"),B=Y(Ut),H=G("dt"),H.textContent=":emoji_name",z=G("dd"),J=Y(Bt),Z=G("dt"),Z.textContent="/command",Q=G("dd"),ee=Y(Ht),ne=G("dt"),ne.textContent="#conversation",re=G("dd"),oe=Y(zt),ie=V(),ae=G("h2"),se=Y(qt),le=V(),ue=G("p"),de=Y(Ft),fe=V(),pe=G("dl"),me=G("dt"),he=G("dd"),ge=Y(Wt),$e=G("dt"),ve=Y(Kt),ye=G("dd"),be=Y(Gt),we=G("dt"),_e=Y(Yt),ke=G("dd"),xe=G("dt"),Ee=Y(Jt),Oe=G("dd"),Se=G("dt"),Se.textContent="https://...",Ce=G("dd"),Ne=Y(Qt),Ae=V(),je=G("h2"),Re=Y(Xt),Te=V(),Le=G("p"),Pe=V(),Me=G("dl");for(let e=0;e<dn.length;e+=1)dn[e].c();De=V(),Ie=G("h2"),Ue=Y(tn),Be=V(),qe=G("ul"),Fe=G("li"),We=G("a"),Ke=Y(nn),Ge=V(),Ze=G("li"),Qe=G("a"),Xe=Y(rn),et=V(),tt=G("li"),nt=G("a"),rt=Y(on),ot=V(),it=G("li"),at=G("a"),st=Y(an),ct=V(),pn&&pn.c(),lt=V(),ut=G("li"),dt=G("a"),ft=Y(cn),pt=V(),mt=G("h2"),ht=Y(ln),gt=V(),$t=G("ul"),vt=G("li"),Ye(yt.$$.fragment),bt=V(),wt=G("li"),Ye(_t.$$.fragment),kt=V(),xt=G("li"),Ye(Et.$$.fragment),i.a=a,s.a=null,X(l,"id","quick-search"),X(j,"id","autocomplete"),X(ae,"id","formatting"),X(je,"id","commands"),X(Ie,"id","resources"),X(We,"href",e[2]),X(We,"target","_blank"),X(Qe,"href","https://convos.chat"),X(Qe,"target","_blank"),X(nt,"href","https://github.com/convos-chat/convos/issues"),X(nt,"target","_blank"),X(at,"href","https://github.com/convos-chat/convos"),X(at,"target","_blank"),X(dt,"href",Pt("contact")),X(dt,"target","_blank"),X(mt,"id","fallback"),X(r,"class","main")},m(v,W){Ve(t,v,W),F(v,n,W),F(v,r,W),q(r,o),i.m(St,o),q(o,a),s.m(Ct,o),q(r,c),q(r,l),q(l,u),q(r,d),q(r,f),q(f,p),q(r,m),q(r,h),q(h,g),q(h,$),q($,y),q(h,b),q(h,w),q(w,_),q(h,k),q(h,x),q(x,E),q(h,O),q(O,S),q(h,C),q(C,N),q(r,A),q(r,j),q(j,R),q(r,T),q(r,L),q(L,P),q(r,M),q(r,D),q(D,I),q(D,U),q(U,B),q(D,H),q(D,z),q(z,J),q(D,Z),q(D,Q),q(Q,ee),q(D,ne),q(D,re),q(re,oe),q(r,ie),q(r,ae),q(ae,se),q(r,le),q(r,ue),q(ue,de),q(r,fe),q(r,pe),q(pe,me),me.innerHTML=e[3],q(pe,he),q(he,ge),q(pe,$e),q($e,ve),q(pe,ye),q(ye,be),q(pe,we),q(we,_e),q(pe,ke),ke.innerHTML=Vt,q(pe,xe),q(xe,Ee),q(pe,Oe),Oe.innerHTML=Zt,q(pe,Se),q(pe,Ce),q(Ce,Ne),q(r,Ae),q(r,je),q(je,Re),q(r,Te),q(r,Le),Le.innerHTML=en,q(r,Pe),q(r,Me);for(let e=0;e<dn.length;e+=1)dn[e].m(Me,null);q(r,De),q(r,Ie),q(Ie,Ue),q(r,Be),q(r,qe),q(qe,Fe),q(Fe,We),q(We,Ke),q(qe,Ge),q(qe,Ze),q(Ze,Qe),q(Qe,Xe),q(qe,et),q(qe,tt),q(tt,nt),q(nt,rt),q(qe,ot),q(qe,it),q(it,at),q(at,st),q(qe,ct),pn&&pn.m(qe,null),q(qe,lt),q(qe,ut),q(ut,dt),q(dt,ft),q(r,pt),q(r,mt),q(mt,ht),q(r,gt),q(r,$t),q($t,vt),Ve(yt,vt,null),q($t,bt),q($t,wt),Ve(_t,wt,null),q($t,kt),q($t,xt),Ve(Et,xt,null),Ot=!0},p(e,[n]){const r={};if(257&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r),(!Ot||2&n)&&St!==(St=e[1]('Got any questions? Come and talk to us in the "#convos" channel on https://libera.chat.')+"")&&i.p(St),(!Ot||2&n)&&Ct!==(Ct=e[1]("More information can also be found on https://convos.chat.")+"")&&s.p(Ct),(!Ot||1&n)&&Nt!==(Nt=e[0]("Quick search")+"")&&te(u,Nt),(!Ot||1&n)&&At!==(At=e[0]("Pressing `shift+enter` will shift focus between chat input and search in sidebar.")+"")&&te(p,At),(!Ot||1&n)&&jt!==(jt=e[0]("Filter conversations with unread messages.")+"")&&te(y,jt),(!Ot||1&n)&&Rt!==(Rt=e[0]("Filter private conversations with unread messages.")+"")&&te(_,Rt),(!Ot||1&n)&&Tt!==(Tt=e[0]("Filter channels with unread messages.")+"")&&te(E,Tt),(!Ot||1&n)&&Lt!==(Lt=e[0]("Any other combination")+"")&&te(S,Lt),(!Ot||1&n)&&Mt!==(Mt=e[0]("Filter channels, private conversations or search for a string.")+"")&&te(N,Mt),(!Ot||1&n)&&Dt!==(Dt=e[0]("Autocomplete")+"")&&te(R,Dt),(!Ot||1&n)&&It!==(It=e[0]("The following rules apply when typing a message:")+"")&&te(P,It),(!Ot||1&n)&&Ut!==(Ut=e[0]('"@" followed by a character will show matching nicks in the current conversation.')+"")&&te(B,Ut),(!Ot||1&n)&&Bt!==(Bt=e[0]('":" followed by a character will show matching emojis.')+"")&&te(J,Bt),(!Ot||1&n)&&Ht!==(Ht=e[0]('"/" will show the available commands.')+"")&&te(ee,Ht),(!Ot||1&n)&&zt!==(zt=e[0]('"#" will show the matching conversation names.')+"")&&te(oe,zt),(!Ot||1&n)&&qt!==(qt=e[0]("Text formatting")+"")&&te(se,qt),(!Ot||1&n)&&Ft!==(Ft=e[0]("Convos supports some special way of formatting text:")+"")&&te(de,Ft),(!Ot||1&n)&&Wt!==(Wt=e[0]("Will be automatically converted into emojis.")+"")&&te(ge,Wt),(!Ot||1&n)&&Kt!==(Kt=e[0]("> some text")+"")&&te(ve,Kt),(!Ot||1&n)&&Gt!==(Gt=e[0]('A line starting with ">" will be converted into a quote.')+"")&&te(be,Gt),(!Ot||1&n)&&Yt!==(Yt=e[0]("*some text*, **some text**, ***some text***")+"")&&te(_e,Yt),(!Ot||2&n)&&Vt!==(Vt=e[1]('Using "*" around some text, will convert it into *italic*, **bold** or ***italic bold***.')+"")&&(ke.innerHTML=Vt),(!Ot||1&n)&&Jt!==(Jt=e[0]("`some fragment`")+"")&&te(Ee,Jt),(!Ot||2&n)&&Zt!==(Zt=e[1]("Using backticks around some text, will format it as a `code fragment`.")+"")&&(Oe.innerHTML=Zt),(!Ot||1&n)&&Qt!==(Qt=e[0]("URLs will be converted to links, and might be embedded in the chat.")+"")&&te(Ne,Qt),(!Ot||1&n)&&Xt!==(Xt=e[0]("Available commands")+"")&&te(Re,Xt),(!Ot||2&n)&&en!==(en=e[1]('Any message starting with a-z is prefixed with "`/quote`", when sending from a connection conversation.')+"")&&(Le.innerHTML=en),1&n){let t;for(un=Qn,t=0;t<un.length;t+=1){const r=Zs(e,un,t);dn[t]?dn[t].p(r,n):(dn[t]=Xs(r),dn[t].c(),dn[t].m(Me,null))}for(;t<dn.length;t+=1)dn[t].d(1);dn.length=un.length}(!Ot||1&n)&&tn!==(tn=e[0]("Other resources")+"")&&te(Ue,tn),(!Ot||1&n)&&nn!==(nn=e[0]("Changelog for v%1",Pt("version"))+"")&&te(Ke,nn),(!Ot||1&n)&&rn!==(rn=e[0]("Project homepage")+"")&&te(Xe,rn),(!Ot||1&n)&&on!==(on=e[0]("Bug/issue tracker")+"")&&te(rt,on),(!Ot||1&n)&&an!==(an=e[0]("Source code")+"")&&te(st,an),sn&&pn.p(e,n),(!Ot||1&n)&&cn!==(cn=e[0]("Contact admin")+"")&&te(ft,cn),(!Ot||1&n)&&ln!==(ln=e[0]("Demo error pages")+"")&&te(ht,ln);const o={};256&n&&(o.$$scope={dirty:n,ctx:e}),yt.$set(o);const a={};256&n&&(a.$$scope={dirty:n,ctx:e}),_t.$set(a);const c={};256&n&&(c.$$scope={dirty:n,ctx:e}),Et.$set(c)},i(e){Ot||(He(t.$$.fragment,e),He(yt.$$.fragment,e),He(_t.$$.fragment,e),He(Et.$$.fragment,e),Ot=!0)},o(e){ze(t.$$.fragment,e),ze(yt.$$.fragment,e),ze(_t.$$.fragment,e),ze(Et.$$.fragment,e),Ot=!1},d(e){Je(t,e),e&&W(n),e&&W(r),K(dn,e),pn&&pn.d(),Je(yt),Je(_t),Je(Et)}}}function oc(e,t,n){let r,o;S(e,Jn,(e=>n(0,r=e))),S(e,Zn,(e=>n(1,o=e)));const i="https://github.com/convos-chat/convos/blob/v"+Pt("version")+"/Changes#L3",a=Object.keys(Vn.emojis.aliases).sort().join(", ");return[r,o,i,a,"Help"]}class ic extends Xe{constructor(e){super(),Qe(this,e,oc,rc,x,{title:4})}get title(){return this.$$.ctx[4]}}function ac(e){let t;return{c(){t=G("input"),X(t,"type",e[2]),X(t,"id",e[1]),X(t,"name",e[0]),t.value=e[3]},m(e,n){F(e,t,n)},p(e,[n]){4&n&&X(t,"type",e[2]),2&n&&X(t,"id",e[1]),1&n&&X(t,"name",e[0]),8&n&&t.value!==e[3]&&(t.value=e[3])},i:v,o:v,d(e){e&&W(t)}}}function sc(e,t,n){let r,{form:o}=t,{name:i=""}=t,{id:a=(i?"form_"+i:Ht())}=t,{type:s="hidden"}=t;const c=o.field(i);return S(e,c,(e=>n(3,r=e))),e.$$set=e=>{"form"in e&&n(5,o=e.form),"name"in e&&n(0,i=e.name),"id"in e&&n(1,a=e.id),"type"in e&&n(2,s=e.type)},[i,a,s,r,c,o]}class cc extends Xe{constructor(e){super(),Qe(this,e,sc,ac,x,{form:5,name:0,id:1,type:2})}}function lc(e,t,n){const r=e.slice();return r[16]=t[n],r}function uc(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h=e[1]("Sign up")+"",g=e[1]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"",$=e[1]("Contact admin")+"";return l=new at({props:{name:"paper-plane"}}),p=new ei({props:{href:"/login",$$slots:{default:[mc]},$$scope:{ctx:e}}}),{c(){t=G("h2"),n=Y(h),r=V(),o=G("p"),i=Y(g),a=V(),s=G("div"),c=G("a"),Ye(l.$$.fragment),u=V(),d=Y($),f=V(),Ye(p.$$.fragment),X(c,"class","btn"),X(c,"href",Pt("contact")),X(s,"class","form-actions")},m(e,h){F(e,t,h),q(t,n),F(e,r,h),F(e,o,h),q(o,i),F(e,a,h),F(e,s,h),q(s,c),Ve(l,c,null),q(c,u),q(c,d),q(s,f),Ve(p,s,null),m=!0},p(e,t){(!m||2&t)&&h!==(h=e[1]("Sign up")+"")&&te(n,h),(!m||2&t)&&g!==(g=e[1]("Please ask your Convos admin for an invite link to sign up, or sign in if you already have an account.")+"")&&te(i,g),(!m||2&t)&&$!==($=e[1]("Contact admin")+"")&&te(d,$);const r={};524290&t&&(r.$$scope={dirty:t,ctx:e}),p.$set(r)},i(e){m||(He(l.$$.fragment,e),He(p.$$.fragment,e),m=!0)},o(e){ze(l.$$.fragment,e),ze(p.$$.fragment,e),m=!1},d(e){e&&W(t),e&&W(r),e&&W(o),e&&W(a),e&&W(s),Je(l),Je(p)}}}function dc(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h=e[1]("Sign in")+"";return o=new ao({props:{type:"email",name:"email",form:e[4],placeholder:e[1]("Ex: john@doe.com"),$$slots:{label:[hc]},$$scope:{ctx:e}}}),a=new ao({props:{type:"password",name:"password",form:e[4],autocomplete:"current-password",$$slots:{help:[$c],label:[gc]},$$scope:{ctx:e}}}),l=new en({props:{icon:"sign-in-alt",op:e[6],$$slots:{default:[vc]},$$scope:{ctx:e}}}),d=new ei({props:{href:"/register",$$slots:{default:[yc]},$$scope:{ctx:e}}}),p=new Br({props:{op:e[6],success:"Loading Convos..."}}),{c(){t=G("h2"),n=Y(h),r=V(),Ye(o.$$.fragment),i=V(),Ye(a.$$.fragment),s=V(),c=G("div"),Ye(l.$$.fragment),u=V(),Ye(d.$$.fragment),f=V(),Ye(p.$$.fragment),X(c,"class","form-actions")},m(e,h){F(e,t,h),q(t,n),F(e,r,h),Ve(o,e,h),F(e,i,h),Ve(a,e,h),F(e,s,h),F(e,c,h),Ve(l,c,null),q(c,u),Ve(d,c,null),F(e,f,h),Ve(p,e,h),m=!0},p(e,t){(!m||2&t)&&h!==(h=e[1]("Sign in")+"")&&te(n,h);const r={};2&t&&(r.placeholder=e[1]("Ex: john@doe.com")),524290&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r);const i={};524294&t&&(i.$$scope={dirty:t,ctx:e}),a.$set(i);const s={};524290&t&&(s.$$scope={dirty:t,ctx:e}),l.$set(s);const c={};524290&t&&(c.$$scope={dirty:t,ctx:e}),d.$set(c)},i(e){m||(He(o.$$.fragment,e),He(a.$$.fragment,e),He(l.$$.fragment,e),He(d.$$.fragment,e),He(p.$$.fragment,e),m=!0)},o(e){ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(l.$$.fragment,e),ze(d.$$.fragment,e),ze(p.$$.fragment,e),m=!1},d(e){e&&W(t),e&&W(r),Je(o,e),e&&W(i),Je(a,e),e&&W(s),e&&W(c),Je(l),Je(d),e&&W(f),Je(p,e)}}}function fc(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y=("recover"==e[0]?e[1]("Recover account"):e[1]("Sign up"))+"",b=Pt("first_user"),w=!Pt("first_user"),_=b&&function(e){let t,n,r=e[1]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"";return{c(){t=G("p"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]('As you are the first user, you do not need any invitation link. Just fill in the form below, hit "Sign up" to start chatting.')+"")&&te(n,r)},d(e){e&&W(t)}}}(e);i=new cc({props:{name:"exp",form:e[4]}}),s=new cc({props:{name:"token",form:e[4]}}),l=new ao({props:{type:"email",name:"email",form:e[4],placeholder:e[1]("Ex: john@doe.com"),readonly:"register"!=e[0],$$slots:{help:[wc],label:[bc]},$$scope:{ctx:e}}}),d=new ao({props:{type:"password",name:"password",form:e[4],$$slots:{help:[kc],label:[_c]},$$scope:{ctx:e}}}),m=new en({props:{icon:"save",op:e[7],$$slots:{default:[xc]},$$scope:{ctx:e}}});let k=w&&function(e){let t,n;return t=new ei({props:{href:"/login",$$slots:{default:[Ec]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};524290&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}(e);return $=new Br({props:{op:e[7],success:"Loading Convos..."}}),{c(){t=G("h2"),n=Y(y),r=V(),_&&_.c(),o=V(),Ye(i.$$.fragment),a=V(),Ye(s.$$.fragment),c=V(),Ye(l.$$.fragment),u=V(),Ye(d.$$.fragment),f=V(),p=G("div"),Ye(m.$$.fragment),h=V(),k&&k.c(),g=V(),Ye($.$$.fragment),X(p,"class","form-actions")},m(e,y){F(e,t,y),q(t,n),F(e,r,y),_&&_.m(e,y),F(e,o,y),Ve(i,e,y),F(e,a,y),Ve(s,e,y),F(e,c,y),Ve(l,e,y),F(e,u,y),Ve(d,e,y),F(e,f,y),F(e,p,y),Ve(m,p,null),q(p,h),k&&k.m(p,null),F(e,g,y),Ve($,e,y),v=!0},p(e,t){(!v||3&t)&&y!==(y=("recover"==e[0]?e[1]("Recover account"):e[1]("Sign up"))+"")&&te(n,y),b&&_.p(e,t);const r={};2&t&&(r.placeholder=e[1]("Ex: john@doe.com")),1&t&&(r.readonly="register"!=e[0]),524291&t&&(r.$$scope={dirty:t,ctx:e}),l.$set(r);const o={};524290&t&&(o.$$scope={dirty:t,ctx:e}),d.$set(o);const i={};524291&t&&(i.$$scope={dirty:t,ctx:e}),m.$set(i),w&&k.p(e,t)},i(e){v||(He(i.$$.fragment,e),He(s.$$.fragment,e),He(l.$$.fragment,e),He(d.$$.fragment,e),He(m.$$.fragment,e),He(k),He($.$$.fragment,e),v=!0)},o(e){ze(i.$$.fragment,e),ze(s.$$.fragment,e),ze(l.$$.fragment,e),ze(d.$$.fragment,e),ze(m.$$.fragment,e),ze(k),ze($.$$.fragment,e),v=!1},d(e){e&&W(t),e&&W(r),_&&_.d(e),e&&W(o),Je(i,e),e&&W(a),Je(s,e),e&&W(c),Je(l,e),e&&W(u),Je(d,e),e&&W(f),e&&W(p),Je(m),k&&k.d(),e&&W(g),Je($,e)}}}function pc(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g=e[1]("Invalid invite/recover URL")+"",$=e[1](410==Pt("status")?"The link has expired.":"The link is invalid.")+"",v=e[1]("Please ask your Convos admin for a new link.")+"",y=e[1]("Contact admin")+"";return m=new ei({props:{href:"/login",$$slots:{default:[Oc]},$$scope:{ctx:e}}}),{c(){t=G("h2"),n=Y(g),r=V(),o=G("p"),i=Y($),a=V(),s=G("p"),c=Y(v),l=V(),u=G("p"),d=G("a"),f=Y(y),p=V(),Ye(m.$$.fragment),X(d,"class","btn"),X(d,"href",Pt("contact"))},m(e,g){F(e,t,g),q(t,n),F(e,r,g),F(e,o,g),q(o,i),F(e,a,g),F(e,s,g),q(s,c),F(e,l,g),F(e,u,g),q(u,d),q(d,f),q(u,p),Ve(m,u,null),h=!0},p(e,t){(!h||2&t)&&g!==(g=e[1]("Invalid invite/recover URL")+"")&&te(n,g),(!h||2&t)&&$!==($=e[1](410==Pt("status")?"The link has expired.":"The link is invalid.")+"")&&te(i,$),(!h||2&t)&&v!==(v=e[1]("Please ask your Convos admin for a new link.")+"")&&te(c,v),(!h||2&t)&&y!==(y=e[1]("Contact admin")+"")&&te(f,y);const r={};524290&t&&(r.$$scope={dirty:t,ctx:e}),m.$set(r)},i(e){h||(He(m.$$.fragment,e),h=!0)},o(e){ze(m.$$.fragment,e),h=!1},d(e){e&&W(t),e&&W(r),e&&W(o),e&&W(a),e&&W(s),e&&W(l),e&&W(u),Je(m)}}}function mc(e){let t,n=e[1]("Sign in")+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("Sign in")+"")&&te(t,n)},d(e){e&&W(t)}}}function hc(e){let t,n,r=e[1]("Email")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Email")+"")&&te(n,r)},d(e){e&&W(t)}}}function gc(e){let t,n,r=e[1]("Password")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Password")+"")&&te(n,r)},d(e){e&&W(t)}}}function $c(e){let t,n=e[2]("Contact your [Convos admin](%1) if you have forgotten your password.",Pt("contact"))+"";return{c(){t=G("p"),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),t.innerHTML=n},p(e,r){4&r&&n!==(n=e[2]("Contact your [Convos admin](%1) if you have forgotten your password.",Pt("contact"))+"")&&(t.innerHTML=n)},d(e){e&&W(t)}}}function vc(e){let t,n,r=e[1]("Sign in")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Sign in")+"")&&te(n,r)},d(e){e&&W(t)}}}function yc(e){let t,n=e[1]("Sign up")+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("Sign up")+"")&&te(t,n)},d(e){e&&W(t)}}}function bc(e){let t,n,r=e[1]("Email")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Email")+"")&&te(n,r)},d(e){e&&W(t)}}}function wc(e){let t,n,r=("invitation"==e[0]?e[1]("Your email is from the invite link."):e[1]("Your email will be used if you forget your password."))+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){3&t&&r!==(r=("invitation"==e[0]?e[1]("Your email is from the invite link."):e[1]("Your email will be used if you forget your password."))+"")&&te(n,r)},d(e){e&&W(t)}}}function _c(e){let t,n,r=e[1]("Password")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Password")+"")&&te(n,r)},d(e){e&&W(t)}}}function kc(e){let t,n,r=e[1]("Hint: Use a phrase from a book.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Hint: Use a phrase from a book.")+"")&&te(n,r)},d(e){e&&W(t)}}}function xc(e){let t,n,r=("recover"==e[0]?e[1]("Set new password"):e[1]("Sign up"))+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){3&t&&r!==(r=("recover"==e[0]?e[1]("Set new password"):e[1]("Sign up"))+"")&&te(n,r)},d(e){e&&W(t)}}}function Ec(e){let t,n=e[1]("Sign in")+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("Sign in")+"")&&te(t,n)},d(e){e&&W(t)}}}function Oc(e){let t,n=e[1]("Sign in")+"";return{c(){t=Y(n)},m(e,n){F(e,t,n)},p(e,r){2&r&&n!==(n=e[1]("Sign in")+"")&&te(t,n)},d(e){e&&W(t)}}}function Sc(e){let t,n,r,o,i,a=e[16][1]+"";function s(){return e[12](e[16])}return{c(){t=G("a"),n=Y(a),X(t,"href",r="#"+e[16][0])},m(e,r){F(e,t,r),q(t,n),o||(i=Z(t,"click",s),o=!0)},p(o,i){e=o,8&i&&a!==(a=e[16][1]+"")&&te(n,a),8&i&&r!==(r="#"+e[16][0])&&X(t,"href",r)},d(e){e&&W(t),o=!1,i()}}}function Cc(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h;r=new cc({props:{name:"mode",form:e[4]}});const g=[pc,fc,dc,uc],$=[];function v(e,t){return"invalid_invitation"==e[0]?0:(1&t&&(i=!(-1==["recover","invitation","register"].indexOf(e[0]))),i?1:"login"==e[0]?2:3)}a=v(e,-1),s=$[a]=g[a](e),d=new at({props:{name:"globe"}});let y=e[3].languageOptions,b=[];for(let t=0;t<y.length;t+=1)b[t]=Sc(lc(e,y,t));return{c(){t=G("main"),n=G("form"),Ye(r.$$.fragment),o=V(),s.c(),c=V(),l=G("div"),u=G("footer"),Ye(d.$$.fragment),f=V();for(let e=0;e<b.length;e+=1)b[e].c();X(n,"method","post"),X(t,"class","cms-main"),X(u,"class","footer language-selector"),X(l,"class","footer--wrapper is-small")},m(i,s){F(i,t,s),q(t,n),Ve(r,n,null),q(n,o),$[a].m(n,null),F(i,c,s),F(i,l,s),q(l,u),Ve(d,u,null),q(u,f);for(let e=0;e<b.length;e+=1)b[e].m(u,null);p=!0,m||(h=Z(n,"submit",Q(e[8])),m=!0)},p(e,[t]){let r=a;if(a=v(e,t),a===r?$[a].p(e,t):(Ue(),ze($[r],1,1,(()=>{$[r]=null})),Be(),s=$[a],s?s.p(e,t):(s=$[a]=g[a](e),s.c()),He(s,1),s.m(n,null)),8&t){let n;for(y=e[3].languageOptions,n=0;n<y.length;n+=1){const r=lc(e,y,n);b[n]?b[n].p(r,t):(b[n]=Sc(r),b[n].c(),b[n].m(u,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=y.length}},i(e){p||(He(r.$$.fragment,e),He(s),He(d.$$.fragment,e),p=!0)},o(e){ze(r.$$.fragment,e),ze(s),ze(d.$$.fragment,e),p=!1},d(e){e&&W(t),Je(r),$[a].d(),e&&W(c),e&&W(l),Je(d),K(b,e),m=!1,h()}}}function Nc(e,t,n){let r,o,i,a,s,c;S(e,Bn,(e=>n(11,i=e))),S(e,Jn,(e=>n(1,a=e))),S(e,Zn,(e=>n(2,s=e))),S(e,Vn,(e=>n(3,c=e)));let{title:l="Sign in"}=t;const u=ye("api"),d=mo(),f=ye("user");S(e,f,(e=>n(10,o=e)));const p=u("loginUser"),m=u("registerUser");return e.$$set=e=>{"title"in e&&n(9,l=e.title)},e.$$.update=()=>{1024&e.$$.dirty&&function(e){if(e.is("loading")||!e.email)return;const t=e.conversations()[0],n=e.lastUrl?e.lastUrl:t?t.path:"/settings/connections";Bn.go(n,{replace:!0})}(o),2048&e.$$.dirty&&n(0,r=function(e){const t=-1!=e.path.indexOf("register"),r=!d.get("mode")&&Pt("status")>=400?"invalid_invitation":e.param("email")&&Pt("existing_user")?"recover":e.param("email")?"invitation":Pt("first_user")||t&&Pt("open_to_public")?"register":t?"invalid":"login";return d.set({email:e.param("email")||d.get("email")||"",exp:e.param("exp")||"",mode:r,token:e.param("token")||""}),n(9,l="login"==r?"Sign in":"Sign up"),"ontouchstart"in window||setTimeout((()=>Tt(document,".text-field input").reverse().map((e=>e.readOnly||e.focus()))),1),r}(i))},[r,a,s,c,d,f,p,m,async function(){const e="login"==r?p:m;await e.perform(d.get()),"login"!=r&&Bn.update({lastUrl:""}),e.error()||await f.load()},l,o,i,e=>c.load(e[0])]}class Ac extends Xe{constructor(e){super(),Qe(this,e,Nc,Cc,x,{title:9})}}function jc(e,t,n){const r=e.slice();return r[8]=t[n],r[10]=n,r}function Rc(e){let t,n,r;return t=new at({props:{name:"user-cog"}}),n=new at({props:{name:"times"}}),{c(){Ye(t.$$.fragment),Ye(n.$$.fragment)},m(e,o){Ve(t,e,o),Ve(n,e,o),r=!0},p:v,i(e){r||(He(t.$$.fragment,e),He(n.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),ze(n.$$.fragment,e),r=!1},d(e){Je(t,e),Je(n,e)}}}function Tc(e){let t,n,r,o,i,a=e[3]("Notifications")+"";return o=new ei({props:{href:"/settings/account",class:"btn-hallow",$$slots:{default:[Rc]},$$scope:{ctx:e}}}),{c(){t=G("h1"),n=Y(a),r=V(),Ye(o.$$.fragment)},m(e,a){F(e,t,a),q(t,n),F(e,r,a),Ve(o,e,a),i=!0},p(e,t){(!i||8&t)&&a!==(a=e[3]("Notifications")+"")&&te(n,a);const r={};2048&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r)},i(e){i||(He(o.$$.fragment,e),i=!0)},o(e){ze(o.$$.fragment,e),i=!1},d(e){e&&W(t),e&&W(r),Je(o,e)}}}function Lc(e){let t,n,r=e[3]("No notifications.")+"";return{c(){t=G("h2"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("No notifications.")+"")&&te(n,r)},d(e){e&&W(t)}}}function Pc(e){let t,n,r,o,i,a,s,c=e[8].ts.getHumanDate()+"";return r=new at({props:{name:"calendar-alt"}}),{c(){t=G("div"),n=G("span"),Ye(r.$$.fragment),o=V(),i=G("i"),a=Y(c),X(t,"class","message__status-line for-day-changed")},m(e,c){F(e,t,c),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(i,a),s=!0},p(e,t){(!s||16&t)&&c!==(c=e[8].ts.getHumanDate()+"")&&te(a,c)},i(e){s||(He(r.$$.fragment,e),s=!0)},o(e){ze(r.$$.fragment,e),s=!1},d(e){e&&W(t),Je(r)}}}function Mc(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y=e[8].ts.toLocaleString()+"",b=e[3]("%1 in %2",e[8].from,e[8].conversation_id)+"",w=e[8].markdown+"",_=(!e[10]||e[8].dayChanged)&&Pc(e);return r=new at({props:{name:"pick:"+e[8].from,color:e[8].color}}),{c(){_&&_.c(),t=V(),n=G("div"),Ye(r.$$.fragment),o=V(),i=G("div"),a=G("div"),s=Y(y),l=V(),u=G("a"),d=Y(b),p=V(),m=G("div"),X(i,"class","message__ts has-tooltip"),X(i,"data-content",c=e[8].ts.format("%H:%M")),X(u,"href",f=sr(e[8])),X(u,"class","message__from"),re(u,"color",e[8].color),X(m,"class","message__text"),X(n,"class",h=e[8].className)},m(e,c){_&&_.m(e,c),F(e,t,c),F(e,n,c),Ve(r,n,null),q(n,o),q(n,i),q(i,a),q(a,s),q(n,l),q(n,u),q(u,d),q(n,p),q(n,m),m.innerHTML=w,g=!0,$||(v=Z(n,"click",cr),$=!0)},p(e,o){!e[10]||e[8].dayChanged?_?(_.p(e,o),16&o&&He(_,1)):(_=Pc(e),_.c(),He(_,1),_.m(t.parentNode,t)):_&&(Ue(),ze(_,1,1,(()=>{_=null})),Be());const a={};16&o&&(a.name="pick:"+e[8].from),16&o&&(a.color=e[8].color),r.$set(a),(!g||16&o)&&y!==(y=e[8].ts.toLocaleString()+"")&&te(s,y),(!g||16&o&&c!==(c=e[8].ts.format("%H:%M")))&&X(i,"data-content",c),(!g||24&o)&&b!==(b=e[3]("%1 in %2",e[8].from,e[8].conversation_id)+"")&&te(d,b),(!g||16&o&&f!==(f=sr(e[8])))&&X(u,"href",f),(!g||16&o)&&re(u,"color",e[8].color),(!g||16&o)&&w!==(w=e[8].markdown+"")&&(m.innerHTML=w),(!g||16&o&&h!==(h=e[8].className))&&X(n,"class",h)},i(e){g||(He(_),He(r.$$.fragment,e),g=!0)},o(e){ze(_),ze(r.$$.fragment,e),g=!1},d(e){_&&_.d(e),e&&W(t),e&&W(n),Je(r),$=!1,v()}}}function Dc(e){let t,n,r,o,i,a,s,c=e[3]("Loading...")+"";return r=new at({props:{name:"spinner",animation:"spin"}}),{c(){t=G("div"),n=G("span"),Ye(r.$$.fragment),o=V(),i=G("i"),a=Y(c),X(t,"class","message__status-line for-loading")},m(e,c){F(e,t,c),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(i,a),s=!0},p(e,t){(!s||8&t)&&c!==(c=e[3]("Loading...")+"")&&te(a,c)},i(e){s||(He(r.$$.fragment,e),s=!0)},o(e){ze(r.$$.fragment,e),s=!1},d(e){e&&W(t),Je(r)}}}function Ic(e){let t,n,r,o,i=0==e[4].length&&!e[5].is("loading"),a=e[1].is("loading"),s=i&&Lc(e),c=e[4].render(),l=[];for(let t=0;t<c.length;t+=1)l[t]=Mc(jc(e,c,t));const u=e=>ze(l[e],1,1,(()=>{l[e]=null}));let d=a&&Dc(e);return{c(){s&&s.c(),t=V();for(let e=0;e<l.length;e+=1)l[e].c();n=V(),d&&d.c(),r=J()},m(e,i){s&&s.m(e,i),F(e,t,i);for(let t=0;t<l.length;t+=1)l[t].m(e,i);F(e,n,i),d&&d.m(e,i),F(e,r,i),o=!0},p(e,o){if(16&o&&(i=0==e[4].length&&!e[5].is("loading")),i?s?s.p(e,o):(s=Lc(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),24&o){let t;for(c=e[4].render(),t=0;t<c.length;t+=1){const r=jc(e,c,t);l[t]?(l[t].p(r,o),He(l[t],1)):(l[t]=Mc(r),l[t].c(),He(l[t],1),l[t].m(n.parentNode,n))}for(Ue(),t=c.length;t<l.length;t+=1)u(t);Be()}2&o&&(a=e[1].is("loading")),a?d?(d.p(e,o),2&o&&He(d,1)):(d=Dc(e),d.c(),He(d,1),d.m(r.parentNode,r)):d&&(Ue(),ze(d,1,1,(()=>{d=null})),Be())},i(e){if(!o){for(let e=0;e<c.length;e+=1)He(l[e]);He(d),o=!0}},o(e){l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)ze(l[e]);ze(d),o=!1},d(e){s&&s.d(e),e&&W(t),K(l,e),e&&W(n),d&&d.d(e),e&&W(r)}}}function Uc(e){let t,n,r,o;return t=new fn({props:{$$slots:{default:[Tc]},$$scope:{ctx:e}}}),r=new Pi({props:{class:e[2].join(" "),$$slots:{default:[Ic]},$$scope:{ctx:e}}}),r.$on("rendered",Bc),{c(){Ye(t.$$.fragment),n=V(),Ye(r.$$.fragment)},m(e,i){Ve(t,e,i),F(e,n,i),Ve(r,e,i),o=!0},p(e,[n]){const o={};2056&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};4&n&&(i.class=e[2].join(" ")),2074&n&&(i.$$scope={dirty:n,ctx:e}),r.$set(i)},i(e){o||(He(t.$$.fragment,e),He(r.$$.fragment,e),o=!0)},o(e){ze(t.$$.fragment,e),ze(r.$$.fragment,e),o=!1},d(e){Je(t,e),e&&W(n),Je(r,e)}}}const Bc=e=>e.detail.scrollTo(-1);function Hc(e,t,n){let r,o,i,a,s,c=v;S(e,Jn,(e=>n(3,a=e))),e.$$.on_destroy.push((()=>c()));const l=ye("user"),u=l.notifications;return S(e,u,(e=>n(1,i=e))),$e((()=>l.markNotificationsRead())),ge((()=>u.load())),e.$$.update=()=>{2&e.$$.dirty&&(n(0,o=i.messages),c(),c=E(o,(e=>n(4,s=e)))),1&e.$$.dirty&&n(2,r=["main",o.length&&"has-results"].filter((e=>e)))},[o,i,r,a,s,u,"Notifications"]}class zc extends Xe{constructor(e){super(),Qe(this,e,Hc,Uc,x,{title:6})}get title(){return this.$$.ctx[6]}}function qc(e,t,n){const r=e.slice();return r[11]=t[n],r[13]=n,r}function Fc(e){let t,n,r=e[3](e[7].name)+"";return{c(){t=G("h1"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3](e[7].name)+"")&&te(n,r)},d(e){e&&W(t)}}}function Wc(e){let t,n,r,o,i;const a=[Gc,Kc],s=[];function c(e,n){return 32&n&&(t=!!e[5].param("q")),t?0:1}return n=c(e,-1),r=s[n]=a[n](e),{c(){r.c(),o=J()},m(e,t){s[n].m(e,t),F(e,o,t),i=!0},p(e,t){let i=n;n=c(e,t),n===i?s[n].p(e,t):(Ue(),ze(s[i],1,1,(()=>{s[i]=null})),Be(),r=s[n],r?r.p(e,t):(r=s[n]=a[n](e),r.c()),He(r,1),r.m(o.parentNode,o))},i(e){i||(He(r),i=!0)},o(e){ze(r),i=!1},d(e){s[n].d(e),e&&W(o)}}}function Kc(e){let t,n,r,o,i,a=e[6]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"";return n=new at({props:{name:"info-circle"}}),{c(){t=G("p"),Ye(n.$$.fragment),r=V(),o=new ce,o.a=null},m(e,s){F(e,t,s),Ve(n,t,null),q(t,r),o.m(a,t),i=!0},p(e,t){(!i||64&t)&&a!==(a=e[6]("You can enter a channel name like #cool_beans to narrow down the search, or enter @some_nick to filter messages sent by a given user.")+"")&&o.p(a)},i(e){i||(He(n.$$.fragment,e),i=!0)},o(e){ze(n.$$.fragment,e),i=!1},d(e){e&&W(t),Je(n)}}}function Gc(e){let t,n,r,o,i,a=e[3]('No search results for "%1".',e[5].param("q"))+"";return n=new at({props:{name:"info-circle"}}),{c(){t=G("p"),Ye(n.$$.fragment),r=V(),o=Y(a)},m(e,a){F(e,t,a),Ve(n,t,null),q(t,r),q(t,o),i=!0},p(e,t){(!i||40&t)&&a!==(a=e[3]('No search results for "%1".',e[5].param("q"))+"")&&te(o,a)},i(e){i||(He(n.$$.fragment,e),i=!0)},o(e){ze(n.$$.fragment,e),i=!1},d(e){e&&W(t),Je(n)}}}function Yc(e){let t,n,r,o,i,a,s,c=e[11].ts.getHumanDate()+"";return r=new at({props:{name:"calendar-alt"}}),{c(){t=G("div"),n=G("span"),Ye(r.$$.fragment),o=V(),i=G("i"),a=Y(c),X(t,"class","message__status-line for-day-changed")},m(e,c){F(e,t,c),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(i,a),s=!0},p(e,t){(!s||16&t)&&c!==(c=e[11].ts.getHumanDate()+"")&&te(a,c)},i(e){s||(He(r.$$.fragment,e),s=!0)},o(e){ze(r.$$.fragment,e),s=!1},d(e){e&&W(t),Je(r)}}}function Vc(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b=e[11].ts.toLocaleString()+"",w=e[3]("%1 in %2",e[11].from,e[11].conversation_id)+"",_=e[11].markdown+"",k=(!e[13]||e[11].dayChanged)&&Yc(e);return r=new at({props:{name:"pick:"+e[11].from,color:e[11].color}}),{c(){k&&k.c(),t=V(),n=G("div"),Ye(r.$$.fragment),o=V(),i=G("div"),a=G("div"),s=Y(b),l=V(),u=G("a"),d=Y(w),p=V(),m=G("div"),h=V(),X(i,"class","message__ts has-tooltip"),X(i,"data-content",c=e[11].ts.format("%H:%M")),X(u,"href",f=sr(e[11])),X(u,"class","message__from"),re(u,"color",e[11].color),X(m,"class","message__text"),X(n,"class",g=e[11].className)},m(e,c){k&&k.m(e,c),F(e,t,c),F(e,n,c),Ve(r,n,null),q(n,o),q(n,i),q(i,a),q(a,s),q(n,l),q(n,u),q(u,d),q(n,p),q(n,m),m.innerHTML=_,q(n,h),$=!0,v||(y=Z(n,"click",cr),v=!0)},p(e,o){!e[13]||e[11].dayChanged?k?(k.p(e,o),16&o&&He(k,1)):(k=Yc(e),k.c(),He(k,1),k.m(t.parentNode,t)):k&&(Ue(),ze(k,1,1,(()=>{k=null})),Be());const a={};16&o&&(a.name="pick:"+e[11].from),16&o&&(a.color=e[11].color),r.$set(a),(!$||16&o)&&b!==(b=e[11].ts.toLocaleString()+"")&&te(s,b),(!$||16&o&&c!==(c=e[11].ts.format("%H:%M")))&&X(i,"data-content",c),(!$||24&o)&&w!==(w=e[3]("%1 in %2",e[11].from,e[11].conversation_id)+"")&&te(d,w),(!$||16&o&&f!==(f=sr(e[11])))&&X(u,"href",f),(!$||16&o)&&re(u,"color",e[11].color),(!$||16&o)&&_!==(_=e[11].markdown+"")&&(m.innerHTML=_),(!$||16&o&&g!==(g=e[11].className))&&X(n,"class",g)},i(e){$||(He(k),He(r.$$.fragment,e),$=!0)},o(e){ze(k),ze(r.$$.fragment,e),$=!1},d(e){k&&k.d(e),e&&W(t),e&&W(n),Je(r),v=!1,y()}}}function Jc(e){let t,n,r,o,i,a,s,c=e[3]("Loading...")+"";return r=new at({props:{name:"spinner",animation:"spin"}}),{c(){t=G("div"),n=G("span"),Ye(r.$$.fragment),o=V(),i=G("i"),a=Y(c),X(t,"class","message__status-line for-loading")},m(e,c){F(e,t,c),q(t,n),Ve(r,n,null),q(n,o),q(n,i),q(i,a),s=!0},p(e,t){(!s||8&t)&&c!==(c=e[3]("Loading...")+"")&&te(a,c)},i(e){s||(He(r.$$.fragment,e),s=!0)},o(e){ze(r.$$.fragment,e),s=!1},d(e){e&&W(t),Je(r)}}}function Zc(e){let t,n,r,o,i=0==e[4].length&&!e[7].is("loading"),a=e[1].is("loading"),s=i&&Wc(e),c=e[4].render(),l=[];for(let t=0;t<c.length;t+=1)l[t]=Vc(qc(e,c,t));const u=e=>ze(l[e],1,1,(()=>{l[e]=null}));let d=a&&Jc(e);return{c(){s&&s.c(),t=V();for(let e=0;e<l.length;e+=1)l[e].c();n=V(),d&&d.c(),r=J()},m(e,i){s&&s.m(e,i),F(e,t,i);for(let t=0;t<l.length;t+=1)l[t].m(e,i);F(e,n,i),d&&d.m(e,i),F(e,r,i),o=!0},p(e,o){if(16&o&&(i=0==e[4].length&&!e[7].is("loading")),i?s?(s.p(e,o),16&o&&He(s,1)):(s=Wc(e),s.c(),He(s,1),s.m(t.parentNode,t)):s&&(Ue(),ze(s,1,1,(()=>{s=null})),Be()),24&o){let t;for(c=e[4].render(),t=0;t<c.length;t+=1){const r=qc(e,c,t);l[t]?(l[t].p(r,o),He(l[t],1)):(l[t]=Vc(r),l[t].c(),He(l[t],1),l[t].m(n.parentNode,n))}for(Ue(),t=c.length;t<l.length;t+=1)u(t);Be()}2&o&&(a=e[1].is("loading")),a?d?(d.p(e,o),2&o&&He(d,1)):(d=Jc(e),d.c(),He(d,1),d.m(r.parentNode,r)):d&&(Ue(),ze(d,1,1,(()=>{d=null})),Be())},i(e){if(!o){He(s);for(let e=0;e<c.length;e+=1)He(l[e]);He(d),o=!0}},o(e){ze(s),l=l.filter(Boolean);for(let e=0;e<l.length;e+=1)ze(l[e]);ze(d),o=!1},d(e){s&&s.d(e),e&&W(t),K(l,e),e&&W(n),d&&d.d(e),e&&W(r)}}}function Qc(e){let t,n,r,o,i,a,s=e[7].is("search");t=new fn({props:{$$slots:{default:[Fc]},$$scope:{ctx:e}}}),r=new Pi({props:{class:e[2].join(" "),$$slots:{default:[Zc]},$$scope:{ctx:e}}}),r.$on("rendered",Xc);let c=s&&function(e){let t,n;return t=new Nr({props:{conversation:e[7]}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p:v,i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}(e);return{c(){Ye(t.$$.fragment),n=V(),Ye(r.$$.fragment),o=V(),c&&c.c(),i=J()},m(e,s){Ve(t,e,s),F(e,n,s),Ve(r,e,s),F(e,o,s),c&&c.m(e,s),F(e,i,s),a=!0},p(e,[n]){const o={};16392&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};4&n&&(i.class=e[2].join(" ")),16506&n&&(i.$$scope={dirty:n,ctx:e}),r.$set(i),s&&c.p(e,n)},i(e){a||(He(t.$$.fragment,e),He(r.$$.fragment,e),He(c),a=!0)},o(e){ze(t.$$.fragment,e),ze(r.$$.fragment,e),ze(c),a=!1},d(e){Je(t,e),e&&W(n),Je(r,e),e&&W(o),c&&c.d(e),e&&W(i)}}}const Xc=e=>e.detail.scrollTo(-1);function el(e,t,n){let r,o,i,a,s,c,l,u=v;S(e,Jn,(e=>n(3,a=e))),S(e,Bn,(e=>n(5,c=e))),S(e,Zn,(e=>n(6,l=e))),e.$$.on_destroy.push((()=>u()));const d=ye("user"),f=d.search;function p(e){const t=e.message;return f.update({userInput:t}),Bn.go("/search?q="+encodeURIComponent(t),{replace:!0}),t?f.load({match:t}):o.clear()}return S(e,f,(e=>n(1,i=e))),ge((()=>d.search.on("send",p))),e.$$.update=()=>{2&e.$$.dirty&&(n(0,o=i.messages),u(),u=E(o,(e=>n(4,s=e)))),3&e.$$.dirty&&n(2,r=["main",o.length&&"has-results",i.is("search")&&"is-above-chat-input"].filter((e=>e)))},Bn.param("q")&&p({message:Bn.param("q")}),[o,i,r,a,s,c,l,f,"Search"]}class tl extends Xe{constructor(e){super(),Qe(this,e,el,Qc,x,{title:8})}get title(){return this.$$.ctx[8]}}function nl(e){let t,n,r=e[1]("Account")+"";return{c(){t=G("h1"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Account")+"")&&te(n,r)},d(e){e&&W(t)}}}function rl(e){let t,n,r=e[1]("Email")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Email")+"")&&te(n,r)},d(e){e&&W(t)}}}function ol(e){let t,n,r=e[1]("Notification keywords")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Notification keywords")+"")&&te(n,r)},d(e){e&&W(t)}}}function il(e){let t,n,r=e[1]("Enable notifications")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Enable notifications")+"")&&te(n,r)},d(e){e&&W(t)}}}function al(e){let t,n,r=e[1]("Ignore join/part messages")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Ignore join/part messages")+"")&&te(n,r)},d(e){e&&W(t)}}}function sl(e){let t,n,r=e[1]("Expand URL to media")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Expand URL to media")+"")&&te(n,r)},d(e){e&&W(t)}}}function cl(e){let t,n,r=e[1]("Theme")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Theme")+"")&&te(n,r)},d(e){e&&W(t)}}}function ll(e){let t,n,r=e[1]("Color scheme")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Color scheme")+"")&&te(n,r)},d(e){e&&W(t)}}}function ul(e){let t,n,r=e[1]("Enable compact message display")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Enable compact message display")+"")&&te(n,r)},d(e){e&&W(t)}}}function dl(e){let t,n,r,o,i,a=e[1]("Language")+"";return o=new at({props:{name:"globe"}}),{c(){t=G("span"),n=Y(a),r=V(),Ye(o.$$.fragment),X(t,"slot","label")},m(e,a){F(e,t,a),q(t,n),q(t,r),Ve(o,t,null),i=!0},p(e,t){(!i||2&t)&&a!==(a=e[1]("Language")+"")&&te(n,a)},i(e){i||(He(o.$$.fragment,e),i=!0)},o(e){ze(o.$$.fragment,e),i=!1},d(e){e&&W(t),Je(o)}}}function fl(e){let t,n,r=e[1]("Password")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Password")+"")&&te(n,r)},d(e){e&&W(t)}}}function pl(e){let t,n,r=e[1]("Repeat password")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Repeat password")+"")&&te(n,r)},d(e){e&&W(t)}}}function ml(e){let t,n,r=e[1]("Save settings")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Save settings")+"")&&te(n,r)},d(e){e&&W(t)}}}function hl(e){let t,n,r=e[1]("irc://")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("irc://")+"")&&te(n,r)},d(e){e&&W(t)}}}function gl(e){let t,n,r=e[1]("ircs://")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("ircs://")+"")&&te(n,r)},d(e){e&&W(t)}}}function $l(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,_,k,x,E,O,S,C,N,A,j,R,T,L,P,M,D,I=e[1]("Leave the password fields empty to keep the current password.")+"";t=new fn({props:{$$slots:{default:[nl]},$$scope:{ctx:e}}}),i=new ao({props:{type:"email",name:"email",form:e[4],readonly:!0,$$slots:{label:[rl]},$$scope:{ctx:e}}}),s=new ao({props:{name:"highlightKeywords",form:e[4],placeholder:e[1]("whatever, keywords"),$$slots:{label:[ol]},$$scope:{ctx:e}}}),l=new Lr({props:{name:"wantNotifications",form:e[4],$$slots:{label:[il]},$$scope:{ctx:e}}}),d=new Lr({props:{name:"ignoreStatuses",form:e[4],$$slots:{label:[al]},$$scope:{ctx:e}}}),p=new Lr({props:{name:"expandUrlToMedia",form:e[4],$$slots:{label:[sl]},$$scope:{ctx:e}}}),h=new Gr({props:{name:"activeTheme",form:e[4],options:e[6].themeOptions,$$slots:{label:[cl]},$$scope:{ctx:e}}}),$=new Gr({props:{name:"colorScheme",form:e[4],readonly:e[0],options:e[6].colorSchemeOptions,$$slots:{label:[ll]},$$scope:{ctx:e}}}),y=new Lr({props:{name:"compactDisplay",form:e[4],$$slots:{label:[ul]},$$scope:{ctx:e}}}),w=new Gr({props:{name:"lang",form:e[4],options:e[2].languageOptions,$$slots:{label:[dl]},$$scope:{ctx:e}}}),k=new ao({props:{type:"password",name:"password",form:e[4],autocomplete:"new-password",$$slots:{label:[fl]},$$scope:{ctx:e}}}),E=new ao({props:{type:"password",name:"password_again",form:e[4],autocomplete:"new-password",$$slots:{label:[pl]},$$scope:{ctx:e}}}),j=new en({props:{icon:"save",op:e[7],$$slots:{default:[ml]},$$scope:{ctx:e}}}),T=new Br({props:{op:e[7]}});let U=e[5]&&function(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y=e[1]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",e[1]("Convos"))+"",b=e[1]("If you do not see any popup, then it probably means %1 already handles the protocol.",e[1]("Convos"))+"",w=e[3]("Test it by clicking on %1.","irc://localhost:6667")+"",_=e[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"";return l=new Lr({props:{name:"handle_protocol_irc",form:e[4],$$slots:{label:[hl]},$$scope:{ctx:e}}}),p=new Lr({props:{name:"handle_protocol_ircs",form:e[4],$$slots:{label:[gl]},$$scope:{ctx:e}}}),{c(){t=G("form"),n=G("h2"),n.textContent="Protocol handlers",r=V(),o=G("p"),i=Y(y),a=V(),s=Y(b),c=V(),Ye(l.$$.fragment),u=V(),d=G("p"),f=V(),Ye(p.$$.fragment),m=V(),h=G("p"),X(d,"class","help"),X(h,"class","help")},m(y,b){F(y,t,b),q(t,n),q(t,r),q(t,o),q(o,i),q(o,a),q(o,s),q(t,c),Ve(l,t,null),q(t,u),q(t,d),d.innerHTML=w,q(t,f),Ve(p,t,null),q(t,m),q(t,h),h.innerHTML=_,g=!0,$||(v=Z(t,"submit",Q(e[12])),$=!0)},p(e,t){(!g||2&t)&&y!==(y=e[1]("Mark the protocols below that you want %1 to handle, and a popup should ask you for confirmation.",e[1]("Convos"))+"")&&te(i,y),(!g||2&t)&&b!==(b=e[1]("If you do not see any popup, then it probably means %1 already handles the protocol.",e[1]("Convos"))+"")&&te(s,b);const n={};65538&t&&(n.$$scope={dirty:t,ctx:e}),l.$set(n),(!g||8&t)&&w!==(w=e[3]("Test it by clicking on %1.","irc://localhost:6667")+"")&&(d.innerHTML=w);const r={};65538&t&&(r.$$scope={dirty:t,ctx:e}),p.$set(r),(!g||8&t)&&_!==(_=e[3]("Test it by clicking on %1.","ircs://irc.libera.chat:6697/%23convos")+"")&&(h.innerHTML=_)},i(e){g||(He(l.$$.fragment,e),He(p.$$.fragment,e),g=!0)},o(e){ze(l.$$.fragment,e),ze(p.$$.fragment,e),g=!1},d(e){e&&W(t),Je(l),Je(p),$=!1,v()}}}(e);return{c(){Ye(t.$$.fragment),n=V(),r=G("main"),o=G("form"),Ye(i.$$.fragment),a=V(),Ye(s.$$.fragment),c=V(),Ye(l.$$.fragment),u=V(),Ye(d.$$.fragment),f=V(),Ye(p.$$.fragment),m=V(),Ye(h.$$.fragment),g=V(),Ye($.$$.fragment),v=V(),Ye(y.$$.fragment),b=V(),Ye(w.$$.fragment),_=V(),Ye(k.$$.fragment),x=V(),Ye(E.$$.fragment),O=V(),S=G("p"),C=Y(I),N=V(),A=G("div"),Ye(j.$$.fragment),R=V(),Ye(T.$$.fragment),L=V(),U&&U.c(),X(A,"class","form-actions"),X(o,"method","post"),X(r,"class","main")},m(I,B){Ve(t,I,B),F(I,n,B),F(I,r,B),q(r,o),Ve(i,o,null),q(o,a),Ve(s,o,null),q(o,c),Ve(l,o,null),q(o,u),Ve(d,o,null),q(o,f),Ve(p,o,null),q(o,m),Ve(h,o,null),q(o,g),Ve($,o,null),q(o,v),Ve(y,o,null),q(o,b),Ve(w,o,null),q(o,_),Ve(k,o,null),q(o,x),Ve(E,o,null),q(o,O),q(o,S),q(S,C),q(o,N),q(o,A),Ve(j,A,null),q(o,R),Ve(T,o,null),q(r,L),U&&U.m(r,null),P=!0,M||(D=Z(o,"submit",Q(e[8])),M=!0)},p(e,[n]){const r={};65538&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r);const o={};65538&n&&(o.$$scope={dirty:n,ctx:e}),i.$set(o);const a={};2&n&&(a.placeholder=e[1]("whatever, keywords")),65538&n&&(a.$$scope={dirty:n,ctx:e}),s.$set(a);const c={};65538&n&&(c.$$scope={dirty:n,ctx:e}),l.$set(c);const u={};65538&n&&(u.$$scope={dirty:n,ctx:e}),d.$set(u);const f={};65538&n&&(f.$$scope={dirty:n,ctx:e}),p.$set(f);const m={};65538&n&&(m.$$scope={dirty:n,ctx:e}),h.$set(m);const g={};1&n&&(g.readonly=e[0]),65538&n&&(g.$$scope={dirty:n,ctx:e}),$.$set(g);const v={};65538&n&&(v.$$scope={dirty:n,ctx:e}),y.$set(v);const b={};4&n&&(b.options=e[2].languageOptions),65538&n&&(b.$$scope={dirty:n,ctx:e}),w.$set(b);const _={};65538&n&&(_.$$scope={dirty:n,ctx:e}),k.$set(_);const x={};65538&n&&(x.$$scope={dirty:n,ctx:e}),E.$set(x),(!P||2&n)&&I!==(I=e[1]("Leave the password fields empty to keep the current password.")+"")&&te(C,I);const O={};65538&n&&(O.$$scope={dirty:n,ctx:e}),j.$set(O),e[5]&&U.p(e,n)},i(e){P||(He(t.$$.fragment,e),He(i.$$.fragment,e),He(s.$$.fragment,e),He(l.$$.fragment,e),He(d.$$.fragment,e),He(p.$$.fragment,e),He(h.$$.fragment,e),He($.$$.fragment,e),He(y.$$.fragment,e),He(w.$$.fragment,e),He(k.$$.fragment,e),He(E.$$.fragment,e),He(j.$$.fragment,e),He(T.$$.fragment,e),He(U),P=!0)},o(e){ze(t.$$.fragment,e),ze(i.$$.fragment,e),ze(s.$$.fragment,e),ze(l.$$.fragment,e),ze(d.$$.fragment,e),ze(p.$$.fragment,e),ze(h.$$.fragment,e),ze($.$$.fragment,e),ze(y.$$.fragment,e),ze(w.$$.fragment,e),ze(k.$$.fragment,e),ze(E.$$.fragment,e),ze(j.$$.fragment,e),ze(T.$$.fragment,e),ze(U),P=!1},d(e){Je(t,e),e&&W(n),e&&W(r),Je(i),Je(s),Je(l),Je(d),Je(p),Je(h),Je($),Je(y),Je(w),Je(k),Je(E),Je(j),Je(T),U&&U.d(),M=!1,D()}}}function vl(e,t,n){let r,o,i,a,s,c;S(e,Jn,(e=>n(1,a=e))),S(e,Vn,(e=>n(2,s=e))),S(e,Zn,(e=>n(3,c=e)));const l=ye("api"),u=mo();S(e,u,(e=>n(11,i=e)));const d="registerProtocolHandler"in navigator,f=ye("themeManager");S(e,f,(e=>n(10,o=e)));const p=ye("user"),m=l("updateUser");function h(e){navigator.registerProtocolHandler(e,Bn.urlFor("/register?uri=%s"),a("Convos %1 handler",e))}return u.set({activeTheme:f.activeTheme,colorScheme:f.colorScheme,compactDisplay:f.compactDisplay,email:p.email,expandUrlToMedia:p.expandUrlToMedia,highlightKeywords:p.highlightKeywords.join(", "),ignoreStatuses:p.ignoreStatuses,lang:Vn.lang,wantNotifications:Ui.wantNotifications}),$e(Ui.on("update",((e,t)=>{(t.wantNotifications||t.desktopAccess)&&e.wantNotifications&&e.show(a("You have enabled notifications."))}))),e.$$.update=()=>{3072&e.$$.dirty&&n(0,r=!o.hasColorScheme(i.activeTheme)),2048&e.$$.dirty&&Vn.load(i.lang),2048&e.$$.dirty&&i.handle_protocol_irc&&h("irc"),2048&e.$$.dirty&&i.handle_protocol_ircs&&h("ircs")},[r,a,s,c,u,d,f,m,function(){const e=[i.password,i.password_again];if(e.join("").length&&e[0]!=e[1])return m.error("Passwords does not match.");i.wantNotifications&&Ui.requestDesktopAccess(),Ui.update(u.get(["wantNotifications"])),r&&u.set({colorScheme:"auto"}),f.update(u.get(["activeTheme","colorScheme","compactDisplay"]));const t=Dt(u.get("highlightKeywords")),n={email:p.email,highlight_keywords:t};e[0]&&(n.password=e[0]),p.update(u.get(["expandUrlToMedia","ignoreStatuses"])).update({highlightKeywords:t}),m.perform(n)},"Account",o,i,function(t){be.call(this,e,t)}]}class yl extends Xe{constructor(e){super(),Qe(this,e,vl,$l,x,{title:9})}get title(){return this.$$.ctx[9]}}function bl(e){let t,n,r=e[1]("Global settings")+"";return{c(){t=G("h1"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Global settings")+"")&&te(n,r)},d(e){e&&W(t)}}}function wl(e){let t,n,r=e[1]("Organization name")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Organization name")+"")&&te(n,r)},d(e){e&&W(t)}}}function _l(e){let t,n,r=e[1]("Can be changed if you want to add a touch of your organization.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Can be changed if you want to add a touch of your organization.")+"")&&te(n,r)},d(e){e&&W(t)}}}function kl(e){let t,n,r=e[1]("Organization URL")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Organization URL")+"")&&te(n,r)},d(e){e&&W(t)}}}function xl(e){let t,n,r=e[1]('Used together with "Organization name" to add a link to your organization on the login screen.')+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]('Used together with "Organization name" to add a link to your organization on the login screen.')+"")&&te(n,r)},d(e){e&&W(t)}}}function El(e){let t,n,r=e[1]("Admin email")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Admin email")+"")&&te(n,r)},d(e){e&&W(t)}}}function Ol(e){let t,n,r=e[1]("This email can be used by users to get in touch with the Convos admin.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("This email can be used by users to get in touch with the Convos admin.")+"")&&te(n,r)},d(e){e&&W(t)}}}function Sl(e){let t,n,r=e[1]("Video service")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Video service")+"")&&te(n,r)},d(e){e&&W(t)}}}function Cl(e){let t,n=e[2]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"";return{c(){t=G("p"),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),t.innerHTML=n},p(e,r){4&r&&n!==(n=e[2]("This should point to a [%1](%2) instance.","https://meet.jit.si/","https://github.com/jitsi/jitsi-meet")+"")&&(t.innerHTML=n)},d(e){e&&W(t)}}}function Nl(e){let t,n,r=e[1]("Registration is open to public")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Registration is open to public")+"")&&te(n,r)},d(e){e&&W(t)}}}function Al(e){let t,n,r=e[1]("Save settings")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){2&t&&r!==(r=e[1]("Save settings")+"")&&te(n,r)},d(e){e&&W(t)}}}function jl(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,_,k,x,E,O,S,C=e[1]("Disk usage")+"",N=e[0].blocks_pct+"",A=e[1]("Disk usage")+"",j=e[0].blocks_used+"",R=e[0].blocks_total+"",T=e[0].inodes_pct+"",L=e[1]("Inode usage")+"",P=e[0].inodes_used+"",M=e[0].inodes_total+"";return{c(){t=G("div"),n=G("h2"),r=Y(C),o=V(),i=G("div"),a=G("div"),s=Y(N),c=Y("%"),l=V(),u=G("p"),d=Y(A),f=Y(": "),p=Y(j),m=Y(" / "),h=Y(R),g=V(),$=G("div"),v=G("div"),y=Y(T),b=Y("%"),w=V(),_=G("p"),k=Y(L),x=Y(": "),E=Y(P),O=Y(" / "),S=Y(M),X(a,"class","progress__bar"),re(a,"width",e[0].blocks_pct+"%"),X(i,"class","progress"),X(u,"class","help"),X(v,"class","progress__bar"),re(v,"width",e[0].inodes_pct+"%"),X($,"class","progress"),X(_,"class","help"),X(t,"id","disk-usage")},m(e,C){F(e,t,C),q(t,n),q(n,r),q(t,o),q(t,i),q(i,a),q(a,s),q(a,c),q(t,l),q(t,u),q(u,d),q(u,f),q(u,p),q(u,m),q(u,h),q(t,g),q(t,$),q($,v),q(v,y),q(v,b),q(t,w),q(t,_),q(_,k),q(_,x),q(_,E),q(_,O),q(_,S)},p(e,t){2&t&&C!==(C=e[1]("Disk usage")+"")&&te(r,C),1&t&&N!==(N=e[0].blocks_pct+"")&&te(s,N),1&t&&re(a,"width",e[0].blocks_pct+"%"),2&t&&A!==(A=e[1]("Disk usage")+"")&&te(d,A),1&t&&j!==(j=e[0].blocks_used+"")&&te(p,j),1&t&&R!==(R=e[0].blocks_total+"")&&te(h,R),1&t&&T!==(T=e[0].inodes_pct+"")&&te(y,T),1&t&&re(v,"width",e[0].inodes_pct+"%"),2&t&&L!==(L=e[1]("Inode usage")+"")&&te(k,L),1&t&&P!==(P=e[0].inodes_used+"")&&te(E,P),1&t&&M!==(M=e[0].inodes_total+"")&&te(S,M)},d(e){e&&W(t)}}}function Rl(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,_,k,x,E,O,S,C,N,A,j=e[1]("Convos settings")+"",R=e[2]("These settings control what users experience when they visit [%1](%1).",Pt("base_url"))+"",T=e[1]("Tick this box if you want users to be able to register without an invite URL.")+"";t=new fn({props:{$$slots:{default:[bl]},$$scope:{ctx:e}}}),u=new ao({props:{name:"organization_name",form:e[3],$$slots:{help:[_l],label:[wl]},$$scope:{ctx:e}}}),f=new ao({props:{name:"organization_url",form:e[3],placeholder:e[1]("https://convos.chat"),$$slots:{help:[xl],label:[kl]},$$scope:{ctx:e}}}),m=new ao({props:{name:"contact",form:e[3],placeholder:e[1]("Ex: jhthorsen@cpan.org"),$$slots:{help:[Ol],label:[El]},$$scope:{ctx:e}}}),g=new ao({props:{name:"video_service",form:e[3],placeholder:e[1]("Ex: https://meet.jit.si/"),$$slots:{help:[Cl],label:[Sl]},$$scope:{ctx:e}}}),v=new Lr({props:{name:"open_to_public",form:e[3],$$slots:{label:[Nl]},$$scope:{ctx:e}}}),x=new en({props:{icon:"save",op:e[4],$$slots:{default:[Al]},$$scope:{ctx:e}}}),O=new Br({props:{op:e[4]}});let L=e[0]&&jl(e);return{c(){Ye(t.$$.fragment),n=V(),r=G("main"),o=G("form"),i=G("h2"),a=Y(j),s=V(),c=G("p"),l=V(),Ye(u.$$.fragment),d=V(),Ye(f.$$.fragment),p=V(),Ye(m.$$.fragment),h=V(),Ye(g.$$.fragment),$=V(),Ye(v.$$.fragment),y=V(),b=G("p"),w=Y(T),_=V(),k=G("div"),Ye(x.$$.fragment),E=V(),Ye(O.$$.fragment),S=V(),L&&L.c(),X(b,"class","help"),X(k,"class","form-actions"),X(o,"id","convos-settings"),X(o,"method","post"),X(r,"class","main")},m(j,T){Ve(t,j,T),F(j,n,T),F(j,r,T),q(r,o),q(o,i),q(i,a),q(o,s),q(o,c),c.innerHTML=R,q(o,l),Ve(u,o,null),q(o,d),Ve(f,o,null),q(o,p),Ve(m,o,null),q(o,h),Ve(g,o,null),q(o,$),Ve(v,o,null),q(o,y),q(o,b),q(b,w),q(o,_),q(o,k),Ve(x,k,null),q(o,E),Ve(O,o,null),q(r,S),L&&L.m(r,null),C=!0,N||(A=Z(o,"submit",Q(e[5])),N=!0)},p(e,[n]){const o={};2050&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),(!C||2&n)&&j!==(j=e[1]("Convos settings")+"")&&te(a,j),(!C||4&n)&&R!==(R=e[2]("These settings control what users experience when they visit [%1](%1).",Pt("base_url"))+"")&&(c.innerHTML=R);const i={};2050&n&&(i.$$scope={dirty:n,ctx:e}),u.$set(i);const s={};2&n&&(s.placeholder=e[1]("https://convos.chat")),2050&n&&(s.$$scope={dirty:n,ctx:e}),f.$set(s);const l={};2&n&&(l.placeholder=e[1]("Ex: jhthorsen@cpan.org")),2050&n&&(l.$$scope={dirty:n,ctx:e}),m.$set(l);const d={};2&n&&(d.placeholder=e[1]("Ex: https://meet.jit.si/")),2054&n&&(d.$$scope={dirty:n,ctx:e}),g.$set(d);const p={};2050&n&&(p.$$scope={dirty:n,ctx:e}),v.$set(p),(!C||2&n)&&T!==(T=e[1]("Tick this box if you want users to be able to register without an invite URL.")+"")&&te(w,T);const h={};2050&n&&(h.$$scope={dirty:n,ctx:e}),x.$set(h),e[0]?L?L.p(e,n):(L=jl(e),L.c(),L.m(r,null)):L&&(L.d(1),L=null)},i(e){C||(He(t.$$.fragment,e),He(u.$$.fragment,e),He(f.$$.fragment,e),He(m.$$.fragment,e),He(g.$$.fragment,e),He(v.$$.fragment,e),He(x.$$.fragment,e),He(O.$$.fragment,e),C=!0)},o(e){ze(t.$$.fragment,e),ze(u.$$.fragment,e),ze(f.$$.fragment,e),ze(m.$$.fragment,e),ze(g.$$.fragment,e),ze(v.$$.fragment,e),ze(x.$$.fragment,e),ze(O.$$.fragment,e),C=!1},d(e){Je(t,e),e&&W(n),e&&W(r),Je(u),Je(f),Je(m),Je(g),Je(v),Je(x),Je(O),L&&L.d(),N=!1,A()}}}function Tl(e,t,n){let r,o;S(e,Jn,(e=>n(1,r=e))),S(e,Zn,(e=>n(2,o=e)));const i=ye("api"),a=mo(),s=ye("user"),c=i("getSettings"),l=i("updateSettings");let u=null;return ge((async()=>{await c.perform();const e=c.res.body;n(0,u=function(e){if(!e)return null;const t=e.block_size||1024;return{blocks_pct:Math.ceil(e.blocks_used/e.blocks_total*100),blocks_total:Nt(t*e.blocks_total,"B"),blocks_used:Nt(t*e.blocks_used,"B"),inodes_pct:Math.ceil(e.inodes_used/e.inodes_total*100),inodes_total:Nt(e.inodes_total),inodes_used:Nt(e.inodes_used)}}(e.disk_usage)),delete e.disk_usage,e.contact=e.contact.replace(/mailto:/,""),a.set(e)})),[u,r,o,a,l,function(){const e=a.get();e.contact&&(e.contact="mailto:"+e.contact),Pt("contact",e.contact),Pt("open_to_public",e.open_to_public),Pt("organization_name",e.organization_name),Pt("organization_url",e.organization_url),s.update({videoService:e.video_service}),l.perform(e)},"Global settings"]}class Ll extends Xe{constructor(e){super(),Qe(this,e,Tl,Rl,x,{title:6})}get title(){return this.$$.ctx[6]}}function Pl(e,t,n){const r=e.slice();return r[15]=t[n],r}function Ml(e){let t,n,r;return t=new at({props:{name:"list"}}),n=new at({props:{name:"times"}}),{c(){Ye(t.$$.fragment),Ye(n.$$.fragment)},m(e,o){Ve(t,e,o),Ve(n,e,o),r=!0},p:v,i(e){r||(He(t.$$.fragment,e),He(n.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),ze(n.$$.fragment,e),r=!1},d(e){Je(t,e),Je(n,e)}}}function Dl(e){let t,n,r,o,i,a=e[3](e[1].uid?"Account":"Users")+"";return o=new ei({props:{href:"/settings/users",class:"btn-hallow "+(e[1].uid?"is-active":""),"data-tooltip":e[3]("See all users"),$$slots:{default:[Ml]},$$scope:{ctx:e}}}),{c(){t=G("h1"),n=Y(a),r=V(),Ye(o.$$.fragment)},m(e,a){F(e,t,a),q(t,n),F(e,r,a),Ve(o,e,a),i=!0},p(e,t){(!i||10&t)&&a!==(a=e[3](e[1].uid?"Account":"Users")+"")&&te(n,a);const r={};2&t&&(r.class="btn-hallow "+(e[1].uid?"is-active":"")),8&t&&(r["data-tooltip"]=e[3]("See all users")),16777216&t&&(r.$$scope={dirty:t,ctx:e}),o.$set(r)},i(e){i||(He(o.$$.fragment,e),i=!0)},o(e){ze(o.$$.fragment,e),i=!1},d(e){e&&W(t),e&&W(r),Je(o,e)}}}function Il(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,_,k,x,E,O,S,C,N,A,j,R,T,L,P,M,D,I,U=e[3]("Invite or recover password")+"",B=e[3]("Users")+"",H=e[0].length+"",z=e[3]("Email")+"",J=e[3]("Roles")+"",ee=e[3]("Registered")+"";i=new ao({props:{type:"email",name:"email",form:e[6],placeholder:e[3]("user@example.com"),$$slots:{help:[Hl],label:[Bl]},$$scope:{ctx:e}}});let ne=e[2].url&&zl(e);l=new en({props:{icon:"save",op:e[9],disabled:!e[1].email,$$slots:{default:[ql]},$$scope:{ctx:e}}}),d=new Br({props:{op:e[9],success:"Link generated."}}),L=new La({props:{colspan:"3",op:e[5]}});let re=e[0],oe=[];for(let t=0;t<re.length;t+=1)oe[t]=Fl(Pl(e,re,t));return{c(){t=G("form"),n=G("h2"),r=Y(U),o=V(),Ye(i.$$.fragment),a=V(),ne&&ne.c(),s=V(),c=G("div"),Ye(l.$$.fragment),u=V(),Ye(d.$$.fragment),f=V(),p=G("h2"),m=Y(B),h=V(),g=G("small"),$=Y("("),v=Y(H),y=Y(")"),b=V(),w=G("table"),_=G("thead"),k=G("tr"),x=G("th"),E=Y(z),O=V(),S=G("th"),C=Y(J),N=V(),A=G("th"),j=Y(ee),R=V(),T=G("tbody"),Ye(L.$$.fragment),P=V();for(let e=0;e<oe.length;e+=1)oe[e].c();X(c,"class","form-actions"),X(t,"id","invite"),X(t,"method","post")},m(U,B){F(U,t,B),q(t,n),q(n,r),q(t,o),Ve(i,t,null),q(t,a),ne&&ne.m(t,null),q(t,s),q(t,c),Ve(l,c,null),q(t,u),Ve(d,t,null),F(U,f,B),F(U,p,B),q(p,m),q(p,h),q(p,g),q(g,$),q(g,v),q(g,y),F(U,b,B),F(U,w,B),q(w,_),q(_,k),q(k,x),q(x,E),q(k,O),q(k,S),q(S,C),q(k,N),q(k,A),q(A,j),q(w,R),q(w,T),Ve(L,T,null),q(T,P);for(let e=0;e<oe.length;e+=1)oe[e].m(T,null);M=!0,D||(I=Z(t,"submit",Q(e[13])),D=!0)},p(e,n){(!M||8&n)&&U!==(U=e[3]("Invite or recover password")+"")&&te(r,U);const o={};8&n&&(o.placeholder=e[3]("user@example.com")),16777224&n&&(o.$$scope={dirty:n,ctx:e}),i.$set(o),e[2].url?ne?ne.p(e,n):(ne=zl(e),ne.c(),ne.m(t,s)):ne&&(ne.d(1),ne=null);const a={};2&n&&(a.disabled=!e[1].email),16777224&n&&(a.$$scope={dirty:n,ctx:e}),l.$set(a),(!M||8&n)&&B!==(B=e[3]("Users")+"")&&te(m,B),(!M||1&n)&&H!==(H=e[0].length+"")&&te(v,H),(!M||8&n)&&z!==(z=e[3]("Email")+"")&&te(E,z),(!M||8&n)&&J!==(J=e[3]("Roles")+"")&&te(C,J),(!M||8&n)&&ee!==(ee=e[3]("Registered")+"")&&te(j,ee);const c={};if(32&n&&(c.op=e[5]),L.$set(c),1&n){let t;for(re=e[0],t=0;t<re.length;t+=1){const r=Pl(e,re,t);oe[t]?oe[t].p(r,n):(oe[t]=Fl(r),oe[t].c(),oe[t].m(T,null))}for(;t<oe.length;t+=1)oe[t].d(1);oe.length=re.length}},i(e){M||(He(i.$$.fragment,e),He(l.$$.fragment,e),He(d.$$.fragment,e),He(L.$$.fragment,e),M=!0)},o(e){ze(i.$$.fragment,e),ze(l.$$.fragment,e),ze(d.$$.fragment,e),ze(L.$$.fragment,e),M=!1},d(e){e&&W(t),Je(i),ne&&ne.d(),Je(l),Je(d),e&&W(f),e&&W(p),e&&W(b),e&&W(w),Je(L),K(oe,e),D=!1,I()}}}function Ul(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,k,x,E,O,S,C,N,A,j=e[3]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"",R=e[4]("Please confirm by entering **%1** before hitting **%2**.",e[1].email,e[3]("Delete user"))+"";return n=new cc({props:{name:"uid",form:e[6]}}),o=new ao({props:{name:"email",form:e[6],readonly:!0,$$slots:{label:[Wl]},$$scope:{ctx:e}}}),a=new ao({props:{name:"roles",form:e[6],placeholder:e[3]("admin, bot, ..."),$$slots:{help:[Gl],label:[Kl]},$$scope:{ctx:e}}}),l=new en({props:{icon:"save",op:e[10],$$slots:{default:[Yl]},$$scope:{ctx:e}}}),d=new Br({props:{op:e[10]}}),w=new ao({props:{name:"confirm_email",form:e[6],$$slots:{label:[Vl]},$$scope:{ctx:e}}}),E=new en({props:{icon:"trash",op:e[7],disabled:e[1].confirm_email!=e[1].email,$$slots:{default:[Jl]},$$scope:{ctx:e}}}),S=new Br({props:{op:e[7],success:"Deleted."}}),{c(){t=G("form"),Ye(n.$$.fragment),r=V(),Ye(o.$$.fragment),i=V(),Ye(a.$$.fragment),s=V(),c=G("div"),Ye(l.$$.fragment),u=V(),Ye(d.$$.fragment),f=V(),p=G("h2"),p.textContent="Delete account",m=V(),h=G("form"),g=G("p"),$=Y(j),v=V(),y=new ce,b=V(),Ye(w.$$.fragment),k=V(),x=G("div"),Ye(E.$$.fragment),O=V(),Ye(S.$$.fragment),X(c,"class","form-actions"),X(t,"id","edit"),X(t,"method","post"),y.a=null,X(x,"class","form-actions"),X(h,"id","delete"),X(h,"method","post")},m(_,j){F(_,t,j),Ve(n,t,null),q(t,r),Ve(o,t,null),q(t,i),Ve(a,t,null),q(t,s),q(t,c),Ve(l,c,null),q(t,u),Ve(d,t,null),F(_,f,j),F(_,p,j),F(_,m,j),F(_,h,j),q(h,g),q(g,$),q(g,v),y.m(R,g),q(h,b),Ve(w,h,null),q(h,k),q(h,x),Ve(E,x,null),q(h,O),Ve(S,h,null),C=!0,N||(A=[Z(t,"submit",Q(e[14])),Z(h,"submit",Q(e[12]))],N=!0)},p(e,t){const n={};16777224&t&&(n.$$scope={dirty:t,ctx:e}),o.$set(n);const r={};8&t&&(r.placeholder=e[3]("admin, bot, ...")),16777224&t&&(r.$$scope={dirty:t,ctx:e}),a.$set(r);const i={};16777224&t&&(i.$$scope={dirty:t,ctx:e}),l.$set(i),(!C||8&t)&&j!==(j=e[3]("This will permanently remove user settings, chat logs, uploaded files and other user related data.")+"")&&te($,j),(!C||26&t)&&R!==(R=e[4]("Please confirm by entering **%1** before hitting **%2**.",e[1].email,e[3]("Delete user"))+"")&&y.p(R);const s={};16777224&t&&(s.$$scope={dirty:t,ctx:e}),w.$set(s);const c={};2&t&&(c.disabled=e[1].confirm_email!=e[1].email),16777224&t&&(c.$$scope={dirty:t,ctx:e}),E.$set(c)},i(e){C||(He(n.$$.fragment,e),He(o.$$.fragment,e),He(a.$$.fragment,e),He(l.$$.fragment,e),He(d.$$.fragment,e),He(w.$$.fragment,e),He(E.$$.fragment,e),He(S.$$.fragment,e),C=!0)},o(e){ze(n.$$.fragment,e),ze(o.$$.fragment,e),ze(a.$$.fragment,e),ze(l.$$.fragment,e),ze(d.$$.fragment,e),ze(w.$$.fragment,e),ze(E.$$.fragment,e),ze(S.$$.fragment,e),C=!1},d(e){e&&W(t),Je(n),Je(o),Je(a),Je(l),Je(d),e&&W(f),e&&W(p),e&&W(m),e&&W(h),Je(w),Je(E),Je(S),N=!1,_(A)}}}function Bl(e){let t,n,r=e[3]("User email")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("User email")+"")&&te(n,r)},d(e){e&&W(t)}}}function Hl(e){let t,n,r=e[3]("Using this form, you can generate a forgotten password or invite link for a user.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Using this form, you can generate a forgotten password or invite link for a user.")+"")&&te(n,r)},d(e){e&&W(t)}}}function zl(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v=e[3]("A link was generated")+"",y=e[4](e[2].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"",b=e[4]("The link is valid until **%1**.",new Date(e[2].expires).toLocaleString())+"",w=e[2].url+"",_=e[3]("Tip: Clicking on the link will copy it to your clipboard.")+"";return{c(){t=G("h3"),n=Y(v),r=V(),o=G("p"),i=new ce,a=V(),s=new ce,c=V(),l=G("a"),u=Y(w),f=V(),p=G("p"),m=G("small"),h=Y(_),i.a=a,s.a=null,X(l,"href",d=e[2].url)},m(d,v){F(d,t,v),q(t,n),F(d,r,v),F(d,o,v),i.m(y,o),q(o,a),s.m(b,o),F(d,c,v),F(d,l,v),q(l,u),F(d,f,v),F(d,p,v),q(p,m),q(m,h),g||($=Z(l,"click",Q(e[11])),g=!0)},p(e,t){8&t&&v!==(v=e[3]("A link was generated")+"")&&te(n,v),20&t&&y!==(y=e[4](e[2].existing?"Copy and send the link to your *existing* user.":"Copy and send the link to your *new* user.")+"")&&i.p(y),20&t&&b!==(b=e[4]("The link is valid until **%1**.",new Date(e[2].expires).toLocaleString())+"")&&s.p(b),4&t&&w!==(w=e[2].url+"")&&te(u,w),4&t&&d!==(d=e[2].url)&&X(l,"href",d),8&t&&_!==(_=e[3]("Tip: Clicking on the link will copy it to your clipboard.")+"")&&te(h,_)},d(e){e&&W(t),e&&W(r),e&&W(o),e&&W(c),e&&W(l),e&&W(f),e&&W(p),g=!1,$()}}}function ql(e){let t,n,r=e[3]("Generate link")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Generate link")+"")&&te(n,r)},d(e){e&&W(t)}}}function Fl(e){let t,n,r,o,i,a,s,c,l,u,d,f,p=e[15].email+"",m=e[15].roles.join(", ")+"",h=new Zt(e[15].registered).getHumanDate({year:!0})+"";return{c(){t=G("tr"),n=G("td"),r=G("a"),o=Y(p),a=V(),s=G("td"),c=Y(m),l=V(),u=G("td"),d=Y(h),f=V(),X(r,"href",i="#"+e[15].uid)},m(e,i){F(e,t,i),q(t,n),q(n,r),q(r,o),q(t,a),q(t,s),q(s,c),q(t,l),q(t,u),q(u,d),q(t,f)},p(e,t){1&t&&p!==(p=e[15].email+"")&&te(o,p),1&t&&i!==(i="#"+e[15].uid)&&X(r,"href",i),1&t&&m!==(m=e[15].roles.join(", ")+"")&&te(c,m),1&t&&h!==(h=new Zt(e[15].registered).getHumanDate({year:!0})+"")&&te(d,h)},d(e){e&&W(t)}}}function Wl(e){let t,n,r=e[3]("Email")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Email")+"")&&te(n,r)},d(e){e&&W(t)}}}function Kl(e){let t,n,r=e[3]("Roles")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Roles")+"")&&te(n,r)},d(e){e&&W(t)}}}function Gl(e){let t,n,r=e[3]("Roles must be separated by comma.")+"";return{c(){t=G("p"),n=Y(r),X(t,"class","help"),X(t,"slot","help")},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Roles must be separated by comma.")+"")&&te(n,r)},d(e){e&&W(t)}}}function Yl(e){let t,n,r=e[3]("Save user")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Save user")+"")&&te(n,r)},d(e){e&&W(t)}}}function Vl(e){let t,n,r=e[3]("Confirm email")+"";return{c(){t=G("span"),n=Y(r),X(t,"slot","label")},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Confirm email")+"")&&te(n,r)},d(e){e&&W(t)}}}function Jl(e){let t,n,r=e[3]("Delete user")+"";return{c(){t=G("span"),n=Y(r)},m(e,r){F(e,t,r),q(t,n)},p(e,t){8&t&&r!==(r=e[3]("Delete user")+"")&&te(n,r)},d(e){e&&W(t)}}}function Zl(e){let t,n,r,o,i,a;t=new fn({props:{$$slots:{default:[Dl]},$$scope:{ctx:e}}});const s=[Ul,Il],c=[];function l(e,t){return e[1].uid?0:1}return o=l(e),i=c[o]=s[o](e),{c(){Ye(t.$$.fragment),n=V(),r=G("main"),i.c(),X(r,"class","main")},m(e,i){Ve(t,e,i),F(e,n,i),F(e,r,i),c[o].m(r,null),a=!0},p(e,[n]){const a={};16777226&n&&(a.$$scope={dirty:n,ctx:e}),t.$set(a);let u=o;o=l(e),o===u?c[o].p(e,n):(Ue(),ze(c[u],1,1,(()=>{c[u]=null})),Be(),i=c[o],i?i.p(e,n):(i=c[o]=s[o](e),i.c()),He(i,1),i.m(r,null))},i(e){a||(He(t.$$.fragment,e),He(i),a=!0)},o(e){ze(t.$$.fragment,e),ze(i),a=!1},d(e){Je(t,e),e&&W(n),e&&W(r),c[o].d()}}}function Ql(e,t,n){let r,o,i,a,s,c,l;S(e,Bn,(e=>n(17,o=e))),S(e,Jn,(e=>n(3,s=e))),S(e,Zn,(e=>n(4,c=e)));let{title:u="Users"}=t;const d=ye("api"),f=mo();S(e,f,(e=>n(1,a=e)));const p=ye("user"),m=d("deleteUser"),h=d("getUsers");S(e,h,(e=>n(5,l=e)));const g=d("inviteUser");S(e,g,(e=>n(18,i=e)));const $=d("updateUser");let v=[];async function y(){await h.perform(),n(0,v=h.res.body.users||[]),h.reset()}return ge(y),e.$$set=e=>{"title"in e&&n(16,u=e.title)},e.$$.update=()=>{131073&e.$$.dirty&&function(e,t){const n=e.hash,r=n&&t.filter((e=>e.uid==n))[0];if(!r)return f.set({confirm_email:"",uid:""});f.set({confirm_email:""}).set(r)}(o,v),262144&e.$$.dirty&&n(2,r=i.res.body||{}),2&e.$$.dirty&&n(16,u=a.uid?a.email:"Users")},[v,a,r,s,c,l,f,m,h,g,$,function(e){const t=function(e){var t=document.createElement("textarea");t.value=e.textContent||e.value,t.style.opacity=0,t.style.position="absolute",document.body.appendChild(t);try{t.focus(),t.select(),document.execCommand("copy")}catch(e){t.value="",yt.error("copyToClipboard() failed:",e)}return document.body.removeChild(t),t.value}(e.target);t&&Ui.showInApp(t,{title:s("Invite link copied")})},async function(){m.reset(),$.reset(),f.get("confirm_email")==f.get("email")&&(await m.perform(f.get()),m.is("success")&&(y(),Bn.go("/settings/users",{replace:!0})))},function(){g.perform(f.get(["email"]))},function(){m.reset(),$.perform({email:f.get("email"),roles:Dt(f.get("roles"))})},p,u,o,i]}class Xl extends Xe{constructor(e){super(),Qe(this,e,Ql,Zl,x,{title:16})}}function eu(e,t,n){const r=e.slice();return r[23]=t[n],r}function tu(e,t,n){const r=e.slice();return r[26]=t[n],r}function nu(e){let t,n,r,o,i,a,s=ku(e[8])+"";return t=new at({props:{family:"regular",name:"bell"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("small"),o=Y(s),X(r,"class","badge is-important"),r.hidden=i=!e[8].unread},m(e,i){Ve(t,e,i),F(e,n,i),F(e,r,i),q(r,o),a=!0},p(e,t){(!a||256&t)&&s!==(s=ku(e[8])+"")&&te(o,s),(!a||256&t&&i!==(i=!e[8].unread))&&(r.hidden=i)},i(e){a||(He(t.$$.fragment,e),a=!0)},o(e){ze(t.$$.fragment,e),a=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function ru(e){let t,n;return t=new ei({props:{href:"/settings/connections",$$slots:{default:[ou]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};536871040&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function ou(e){let t,n,r,o,i,a=e[7]("No conversations")+"";return t=new at({props:{name:"exclamation-circle"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("No conversations")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function iu(e){let t,n,r,o,i,a,s,c,l,u=(e[23].name||e[23].connection_id)+"",d=ku(e[23])+"";return t=new at({props:{name:"network-wired"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(u),i=V(),a=G("b"),s=Y(d),X(a,"class","badge"),a.hidden=c=!e[23].unread},m(e,c){Ve(t,e,c),F(e,n,c),F(e,r,c),q(r,o),F(e,i,c),F(e,a,c),q(a,s),l=!0},p(e,t){(!l||8&t)&&u!==(u=(e[23].name||e[23].connection_id)+"")&&te(o,u),(!l||8&t)&&d!==(d=ku(e[23])+"")&&te(s,d),(!l||8&t&&c!==(c=!e[23].unread))&&(a.hidden=c)},i(e){l||(He(t.$$.fragment,e),l=!0)},o(e){ze(t.$$.fragment,e),l=!1},d(e){Je(t,e),e&&W(n),e&&W(r),e&&W(i),e&&W(a)}}}function au(e){let t,n;return t=new at({props:{name:e[26].is("private")?"user":"user-friends"}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.name=e[26].is("private")?"user":"user-friends"),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function su(e){let t,n;return t=new at({props:{name:"exclamation-triangle"}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p:v,i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function cu(e){let t,n,r,o,i,a,s,c,l,u,d,f=e[26].name+"",p=ku(e[26])+"";const m=[su,au],h=[];function g(e,n){return 8&n&&(t=!(!e[26].frozen||e[26].is("private"))),t?0:1}return n=g(e,-1),r=h[n]=m[n](e),{c(){r.c(),o=V(),i=G("span"),a=Y(f),s=V(),c=G("b"),l=Y(p),X(c,"class","badge"),c.hidden=u=!e[26].unread},m(e,t){h[n].m(e,t),F(e,o,t),F(e,i,t),q(i,a),F(e,s,t),F(e,c,t),q(c,l),d=!0},p(e,t){let i=n;n=g(e,t),n===i?h[n].p(e,t):(Ue(),ze(h[i],1,1,(()=>{h[i]=null})),Be(),r=h[n],r?r.p(e,t):(r=h[n]=m[n](e),r.c()),He(r,1),r.m(o.parentNode,o)),(!d||8&t)&&f!==(f=e[26].name+"")&&te(a,f),(!d||8&t)&&p!==(p=ku(e[26])+"")&&te(l,p),(!d||8&t&&u!==(u=!e[26].unread))&&(c.hidden=u)},i(e){d||(He(r),d=!0)},o(e){ze(r),d=!1},d(e){h[n].d(e),e&&W(o),e&&W(i),e&&W(s),e&&W(c)}}}function lu(e){let t,n;return t=new ei({props:{href:e[26].path,class:_u(e[23],e[26]),$$slots:{default:[cu]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};8&n&&(r.href=e[26].path),8&n&&(r.class=_u(e[23],e[26])),536870920&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function uu(e){let t,n,r,o;t=new ei({props:{href:e[23].path,class:_u(e[23],e[23]),$$slots:{default:[iu]},$$scope:{ctx:e}}});let i=e[23].conversations.toArray(),a=[];for(let t=0;t<i.length;t+=1)a[t]=lu(tu(e,i,t));const s=e=>ze(a[e],1,1,(()=>{a[e]=null}));return{c(){Ye(t.$$.fragment),n=V();for(let e=0;e<a.length;e+=1)a[e].c();r=J()},m(e,i){Ve(t,e,i),F(e,n,i);for(let t=0;t<a.length;t+=1)a[t].m(e,i);F(e,r,i),o=!0},p(e,n){const o={};if(8&n&&(o.href=e[23].path),8&n&&(o.class=_u(e[23],e[23])),536870920&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o),8&n){let t;for(i=e[23].conversations.toArray(),t=0;t<i.length;t+=1){const o=tu(e,i,t);a[t]?(a[t].p(o,n),He(a[t],1)):(a[t]=lu(o),a[t].c(),He(a[t],1),a[t].m(r.parentNode,r))}for(Ue(),t=i.length;t<a.length;t+=1)s(t);Be()}},i(e){if(!o){He(t.$$.fragment,e);for(let e=0;e<i.length;e+=1)He(a[e]);o=!0}},o(e){ze(t.$$.fragment,e),a=a.filter(Boolean);for(let e=0;e<a.length;e+=1)ze(a[e]);o=!1},d(e){Je(t,e),e&&W(n),K(a,e),e&&W(r)}}}function du(e){let t,n,r,o,i,a,s,c,l,u=e[7]("Notifications")+"",d=ku(e[8])+"";return t=new at({props:{name:"bell"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(u),i=V(),a=G("b"),s=Y(d),X(a,"class","badge"),a.hidden=c=!e[8].unread},m(e,c){Ve(t,e,c),F(e,n,c),F(e,r,c),q(r,o),F(e,i,c),F(e,a,c),q(a,s),l=!0},p(e,t){(!l||128&t)&&u!==(u=e[7]("Notifications")+"")&&te(o,u),(!l||256&t)&&d!==(d=ku(e[8])+"")&&te(s,d),(!l||256&t&&c!==(c=!e[8].unread))&&(a.hidden=c)},i(e){l||(He(t.$$.fragment,e),l=!0)},o(e){ze(t.$$.fragment,e),l=!1},d(e){Je(t,e),e&&W(n),e&&W(r),e&&W(i),e&&W(a)}}}function fu(e){let t,n,r,o,i,a=e[7]("Search")+"";return t=new at({props:{name:"search"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Search")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function pu(e){let t,n,r,o,i,a=e[7]("Add conversation")+"";return t=new at({props:{name:"comment"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Add conversation")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function mu(e){let t,n,r,o,i,a=e[7]("Connections")+"";return t=new at({props:{name:"network-wired"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Connections")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function hu(e){let t,n,r,o,i,a=e[7]("Account")+"";return t=new at({props:{name:"user-cog"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Account")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function gu(e){let t,n,r,o,i,a=e[7]("Help")+"";return t=new at({props:{name:"question-circle"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Help")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function $u(e){let t,n,r,o;return t=new ei({props:{href:"/settings",$$slots:{default:[vu]},$$scope:{ctx:e}}}),r=new ei({props:{href:"/settings/users",$$slots:{default:[yu]},$$scope:{ctx:e}}}),{c(){Ye(t.$$.fragment),n=V(),Ye(r.$$.fragment)},m(e,i){Ve(t,e,i),F(e,n,i),Ve(r,e,i),o=!0},p(e,n){const o={};536871040&n&&(o.$$scope={dirty:n,ctx:e}),t.$set(o);const i={};536871040&n&&(i.$$scope={dirty:n,ctx:e}),r.$set(i)},i(e){o||(He(t.$$.fragment,e),He(r.$$.fragment,e),o=!0)},o(e){ze(t.$$.fragment,e),ze(r.$$.fragment,e),o=!1},d(e){Je(t,e),e&&W(n),Je(r,e)}}}function vu(e){let t,n,r,o,i,a=e[7]("Settings")+"";return t=new at({props:{name:"tools"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Settings")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function yu(e){let t,n,r,o,i,a=e[7]("Users")+"";return t=new at({props:{name:"users"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||128&t)&&a!==(a=e[7]("Users")+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function bu(e){let t,n,r,o,i,a=e[7]('Search for "%1"',e[6])+"";return t=new at({props:{name:"search"}}),{c(){Ye(t.$$.fragment),n=V(),r=G("span"),o=Y(a)},m(e,a){Ve(t,e,a),F(e,n,a),F(e,r,a),q(r,o),i=!0},p(e,t){(!i||192&t)&&a!==(a=e[7]('Search for "%1"',e[6])+"")&&te(o,a)},i(e){i||(He(t.$$.fragment,e),i=!0)},o(e){ze(t.$$.fragment,e),i=!1},d(e){Je(t,e),e&&W(n),e&&W(r)}}}function wu(e){let t,n,r,o,i,a,s,c,l,u,d,f,p,m,h,g,$,v,y,b,w,k,x,E,O,S,C,N,A,j,R,T,L,P,M,D,I,U,B,H,z,J,Q,ee,re=e[7]("Conversations")+"",oe=(e[3].email||e[7]("Account"))+"",ae=e[3].is("admin"),se=e[7]("Log out")+"";c=new at({props:{name:"search"}}),u=new ei({props:{href:"/chat",class:"btn-hallow for-notifications",$$slots:{default:[nu]},$$scope:{ctx:e}}});let ce=!e[3].connections.size&&ru(e),le=e[3].connections.toArray(),ue=[];for(let t=0;t<le.length;t+=1)ue[t]=uu(eu(e,le,t));const de=e=>ze(ue[e],1,1,(()=>{ue[e]=null}));w=new ei({props:{href:"/chat",$$slots:{default:[du]},$$scope:{ctx:e}}}),x=new ei({props:{href:"/search",$$slots:{default:[fu]},$$scope:{ctx:e}}}),O=new ei({props:{href:e[5],$$slots:{default:[pu]},$$scope:{ctx:e}}}),C=new ei({props:{href:"/settings/connections",$$slots:{default:[mu]},$$scope:{ctx:e}}}),A=new ei({props:{href:"/settings/account",$$slots:{default:[hu]},$$scope:{ctx:e}}}),R=new ei({props:{href:"/help",$$slots:{default:[gu]},$$scope:{ctx:e}}});let fe=ae&&$u(e);return M=new at({props:{name:"power-off"}}),H=new ei({props:{href:"/search?q="+encodeURIComponent(e[6]),class:"for-search hidden",$$slots:{default:[bu]},$$scope:{ctx:e}}}),{c(){t=G("div"),n=G("div"),r=G("form"),o=G("input"),a=V(),s=G("label"),Ye(c.$$.fragment),l=V(),Ye(u.$$.fragment),d=V(),f=G("nav"),p=G("h3"),m=Y(re),h=V(),ce&&ce.c(),g=V();for(let e=0;e<ue.length;e+=1)ue[e].c();$=V(),v=G("h3"),y=Y(oe),b=V(),Ye(w.$$.fragment),k=V(),Ye(x.$$.fragment),E=V(),Ye(O.$$.fragment),S=V(),Ye(C.$$.fragment),N=V(),Ye(A.$$.fragment),j=V(),Ye(R.$$.fragment),T=V(),fe&&fe.c(),L=V(),P=G("a"),Ye(M.$$.fragment),D=V(),I=G("span"),U=Y(se),B=V(),Ye(H.$$.fragment),X(o,"type","text"),X(o,"id","search_input"),X(o,"class","is-primary-menu-item"),X(o,"placeholder",i=e[4]?e[7]("Search..."):e[7]("Convos")),X(s,"for","search_input"),X(s,"class","btn-hallow"),X(r,"class","sidebar-header"),ie(r,"has-focus",e[4]),X(n,"class","sidebar-header__wrapper"),X(P,"href",Bn.urlFor("/logout")),X(P,"target","_self"),X(f,"class","sidebar-left__nav"),ie(f,"is-filtering",e[1].length>0),X(t,"class","sidebar-left")},m(i,_){F(i,t,_),q(t,n),q(n,r),q(r,o),ne(o,e[1]),q(r,a),q(r,s),Ve(c,s,null),q(r,l),Ve(u,r,null),q(t,d),q(t,f),q(f,p),q(p,m),q(f,h),ce&&ce.m(f,null),q(f,g);for(let e=0;e<ue.length;e+=1)ue[e].m(f,null);q(f,$),q(f,v),q(v,y),q(f,b),Ve(w,f,null),q(f,k),Ve(x,f,null),q(f,E),Ve(O,f,null),q(f,S),Ve(C,f,null),q(f,N),Ve(A,f,null),q(f,j),Ve(R,f,null),q(f,T),fe&&fe.m(f,null),q(f,L),q(f,P),Ve(M,P,null),q(P,D),q(P,I),q(I,U),q(f,B),Ve(H,f,null),e[19](f),J=!0,Q||(ee=[Z(o,"input",e[18]),Z(o,"blur",e[11]),Z(o,"focus",e[12]),Z(o,"keydown",e[14]),Z(r,"submit",xu),Z(f,"click",e[13])],Q=!0)},p(t,[n]){e=t,(!J||144&n&&i!==(i=e[4]?e[7]("Search..."):e[7]("Convos")))&&X(o,"placeholder",i),2&n&&o.value!==e[1]&&ne(o,e[1]);const a={};if(536871168&n&&(a.$$scope={dirty:n,ctx:e}),u.$set(a),16&n&&ie(r,"has-focus",e[4]),(!J||128&n)&&re!==(re=e[7]("Conversations")+"")&&te(m,re),e[3].connections.size?ce&&(Ue(),ze(ce,1,1,(()=>{ce=null})),Be()):ce?(ce.p(e,n),8&n&&He(ce,1)):(ce=ru(e),ce.c(),He(ce,1),ce.m(f,g)),8&n){let t;for(le=e[3].connections.toArray(),t=0;t<le.length;t+=1){const r=eu(e,le,t);ue[t]?(ue[t].p(r,n),He(ue[t],1)):(ue[t]=uu(r),ue[t].c(),He(ue[t],1),ue[t].m(f,$))}for(Ue(),t=le.length;t<ue.length;t+=1)de(t);Be()}(!J||136&n)&&oe!==(oe=(e[3].email||e[7]("Account"))+"")&&te(y,oe);const s={};536871296&n&&(s.$$scope={dirty:n,ctx:e}),w.$set(s);const c={};536871040&n&&(c.$$scope={dirty:n,ctx:e}),x.$set(c);const l={};32&n&&(l.href=e[5]),536871040&n&&(l.$$scope={dirty:n,ctx:e}),O.$set(l);const d={};536871040&n&&(d.$$scope={dirty:n,ctx:e}),C.$set(d);const p={};536871040&n&&(p.$$scope={dirty:n,ctx:e}),A.$set(p);const h={};536871040&n&&(h.$$scope={dirty:n,ctx:e}),R.$set(h),8&n&&(ae=e[3].is("admin")),ae?fe?(fe.p(e,n),8&n&&He(fe,1)):(fe=$u(e),fe.c(),He(fe,1),fe.m(f,L)):fe&&(Ue(),ze(fe,1,1,(()=>{fe=null})),Be()),(!J||128&n)&&se!==(se=e[7]("Log out")+"")&&te(U,se);const v={};64&n&&(v.href="/search?q="+encodeURIComponent(e[6])),536871104&n&&(v.$$scope={dirty:n,ctx:e}),H.$set(v),2&n&&ie(f,"is-filtering",e[1].length>0)},i(n){if(!J){He(c.$$.fragment,n),He(u.$$.fragment,n),He(ce);for(let e=0;e<le.length;e+=1)He(ue[e]);He(w.$$.fragment,n),He(x.$$.fragment,n),He(O.$$.fragment,n),He(C.$$.fragment,n),He(A.$$.fragment,n),He(R.$$.fragment,n),He(fe),He(M.$$.fragment,n),He(H.$$.fragment,n),Ne((()=>{z||(z=Fe(t,vr,e[0],!0)),z.run(1)})),J=!0}},o(n){ze(c.$$.fragment,n),ze(u.$$.fragment,n),ze(ce),ue=ue.filter(Boolean);for(let e=0;e<ue.length;e+=1)ze(ue[e]);ze(w.$$.fragment,n),ze(x.$$.fragment,n),ze(O.$$.fragment,n),ze(C.$$.fragment,n),ze(A.$$.fragment,n),ze(R.$$.fragment,n),ze(fe),ze(M.$$.fragment,n),ze(H.$$.fragment,n),z||(z=Fe(t,vr,e[0],!1)),z.run(0),J=!1},d(n){n&&W(t),Je(c),Je(u),ce&&ce.d(),K(ue,n),Je(w),Je(x),Je(O),Je(C),Je(A),Je(R),fe&&fe.d(),Je(M),Je(H),e[19](null),n&&z&&z.end(),Q=!1,_(ee)}}}function _u(e,t){const n=[t.conversation_id?"for-conversation":"for-connection"];return(t.frozen||"connected"!=e.state)&&n.push("is-frozen"),t.errors&&n.push("has-errors"),n.join(" ")}function ku(e,t=60){return e.unread>t?t+"+":e.unread||0}const xu=e=>e.preventDefault();function Eu(e,t,n){let r,o,i,a,s,c,l;S(e,Bn,(e=>n(17,a=e))),S(e,an,(e=>n(20,s=e))),S(e,Jn,(e=>n(7,c=e)));let{transition:u}=t;const d=ye("user");S(e,d,(e=>n(3,i=e)));const f=d.notifications;S(e,f,(e=>n(8,l=e)));let p,m=0,h="",g=!1,$=[];function v(){Tt(p,"a",(e=>e.classList.remove("has-focus"))),setTimeout((()=>{if(!p)return;n(1,h="");const e=document.activeElement;e&&Et(e,p)&&Tt(p,"a.has-path",(e=>e.focus()))}),100)}return e.$$set=e=>{"transition"in e&&n(0,u=e.transition)},e.$$.update=()=>{2&e.$$.dirty&&function(){if(!p)return;n(15,m=0),n(16,$=[]);const e=[h.match(/^\W+/)?"":"\\b\\W*"];e[0]&&e.push("");for(let t=0;t<e.length;t++){const r="+"==h?new RegExp(/[1-9]\d*\+?\s*$/):"+@"==h?new RegExp(/^\s*\w.*[1-9]\d*\+?\s*$/):"+#"==h?new RegExp(/^\s*#.*[1-9]\d*\+?\s*$/):new RegExp(e[t]+Lt(h),"i"),o={};if(Tt(p,"a",((e,t)=>{const i=e.classList;!h.length&&i.contains("has-path")&&n(15,m=t),i.remove("has-focus");const a=!h.length||!e.href.match(/\/search$/)&&!o[e.href]&&e.textContent.match(r);a&&$.push(e),e.classList[a?"remove":"add"]("hidden"),o[e.href]=!0})),$.length)break}Tt(p,".for-connection",(e=>{let t=e;for(;(t=t.nextElementSibling)&&t.classList.contains("for-conversation");)if(!t.classList.contains("hidden"))return e.classList.remove("hidden")}));const t=p.querySelector(".for-search");t.classList[h?"remove":"add"]("hidden"),t.classList.contains("hidden")||$.push(t),Tt(p,"h3",(e=>{let t=e;for(;(t=t.nextElementSibling)&&!Ut(t,"h3");)if(!t.classList.contains("hidden"))return e.classList.remove("hidden");e.classList.add("hidden")}))}(),8&e.$$.dirty&&n(5,r="/settings/conversation?connection_id="+(i.activeConversation.connection_id||"")),2&e.$$.dirty&&n(6,o=h.replace(/^\//,"")),131076&e.$$.dirty&&p&&v(),98304&e.$$.dirty&&$[m]&&$[m].classList.add("has-focus")},[u,h,p,i,g,r,o,c,l,d,f,function(){n(4,g=!1),0!=h.indexOf("+")&&v()},function(){n(4,g=!0)},function(e){return(e.target.className||"").match(/(network|user)/)?setTimeout((()=>{j(an,s="settings",s)}),50):e.target.closest("a")?setTimeout((()=>{j(an,s="",s)}),50):void 0},function(e){if(13==e.keyCode)return e.preventDefault(),v(),void($[m]&&Bn.go($[m].href));const t=38==e.keyCode?-1:40==e.keyCode?1:0;t&&(e.preventDefault(),$[m]&&$[m].classList.remove("has-focus"),n(15,m+=e.ctrlKey?4*t:t)),m<0&&n(15,m=$.length-1),m>=$.length&&n(15,m=0)},m,$,a,function(){h=this.value,n(1,h)},function(e){_e[e?"unshift":"push"]((()=>{p=e,n(2,p)}))}]}class Ou extends Xe{constructor(e){super(),Qe(this,e,Eu,wu,x,{transition:0})}}function Su(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Cu=function(e){i(o,e);var t=Su(o);function o(){var e;return h(this,o),(e=t.call(this)).prop("cookie","activeTheme","convos",{key:"theme"}),e.prop("cookie","colorScheme","auto"),e.prop("cookie","compactDisplay",!1),e.prop("ro","colorSchemeOptions",["Auto","Light","Dark"].map((function(e){return[e.toLowerCase(),e]}))),e.prop("ro","themeOptions",(function(){return Array.from(e._stylesheets.entries())})),e.prop("rw","osColorScheme",""),e._stylesheets=new Map([]),e}return $(o,[{key:"hasColorScheme",value:function(e){return Tt(document,'link[id$="-'+e+'"]').length>1}},{key:"start",value:function(){var e=this;Tt(document,'link[rel="alternate stylesheet"][title]',(function(t){var n=t.title.replace(/\s\([a-z]+\)$/,"");e._stylesheets.set(t.id.replace(/^theme_alt__[a-z]+-/,""),n)}));var t=this.osColorScheme;return this._matchMedia||(this._matchMedia=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):{addListener:function(){}},this._matchMedia.addListener((function(t){return e.update({osColorScheme:t.matches?"dark":"light"})})),t=this._matchMedia.matches?"dark":"light"),this.update({compactDisplay:this.compactDisplay,osColorScheme:t})}},{key:"update",value:function(e){return(e.activeTheme||e.colorScheme||e.osColorScheme)&&this._activateTheme(e),r(n(o.prototype),"update",this).call(this,e)}},{key:"_activateTheme",value:function(e){for(var t,n=e.activeTheme||this.activeTheme,r=e.colorScheme||this.colorScheme,o=e.osColorScheme||this.osColorScheme,i=["auto"==r?o:r,"normal","light"],a=0;a<i.length&&!(t=document.getElementById("theme_alt__"+i[a]+"-"+n));a++);Tt(document,'link[rel*="style"][title]',(function(e){t||(t=e),e.disabled=!0,e.disabled=e.href!=t.href,e.setAttribute("media",e==t?"":"none"),e.setAttribute("rel",e==t?"stylesheet":"alternate stylesheet")}))}}]),o}(Wt);function Nu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}function Au(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];"object"!=a(n)||Object.isFrozen(n)||Au(n)})),e}var ju=Au,Ru=Au;ju.default=Ru;var Tu=function(){function e(t){h(this,e),void 0===t.data&&(t.data={}),this.data=t.data,this.isMatchIgnored=!1}return $(e,[{key:"ignoreMatch",value:function(){this.isMatchIgnored=!0}}]),e}();function Lu(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function Pu(e){var t=Object.create(null);for(var n in e)t[n]=e[n];for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.forEach((function(e){for(var n in e)t[n]=e[n]})),t}var Mu=function(e){return!!e.kind},Du=function(){function e(t,n){h(this,e),this.buffer="",this.classPrefix=n.classPrefix,t.walk(this)}return $(e,[{key:"addText",value:function(e){this.buffer+=Lu(e)}},{key:"openNode",value:function(e){if(Mu(e)){var t=e.kind;e.sublanguage||(t="".concat(this.classPrefix).concat(t)),this.span(t)}}},{key:"closeNode",value:function(e){Mu(e)&&(this.buffer+="</span>")}},{key:"value",value:function(){return this.buffer}},{key:"span",value:function(e){this.buffer+='<span class="'.concat(e,'">')}}]),e}(),Iu=function(e){i(n,e);var t=Nu(n);function n(e){var r;return h(this,n),(r=t.call(this)).options=e,r}return $(n,[{key:"addKeyword",value:function(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}},{key:"addText",value:function(e){""!==e&&this.add(e)}},{key:"addSublanguage",value:function(e,t){var n=e.root;n.kind=t,n.sublanguage=!0,this.add(n)}},{key:"toHTML",value:function(){return new Du(this,this.options).value()}},{key:"finalize",value:function(){return!0}}]),n}(function(){function e(){h(this,e),this.rootNode={children:[]},this.stack=[this.rootNode]}return $(e,[{key:"top",get:function(){return this.stack[this.stack.length-1]}},{key:"root",get:function(){return this.rootNode}},{key:"add",value:function(e){this.top.children.push(e)}},{key:"openNode",value:function(e){var t={kind:e,children:[]};this.add(t),this.stack.push(t)}},{key:"closeNode",value:function(){if(this.stack.length>1)return this.stack.pop()}},{key:"closeAllNodes",value:function(){for(;this.closeNode(););}},{key:"toJSON",value:function(){return JSON.stringify(this.rootNode,null,4)}},{key:"walk",value:function(e){return this.constructor._walk(e,this.rootNode)}}],[{key:"_walk",value:function(e,t){var n=this;return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((function(t){return n._walk(e,t)})),e.closeNode(t)),e}},{key:"_collapse",value:function(t){"string"!=typeof t&&t.children&&(t.children.every((function(e){return"string"==typeof e}))?t.children=[t.children.join("")]:t.children.forEach((function(t){e._collapse(t)})))}}]),e}());function Uu(e){return e?"string"==typeof e?e:e.source:null}function Bu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return Uu(e)})).join("");return r}function Hu(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="("+t.map((function(e){return Uu(e)})).join("|")+")";return r}var zu=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;var qu="[a-zA-Z]\\w*",Fu="[a-zA-Z_]\\w*",Wu="\\b\\d+(\\.\\d+)?",Ku="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",Gu="\\b(0b[01]+)",Yu={begin:"\\\\[\\s\\S]",relevance:0},Vu={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[Yu]},Ju={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[Yu]},Zu={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},Qu=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Pu({className:"comment",begin:e,end:t,contains:[]},n);return r.contains.push(Zu),r.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),r},Xu=Qu("//","$"),ed=Qu("/\\*","\\*/"),td=Qu("#","$"),nd={className:"number",begin:Wu,relevance:0},rd={className:"number",begin:Ku,relevance:0},od={className:"number",begin:Gu,relevance:0},id={className:"number",begin:Wu+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},ad={begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[Yu,{begin:/\[/,end:/\]/,relevance:0,contains:[Yu]}]}]},sd={className:"title",begin:qu,relevance:0},cd={className:"title",begin:Fu,relevance:0},ld={begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0},ud=Object.freeze({__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:qu,UNDERSCORE_IDENT_RE:Fu,NUMBER_RE:Wu,C_NUMBER_RE:Ku,BINARY_NUMBER_RE:Gu,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=/^#![ ]*\//;return e.binary&&(e.begin=Bu(t,/.*\b/,e.binary,/\b.*/)),Pu({className:"meta",begin:t,end:/$/,relevance:0,"on:begin":function(e,t){0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:Yu,APOS_STRING_MODE:Vu,QUOTE_STRING_MODE:Ju,PHRASAL_WORDS_MODE:Zu,COMMENT:Qu,C_LINE_COMMENT_MODE:Xu,C_BLOCK_COMMENT_MODE:ed,HASH_COMMENT_MODE:td,NUMBER_MODE:nd,C_NUMBER_MODE:rd,BINARY_NUMBER_MODE:od,CSS_NUMBER_MODE:id,REGEXP_MODE:ad,TITLE_MODE:sd,UNDERSCORE_TITLE_MODE:cd,METHOD_GUARD:ld,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":function(e,t){t.data._beginMatch=e[1]},"on:end":function(e,t){t.data._beginMatch!==e[1]&&t.ignoreMatch()}})}});function dd(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function fd(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=dd,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function pd(e,t){Array.isArray(e.illegal)&&(e.illegal=Hu.apply(void 0,m(e.illegal)))}function md(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function hd(e,t){void 0===e.relevance&&(e.relevance=1)}var gd=["of","and","for","in","not","or","if","then","parent","list","value"],$d="keyword";function vd(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$d,r={};return"string"==typeof e?o(n,e.split(" ")):Array.isArray(e)?o(n,e):Object.keys(e).forEach((function(n){Object.assign(r,vd(e[n],t,n))})),r;function o(e,n){t&&(n=n.map((function(e){return e.toLowerCase()}))),n.forEach((function(t){var n=t.split("|");r[n[0]]=[e,yd(n[0],n[1])]}))}}function yd(e,t){return t?Number(t):function(e){return gd.includes(e.toLowerCase())}(e)?0:1}function bd(e,t){function n(t,n){return new RegExp(Uu(t),"m"+(e.case_insensitive?"i":"")+(n?"g":""))}t.plugins;var r=function(){function e(){h(this,e),this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}return $(e,[{key:"addRule",value:function(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=function(e){return new RegExp(e.toString()+"|").exec("").length-1}(e)+1}},{key:"compile",value:function(){0===this.regexes.length&&(this.exec=function(){return null});var e=this.regexes.map((function(e){return e[1]}));this.matcherRe=n(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"|",n=0;return e.map((function(e){for(var t=n+=1,r=Uu(e),o="";r.length>0;){var i=zu.exec(r);if(!i){o+=r;break}o+=r.substring(0,i.index),r=r.substring(i.index+i[0].length),"\\"===i[0][0]&&i[1]?o+="\\"+String(Number(i[1])+t):(o+=i[0],"("===i[0]&&n++)}return o})).map((function(e){return"(".concat(e,")")})).join(t)}(e),!0),this.lastIndex=0}},{key:"exec",value:function(e){this.matcherRe.lastIndex=this.lastIndex;var t=this.matcherRe.exec(e);if(!t)return null;var n=t.findIndex((function(e,t){return t>0&&void 0!==e})),r=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,r)}}]),e}(),o=function(){function e(){h(this,e),this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}return $(e,[{key:"getMatcher",value:function(e){if(this.multiRegexes[e])return this.multiRegexes[e];var t=new r;return this.rules.slice(e).forEach((function(e){var n=st(e,2),r=n[0],o=n[1];return t.addRule(r,o)})),t.compile(),this.multiRegexes[e]=t,t}},{key:"resumingScanAtSamePosition",value:function(){return 0!==this.regexIndex}},{key:"considerAll",value:function(){this.regexIndex=0}},{key:"addRule",value:function(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}},{key:"exec",value:function(e){var t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;var n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{var r=this.getMatcher(0);r.lastIndex=this.lastIndex+1,n=r.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}]),e}();if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=Pu(e.classNameAliases||{}),function t(r,i){var s,c=r;if(r.isCompiled)return c;[md].forEach((function(e){return e(r,i)})),e.compilerExtensions.forEach((function(e){return e(r,i)})),r.__beforeBegin=null,[fd,pd,hd].forEach((function(e){return e(r,i)})),r.isCompiled=!0;var l=null;if("object"===a(r.keywords)&&(l=r.keywords.$pattern,delete r.keywords.$pattern),r.keywords&&(r.keywords=vd(r.keywords,e.case_insensitive)),r.lexemes&&l)throw new Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ");return l=l||r.lexemes||/\w+/,c.keywordPatternRe=n(l,!0),i&&(r.begin||(r.begin=/\B|\b/),c.beginRe=n(r.begin),r.endSameAsBegin&&(r.end=r.begin),r.end||r.endsWithParent||(r.end=/\B|\b/),r.end&&(c.endRe=n(r.end)),c.terminatorEnd=Uu(r.end)||"",r.endsWithParent&&i.terminatorEnd&&(c.terminatorEnd+=(r.end?"|":"")+i.terminatorEnd)),r.illegal&&(c.illegalRe=n(r.illegal)),r.contains||(r.contains=[]),r.contains=(s=[]).concat.apply(s,m(r.contains.map((function(e){return function(e){e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return Pu(e,{variants:null},t)})));if(e.cachedVariants)return e.cachedVariants;if(wd(e))return Pu(e,{starts:e.starts?Pu(e.starts):null});if(Object.isFrozen(e))return Pu(e);return e}("self"===e?r:e)})))),r.contains.forEach((function(e){t(e,c)})),r.starts&&t(r.starts,i),c.matcher=function(e){var t=new o;return e.contains.forEach((function(e){return t.addRule(e.begin,{rule:e,type:"begin"})})),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(c),c}(e)}function wd(e){return!!e&&(e.endsWithParent||wd(e.starts))}function _d(e){var t={props:["language","code","autodetect"],data:function(){return{detectedLanguage:"",unknownLanguage:!1}},computed:{className:function(){return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted:function(){if(!this.autoDetect&&!e.getLanguage(this.language))return console.warn('The language "'.concat(this.language,'" you specified could not be found.')),this.unknownLanguage=!0,Lu(this.code);var t={};return this.autoDetect?(t=e.highlightAuto(this.code),this.detectedLanguage=t.language):(t=e.highlight(this.language,this.code,this.ignoreIllegals),this.detectedLanguage=this.language),t.value},autoDetect:function(){return!this.language||(e=this.autodetect,Boolean(e||""===e));var e},ignoreIllegals:function(){return!0}},render:function(e){return e("pre",{},[e("code",{class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{Component:t,VuePlugin:{install:function(e){e.component("highlightjs",t)}}}}var kd={"after:highlightElement":function(e){var t=e.el,n=e.result,r=e.text,o=Ed(t);if(o.length){var i=document.createElement("div");i.innerHTML=n.value,n.value=function(e,t,n){var r=0,o="",i=[];function a(){return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t}function s(e){function t(e){return" "+e.nodeName+'="'+Lu(e.value)+'"'}o+="<"+xd(e)+[].map.call(e.attributes,t).join("")+">"}function c(e){o+="</"+xd(e)+">"}function l(e){("start"===e.event?s:c)(e.node)}for(;e.length||t.length;){var u=a();if(o+=Lu(n.substring(r,u[0].offset)),r=u[0].offset,u===e){i.reverse().forEach(c);do{l(u.splice(0,1)[0]),u=a()}while(u===e&&u.length&&u[0].offset===r);i.reverse().forEach(s)}else"start"===u[0].event?i.push(u[0].node):i.pop(),l(u.splice(0,1)[0])}return o+Lu(n.substr(r))}(o,Ed(i),r)}}};function xd(e){return e.nodeName.toLowerCase()}function Ed(e){var t=[];return function e(n,r){for(var o=n.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(t.push({event:"start",offset:r,node:o}),r=e(o,r),xd(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:r,node:o}));return r}(e,0),t}var Od={},Sd=function(e){console.error(e)},Cd=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).log.apply(t,["WARN: ".concat(e)].concat(r))},Nd=function(e,t){Od["".concat(e,"/").concat(t)]||(console.log("Deprecated as of ".concat(e,". ").concat(t)),Od["".concat(e,"/").concat(t)]=!0)},Ad=Lu,jd=Pu,Rd=Symbol("nomatch"),Td=function(e){var t=Object.create(null),n=Object.create(null),r=[],o=!0,i=/(^(<[^>]+>|\t|)+|\n)/gm,s="Could not find the language '{}', did you forget to load/include a language module?",c={disableAutodetect:!0,name:"Plain text",contains:[]},l={noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:null,__emitter:Iu};function u(e){return l.noHighlightRe.test(e)}function d(e,t,n,r){var o="",i="";"object"===a(t)?(o=e,n=t.ignoreIllegals,i=t.language,r=void 0):(Nd("10.7.0","highlight(lang, code, ...args) has been deprecated."),Nd("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),i=e,o=t);var s={code:o,language:i};k("before:highlight",s);var c=s.result?s.result:f(s.language,s.code,n,r);return c.code=s.code,k("after:highlight",c),c}function f(e,n,i,a){function c(e,t){var n=w.case_insensitive?t[0].toLowerCase():t[0];return Object.prototype.hasOwnProperty.call(e.keywords,n)&&e.keywords[n]}function u(){null!=x.subLanguage?function(){if(""!==S){var e=null;if("string"==typeof x.subLanguage){if(!t[x.subLanguage])return void O.addText(S);e=f(x.subLanguage,S,!0,E[x.subLanguage]),E[x.subLanguage]=e.top}else e=p(S,x.subLanguage.length?x.subLanguage:null);x.relevance>0&&(C+=e.relevance),O.addSublanguage(e.emitter,e.language)}}():function(){if(x.keywords){var e=0;x.keywordPatternRe.lastIndex=0;for(var t=x.keywordPatternRe.exec(S),n="";t;){n+=S.substring(e,t.index);var r=c(x,t);if(r){var o=st(r,2),i=o[0],a=o[1];if(O.addText(n),n="",C+=a,i.startsWith("_"))n+=t[0];else{var s=w.classNameAliases[i]||i;O.addKeyword(t[0],s)}}else n+=t[0];e=x.keywordPatternRe.lastIndex,t=x.keywordPatternRe.exec(S)}n+=S.substr(e),O.addText(n)}else O.addText(S)}(),S=""}function d(e){return e.className&&O.openNode(w.classNameAliases[e.className]||e.className),x=Object.create(e,{parent:{value:x}})}function m(e,t,n){var r=function(e,t){var n=e&&e.exec(t);return n&&0===n.index}(e.endRe,n);if(r){if(e["on:end"]){var o=new Tu(e);e["on:end"](t,o),o.isMatchIgnored&&(r=!1)}if(r){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return m(e.parent,t,n)}function h(e){return 0===x.matcher.regexIndex?(S+=e[0],1):(j=!0,0)}function g(e){for(var t=e[0],n=e.rule,r=new Tu(n),o=0,i=[n.__beforeBegin,n["on:begin"]];o<i.length;o++){var a=i[o];if(a&&(a(e,r),r.isMatchIgnored))return h(t)}return n&&n.endSameAsBegin&&(n.endRe=new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),n.skip?S+=t:(n.excludeBegin&&(S+=t),u(),n.returnBegin||n.excludeBegin||(S=t)),d(n),n.returnBegin?0:t.length}function $(e){var t=e[0],r=n.substr(e.index),o=m(x,e,r);if(!o)return Rd;var i=x;i.skip?S+=t:(i.returnEnd||i.excludeEnd||(S+=t),u(),i.excludeEnd&&(S=t));do{x.className&&O.closeNode(),x.skip||x.subLanguage||(C+=x.relevance),x=x.parent}while(x!==o.parent);return o.starts&&(o.endSameAsBegin&&(o.starts.endRe=o.endRe),d(o.starts)),i.returnEnd?0:t.length}var v={};function y(t,r){var a=r&&r[0];if(S+=t,null==a)return u(),0;if("begin"===v.type&&"end"===r.type&&v.index===r.index&&""===a){if(S+=n.slice(r.index,r.index+1),!o){var s=new Error("0 width match regex");throw s.languageName=e,s.badRule=v.rule,s}return 1}if(v=r,"begin"===r.type)return g(r);if("illegal"===r.type&&!i){var c=new Error('Illegal lexeme "'+a+'" for mode "'+(x.className||"<unnamed>")+'"');throw c.mode=x,c}if("end"===r.type){var l=$(r);if(l!==Rd)return l}if("illegal"===r.type&&""===a)return 1;if(A>1e5&&A>3*r.index)throw new Error("potential infinite loop, way more iterations than matches");return S+=a,a.length}var w=b(e);if(!w)throw Sd(s.replace("{}",e)),new Error('Unknown language: "'+e+'"');var _=bd(w,{plugins:r}),k="",x=a||_,E={},O=new l.__emitter(l);!function(){for(var e=[],t=x;t!==w;t=t.parent)t.className&&e.unshift(t.className);e.forEach((function(e){return O.openNode(e)}))}();var S="",C=0,N=0,A=0,j=!1;try{for(x.matcher.considerAll();;){A++,j?j=!1:x.matcher.considerAll(),x.matcher.lastIndex=N;var R=x.matcher.exec(n);if(!R)break;var T=y(n.substring(N,R.index),R);N=R.index+T}return y(n.substr(N)),O.closeAllNodes(),O.finalize(),k=O.toHTML(),{relevance:Math.floor(C),value:k,language:e,illegal:!1,emitter:O,top:x}}catch(t){if(t.message&&t.message.includes("Illegal"))return{illegal:!0,illegalBy:{msg:t.message,context:n.slice(N-100,N+100),mode:t.mode},sofar:k,relevance:0,value:Ad(n),emitter:O};if(o)return{illegal:!1,relevance:0,value:Ad(n),emitter:O,language:e,top:x,errorRaised:t};throw t}}function p(e,n){n=n||l.languages||Object.keys(t);var r=function(e){var t={relevance:0,emitter:new l.__emitter(l),value:Ad(e),illegal:!1,top:c};return t.emitter.addText(e),t}(e),o=n.filter(b).filter(_).map((function(t){return f(t,e,!1)}));o.unshift(r);var i=st(o.sort((function(e,t){if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(b(e.language).supersetOf===t.language)return 1;if(b(t.language).supersetOf===e.language)return-1}return 0})),2),a=i[0],s=i[1],u=a;return u.second_best=s,u}var m={"before:highlightElement":function(e){var t=e.el;l.useBR&&(t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))},"after:highlightElement":function(e){var t=e.result;l.useBR&&(t.value=t.value.replace(/\n/g,"<br>"))}},h=/^(<[^>]+>|\t)+/gm,g={"after:highlightElement":function(e){var t=e.result;l.tabReplace&&(t.value=t.value.replace(h,(function(e){return e.replace(/\t/g,l.tabReplace)})))}};function $(e){var t=function(e){var t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";var n=l.languageDetectRe.exec(t);if(n){var r=b(n[1]);return r||(Cd(s.replace("{}",n[1])),Cd("Falling back to no-highlight mode for this block.",e)),r?n[1]:"no-highlight"}return t.split(/\s+/).find((function(e){return u(e)||b(e)}))}(e);if(!u(t)){k("before:highlightElement",{el:e,language:t});var r=e.textContent,o=t?d(r,{language:t,ignoreIllegals:!0}):p(r);k("after:highlightElement",{el:e,result:o,text:r}),e.innerHTML=o.value,function(e,t,r){var o=t?n[t]:r;e.classList.add("hljs"),o&&e.classList.add(o)}(e,t,o.language),e.result={language:o.language,re:o.relevance,relavance:o.relevance},o.second_best&&(e.second_best={language:o.second_best.language,re:o.second_best.relevance,relavance:o.second_best.relevance})}}var v=!1;function y(){"loading"!==document.readyState?document.querySelectorAll("pre code").forEach($):v=!0}function b(e){return e=(e||"").toLowerCase(),t[e]||t[n[e]]}function w(e,t){var r=t.languageName;"string"==typeof e&&(e=[e]),e.forEach((function(e){n[e.toLowerCase()]=r}))}function _(e){var t=b(e);return t&&!t.disableAutodetect}function k(e,t){var n=e;r.forEach((function(e){e[n]&&e[n](t)}))}for(var x in"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){v&&y()}),!1),Object.assign(e,{highlight:d,highlightAuto:p,highlightAll:y,fixMarkup:function(e){return Nd("10.2.0","fixMarkup will be removed entirely in v11.0"),Nd("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),t=e,l.tabReplace||l.useBR?t.replace(i,(function(e){return"\n"===e?l.useBR?"<br>":e:l.tabReplace?e.replace(/\t/g,l.tabReplace):e})):t;var t},highlightElement:$,highlightBlock:function(e){return Nd("10.7.0","highlightBlock will be removed entirely in v12.0"),Nd("10.7.0","Please use highlightElement now."),$(e)},configure:function(e){e.useBR&&(Nd("10.3.0","'useBR' will be removed entirely in v11.0"),Nd("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),l=jd(l,e)},initHighlighting:function e(){e.called||(e.called=!0,Nd("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),document.querySelectorAll("pre code").forEach($))},initHighlightingOnLoad:function(){Nd("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),v=!0},registerLanguage:function(n,r){var i=null;try{i=r(e)}catch(e){if(Sd("Language definition for '{}' could not be registered.".replace("{}",n)),!o)throw e;Sd(e),i=c}i.name||(i.name=n),t[n]=i,i.rawDefinition=r.bind(null,e),i.aliases&&w(i.aliases,{languageName:n})},unregisterLanguage:function(e){delete t[e];for(var r=0,o=Object.keys(n);r<o.length;r++){var i=o[r];n[i]===e&&delete n[i]}},listLanguages:function(){return Object.keys(t)},getLanguage:b,registerAliases:w,requireLanguage:function(e){Nd("10.4.0","requireLanguage will be removed entirely in v11."),Nd("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844");var t=b(e);if(t)return t;throw new Error("The '{}' language is required, but not loaded.".replace("{}",e))},autoDetection:_,inherit:jd,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=function(t){e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=function(t){e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),r.push(e)},vuePlugin:_d(e).VuePlugin}),e.debugMode=function(){o=!1},e.safeMode=function(){o=!0},e.versionString="10.7.3",ud)"object"===a(ud[x])&&ju(ud[x]);return Object.assign(e,ud),e.addPlugin(m),e.addPlugin(kd),e.addPlugin(g),e}({});var Ld="hljs-ln",Pd="hljs-ln-line",Md="hljs-ln-code",Dd="hljs-ln-numbers",Id="hljs-ln-n",Ud="data-line-number",Bd=/\r\n|\r|\n/g;function Hd(e){var t=e.childNodes;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];Fd(r.textContent)>0&&(r.childNodes.length>0?Hd(r):zd(r.parentNode))}}function zd(e){var t=e.className;if(/hljs-/.test(t)){for(var n=qd(e.innerHTML),r=0,o="";r<n.length;r++){var i=n[r].length>0?n[r]:" ";o+='<span class="'.concat(t,'">').concat(i,"</span>\n")}e.innerHTML=o.trim()}}function qd(e){return 0===e.length?[]:e.split(Bd)}function Fd(e){return(e.trim().match(Bd)||[]).length}document.addEventListener("copy",(function(e){var t,n=window.getSelection();(function(e){for(var t=e;t;){if(t.className&&-1!==t.className.indexOf("hljs-ln-code"))return!0;t=t.parentNode}return!1})(n.anchorNode)&&(t=-1!==window.navigator.userAgent.indexOf("Edge")?function(e){for(var t=e.toString(),n=e.anchorNode;"TD"!==n.nodeName;)n=n.parentNode;for(var r=e.focusNode;"TD"!==r.nodeName;)r=r.parentNode;var o=parseInt(n.dataset.lineNumber,10),i=parseInt(r.dataset.lineNumber,10);if(o!=i){var a=n.textContent,s=r.textContent;if(o>i){var c=o;o=i,i=c,c=a,a=s,s=c}for(;0!==t.indexOf(a);)a=a.slice(1);for(;-1===t.lastIndexOf(s);)s=s.slice(0,-1);for(var l=a,u=function(e){for(var t=e;"TABLE"!==t.nodeName;)t=t.parentNode;return t}(n),d=o+1;d<i;++d){var f=".".concat(Md,"[").concat(Ud,'="').concat(d,'"]');l+="\n"+u.querySelector(f).textContent}return l+"\n"+s}return t}(n):n.toString(),e.clipboardData.setData("text/plain",t),e.preventDefault())}));var Wd=function(e){return{name:"Dockerfile",aliases:["docker"],case_insensitive:!0,keywords:"from maintainer expose env arg user onbuild stopsignal",contains:[e.HASH_COMMENT_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{beginKeywords:"run cmd entrypoint volume add copy workdir label healthcheck shell",starts:{end:/[^\\]$/,subLanguage:"bash"}}],illegal:"</"}},Kd="[A-Za-z$_][0-9A-Za-z$_]*",Gd=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],Yd=["true","false","null","undefined","NaN","Infinity"],Vd=[].concat(["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],["arguments","this","super","console","window","document","localStorage","module","global"],["Intl","DataView","Number","Math","Date","String","RegExp","Object","Function","Boolean","Error","Symbol","Set","Map","WeakSet","WeakMap","Proxy","Reflect","JSON","Promise","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Float32Array","Array","Uint8Array","Uint8ClampedArray","ArrayBuffer","BigInt64Array","BigUint64Array","BigInt"],["EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"]);function Jd(e){return e?"string"==typeof e?e:e.source:null}function Zd(e){return Qd("(?=",e,")")}function Qd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return Jd(e)})).join("");return r}var Xd=function(e){var t=Kd,n="<>",r="</>",o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:function(e,t){var n=e[0].length+e.index,r=e.input[n];"<"!==r?">"===r&&(function(e,t){var n=t.after,r="</"+e[0].slice(1);return-1!==e.input.indexOf(r,n)}(e,{after:n})||t.ignoreMatch()):t.ignoreMatch()}},i={$pattern:Kd,keyword:Gd,literal:Yd,built_in:Vd},a="[0-9](_?[0-9])*",s="\\.(".concat(a,")"),c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",l={className:"number",variants:[{begin:"(\\b(".concat(c,")((").concat(s,")|\\.)?|(").concat(s,"))")+"[eE][+-]?(".concat(a,")\\b")},{begin:"\\b(".concat(c,")\\b((").concat(s,")\\b|\\.)?|(").concat(s,")\\b")},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},u={className:"subst",begin:"\\$\\{",end:"\\}",keywords:i,contains:[]},d={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"xml"}},f={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,u],subLanguage:"css"}},p={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,u]},m={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+",contains:[{className:"type",begin:"\\{",end:"\\}",relevance:0},{className:"variable",begin:t+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},h=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,f,p,l,e.REGEXP_MODE];u.contains=h.concat({begin:/\{/,end:/\}/,keywords:i,contains:["self"].concat(h)});var g=[].concat(m,u.contains),$=g.concat([{begin:/\(/,end:/\)/,keywords:i,contains:["self"].concat(g)}]),v={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:$};return{name:"Javascript",aliases:["js","jsx","mjs","cjs"],keywords:i,exports:{PARAMS_CONTAINS:$},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,d,f,p,m,l,{begin:Qd(/[{,\n]\s*/,Zd(Qd(/(((\/\/.*$)|(\/\*(\*[^/]|[^*])*\*\/))\s*)*/,t+"\\s*:"))),relevance:0,contains:[{className:"attr",begin:t+Zd("\\s*:"),relevance:0}]},{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",contains:[m,e.REGEXP_MODE,{className:"function",begin:"(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:i,contains:$}]}]},{begin:/,/,relevance:0},{className:"",begin:/\s/,end:/\s*/,skip:!0},{variants:[{begin:n,end:r},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}],relevance:0},{className:"function",beginKeywords:"function",end:/[{;]/,excludeEnd:!0,keywords:i,contains:["self",e.inherit(e.TITLE_MODE,{begin:t}),v],illegal:/%/},{beginKeywords:"while if switch catch for"},{className:"function",begin:e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,contains:[v,e.inherit(e.TITLE_MODE,{begin:t})]},{variants:[{begin:"\\."+t},{begin:"\\$"+t}],relevance:0},{className:"class",beginKeywords:"class",end:/[{;=]/,excludeEnd:!0,illegal:/[:"[\]]/,contains:[{beginKeywords:"extends"},e.UNDERSCORE_TITLE_MODE]},{begin:/\b(?=constructor)/,end:/[{;]/,excludeEnd:!0,contains:[e.inherit(e.TITLE_MODE,{begin:t}),"self",v]},{begin:"(get|set)\\s+(?="+t+"\\()",end:/\{/,keywords:"get set",contains:[e.inherit(e.TITLE_MODE,{begin:t}),{begin:/\(\)/},v]},{begin:/\$[(.]/}]}};function ef(e){return e?"string"==typeof e?e:e.source:null}function tf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return ef(e)})).join("");return r}var nf=function(e){var t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:tf(/\[.+?\]\(/,/[A-Za-z][A-Za-z0-9+.-]*/,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.+?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},r={className:"strong",contains:[],variants:[{begin:/_{2}/,end:/_{2}/},{begin:/\*{2}/,end:/\*{2}/}]},o={className:"emphasis",contains:[],variants:[{begin:/\*(?!\*)/,end:/\*/},{begin:/_(?!_)/,end:/_/,relevance:0}]};r.contains.push(o),o.contains.push(r);var i=[t,n];return r.contains=r.contains.concat(i),o.contains=o.contains.concat(i),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:i=i.concat(r,o)},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:i}]}]},t,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},r,o,{className:"quote",begin:"^>\\s+",contains:i,end:"$"},{className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},n,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}};var rf=function(e){return{name:"Mojolicious",subLanguage:"xml",contains:[{className:"meta",begin:"^__(END|DATA)__$"},{begin:"^\\s*%{1,2}={0,2}",end:"$",subLanguage:"perl"},{begin:"<%{1,2}={0,2}",end:"={0,1}%>",subLanguage:"perl",excludeBegin:!0,excludeEnd:!0}]}};function of(e){return e?"string"==typeof e?e:e.source:null}function af(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return of(e)})).join("");return r}function sf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="("+t.map((function(e){return of(e)})).join("|")+")";return r}var cf=function(e){var t=/[dualxmsipngr]{0,12}/,n={$pattern:/[\w.]+/,keyword:["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"].join(" ")},r={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:n},o={begin:/->\{/,end:/\}/},i={variants:[{begin:/\$\d/},{begin:af(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},a=[e.BACKSLASH_ESCAPE,r,i],s=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],c=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\\1",o="\\1"===r?r:af(r,n);return af(af("(?:",e,")"),n,/(?:\\.|[^\\\/])*?/,o,/(?:\\.|[^\\\/])*?/,r,t)},l=function(e,n,r){return af(af("(?:",e,")"),n,/(?:\\.|[^\\\/])*?/,r,t)},u=[i,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),o,{className:"string",contains:a,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:c("s|tr|y",sf.apply(void 0,s))},{begin:c("s|tr|y","\\(","\\)")},{begin:c("s|tr|y","\\[","\\]")},{begin:c("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:l("(?:m|qr)?",/\//,/\//)},{begin:l("m|qr",sf.apply(void 0,s),/\1/)},{begin:l("m|qr",/\(/,/\)/)},{begin:l("m|qr",/\[/,/\]/)},{begin:l("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return r.contains=u,o.contains=u,{name:"Perl",aliases:["pl","pm"],keywords:n,contains:u}},lf=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],uf=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],df=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],ff=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],pf=["align-content","align-items","align-self","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","auto","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","clip-path","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-variant","font-variant-ligatures","font-variation-settings","font-weight","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inherit","initial","justify-content","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","mask","max-height","max-width","min-height","min-width","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","perspective","perspective-origin","pointer-events","position","quotes","resize","right","src","tab-size","table-layout","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"].reverse();var mf=function(e){var t=function(e){return{IMPORTANT:{className:"meta",begin:"!important"},HEXCOLOR:{className:"number",begin:"#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})"},ATTRIBUTE_SELECTOR_MODE:{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]}}}(e),n=ff,r=df,o="@[a-z-]+",i={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b"};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+lf.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+r.join("|")+")"},{className:"selector-pseudo",begin:"::("+n.join("|")+")"},i,{begin:/\(/,end:/\)/,contains:[e.CSS_NUMBER_MODE]},{className:"attribute",begin:"\\b("+pf.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:":",end:";",contains:[i,t.HEXCOLOR,e.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT]},{begin:"@(page|font-face)",lexemes:o,keywords:"@page @font-face"},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:uf.join(" ")},contains:[{begin:o,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},i,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,e.CSS_NUMBER_MODE]}]}};function hf(e){return e?"string"==typeof e?e:e.source:null}function gf(e){return $f("(?=",e,")")}function $f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return hf(e)})).join("");return r}function vf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r="("+t.map((function(e){return hf(e)})).join("|")+")";return r}var yf=function(e){var t=$f(/[A-Z_]/,$f("(",/[A-Z0-9_.-]*:/,")?"),/[A-Z0-9_.-]*/),n={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"meta-keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=e.inherit(r,{begin:/\(/,end:/\)/}),i=e.inherit(e.APOS_STRING_MODE,{className:"meta-string"}),a=e.inherit(e.QUOTE_STRING_MODE,{className:"meta-string"}),s={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:/[A-Za-z0-9._:-]+/,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[n]},{begin:/'/,end:/'/,contains:[n]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,a,i,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,o,a,i]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},n,{className:"meta",begin:/<\?xml/,end:/\?>/,relevance:10},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[s],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[s],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:$f(/</,gf($f(t,vf(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:t,relevance:0,starts:s}]},{className:"tag",begin:$f(/<\//,gf($f(t,/>/))),contains:[{className:"name",begin:t,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}};var bf=function(e){var t={keyword:"break default func interface select case map struct chan else goto package switch const fallthrough if range type continue for import return var go defer bool byte complex64 complex128 float32 float64 int8 int16 int32 int64 string uint8 uint16 uint32 uint64 int uint uintptr rune",literal:"true false iota nil",built_in:"append cap close complex copy imag len make new panic print println real recover delete"};return{name:"Go",aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,keywords:t,illegal:/["']/}]}]}};var wf=function(e){var t={className:"variable",variants:[{begin:/\$\d+/},{begin:/\$\{/,end:/\}/},{begin:/[$@]/+e.UNDERSCORE_IDENT_RE}]},n={endsWithParent:!0,keywords:{$pattern:"[a-z/_]+",literal:"on off yes no true false none blocked debug info notice warn error crit select break last permanent redirect kqueue rtsig epoll poll /dev/poll"},relevance:0,illegal:"=>",contains:[e.HASH_COMMENT_MODE,{className:"string",contains:[e.BACKSLASH_ESCAPE,t],variants:[{begin:/"/,end:/"/},{begin:/'/,end:/'/}]},{begin:"([a-z]+):/",end:"\\s",endsWithParent:!0,excludeEnd:!0,contains:[t]},{className:"regexp",contains:[e.BACKSLASH_ESCAPE,t],variants:[{begin:"\\s\\^",end:"\\s|\\{|;",returnEnd:!0},{begin:"~\\*?\\s+",end:"\\s|\\{|;",returnEnd:!0},{begin:"\\*(\\.[a-z\\-]+)+"},{begin:"([a-z\\-]+\\.)+\\*"}]},{className:"number",begin:"\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b"},{className:"number",begin:"\\b\\d+[kKmMgGdshdwy]*\\b",relevance:0},t]};return{name:"Nginx config",aliases:["nginxconf"],contains:[e.HASH_COMMENT_MODE,{begin:e.UNDERSCORE_IDENT_RE+"\\s+\\{",returnBegin:!0,end:/\{/,contains:[{className:"section",begin:e.UNDERSCORE_IDENT_RE}],relevance:0},{begin:e.UNDERSCORE_IDENT_RE+"\\s",end:";|\\{",returnBegin:!0,contains:[{className:"attribute",begin:e.UNDERSCORE_IDENT_RE,starts:n}],relevance:0}],illegal:"[^\\s\\}]"}};function _f(e){return e?"string"==typeof e?e:e.source:null}function kf(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return _f(e)})).join("")}("(?=",e,")")}var xf=function(e){var t={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:["and","as","assert","async","await","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},n={className:"meta",begin:/^(>>>|\.\.\.) /},r={className:"subst",begin:/\{/,end:/\}/,keywords:t,illegal:/#/},o={begin:/\{\{/,relevance:0},i={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,n],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,n],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,n,o,r]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,n,o,r]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,o,r]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,o,r]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},a="[0-9](_?[0-9])*",s="(\\b(".concat(a,"))?\\.(").concat(a,")|\\b(").concat(a,")\\."),c={className:"number",relevance:0,variants:[{begin:"(\\b(".concat(a,")|(").concat(s,"))[eE][+-]?(").concat(a,")[jJ]?\\b")},{begin:"(".concat(s,")[jJ]?")},{begin:"\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?\\b"},{begin:"\\b0[bB](_?[01])+[lL]?\\b"},{begin:"\\b0[oO](_?[0-7])+[lL]?\\b"},{begin:"\\b0[xX](_?[0-9a-fA-F])+[lL]?\\b"},{begin:"\\b(".concat(a,")[jJ]\\b")}]},l={className:"comment",begin:kf(/# type:/),end:/$/,keywords:t,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},u={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,contains:["self",n,c,i,e.HASH_COMMENT_MODE]}]};return r.contains=[i,c,n],{name:"Python",aliases:["py","gyp","ipython"],keywords:t,illegal:/(<\/|->|\?)|=>/,contains:[n,c,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},i,l,e.HASH_COMMENT_MODE,{variants:[{className:"function",beginKeywords:"def"},{className:"class",beginKeywords:"class"}],end:/:/,illegal:/[${=;\n,]/,contains:[e.UNDERSCORE_TITLE_MODE,u,{begin:/->/,endsWithParent:!0,keywords:t}]},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[c,u,i]}]}};var Ef=function(e){return{name:"Shell Session",aliases:["console"],contains:[{className:"meta",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#]/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}},Of=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],Sf=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],Cf=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],Nf=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Af=["align-content","align-items","align-self","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","auto","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","clip-path","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-variant","font-variant-ligatures","font-variation-settings","font-weight","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inherit","initial","justify-content","left","letter-spacing","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","mask","max-height","max-width","min-height","min-width","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","perspective","perspective-origin","pointer-events","position","quotes","resize","right","src","tab-size","table-layout","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-indent","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","white-space","widows","width","word-break","word-spacing","word-wrap","z-index"].reverse();function jf(e){return e?"string"==typeof e?e:e.source:null}function Rf(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return jf(e)})).join("")}("(?=",e,")")}var Tf=function(e){var t=function(e){return{IMPORTANT:{className:"meta",begin:"!important"},HEXCOLOR:{className:"number",begin:"#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})"},ATTRIBUTE_SELECTOR_MODE:{className:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]}}}(e),n=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[e.C_BLOCK_COMMENT_MODE,{begin:/-(webkit|moz|ms|o)-(?=[a-z])/},e.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\.[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+Cf.join("|")+")"},{begin:"::("+Nf.join("|")+")"}]},{className:"attribute",begin:"\\b("+Af.join("|")+")\\b"},{begin:":",end:"[;}]",contains:[t.HEXCOLOR,t.IMPORTANT,e.CSS_NUMBER_MODE].concat(n,[{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},{className:"built_in",begin:/[\w-]+(?=\()/}])},{begin:Rf(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:/@-?\w[\w]*(-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:Sf.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"}].concat(n,[e.CSS_NUMBER_MODE])}]},{className:"selector-tag",begin:"\\b("+Of.join("|")+")\\b"}]}};var Lf=function(e){return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,variants:[{begin:/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/},{begin:/^\*\*\* +\d+,\d+ +\*\*\*\*$/},{begin:/^--- +\d+,\d+ +----$/}]},{className:"comment",variants:[{begin:/Index: /,end:/$/},{begin:/^index/,end:/$/},{begin:/={3,}/,end:/$/},{begin:/^-{3}/,end:/$/},{begin:/^\*{3} /,end:/$/},{begin:/^\+{3}/,end:/$/},{begin:/^\*{15}$/},{begin:/^diff --git/,end:/$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}};function Pf(e){return e?"string"==typeof e?e:e.source:null}function Mf(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.map((function(e){return Pf(e)})).join("");return r}var Df=function(e){var t="HTTP/(2|1\\.[01])",n={className:"attribute",begin:Mf("^",/[A-Za-z][A-Za-z0-9-]*/,"(?=\\:\\s)"),starts:{contains:[{className:"punctuation",begin:/: /,relevance:0,starts:{end:"$",relevance:0}}]}},r=[n,{begin:"\\n\\n",starts:{subLanguage:[],endsWithParent:!0}}];return{name:"HTTP",aliases:["https"],illegal:/\S/,contains:[{begin:"^(?="+t+" \\d{3})",end:/$/,contains:[{className:"meta",begin:t},{className:"number",begin:"\\b\\d{3}\\b"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},{begin:"(?=^[A-Z]+ (.*?) "+t+"$)",end:/$/,contains:[{className:"string",begin:" ",end:" ",excludeBegin:!0,excludeEnd:!0},{className:"meta",begin:t},{className:"keyword",begin:"[A-Z]+"}],starts:{end:/\b\B/,illegal:/\S/,contains:r}},e.inherit(n,{relevance:0})]}};var If,Uf=function(e){var t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",r={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]}]},o=e.inherit(r,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),i={className:"number",begin:"\\b[0-9]{4}(-[0-9][0-9]){0,2}([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?(\\.[0-9]*)?([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?\\b"},a={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},s={begin:/\{/,end:/\}/,contains:[a],illegal:"\\n",relevance:0},c={begin:"\\[",end:"\\]",contains:[a],illegal:"\\n",relevance:0},l=[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},i,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},s,c,r],u=[].concat(l);return u.pop(),u.push(o),a.contains=u,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:l}};Td.registerLanguage("css",Tf),Td.registerLanguage("diff",Lf),Td.registerLanguage("dockerfile",Wd),Td.registerLanguage("go",bf),Td.registerLanguage("http",Df),Td.registerLanguage("javascript",Xd),Td.registerLanguage("markdown",nf),Td.registerLanguage("mojolicious",rf),Td.registerLanguage("nginx",wf),Td.registerLanguage("perl",cf),Td.registerLanguage("python",xf),Td.registerLanguage("scss",mf),Td.registerLanguage("shell",Ef),Td.registerLanguage("xml",yf),Td.registerLanguage("yaml",Uf),(If=Td).lineNumbersBlock=function(e,t){If.highlightBlock(e,t),e.innerHTML=function(e,t){var n=(t=t||{singleLine:!1}).singleLine?0:1;return Hd(e),function(e,t){var n=qd(e);if(""===n[n.length-1].trim()&&n.pop(),n.length>t){for(var r="",o=0,i=n.length;o<i;o++){var a=o+1;r+="<tr>"+'<td class="'.concat(Pd," ").concat(Dd,'" ').concat(Ud,'="').concat(a,'">')+'<div class="'.concat(Id,'" ').concat(Ud,'="').concat(a,'"></div>')+"</td>"+'<td class="'.concat(Pd," ").concat(Md,'" ').concat(Ud,'="').concat(a,'">')+(n[o].length>0?n[o]:" ")+"</td></tr>"}return'<table class="'.concat(Ld,'">').concat(r,"</table>")}return e}(e.innerHTML,n)}(e,t)};var Bf={exports:{}};function Hf(e){for(var t=document.createElement("div"),n=[[e,t]],r=[];n.length;){var o=st(n.shift(),2),i=o[0],s=o[1],c=void 0,l=void 0,u=a(i);if(null===i||"undefined"==u?u="null":Array.isArray(i)&&(u="array"),"array"==u?((l=function(e){return e}).len=i.length,(c=document.createElement("div")).className="json-array "+(l.len?"has-items":"is-empty")):"object"==u?function(){var e=Object.keys(i).sort();(l=function(t){return e[t]}).len=e.length,(c=document.createElement("div")).className="json-object "+(l.len?"has-items":"is-empty")}():((c=document.createElement("span")).className="json-"+u,c.textContent="null"==u?"null":"boolean"!=u?i:i?"true":"false"),l){var d=document.createElement("span");if(d.className="json-type",d.textContent=l.len?u+"["+l.len+"]":"{}",s.appendChild(d),-1!=r.indexOf(i))t.classList.add("has-recursive-items"),c.classList.add("is-seen");else{for(var f=0;f<l.len;f++){var p=l(f),m=document.createElement("div"),h=document.createElement("span");h.className="json-key",h.textContent=p,m.appendChild(h),c.appendChild(m),n.push([i[p],m])}r.push(i)}}s.className="json-item "+c.className.replace(/^json-/,"contains-"),s.appendChild(c)}return t}try{Bf.exports={jsonhtmlify:Hf}}catch(e){window.jsonhtmlify=Hf}function zf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zf(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ff(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Wf={},Kf=0,Gf=function(e){i(a,e);var t,o=Ff(a);function a(){var e;return h(this,a),(e=o.call(this)).prop("ro","length",(function(){return e.messages.length})),e.prop("ro","messages",[]),e.prop("rw","expandUrlToMedia",!0),e.prop("rw","raw",!1),e.embedCache=Wf,e}return $(a,[{key:"clear",value:function(){return this.messages.length=0,this.update({messages:!0})}},{key:"get",value:function(e){return e<0?this.messages.slice(e)[0]:this.messages[e]}},{key:"push",value:function(e){return[].push.apply(this.messages,this._fill(e)),this.update({messages:!0})}},{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(-1!=t){var n=this.get(t);return n&&!n.rendered&&(n.embeds=this._embeds(n),n.rendered=!0,this.update({messages:!0})),this.messages}var r={},o=this.raw?"lmdRaw":"lmd";return this.messages.map((function(t,n){return t.index=n,t.className||(t.dayChanged=e._dayChanged(t,r),t.className=e._className(t,r),t.embeds=[],t.markdown=Vn[o].apply(Vn,[t.message].concat(m(t.vars||[])))),r=t}))}},{key:"toArray",value:function(){return this.messages}},{key:"update",value:function(e){return e.hasOwnProperty("expandUrlToMedia")&&e.expandUrlToMedia!=this.expandUrlToMedia&&this.messages.forEach((function(e){return delete e.rendered})),e.hasOwnProperty("raw")&&e.raw!=this.raw&&this.messages.forEach((function(e){return delete e.className})),r(n(a.prototype),"update",this).call(this,e)}},{key:"unshift",value:function(e){return[].unshift.apply(this.messages,this._fill(e)),this.update({messages:!0})}},{key:"_className",value:function(e,t){var n=["message"];return e.type&&n.push("is-type-"+e.type),e.highlight&&n.push("is-highlighted"),n.push(e.dayChanged||e.from!=t.from?"has-not-same-from":"has-same-from"),n.join(" ")}},{key:"_dayChanged",value:function(e,t){return!(!t.ts||e.ts.getDate()==t.ts.getDate())}},{key:"_embeds",value:function(e){var t=this,n=[];return this._msgDetails(e)&&n.push(Promise.resolve({className:"le-details",details:!0,nodes:[Bf.exports.jsonhtmlify(e.details).lastChild]})),this.expandUrlToMedia&&"notice"!=e.type?((e.message.match(/https?:\/\/(\S+)/g)||[]).forEach((function(r){r=r.replace(/(\W)?$/,""),t.embedCache[r]||(t.embedCache[r]=t._loadEmbed(e,r)),n.push(t.embedCache[r])})),n.map((function(t){return t.catch((function(t){return console.error("[Messages:embed]",e,t)}))}))):n}},{key:"_fill",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(!n.from){var r=[!0,"Convos"];n.internal=r[0],n.from=r[1]}n.type||(n.type="notice"),n.color="Convos"==n.from?"inherit":It(n.from.toLowerCase()),n.ts=new Zt(n.ts),n.id=++Kf}return e}},{key:"_loadEmbed",value:(t=gn(vn.mark((function e(t,n){var r,o,i;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Wn("/api","embed",{url:n}).perform();case 2:if(r=e.sent,(o=r.res.body).nodes=[],o.provider=(o.provider_name||"").toLowerCase(),o.html){e.next=8;break}return e.abrupt("return",o);case 8:if(i=document.createRange().createContextualFragment(o.html).firstChild){e.next=11;break}return e.abrupt("return",o);case 11:return Tt(i=this._renderVideoChat(t,o,i)||this._renderPaste(t,o,i)||i,"img",["error",function(e){return e.target.style.display="none"}]),Tt(i,".le-goto-link",(function(e){return 1==e.parentNode.children.length&&e.parentNode.remove()})),delete o.html,o.className=i.className,o.nodes="iframe"==i.tagName.toLowerCase()?[i]:[].slice.call(i.childNodes,0),e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})},{key:"_msgDetails",value:function(e){if(e.hasOwnProperty("details"))return e.details;if("error"!=e.type&&"notice"!=e.type)return e.details=null;var t=qf({},e.sent||e);return["bubbles","className","command","connection_id","dispatchTo","color","dayChanged","embeds","event","fresh","highlight","id","index","internal","markdown","method","rendered","silent","stopPropagation","ts"].forEach((function(e){return delete t[e]})),"from:message:type"==Object.keys(t).sort().join(":")?e.details=null:e.details=t}},{key:"_renderPaste",value:function(e,t,n){var r=n.querySelector("pre");return r&&[n,Td.lineNumbersBlock(r)][0]}},{key:"_renderVideoChat",value:function(e,t,n){var r=new URL(t.url).pathname.replace(/\/+$/,"").split("/");if(r.length&&(n.classList.contains("le-video-chat")||r.includes("video"))){var o=decodeURIComponent(r.slice(-1)[0]).replace(/\s-\s[\w-]+$/,"").replace(/[_.-]+/g," ").replace(/([a-z ])([A-Z])/g,(function(e,t,n){return t+" "+n.toUpperCase()})).replace(/((?:^|[ ])\w)/g,(function(e){return e.toUpperCase()})),i=Vn.l('Do you want to join the %1 video chat with "%2"?',t.provider_name,o);return(n=document.createElement("div")).className="le-card le-rich le-join-request le-provider-"+t.provider,n.innerHTML='<a class="le-thumbnail" href="'+t.url+'" target="convos_video"><i class="fas fa-video"></i></a><h3>'+i+'</h3><p class="le-description"><a href="'+t.url+'" target="convos_video">'+Vn.l("Yes, I want to join.")+"</a></p>",e.fresh&&this.emit("notify",qf(qf({},e),{},{message:i})),n}}}]),a}(Wt);function Yf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Vf=function(e,t){return e.name.localeCompare(t.name)},Jf=function(e){i(o,e);var t=Yf(o);function o(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return h(this,o),(e=t.call(this,n)).sorter=r.sorter||Vf,e._sort(),e}return $(o,[{key:"filter",value:function(e){return Array.from(this.values()).filter(e)}},{key:"set",value:function(e,t){r(n(o.prototype),"set",this).call(this,e,t),this._sort()}},{key:"toArray",value:function(){return Array.from(this.values())}},{key:"_sort",value:function(){var e=this,t=Array.from(this.entries()),i=this.sorter;return this.clear(),t.sort((function(e,t){return i(e[1],t[1])})).forEach((function(t){var i=st(t,2),a=i[0],s=i[1];return r(n(o.prototype),"set",e).call(e,a,s)})),t}}]),o}(d(Map));function Zf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Qf=function(e){i(n,e);var t=Zf(n);function n(){var e;return h(this,n),(e=t.call(this)).prop("ro","length",(function(){return e._map.size})),e.prop("ro","_map",new Jf([],{sorter:function(e,t){return t.modes.operator||!1-e.modes.operator||t.modes.voice||!1-e.modes.voice||e.nick.localeCompare(t.nick)}})),e}return $(n,[{key:"clear",value:function(){var e=this.me();return this._map.clear(),this.add(e),this}},{key:"delete",value:function(e){return this._map.delete(this._id(e)),this.update({})}},{key:"get",value:function(e){return this._map.get(this._id(e))}},{key:"has",value:function(e){return this._map.has(this._id(e))}},{key:"me",value:function(){return Array.from(this._map.values()).filter((function(e){return e.me}))[0]||this._defaultParticipant()}},{key:"nicks",value:function(){return Array.from(this._map.values()).map((function(e){return e.nick}))}},{key:"rename",value:function(e,t){var n=this.get(e)||{};return delete n.id,n.nick=t,this.delete(e),this.add(n)}},{key:"add",value:function(e){var t=this;if(Array.isArray(e))return e.forEach((function(e){return t.add(e)})),this;e.id=this._id(e.nick),e.color=It(e.id),At.string(e.mode)&&(e.modes=xt(oi,e.mode));var n=this._map.get(e.id);return n&&Object.keys(n).forEach((function(t){return e[t]||(e[t]=n[t])})),e.modes||(e.modes={}),e.nick||(e.nick=e.name),this._map.set(e.id,e),this.update({length:!0})}},{key:"toArray",value:function(){return this._map.toArray()}},{key:"_defaultParticipant",value:function(){return{color:"#000000",id:"",modes:{},nick:""}}},{key:"_id",value:function(e){return e.toLowerCase()}}]),n}(Wt);function Xf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ep(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ep(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function np(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tp(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var op=gt("socket"),ip=function e(t){return e.singletons[t]||(e.singletons[t]=new sp)};ip.singletons={};var ap=[];ap[WebSocket.CONNECTING]="connecting",ap[WebSocket.OPEN]="open",ap[WebSocket.CLOSING]="closing",ap[WebSocket.CLOSED]="closed";var sp=function(e){i(n,e);var t=rp(n);function n(){var e;return h(this,n),(e=t.call(this)).prop("ro","readyState",(function(){return e.ws.readyState})),e.prop("ro","readyStateHuman",(function(){return ap[e.ws.readyState]})),e.prop("ro","waiting",new Map),e.prop("rw","closed",0),e.prop("rw","error",""),e.prop("rw","keepaliveInterval",1e4),e.prop("rw","url",""),e.id=0,e.queue=[],e.keepClosed=!0,e._resetWebSocket(),e}return $(n,[{key:"close",value:function(e,t){if("number"!=typeof e){var n=[1e3,e];e=n[0],t=n[1]}return this.ws.close&&this.ws.close(e,t),this.keepClosed=!0,this._keepAliveStop(),this._reconnectStop(),this._resetWebSocket(),this}},{key:"deflateMessage",value:function(e){return JSON.stringify(e)}},{key:"deleteWaitingMessage",value:function(e){this.waiting.delete(e),this.update({waiting:!0})}},{key:"getWaitingMessages",value:function(e){var t=this;return 0==arguments.length?Array.from(this.waiting.values()):e.map((function(e){return t.waiting.get(e)}))}},{key:"inflateMessage",value:function(e){return JSON.parse(e)}},{key:"is",value:function(e){return this.ws.readyState==WebSocket[e.toUpperCase()]}},{key:"open",value:function(){var e=this;if(this.ws.close)return this;try{if(!this.url)throw"Can't open WebSocket connection without URL.";this.ws=new WebSocket(this.url),this.ws.onclose=function(t){return e._onClose(t)},this.ws.onerror=function(t){return e._onError(t)},this.ws.onmessage=function(t){return e._onMessage(t)},this.ws.onopen=function(t){return e._onOpen(t)},this.keepClosed=!1,this._keepAliveStart(),this._reconnectStop(),this.update({error:"",readyState:!0})}catch(e){this._onError(e.message?e:{message:String(e)})}return this}},{key:"reconnectIn",value:function(e){return 1008!==e.code&&1011!==e.code&&(this.closed<=1?1e3:this.closed>5?1e4:2*this.closed*1e3)}},{key:"send",value:function(e,t){var n=e.id||String(++this.id);return this.queue.push(np(np({},e),{},{id:n})),this.open(),this._dequeue(),t&&this.on("message_"+n,t),this}},{key:"_dequeue",value:function(){var e=this.queue;for(e.length&&this.update({waiting:!0});e.length;){if(this.ws.readyState!=WebSocket.OPEN)return;var t=e.shift();this.ws.send(this.deflateMessage(t)),t.waitingForResponse=!0,t.ts||(t.ts=new Zt),this.waiting.set(t.id,t)}}},{key:"_keepAliveStart",value:function(){var e=this;this._keepAliveStop(),this.keepaliveTid=setInterval((function(){return e.ws.readyState==WebSocket.OPEN&&e.ws.send("{}")}),this.keepaliveInterval)}},{key:"_keepAliveStop",value:function(){this.keepaliveTid&&clearTimeout(this.keepaliveTid),delete this.keepaliveTid}},{key:"_onClose",value:function(e){op.debug("close",e);var t,n=Xf(this.waiting);try{for(n.s();!(t=n.n()).done;){var r=st(t.value,2),o=r[0],i=r[1];Object.keys(i).length<=1&&this.waiting.delete(o),i.waitingForResponse=!1}}catch(e){n.e(e)}finally{n.f()}this._keepAliveStop(),this._resetWebSocket(),this.update({closed:this.closed+1,readyState:!0,waiting:!0}),this._reconnectStart(this.reconnectIn(e))}},{key:"_onError",value:function(e){var t=String(e.message||e);t&&0!=t.indexOf("[")||(t="Could not connect."),op.error("error",t,e),this.update({error:t})}},{key:"_onMessage",value:function(e){var t=this.inflateMessage(e.data);if(t.bubbles=!0,t.stopPropagation=function(){t.bubbles=!1},t.id&&(this.emit("message_"+t.id,t),this.waiting.delete(t.id)),t.bubbles&&this.emit("message",t),this.update({waiting:!0}),t.errors&&!t.id){var n,r=Xf(this.waiting.keys());try{for(r.s();!(n=r.n()).done;){var o=n.value;this.emit("message_"+o,t)}}catch(e){r.e(e)}finally{r.f()}this.waiting.clear()}}},{key:"_onOpen",value:function(e){op.info("open",e),this.update({closed:0,error:"",readyState:!0}),this._dequeue()}},{key:"_reconnectStart",value:function(e){var t=this;return this._reconnectStop(),op.info("reconnect in",e),!0===e?this.open():"number"!=typeof e?this.keepClosed=!0:void(this.reconnectTid=setTimeout((function(){return t.open()}),e))}},{key:"_reconnectStop",value:function(){this.reconnectTid&&clearTimeout(this.reconnectTid),delete this.reconnectTid}},{key:"_resetWebSocket",value:function(){this.ws={readyState:WebSocket.CLOSED}}}]),n}(Wt);function cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cp(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function up(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var dp=new RegExp("^[#&]"),fp=function(e){i(s,e);var t,o,a=up(s);function s(e){var t;h(this,s),t=a.call(this);var n=[e.connection_id,e.conversation_id,""].filter(At.defined).join(":");return t.prop("persist","userInput","",{key:n+"userInput"}),t.prop("ro","color",It(e.conversation_id||e.connection_id||"")),t.prop("ro","connection_id",e.connection_id||""),t.prop("ro","messages",new Gf({})),t.prop("ro","participants",new Qf),t.prop("ro","path",Bn.conversationPath(e)),t.prop("rw","historyStartAt",null),t.prop("rw","historyStopAt",null),t.prop("rw","modes",{}),t.prop("rw","name",e.name||e.conversation_id||e.connection_id||"ERR"),t.prop("rw","notifications",e.notifications||0),t.prop("rw","status","pending"),t.prop("rw","topic",e.topic||""),t.prop("rw","unread",e.unread||0),e.hasOwnProperty("conversation_id")?(t.prop("ro","conversation_id",e.conversation_id),t.prop("ro","title",(function(){return[t.name,t.connection_id.replace(/^\w+-/,"")].join(" - ")})),t.prop("rw","frozen",e.frozen||"")):(t.prop("ro","frozen",(function(){return t._calculateFrozen()})),t.prop("ro","title",(function(){return t.name}))),e.conversation_id&&t.prop("persist","wantNotifications",t.is("private"),{key:e.conversation_id+":wantNotifications"}),t.socket=e.socket||ip("/events"),t.messages.on("notify",(function(e){return t.notify(e)})),t._addOperations(),t}return $(s,[{key:"addMessages",value:function(e,t){if(!Array.isArray(e)){if(this._maybeIncreaseUnread(e),this._maybeNotify(e),!this.historyStopAt&&-1!=["action","private"].indexOf(e.type))return;e.fresh=!0,e=[e]}return this.messages[t||"push"](e),this}},{key:"is",value:function(e){return"connection"==e?!this.conversation_id:"conversation"==e?this.conversation_id&&!this.is("notifications"):"frozen"==e?this.frozen&&!0:"locked"==e?"Invalid password."==this.frozen:"not_found"==e?"Not found."==this.frozen:"notifications"!=e&&("pending"==e?this.frozen.match(/pending invitation/i):"private"==e?this.conversation_id&&!dp.test(this.conversation_id)||!1:"search"!=e&&("unread"==e?this.unread&&!0:this.status==e))}},{key:"load",value:(o=gn(vn.mark((function e(){var t,n,r,o,i=arguments;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},!this._skipLoad(t)){e.next=3;break}return e.abrupt("return",this);case 3:return this.update({status:"loading"}),t.limit||(t.limit=40),n=lp(lp({},t),{},{connection_id:this.connection_id,conversation_id:this.conversation_id}),e.next=8,this.messagesOp.perform(n);case 8:return this.update({status:this.messagesOp.status}),(r=this.messagesOp.res.body).messages||(r.messages=[]),o=[],(t.around||!t.after&&!t.before)&&(o.push.apply(o,this.messages.toArray().filter((function(e){return e.internal}))),this.messages.clear()),this.addMessages(r.messages,t.before?"unshift":"push"),this.addMessages(o,"push"),this._setEndOfStream(t,r),e.abrupt("return",this);case 17:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)})},{key:"notify",value:function(e){if(!Ui.appHasFocus){var t=e.from==this.name?e.from:Vn.l("%1 in %2",e.from,this.name);this.lastNotification=Ui.show(e.message,{path:this.path,title:t})}}},{key:"send",value:function(e,t){return At.string(e)&&(e={message:e}),this.socket.send(lp({method:"send",connection_id:this.connection_id,conversation_id:this.conversation_id||""},e),t)}},{key:"markAsRead",value:(t=gn(vn.mark((function e(){return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.markAsReadOp){e.next=2;break}return e.abrupt("return");case 2:return this.update({unread:0}),e.next=5,this.markAsReadOp.perform({connection_id:this.connection_id,conversation_id:this.conversation_id});case 5:return e.abrupt("return",this);case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"update",value:function(e){return this._loadParticipants(),r(n(s.prototype),"update",this).call(this,e)}},{key:"wsEventMode",value:function(e){var t=["banlist","exceptlist","invitelist","quietlist"].filter((function(t){return e[t]}))[0];if(t){var n=e[t].length,r=1==n?"entry":"entries";this.addMessages(lp(lp({},e),{},{message:"%1 has %2 "+r+" in %3.",vars:[this.name,n,Vn.l(t)]}))}else e.nick?(this.participants.add({nick:e.nick,mode:e.mode}),this.addMessages(lp(lp({},e),{},{message:"%1 got mode %2 from %3.",vars:[e.nick,e.mode,e.from]}))):e.mode_changed?(this.addMessages(lp(lp({},e),{},{message:"%1 received mode %2.",vars:[this.name,e.mode]})),this.update({modes:Object.assign({},this.modes,xt(ti,e.mode))})):(this.addMessages(lp(lp({},e),{},{message:"%1 got mode %2.",vars:[this.name,e.mode]})),this.update({modes:Object.assign({},this.modes,xt(ti,e.mode))}))}},{key:"wsEventNickChange",value:function(e){if(this.participants.has(e.old_nick)&&e.old_nick!=e.new_nick){this.participants.rename(e.old_nick,e.new_nick);var t="me"==e.type?"You (%1) changed nick to %2.":"%1 changed nick to %2.";this.addMessages({message:t,vars:[e.old_nick,e.new_nick]})}}},{key:"wsEventPart",value:function(e){var t=this.participants.get(e.nick);t&&!t.me&&(this.participants.delete(e.nick),this.update({participants:!0}),e.silent||this.addMessages(this._partMessage(e)))}},{key:"wsEventSentClear",value:function(e){e.errors||(this.messages.clear(),this.addMessages({message:"History was cleared for %1.",vars:[this.name]}))}},{key:"wsEventSentNames",value:function(e){this.participants.add(e.participants);var t=lp(lp({},e),{},{message:"Participants (%1): %2",vars:[]}),n=this.participants.nicks();n.length>1&&(t.message+=" and %3.",t.vars[2]=n.pop()),t.vars[0]=n.length,t.vars[1]=n.join(", "),this.addMessages(t)}},{key:"wsEventSentTopic",value:function(e){var t=e.topic?"Topic for %1 is: %2":"No topic is set for %1.";this.addMessages({message:t,vars:[this.name,e.topic]}),this.update({topic:e.topic})}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Wn("/api","conversationMessages")),this.prop("ro","markAsReadOp",Wn("/api","markConversationAsRead"))}},{key:"_calculateFrozen",value:function(){return""}},{key:"_loadParticipants",value:function(){var e=this;!this.participantsLoaded&&this.conversation_id&&this.messagesOp&&!this.is("frozen")&&this.messagesOp.is("success")&&(this.participantsLoaded=!0,this.is("private")?this.send("/whois "+this.conversation_id,(function(t){t.stopPropagation(),e.update({frozen:t.errors&&t.errors.length?t.errors[0].message:""})})):this.send("/names "+this.conversation_id,(function(t){t.stopPropagation(),e.participants.clear(),t.participants&&e.participants.add(t.participants)})))}},{key:"_maybeIncreaseUnread",value:function(e){return!e.from||e.yourself||-1==["action","error","private"].indexOf(e.type)?this:void this.update({unread:this.unread+1})}},{key:"_maybeNotify",value:function(e){e.from&&!e.yourself&&-1!=["action","error","private"].indexOf(e.type)&&(e.highlight||this.wantNotifications)&&this.notify(e)}},{key:"_noop",value:function(){}},{key:"_partMessage",value:function(e){var t={message:"%1 parted.",vars:[e.nick]};return e.kicker?(t.message="%1 was kicked by %2"+(e.message?": %3":""),t.vars.push(e.kicker),t.vars.push(e.message)):e.message&&(t.message+=" Reason: %2",t.vars.push(e.message)),t}},{key:"_setEndOfStream",value:function(e,t){if(!e.before&&!t.after){var n=t.messages.slice(-1)[0];this.update({historyStopAt:new Zt(n&&n.ts)})}if(!e.after&&!t.before){var r=t.messages[0];this.update({historyStartAt:new Zt(r&&r.ts)})}t.after&&this.update({historyStopAt:null}),t.before&&this.update({historyStartAt:null}),t.messages&&t.messages.length<=1&&this.update({historyStartAt:new Zt,historyStopAt:new Zt})}},{key:"_skipLoad",value:function(e){return!(this.messagesOp&&!this.is("loading"))||(this.messages.length?e.around?!!this.messages.toArray().find((function(t){return t.ts.toISOString()==e.around})):!(!e.before||!this.historyStartAt)||!(!e.after||!this.historyStopAt):this.is("success"))}}]),s}(Wt);function pp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pp(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var gp=function(e,t){return e.is("private")-t.is("private")||e.name.localeCompare(t.name)},$p=function(e){i(o,e);var t=hp(o);function o(e){var n;h(this,o),(n=t.call(this,e)).prop("ro","conversations",new Jf([],{sorter:gp})),n.prop("rw","on_connect_commands",e.on_connect_commands||[]),n.prop("rw","state",e.state||"queued"),n.prop("rw","wanted_state",e.wanted_state||"connected"),n.prop("rw","url",At.string(e.url)?new Pr(e.url):e.url||new Pr("irc://localhost"));var r=n.url.searchParams.get("nick")||"guest";return n.prop("rw","nick",r),n.prop("rw","real_host",n.url.hostname),n.prop("rw","server_op",!1),n.participants.add((e.service_accounts||[]).map((function(e){return{nick:e}})).concat({nick:r})),e.me&&n.wsEventMe(e.me),n}return $(o,[{key:"ensureConversation",value:function(e){var t=this,n=this.conversations.get(e.conversation_id);return n?n.update(e):((n=new fp(mp(mp({},e),{},{connection_id:this.connection_id}))).on("message",(function(e){return t.emit("message",e)})),n.on("update",(function(){return t.update({conversations:!0})})),this._addDefaultParticipants(n),this.conversations.set(n.conversation_id,n),this.update({conversations:!0}),this.emit("conversationadd",n),n)}},{key:"findConversation",value:function(e){return this.conversations.get(e.conversation_id)||null}},{key:"is",value:function(e){return this.state==e||r(n(o.prototype),"is",this).call(this,e)}},{key:"removeConversation",value:function(e){var t=this.findConversation(e)||e;return this.conversations.delete(t.conversation_id),this.emit("conversationremove",t),this.update({conversations:!0})}},{key:"send",value:function(e){At.string(e)&&(e={message:e});var t=new RegExp("^"+this.participants.toArray().map((function(e){return Lt(e.id)})).join("|")+":","i");return 0==e.message.indexOf("/")||e.message.match(t)||(e.message="/quote "+e.message),r(n(o.prototype),"send",this).call(this,e)}},{key:"update",value:function(e){return e.url&&At.string(e.url)&&(e.url=new Pr(e.url)),r(n(o.prototype),"update",this).call(this,e)}},{key:"wsEventConnection",value:function(e){this.update({state:e.state}),this.addMessages(e.message?{message:"Connection state changed to %1: %2",vars:[e.state,e.message]}:{message:"Connection state changed to %1.",vars:[e.state]})}},{key:"wsEventFrozen",value:function(e){var t=this.findConversation(e),n=t&&t.frozen,r=this.ensureConversation(e);r.participants.add({nick:this.nick,me:!0}),n&&!e.frozen&&t.addMessages({message:"Connected.",vars:[]}),e.frozen&&r.is("pending")&&Ui.show(e.frozen,{title:e.name})}},{key:"wsEventMe",value:function(e){e.nick&&this.wsEventNickChange(e),e.server_op&&this.addMessages({message:"You are an IRC operator.",vars:[],highlight:!0}),e.real_host&&this.participants.add({nick:e.real_host}),this.update(e)}},{key:"wsEventMessage",value:function(e){return e.yourself=e.from==this.nick,e.conversation_id?this.ensureConversation(e).addMessages(e):this.addMessages(e)}},{key:"wsEventNickChange",value:function(e){var t={old_nick:e.old_nick||this.nick,new_nick:e.new_nick||e.nick,type:e.type};e.old_nick==this.nick&&(t.me=!0),r(n(o.prototype),"wsEventNickChange",this).call(this,t),this.conversations.forEach((function(e){return e.wsEventNickChange(t)}))}},{key:"wsEventError",value:function(e){var t={message:St(e)||e.frozen||"Unknown error from %1.",sent:e,type:"error",vars:e.command||[e.message]},n=(e.message||"").match(/^\/j(oin)? (\S+)/);if(n)return this.ensureConversation(mp(mp({},e),{},{conversation_id:n[2]}));var r=e.conversation_id&&e.frozen?this.ensureConversation(e):this.findConversation(e)||this;console.error(r.conversation_id,t),r.addMessages(t)}},{key:"wsEventJoin",value:function(e){var t=this.ensureConversation({connection_id:e.connection_id,conversation_id:e.conversation_id}),n=e.nick||this.nick;n==this.nick||e.silent||t.addMessages({message:"%1 joined.",vars:[n]}),t.participants.add({nick:n})}},{key:"wsEventPart",value:function(e){if(e.nick==this.nick)return this.removeConversation(e);e.conversation_id||this.conversations.forEach((function(t){return t.wsEventPart(e)}))}},{key:"wsEventQuit",value:function(e){this.wsEventPart(e)}},{key:"wsEventSentJoin",value:function(e){this.wsEventJoin(e)}},{key:"wsEventSentList",value:function(e){var t=e.args||"/*/";this.addMessages(e.done?{message:"Found %1 of %2 conversations from %3.",vars:[e.conversations.length,e.n_conversations,t]}:{message:"Found %1 of %2 conversations from %3, but conversations are still loading.",vars:[e.conversations.length,e.n_conversations,t]})}},{key:"wsEventSentMode",value:function(e){var t=this.findConversation(e);return t?t.wsEventMode(e):this.addMessages({message:"%1 received mode %2.",vars:[e.target,e.mode]})}},{key:"wsEventSentQuery",value:function(e){this.ensureConversation(e)}},{key:"wsEventSentWhois",value:function(e){var t="%1 (%2@%3, %4)",n=[e.nick,e.user,e.host,e.name],r=Object.keys(e.channels).sort().map((function(t){return(ri[e.channels[t].mode]||"")+t}));e.channels=r,e.idle_for&&r.length?(t+=" has been idle for %5s in %6.",n.push(e.idle_for),n.push(r.join(", "))):e.idle_for&&!r.length?(t+="has been idle for %5s, and is not in any channels.",n.push(e.idle_for)):r.length?(t+=" is active in %5.",n.push(r.join(", "))):t+=" is not in any channels.",(this.findConversation(e)||this).addMessages({message:t,vars:n,sent:e})}},{key:"wsEventSentNames",value:function(){}},{key:"_addDefaultParticipants",value:function(e){var t=[{nick:this.nick,me:!0}];e.is("private")&&t.push({nick:e.name}),e.participants.add(t)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Wn("/api","markConnectionAsRead")),this.prop("ro","messagesOp",Wn("/api","connectionMessages"))}},{key:"_calculateFrozen",value:function(){switch(this.state){case"connected":return"";case"disconnected":return"Disconnected.";case"unreachable":return"Unreachable.";default:return"Connecting..."}}}]),o}(fp);function vp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var yp=function(e){i(r,e);var t,n=vp(r);function r(e){var t;return h(this,r),(t=n.call(this,e)).prop("ro","op",Wn("/api","listConnectionProfiles")),t.prop("rw","profiles",[]),t.prop("rw","status","pending"),t}return $(r,[{key:"find",value:function(e){return this.search((function(t){return t.id==e}))[0]}},{key:"defaultProfile",value:function(){return{max_bulk_message_size:3,max_message_length:512,url:new Pr("irc://0.0.0.0")}}},{key:"is",value:function(e){return this.status==e}},{key:"load",value:(t=gn(vn.mark((function e(){var t,n=this,r=arguments;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:{},!this.is("loading")){e.next=3;break}return e.abrupt("return",this);case 3:if(t.force||!this.profiles.length){e.next=5;break}return e.abrupt("return",this);case 5:return this.update({status:"loading"}),e.next=8,this.op.perform();case 8:return this.update({status:this.op.status}),this.is("success")&&this.update({profiles:this.op.res.body.profiles.map((function(e){return n._expand(e)}))}),e.abrupt("return",this);case 11:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"search",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return this.profiles.filter(e)}},{key:"_expand",value:function(e){e.url=new Pr(e.url),e.service_accounts=e.service_accounts.join(", "),e.url.toFields(e);var t=this.defaultProfile();return Object.keys(t).forEach((function(n){return e.hasOwnProperty(n)||(e[n]=t[n])})),e}}]),r}(Wt);function bp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bp(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var kp=function(e){i(o,e);var t=_p(o);function o(e){return h(this,o),t.call(this,wp(wp({},e),{},{connection_id:"",conversation_id:"notifications",name:"Notifications",unread:0}))}return $(o,[{key:"addMessages",value:function(e,t){return Array.isArray(e)||(e=[e]),this.messages.push(e),this}},{key:"is",value:function(e){return"notifications"==e||r(n(o.prototype),"is",this).call(this,e)}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.resolve(e)}},{key:"_addOperations",value:function(){this.prop("ro","markAsReadOp",Wn("/api","markNotificationsAsRead")),this.prop("ro","messagesOp",Wn("/api","notificationMessages"))}},{key:"_skipLoad",value:function(){return!1}}]),o}(fp);function xp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ep(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xp(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Op(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var Sp=function(e){i(a,e);var t,o=Op(a);function a(e){var t;return h(this,a),(t=o.call(this,Ep(Ep({},e),{},{connection_id:"",conversation_id:"search",name:"Search"}))).prop("rw","query",""),t.update({status:"success"}),t}return $(a,[{key:"is",value:function(e){return"conversation"!=e&&("search"==e||r(n(a.prototype),"is",this).call(this,e))}},{key:"load",value:(t=gn(vn.mark((function e(){var t,n,r,o=arguments;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:{},!this.is("loading")){e.next=3;break}return e.abrupt("return",this);case 3:if((n=Ep({},t)).match=t.match||t.message,(n.match||"").match(/\S/)){e.next=7;break}return e.abrupt("return",this.messages.clear().push([{message:'Search query "%1" does not contain anything to search for.',vars:[t.message]}]));case 7:return this.update({query:n.match,status:"loading"}),this.messages.clear(),e.next=11,this.messagesOp.perform(n);case 11:return r=this.messagesOp.res.body,this.messages[n.before?"unshift":"push"](r.messages||[]),e.abrupt("return",this.update({status:this.messagesOp.status}));case 14:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"send",value:function(e){return At.string(e)&&(e={message:e}),this.emit("send",e),Promise.resolve(e)}},{key:"_addOperations",value:function(){this.prop("ro","messagesOp",Wn("/api","searchMessages")),this.prop("ro","markAsReadOp",null)}},{key:"_loadParticipants",value:function(){}}]),a}(fp);function Cp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Np(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cp(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ap(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var jp=function(e){i(a,e);var t,o=Ap(a);function a(e){var t;return h(this,a),(t=o.call(this)).prop("ro","connections",new Jf),t.prop("ro","connectionProfiles",new yp),t.prop("ro","notifications",new kp({})),t.prop("ro","search",new Sp({})),t.prop("ro","roles",new Set),t.prop("ro","unread",(function(){return t._calculateUnread()})),t.prop("persist","expandUrlToMedia",!0),t.prop("persist","ignoreStatuses",!1),t.prop("persist","lastUrl",""),t.prop("rw","activeConversation",t.notifications),t.prop("rw","email",""),t.prop("rw","forced_connection",!1),t.prop("rw","default_connection","irc://irc.libera.chat:6697/%23convos"),t.prop("rw","highlightKeywords",[]),t.prop("rw","status","pending"),t.prop("rw","videoService",e.videoService||""),t.socket=e.socket||ip("/events"),t.socket.on("message",(function(e){return t._dispatchMessage(e)})),t.socket.on("update",(function(e){return t._onConnectionChange(e)})),t}return $(a,[{key:"conversations",value:function(e){var t=[];return this.connections.toArray().forEach((function(n){n.conversations.toArray().forEach((function(n){e&&!e(n)||t.push(n)}))})),t}},{key:"ensureConversation",value:function(e,t){var n=this;if((e=Np(Np({},e),{},{videoService:this.videoService})).conversation_id){var r=this.ensureConversation({connection_id:e.connection_id},!0);return this._maybeUpgradeActiveConversation(r.ensureConversation(e))}var o=this.findConversation(e);return o?o.update(e):((o=new $p(Np({},e))).on("conversationadd",(function(e){return n._maybeUpgradeActiveConversation(e)})),o.on("conversationremove",(function(e){return e==n.activeConversation&&n.setActiveConversation(e)})),o.on("update",(function(e){return n.update({connections:!0})})),this.connections.set(o.connection_id,o),this.update({connections:!0}),t?o:this._maybeUpgradeActiveConversation(o))}},{key:"findConversation",value:function(e){var t=this.connections.get(e.connection_id);return e.conversation_id?t&&t.findConversation(e)||null:t}},{key:"is",value:function(e){var t=this;return Array.isArray(e)?!!e.filter((function(e){return t.is(e)})).length:!!this.roles.has(e)||this.status==e}},{key:"load",value:(t=gn(vn.mark((function e(){var t,n,r,o=this;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.is("loading")){e.next=2;break}return e.abrupt("return",this);case 2:return this.roles.clear(),this.update({status:"loading"}),t=new Promise((function(e){return o.socket.send({method:"load",object:"user",params:{connections:!0,conversations:!0}},e)})),e.next=7,t;case 7:if(!(n=e.sent).errors){e.next=10;break}return e.abrupt("return",this.update({email:"",roles:!0,status:n.errors?"error":"success"}));case 10:return r=n.user||{},this.connections.clear(),(r.connections||[]).forEach((function(e){return o.ensureConversation(Np(Np({},e),{},{status:"pending"}))})),(r.conversations||[]).forEach((function(e){return o.ensureConversation(Np(Np({},e),{},{status:"pending"}))})),this.updateNotificationCount(),(r.roles||[]).forEach((function(e){return o.roles.add(e)})),e.abrupt("return",this.update({email:r.email||"",default_connection:r.default_connection||"",forced_connection:r.forced_connection||!1,highlightKeywords:r.highlight_keywords||[],roles:!0,status:n.errors?"error":"success",videoService:r.video_service||""}));case 17:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"markNotificationsRead",value:function(){this.conversations().forEach((function(e){return e.update({notifications:0})})),this.activeConversation.markAsRead()}},{key:"removeConversation",value:function(e){var t=this.findConversation({connection_id:e.connection_id});if(e.conversation_id)return t&&t.removeConversation(e);this.connections.delete(e.connection_id),t==this.activeConversation&&this.setActiveConversation(t),this.update({connections:!0})}},{key:"setActiveConversation",value:function(e){var t=!e.connection_id&&!e.conversation_id&&this.notifications;if(t)return this.update({activeConversation:t});if(t=this.findConversation(e))return this.update({activeConversation:t});var n=Np(Np({},e),{},{connection_id:e.connection_id||"",frozen:"Not found."});return["conversation_id","name"].forEach((function(t){return e.hasOwnProperty(t)&&(n[t]=e[t])})),this.update({activeConversation:n.conversation_id?new fp(n):new $p(n)})}},{key:"update",value:function(e){return e.videoService&&this.connections.forEach((function(t){return t.update({videoService:e.videoService})})),r(n(a.prototype),"update",this).call(this,e)}},{key:"updateNotificationCount",value:function(e){e&&e.forEach((function(e){return e.update({notifications:0})})),this.notifications.update({unread:this._calculateNotifications()})}},{key:"_calculateNotifications",value:function(){return this.connections.toArray().reduce((function(e,t){return e+t.conversations.toArray().reduce((function(e,t){return e+t.notifications}),0)}),0)}},{key:"_calculateUnread",value:function(){var e=this.activeConversation;return this.notifications.unread+this.conversations((function(e){return e.is("private")})).reduce((function(t,n){return t+(n==e?0:n.unread)}),0)}},{key:"_dispatchMessage",value:function(e){e.dispatchTo=("wsEvent_"+this._getEventNameFromMessage(e)).replace(/_(\w)/g,(function(e,t){return t.toUpperCase()})),e.silent=this.ignoreStatuses,this.emit(e.dispatchTo,e);var t=this.findConversation({connection_id:e.connection_id});if(t&&(t[e.dispatchTo]&&t[e.dispatchTo](e),e.bubbles)){var n=t.findConversation(e);n&&n[e.dispatchTo]&&n[e.dispatchTo](e),e.highlight&&(this.notifications.addMessages(e),n.update({notifications:n.notifications+1}),this.updateNotificationCount())}}},{key:"_getEventNameFromMessage",value:function(e){return e.errors?"error":"state"==e.event?e.type:"sent"==e.event&&e.message.match(/\/\S+/)?(e.command=e.message.split(/\s+/).filter((function(e){return e.length})),e.command[0]=e.command[0].substring(1),"sent_"+e.command[0].toLowerCase()):e.event}},{key:"_maybeUpgradeActiveConversation",value:function(e){var t=this.activeConversation;return e.conversation_id?(e.connection_id&&e.connection_id!=t.connection_id||e.conversation_id&&e.conversation_id!=t.conversation_id||this.update({activeConversation:e}),e):e}},{key:"_onConnectionChange",value:function(e){if(e.is("open")&&this.is("pending"))return this.load();e.is("closed")&&(this.connections.forEach((function(e){return e.update({state:"unreachable"})})),this.is(["error","loading"])||this.update({status:"pending"}))}}]),a}(Wt);const{window:Rp}=Ke;function Tp(e){let t,n,r;function o(t){e[26](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Ac({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Lp(e){let t,n,r,o,i,a,s,c,l,u,d=("nav"==e[4]||e[5].nColumns>1)&&Mp(e);const f=[Vp,Yp,Gp,Kp,Wp,Fp,qp,zp,Hp,Bp,Up,Ip,Dp],p=[];function m(e,t){return 4&t[0]&&(n=!!e[2].path.match(/\/chat\/./)),n?0:(4&t[0]&&(r=!(0!=e[2].path.indexOf("/chat"))),r?1:"/help"==e[2].path?2:"/search"==e[2].path?3:"/settings"==e[2].path?4:"/settings/account"==e[2].path?5:"/settings/connections"==e[2].path?6:(4&t[0]&&(o=!(0!=e[2].path.indexOf("/settings/connection/"))),o?7:(4&t[0]&&(i=!(0!=e[2].path.indexOf("/settings/connection-profile/"))),i?8:"/settings/conversation"==e[2].path?9:"/settings/users"==e[2].path?10:"/login"==e[2].path||"/register"==e[2].path?11:12)))}a=m(e,[-1,-1]),s=p[a]=f[a](e);let h=e[4]&&1==e[5].nColumns&&Jp(e);return{c(){d&&d.c(),t=V(),s.c(),c=V(),h&&h.c(),l=J()},m(e,n){d&&d.m(e,n),F(e,t,n),p[a].m(e,n),F(e,c,n),h&&h.m(e,n),F(e,l,n),u=!0},p(e,n){"nav"==e[4]||e[5].nColumns>1?d?(d.p(e,n),48&n[0]&&He(d,1)):(d=Mp(e),d.c(),He(d,1),d.m(t.parentNode,t)):d&&(Ue(),ze(d,1,1,(()=>{d=null})),Be());let r=a;a=m(e,n),a===r?p[a].p(e,n):(Ue(),ze(p[r],1,1,(()=>{p[r]=null})),Be(),s=p[a],s?s.p(e,n):(s=p[a]=f[a](e),s.c()),He(s,1),s.m(c.parentNode,c)),e[4]&&1==e[5].nColumns?h?(h.p(e,n),48&n[0]&&He(h,1)):(h=Jp(e),h.c(),He(h,1),h.m(l.parentNode,l)):h&&(Ue(),ze(h,1,1,(()=>{h=null})),Be())},i(e){u||(He(d),He(s),He(h),u=!0)},o(e){ze(d),ze(s),ze(h),u=!1},d(e){d&&d.d(e),e&&W(t),p[a].d(e),e&&W(c),h&&h.d(e),e&&W(l)}}}function Pp(e){let t,n;return t=new Js({}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p:v,i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function Mp(e){let t,n;return t=new Ou({props:{transition:{duration:e[5].nColumns>1?0:250,x:e[0]}}}),{c(){Ye(t.$$.fragment)},m(e,r){Ve(t,e,r),n=!0},p(e,n){const r={};33&n[0]&&(r.transition={duration:e[5].nColumns>1?0:250,x:e[0]}),t.$set(r)},i(e){n||(He(t.$$.fragment,e),n=!0)},o(e){ze(t.$$.fragment,e),n=!1},d(e){Je(t,e)}}}function Dp(e){let t,n,r;function o(t){e[24](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Js({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Ip(e){let t,n,r;function o(t){e[23](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Ac({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Up(e){let t,n,r;function o(t){e[22](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Xl({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Bp(e){let t,n,r;function o(t){e[21](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new zs({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Hp(e){let t,n,r;function o(t){e[20](t)}let i={profile_id:e[2].pathParts[2]};return void 0!==e[1]&&(i.title=e[1]),t=new ks({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};4&r[0]&&(o.profile_id=e[2].pathParts[2]),!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function zp(e){let t,n,r;function o(t){e[19](t)}let i={connection_id:e[2].pathParts[2]};return void 0!==e[1]&&(i.title=e[1]),t=new Cs({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};4&r[0]&&(o.connection_id=e[2].pathParts[2]),!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function qp(e){let t,n,r;function o(t){e[18](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Ya({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Fp(e){let t,n,r;function o(t){e[17](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new yl({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Wp(e){let t,n,r;function o(t){e[16](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new Ll({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Kp(e){let t,n,r;function o(t){e[15](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new tl({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Gp(e){let t,n,r;function o(t){e[14](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new ic({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Yp(e){let t,n,r;function o(t){e[13](t)}let i={};return void 0!==e[1]&&(i.title=e[1]),t=new zc({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Vp(e){let t,n,r;function o(t){e[12](t)}let i={connection_id:e[2].pathParts[1],conversation_id:e[2].pathParts[2]};return void 0!==e[1]&&(i.title=e[1]),t=new Na({props:i}),_e.push((()=>Ge(t,"title",o))),{c(){Ye(t.$$.fragment)},m(e,n){Ve(t,e,n),r=!0},p(e,r){const o={};4&r[0]&&(o.connection_id=e[2].pathParts[1]),4&r[0]&&(o.conversation_id=e[2].pathParts[2]),!n&&2&r[0]&&(n=!0,o.title=e[1],Ae((()=>n=!1))),t.$set(o)},i(e){r||(He(t.$$.fragment,e),r=!0)},o(e){ze(t.$$.fragment,e),r=!1},d(e){Je(t,e)}}}function Jp(e){let t,n,r,o,i;return{c(){t=G("div"),t.textContent="",X(t,"class","overlay")},m(n,a){F(n,t,a),r=!0,o||(i=Z(t,"click",e[25]),o=!0)},p:v,i(e){r||(Ne((()=>{n||(n=Fe(t,$r,{duration:200},!0)),n.run(1)})),r=!0)},o(e){n||(n=Fe(t,$r,{duration:200},!1)),n.run(0),r=!1},d(e){e&&W(t),e&&n&&n.end(),o=!1,i()}}}function Zp(e){let t,n,r,o,i,a,s;Ne(e[11]);const c=[Pp,Lp,Tp],l=[];function u(e,n){return 8&n[0]&&(t=!!e[3].is(["loading","pending"])),t?0:e[3].email?1:2}return n=u(e,[-1,-1]),r=l[n]=c[n](e),{c(){r.c(),o=J()},m(t,r){l[n].m(t,r),F(t,o,r),i=!0,a||(s=[Z(Rp,"focus",e[10]),Z(Rp,"resize",e[11])],a=!0)},p(e,t){let i=n;n=u(e,t),n===i?l[n].p(e,t):(Ue(),ze(l[i],1,1,(()=>{l[i]=null})),Be(),r=l[n],r?r.p(e,t):(r=l[n]=c[n](e),r.c()),He(r,1),r.m(o.parentNode,o))},i(e){i||(He(r),i=!0)},o(e){ze(r),i=!1},d(e){l[n].d(e),e&&W(o),a=!1,_(s)}}}function Qp(t,n,r){let o,i,a,s,c;S(t,Bn,(e=>r(2,i=e))),S(t,an,(e=>r(4,s=e))),S(t,sn,(e=>r(5,c=e)));const l=ip("/events"),u=(new Cu).start();S(t,u,(e=>r(9,o=e)));const d=new jp({});S(t,d,(e=>r(3,a=e)));let f=0,p={closed:!0},m=Vn.l("Chat");l.update({debug:"WebSocket"}),window.convosWebSockeet=l,Bn.update({baseUrl:Pt("base_url"),enabled:!0}),l.update({url:Bn.wsUrlFor("/events")}),d.on("wsEventSentJoin",(e=>Bn.go(Bn.conversationPath(e)))),async function(){if(!navigator.serviceWorker)return{};const e=await navigator.serviceWorker.register(Bn.urlFor("/sw.js")),t=await fetch(Bn.urlFor("/sw/info")),n=200==t.status&&await t.json()||{mode:"",version:"0.00"};if(n.version==Pt("version"))return{};console.info("[serviceWorker.update]",Pt("version"),n),e.update()}().catch((e=>console.error("[serviceWorker]",e))),ve("api",Wn("/api").update({url:Bn.urlFor("/api")}).toFunction()),ve("socket",l),ve("themeManager",u),ve("user",d),Ui.on("click",(e=>e.path&&Bn.go(e.path))),l.on("update",(function(e){if(e.is("open"))return p.close&&p.close();const t=!1===navigator.onLine?Vn.l("You seem to be offline."):e.error?Vn.l(e.error):e.is("connecting")?Vn.l("Connecting to Convos..."):Vn.l("Connection to Convos is %1.",Vn.l(e.readyStateHuman));if(p.body==t)return;p.close&&p.close();p=Ui.showInApp(t,{closeAfter:-1,title:Vn.l("Status")})})),Vn.load().then((()=>d.load()));return t.$$.update=()=>{512&t.$$.dirty[0]&&e[o.compactDisplay?"add":"remove"]("compact-display"),12&t.$$.dirty[0]&&async function(t,n){n.email&&Vn.emojis.load(),e[n.email?"add":"remove"]("notify"),await Ce();const r=n.is(["loading","pending"])||document.querySelector(".cms-main")?"cms":"app";if(document.body.className=document.body.className.replace(/for-\w+/,"for-"+r),0==t.pathParts.length){const e=n.email?n.lastUrl||"/chat":"/login";t.go(e,{replace:!0})}else n.email&&n.update({lastUrl:location.href})}(i,a),10&t.$$.dirty[0]&&function(e,t){if(!document)return;const n=Pt("organization_name");e=t.unread?"("+t.unread+") "+Vn.l(e):Vn.l(e),document.title="Convos"==n?Vn.l("%1 - Convos",e):Vn.l("%1 - Convos for %2",e,n)}(m,a),1&t.$$.dirty[0]&&sn.set({width:f,nColumns:f>1200?3:f>800?2:1})},[f,m,i,a,s,c,l,u,d,o,()=>d.email&&l.open(),function(){r(0,f=Rp.innerWidth)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},function(e){m=e,r(1,m)},()=>{j(an,s="",s)},function(e){m=e,r(1,m)}]}class Xp extends Xe{constructor(e){super(),Qe(this,e,Qp,Zp,x,{},[-1,-1])}}function em(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=n(e);if(t){var i=n(this).constructor;r=Reflect.construct(o,arguments,i)}else r=o.apply(this,arguments);return c(this,r)}}var tm=function(e){i(o,e);var t,n,r=em(o);function o(e){var t;return h(this,o),(t=r.call(this)).prop("ro","domain",e.domain||"meet.jit.si"),t.prop("ro","email",e.email||""),t.prop("rw","nick",e.nick||""),t.prop("rw","roomName",e.roomName||"convos-default"),t.prop("persist","disableAudioLevels",!0,{key:"video:disableAudioLevels"}),t.prop("persist","disableH264",!0,{key:"video:disableH264"}),t.prop("persist","resolution",720,{key:"video:resolution"}),t}return $(o,[{key:"render",value:(n=gn(vn.mark((function e(t){var n,r,o=this;return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=[].slice.call(t.children,0),this.targetEl=t,e.next=5,this._load();case 5:this.jitsi=e.sent,n.forEach((function(e){return e.remove()})),t.className=t.className.replace(/cms-main/,"video-chat--wrapper"),document.querySelector(".cms-navbar").classList.add("is-full-width"),e.next=18;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("[Jitsi]",{err:e.t0}),(r=document.querySelector(".video-error")).querySelector("span").textContent=String(e.t0).substring(0,350),r.classList.remove("hidden"),Tt(document,".cms-main .fa-spin",(function(e){return e.parentNode.classList.add("hidden")}));case 18:if(this.jitsi){e.next=20;break}return e.abrupt("return",this);case 20:return document.addEventListener("keydown",(function(e){"KeyC"==e.code&&o.jitsi.executeCommand("toggleChat"),"KeyD"==e.code&&o.jitsi.executeCommand("toggleShareScreen"),"KeyF"==e.code&&o.jitsi.executeCommand("toggleFilmStrip"),"KeyM"==e.code&&o.jitsi.executeCommand("toggleAudio"),"KeyR"==e.code&&o.jitsi.executeCommand("toggleRaiseHand"),"KeyV"==e.code&&o.jitsi.executeCommand("toggleVideo"),"KeyW"==e.code&&o.jitsi.executeCommand("toggleTileView"),"Space"==e.code&&o.jitsi.isAudioMuted().then((function(e){return e&&o.jitsi.executeCommand("toggleAudio")}))})),document.addEventListener("keyup",(function(e){"Space"==e.code&&o.jitsi.isAudioMuted().then((function(e){return e||o.jitsi.executeCommand("toggleAudio")}))})),e.abrupt("return",this);case 23:case"end":return e.stop()}}),e,this,[[0,11]])}))),function(e){return n.apply(this,arguments)})},{key:"_configOverwrite",value:function(){return{disableAudioLevels:this.disableAudioLevels,disableH264:this.disableH264,enableWelcomePage:!this.nick,prejoinPageEnabled:!this.nick,minParticipants:1,resolution:this.resolution,analytics:{googleAnalyticsTrackingId:"",scriptURLs:[]},e2eping:{analyticsInterval:-1,pingInterval:-1}}}},{key:"_interfaceConfigOverwrite",value:function(){return{DEFAULT_BACKGROUND:window.getComputedStyle(document.querySelector(".cms-navbar--wrapper")).backgroundColor||"#222222",DISABLE_FOCUS_INDICATOR:!0,DISABLE_DOMINANT_SPEAKER_INDICATOR:!0,DISABLE_VIDEO_BACKGROUND:!0,INITIAL_TOOLBAR_TIMEOUT:1e3,SHOW_CHROME_EXTENSION_BANNER:!0,TOOLBAR_ALWAYS_VISIBLE:!1,TOOLBAR_BUTTONS:["camera","chat","closedcaptions","desktop","etherpad","fodeviceselection","fullscreen","hangup","help","microphone","mute-everyone","profile","raisehand","security","settings","sharedvideo","shortcuts","stats","tileview"],TOOLBAR_TIMEOUT:2e3,VERTICAL_FILMSTRIP:!1,VIDEO_QUALITY_LABEL_DISABLED:!0}}},{key:"_load",value:(t=gn(vn.mark((function e(){return vn.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt("https://"+this.domain+"/external_api.js");case 2:return e.abrupt("return",new JitsiMeetExternalAPI(this.domain,this._options()));case 3:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"_options",value:function(){var e={};return this.email&&(e.email=this.email),this.nick&&(e.displayName=this.nick),{configOverwrite:this._configOverwrite(),interfaceConfigOverwrite:this._interfaceConfigOverwrite(),parentNode:this.targetEl,roomName:this.roomName,userInfo:e,height:"100%",width:"100%"}}}]),o}(Wt);if(Tt(document,"#hamburger_checkbox_toggle",(function(e){e.checked=!1})),Tt(document,".js-close-window",(function(e){e.addEventListener("click",(function(e){window.opener&&(e.preventDefault(),setTimeout((function(){return window.close()}),1),window.opener.focus())}))})),document.querySelector('meta[name="convos:start_app"][content="chat"]'))document.querySelector(".footer--wrapper").remove(),document.querySelector(".cms-main").remove(),new Xp({target:document.body});else if(document.querySelector('meta[name="convos:start_app"][content="jitsi"]')){document.querySelector(".footer--wrapper").remove();var nm=document.querySelector(".cms-main");new tm(nm.dataset).render(nm)}else document.addEventListener("DOMContentLoaded",(function(e){Tt(document,"pre",(function(e){return Td.lineNumbersBlock(e)}))}));function rm(e){if(!("ontouchstart"in window)){var t=function(e){for(var t=0;t<e.length;t++){var n=document.querySelector(e[t]);if(n&&-1!=n.tabIndex)return n}return null},n=e&&t(["input.is-primary-menu-item","a.is-primary-menu-item"]),r=document.activeElement;if(Ut(r,["a","input","textarea"])&&n&&r!=n)return n.focus();var o=t([".is-primary-input",'main input[type="text"], article input[type="text"]',"main a, article a"]);return o?o.focus():n?n.focus():void 0}}document.addEventListener("keydown",(function(e){27==e.keyCode&&(Tt(document,".fullscreen",(function(e){return e.click()})),rm()),13==e.keyCode&&e.shiftKey&&(e.preventDefault(),rm("toggle"))}))}();
//# sourceMappingURL=convos.612a4dae.js.map
